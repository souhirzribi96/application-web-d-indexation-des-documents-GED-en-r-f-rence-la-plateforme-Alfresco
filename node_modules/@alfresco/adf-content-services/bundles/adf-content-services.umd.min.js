/**
 * @license
 * Copyright 2018 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/material"),require("@alfresco/adf-core"),require("alfresco-js-api"),require("rxjs/Observable"),require("rxjs/add/observable/throw"),require("moment-es6"),require("@angular/forms"),require("rxjs/Subject"),require("rxjs/operator/switchMap"),require("@angular/common"),require("@ngx-translate/core"),require("rxjs/BehaviorSubject"),require("rxjs/add/observable/merge"),require("@angular/flex-layout"),require("@angular/animations"),require("rxjs/operators"),require("@angular/cdk/keycodes"),require("@angular/platform-browser"),require("rxjs/observable/fromEvent"),require("rxjs/observable/merge"),require("@mat-datetimepicker/core"),require("@mat-datetimepicker/moment"),require("rxjs/observable/forkJoin"),require("rxjs/observable/defer"),require("rxjs/add/operator/switchMap")):"function"==typeof define&&define.amd?define("@alfresco/adf-content-services",["exports","@angular/core","@angular/material","@alfresco/adf-core","alfresco-js-api","rxjs/Observable","rxjs/add/observable/throw","moment-es6","@angular/forms","rxjs/Subject","rxjs/operator/switchMap","@angular/common","@ngx-translate/core","rxjs/BehaviorSubject","rxjs/add/observable/merge","@angular/flex-layout","@angular/animations","rxjs/operators","@angular/cdk/keycodes","@angular/platform-browser","rxjs/observable/fromEvent","rxjs/observable/merge","@mat-datetimepicker/core","@mat-datetimepicker/moment","rxjs/observable/forkJoin","rxjs/observable/defer","rxjs/add/operator/switchMap"],t):t((e.alfresco=e.alfresco||{},e.alfresco["adf-content-services"]={}),e.ng.core,e["@angular/material"],e["@alfresco/adf-core"],e["alfresco-js-api"],e.Rx,e.Rx.Observable,e["moment-es6"],e.ng.forms,e.Rx,e.Rx.Observable.prototype,e.ng.common,e["@ngx-translate/core"],e.Rx,e.Rx.Observable,e["@angular/flex-layout"],e["@angular/animations"],e.Rx.Observable.prototype,e.ng.cdk.keycodes,e.ng.platformBrowser,e.Rx.Observable,e.Rx.Observable,e["@mat-datetimepicker/core"],e["@mat-datetimepicker/moment"],e.Rx.Observable,e.Rx.Observable)}(this,function(e,l,t,c,n,a,i,o,r,d,s,p,u,h,f,m,g,y,v,b,S,E,I,C,A,O){"use strict";o=o&&o.hasOwnProperty("default")?o["default"]:o;var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function D(e,t){function n(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function T(n,i){var o,r,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(a=r[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(r,e[1])).done)return a;switch(r=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,r=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],r=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function F(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a}function L(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F(arguments[t]));return e}var N=function(){function e(e,t,n,i){this.apiService=e,this.dialogRef=t,this.data=n,this.logService=i,this.cancelled=!1}return e.prototype.ngOnInit=function(){this.data&&this.data.nodeIds&&0<this.data.nodeIds.length&&(this.cancelled?this.logService.log("Cancelled"):this.downloadZip(this.data.nodeIds))},e.prototype.cancelDownload=function(){this.cancelled=!0,this.dialogRef.close(!1)},e.prototype.downloadZip=function(e){var o=this;if(e&&0<e.length){var t=this.apiService.getInstance().core.downloadsApi.createDownload({nodeIds:e});t.on("progress",function(e){return o.logService.log("Progress",e)}),t.on("error",function(e){return o.logService.error("Error",e)}),t.on("abort",function(e){return o.logService.log("Abort",e)}),t.on("success",function(n){if(n&&n.entry&&n.entry.id){var i=o.apiService.getInstance().content.getContentUrl(n.entry.id,!0);o.apiService.getInstance().core.nodesApi.getNode(n.entry.id).then(function(e){o.logService.log(e);var t=e.entry.name;o.waitAndDownload(n.entry.id,i,t)})}})}},e.prototype.waitAndDownload=function(t,n,i){var o=this;this.cancelled||this.apiService.getInstance().core.downloadsApi.getDownload(t).then(function(e){e.entry&&("DONE"===e.entry.status?o.download(n,i):setTimeout(function(){o.waitAndDownload(t,n,i)},1e3))})},e.prototype.download=function(e,t){if(e&&t){var n=document.createElement("a");n.style.display="none",n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}this.dialogRef.close(!0)},e}();N.decorators=[{type:l.Component,args:[{selector:"adf-download-zip-dialog",template:'<h1 matDialogTitle>{{ \'CORE.DIALOG.DOWNLOAD_ZIP.TITLE\' | translate }}</h1>\n<div mat-dialog-content>\n    <mat-progress-bar color="primary" mode="indeterminate"></mat-progress-bar>\n</div>\n<div mat-dialog-actions>\n    <span class="spacer"></span>\n    <button mat-button color="primary" (click)="cancelDownload()">\n        {{ \'CORE.DIALOG.DOWNLOAD_ZIP.ACTIONS.CANCEL\' | translate }}\n    </button>\n</div>\n',styles:[".spacer{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.adf-download-zip-dialog .mat-dialog-actions .mat-button-wrapper{text-transform:uppercase}"],host:{"class":"adf-download-zip-dialog"},encapsulation:l.ViewEncapsulation.None}]}],N.ctorParameters=function(){return[{type:c.AlfrescoApiService},{type:t.MatDialogRef},{type:undefined,decorators:[{type:l.Inject,args:[t.MAT_DIALOG_DATA]}]},{type:c.LogService}]};var x=function(){function e(e,t){this.apiService=e,this.dialog=t}return e.prototype.onClick=function(){this.downloadNodes(this.nodes)},e.prototype.downloadNodes=function(e){e&&0!==e.length&&(1===e.length?this.downloadNode(e[0]):this.downloadZip(e))},e.prototype.downloadNode=function(e){if(e&&e.entry){var t=e.entry;t.isFile&&this.downloadFile(e),t.isFolder&&this.downloadZip([e]),t.isFile||t.isFolder||!t.nodeId||this.downloadFile(e)}},e.prototype.downloadFile=function(e){if(e&&e.entry){var t=this.apiService.getInstance().content.getContentUrl(e.entry.id,!0),n=e.entry.name;this.download(t,n)}},e.prototype.downloadZip=function(e){if(e&&0<e.length){var t=e.map(function(e){return e.entry.nodeId||e.entry.id});this.dialog.open(N,{width:"600px",disableClose:!0,data:{nodeIds:t}})}},e.prototype.download=function(e,t){if(e&&t){var n=document.createElement("a");n.style.display="none",n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},e}();x.decorators=[{type:l.Directive,args:[{selector:"[adfNodeDownload]"}]}],x.ctorParameters=function(){return[{type:c.AlfrescoApiService},{type:t.MatDialog}]},x.propDecorators={nodes:[{type:l.Input,args:["adfNodeDownload"]}],onClick:[{type:l.HostListener,args:["click"]}]};var M=function(){function e(e,t,n){this.sharedLinksApiService=e,this.dialogRef=t,this.data=n,this.isFileShared=!1,this.isDisabled=!1}return e.prototype.ngOnInit=function(){this.data.node&&this.data.node.entry&&(this.fileName=this.data.node.entry.name,this.baseShareUrl=this.data.baseShareUrl,this.data.node.entry.properties&&this.data.node.entry.properties["qshare:sharedId"]?(this.sharedId=this.data.node.entry.properties["qshare:sharedId"],this.isFileShared=!0):this.createSharedLinks(this.data.node.entry.id))},e.prototype.cancelShare=function(){this.dialogRef.close(!1)},e.prototype.onSlideShareChange=function(e){this.isDisabled=!0,e.checked?this.createSharedLinks(this.data.node.entry.id):this.deleteSharedLink(this.sharedId)},e.prototype.createSharedLinks=function(e){var t=this;this.sharedLinksApiService.createSharedLinks(e).subscribe(function(e){e.entry&&(t.sharedId=e.entry.id,t.isFileShared=!0,t.isDisabled=!1)},function(){t.isFileShared=!1,t.isDisabled=!1})},e.prototype.deleteSharedLink=function(e){var t=this;this.sharedLinksApiService.deleteSharedLink(e).subscribe(function(){t.isFileShared=!1,t.isDisabled=!1},function(){t.isFileShared=!0,t.isDisabled=!1})},e}();M.decorators=[{type:l.Component,args:[{selector:"adf-share-dialog",template:'<h1 mat-dialog-title id="adf-share-title" >{{ \'SHARE.TITLE\' | translate }} {{fileName}}</h1>\n\n<mat-dialog-content>\n    <span class="spacer"></span>\n\n    <mat-slide-toggle [checked]="isFileShared" [disabled]="isDisabled" (change)="onSlideShareChange($event)">\n        {{ \'SHARE.ACTIONS.SHARE\' | translate }}\n    </mat-slide-toggle>\n\n    <span class="spacer"></span>\n\n    .\n\n    <h2 *ngIf="isFileShared">{{ \'SHARE.DESCRIPTION\' | translate }}</h2>\n    <div *ngIf="isFileShared">{{ \'SHARE.ALERT\' | translate }}</div>\n\n    <form *ngIf="isFileShared">\n        <mat-form-field class="full-width">\n            <input class="adf-share-link" matInput placeholder="{{ \'SHARE.PUBLIC-LINK\' | translate }}" [value]="baseShareUrl + sharedId">\n            <mat-icon matPrefix>link</mat-icon>\n        </mat-form-field>\n    </form>\n\n    <h2 *ngIf="!isFileShared">{{ \'SHARE.UNSHARED\' | translate }}</h2>\n\n</mat-dialog-content>\n\n<mat-dialog-actions>\n    <button mat-button color="primary" (click)="cancelShare()">\n        {{ \'SHARE.ACTIONS.CLOSE\' | translate }}\n    </button>\n</mat-dialog-actions>\n',styles:[".spacer{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.adf-share-dialog .mat-dialog-actions .mat-button-wrapper{text-transform:uppercase}.full-width{width:100%}.adf-share-link{margin-left:10px;font-size:18px!important}"],host:{"class":"adf-share-dialog"},encapsulation:l.ViewEncapsulation.None}]}],M.ctorParameters=function(){return[{type:c.SharedLinksApiService},{type:t.MatDialogRef},{type:undefined,decorators:[{type:l.Inject,args:[t.MAT_DIALOG_DATA]}]}]};var R=function(){function e(e,t){this.dialog=e,this.elementRef=t}return e.prototype.onClick=function(){this.shareNode(this.node)},e.prototype.shareNode=function(e){e.entry&&e.entry.isFile?(this.setDisableAttribute(!0),this.dialog.open(M,{width:"600px",disableClose:!0,data:{node:e,baseShareUrl:this.baseShareUrl}})):this.setDisableAttribute(!0)},e.prototype.ngOnChanges=function(){!this.node||this.node.entry.isFolder?this.setDisableAttribute(!0):this.setDisableAttribute(!1)},e.prototype.setDisableAttribute=function(e){this.elementRef.nativeElement.disabled=e},e}();function P(){return[t.MatButtonModule,t.MatChipsModule,t.MatDialogModule,t.MatIconModule,t.MatCardModule,t.MatInputModule,t.MatListModule,t.MatProgressSpinnerModule,t.MatProgressBarModule,t.MatRippleModule,t.MatMenuModule,t.MatOptionModule,t.MatExpansionModule,t.MatSelectModule,t.MatCheckboxModule,t.MatDatepickerModule,t.MatSlideToggleModule]}R.decorators=[{type:l.Directive,args:[{selector:"[adf-share]"}]}],R.ctorParameters=function(){return[{type:t.MatDialog},{type:l.ElementRef}]},R.propDecorators={node:[{type:l.Input,args:["adf-share"]}],baseShareUrl:[{type:l.Input}],onClick:[{type:l.HostListener,args:["click"]}]};var k=function(){};k.decorators=[{type:l.NgModule,args:[{imports:P(),exports:P()}]}],k.ctorParameters=function(){return[]};var _=function(){function r(e,t,n,i,o){this.contentService=t,this.apiService=n,this.logService=i,this.thumbnailService=o}return r.prototype.getNodesPromise=function(e,t,n){void 0===n&&(n=[]);var i=r.ROOT_ID;t&&t.rootFolderId&&(i=t.rootFolderId);var o={includeSource:!0,include:L(["path","properties","allowableOperations","permissions"],n).filter(function(e,t,n){return t===n.indexOf(e)})};return e&&(o.relativePath=e),t&&(t.maxItems&&(o.maxItems=t.maxItems),t.skipCount&&(o.skipCount=t.skipCount)),this.apiService.getInstance().nodes.getNodeChildren(i,o)},r.prototype.deleteNode=function(e){return a.Observable.fromPromise(this.apiService.getInstance().nodes.deleteNode(e))},r.prototype.copyNode=function(e,t){var n=this;return a.Observable.fromPromise(this.apiService.getInstance().nodes.copyNode(e,{targetParentId:t}))["catch"](function(e){return n.handleError(e)})},r.prototype.moveNode=function(e,t){var n=this;return a.Observable.fromPromise(this.apiService.getInstance().nodes.moveNode(e,{targetParentId:t}))["catch"](function(e){return n.handleError(e)})},r.prototype.createFolder=function(e,t){var n=this,i=a.Observable.fromPromise(this.apiService.getInstance().nodes.createFolder(e,"/",t));return i["catch"](function(e){return n.handleError(e)}),i},r.prototype.getFolder=function(e,t,n){var i=this;return void 0===n&&(n=[]),a.Observable.fromPromise(this.getNodesPromise(e,t,n)).map(function(e){return e})["catch"](function(e){return i.handleError(e)})},r.prototype.getNode=function(e,t){void 0===t&&(t=[]);var n={includeSource:!0,include:L(["path","properties","allowableOperations","permissions"],t).filter(function(e,t,n){return t===n.indexOf(e)})};return this.contentService.getNode(e,n)},r.prototype.getFolderNode=function(e,t){void 0===t&&(t=[]);var n={includeSource:!0,include:L(["path","properties","allowableOperations","permissions"],t).filter(function(e,t,n){return t===n.indexOf(e)})};return a.Observable.fromPromise(this.apiService.getInstance().nodes.getNodeInfo(e,n))},r.prototype.getDocumentThumbnailUrl=function(e){return this.thumbnailService.getDocumentThumbnailUrl(e)},r.prototype.getMimeTypeIcon=function(e){return this.thumbnailService.getMimeTypeIcon(e)},r.prototype.getDefaultMimeTypeIcon=function(){return this.thumbnailService.getDefaultMimeTypeIcon()},r.prototype.hasPermission=function(e,t){return this.contentService.hasPermission(e,t)},r.prototype.handleError=function(e){return this.logService.error(e),a.Observable["throw"](e||"Server error")},r}();_.ROOT_ID="-root-",_.decorators=[{type:l.Injectable}],_.ctorParameters=function(){return[{type:c.AuthenticationService},{type:c.ContentService},{type:c.AlfrescoApiService},{type:c.LogService},{type:c.ThumbnailService}]};var U=function(){function e(e){this.data=e,this.title=null,this.currentFolderId=null,this.dropdownHideMyFiles=!1,this.dropdownSiteList=null,this.rowFilter=null,this.imageResolver=null,this.buttonActionName=e.actionName?"NODE_SELECTOR."+e.actionName.toUpperCase():"NODE_SELECTOR.CHOOSE"}return e.prototype.close=function(){this.data.select.complete()},e.prototype.onSelect=function(e){this.chosenNode=e},e.prototype.onClick=function(){this.data.select.next(this.chosenNode),this.data.select.complete()},e}();U.decorators=[{type:l.Component,args:[{selector:"adf-content-node-selector",template:'<header\n    mat-dialog-title\n    data-automation-id="content-node-selector-title">{{title || data?.title}}\n</header>\n\n<mat-dialog-content>\n    <adf-content-node-selector-panel\n        [currentFolderId]="currentFolderId || data?.currentFolderId"\n        [dropdownHideMyFiles]="dropdownHideMyFiles || data?.dropdownHideMyFiles"\n        [dropdownSiteList]="dropdownSiteList || data?.dropdownSiteList"\n        [rowFilter]="rowFilter || data?.rowFilter"\n        [imageResolver]="imageResolver || data?.imageResolver"\n        [isSelectionValid]="data?.isSelectionValid"\n        [breadcrumbTransform]="data?.breadcrumbTransform"\n        (select)="onSelect($event)">\n    </adf-content-node-selector-panel>\n</mat-dialog-content>\n\n<mat-dialog-actions align="end">\n    <button\n        mat-button\n        (click)="close()"\n        data-automation-id="content-node-selector-actions-cancel">{{ \'NODE_SELECTOR.CANCEL\' | translate }}\n    </button>\n\n    <button mat-button\n        [disabled]="!chosenNode"\n        class="choose-action"\n        (click)="onClick()"\n        data-automation-id="content-node-selector-actions-choose">{{ buttonActionName | translate }}\n    </button>\n</mat-dialog-actions>\n\n',styles:[""],encapsulation:l.ViewEncapsulation.None}]}],U.ctorParameters=function(){return[{type:undefined,decorators:[{type:l.Inject,args:[t.MAT_DIALOG_DATA]}]}]},U.propDecorators={title:[{type:l.Input}],currentFolderId:[{type:l.Input}],dropdownHideMyFiles:[{type:l.Input}],dropdownSiteList:[{type:l.Input}],rowFilter:[{type:l.Input}],imageResolver:[{type:l.Input}],pageSize:[{type:l.Input}]};var B=function(){function e(e,t,n,i){this.formBuilder=e,this.dialog=t,this.alfrescoApi=n,this.data=i,this.node=null}return e.prototype.ngOnInit=function(){var e=this.data.node;this.nodeName=e.name,this.form=this.formBuilder.group({isLocked:e.isLocked||!1,allowOwner:"WRITE_LOCK"===e.properties["cm:lockType"],isTimeLock:!!e.properties["cm:expiryDate"],time:e.properties["cm:expiryDate"]?o(e.properties["cm:expiryDate"]):o()})},Object.defineProperty(e.prototype,"lockTimeInSeconds",{get:function(){return this.form.value.isTimeLock?o.duration(o(this.form.value.time).diff(o())).asSeconds():0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeBodyLock",{get:function(){return{timeToExpire:this.lockTimeInSeconds,type:this.form.value.allowOwner?"ALLOW_OWNER_CHANGES":"FULL",lifetime:"PERSISTENT"}},enumerable:!0,configurable:!0}),e.prototype.toggleLock=function(){var e=this.alfrescoApi.nodesApi,t=this.data.node;return this.form.value.isLocked?e.lockNode(t.id,this.nodeBodyLock):e.unlockNode(t.id)},e.prototype.submit=function(){var t=this;this.toggleLock().then(function(e){t.data.node.isLocked=t.form.value.isLocked,t.dialog.close(e.entry)})["catch"](function(e){return t.data.onError(e)})},e}();B.decorators=[{type:l.Component,args:[{selector:"adf-node-lock",styles:[".adf-fill-remaining-space{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.adf-full-width{width:100%}"],template:'<h2 mat-dialog-title>\n    {{ \'CORE.FILE_DIALOG.FILE_LOCK\' | translate }}\n</h2>\n\n<mat-dialog-content>\n    <br />\n    <form [formGroup]="form" (submit)="submit()">\n        <mat-checkbox [formControl]="form.controls[\'isLocked\']" ngDefaultControl>\n            {{ \'CORE.FILE_DIALOG.FILE_LOCK_CHECKBOX\' | translate }} <strong>"{{ nodeName }}"</strong>\n        </mat-checkbox>\n\n        <br />\n\n        <div *ngIf="form.value.isLocked">\n            <mat-checkbox [formControl]="form.controls[\'allowOwner\']" ngDefaultControl>\n                {{ \'CORE.FILE_DIALOG.ALLOW_OTHERS_CHECKBOX\' | translate }}\n            </mat-checkbox>\n\n            <br />\n\n            <mat-checkbox [formControl]="form.controls[\'isTimeLock\']" ngDefaultControl>\n                {{ \'CORE.FILE_DIALOG.TIME_LOCK_CHECKBOX\' | translate }}\n            </mat-checkbox>\n\n            <br />\n\n            <mat-form-field *ngIf="form.value.isTimeLock">\n                <mat-datetimepicker-toggle [for]="datetimePicker" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker #datetimePicker type="datetime" openOnFocus="true" timeInterval="1"></mat-datetimepicker>\n                <input matInput [formControl]="form.controls[\'time\']" [matDatetimepicker]="datetimePicker" required autocomplete="false">\n            </mat-form-field>\n        </div>\n    </form>\n    <br />\n</mat-dialog-content>\n\n<mat-dialog-actions class="adf-dialog-buttons">\n    <span class="adf-fill-remaining-space"></span>\n\n    <button mat-button mat-dialog-close>\n        {{ \'CORE.FILE_DIALOG.CANCEL_BUTTON.LABEL\' | translate }}\n    </button>\n\n    <button class="adf-dialog-action-button" mat-button (click)="submit()">\n        {{ \'CORE.FILE_DIALOG.SAVE_BUTTON.LABEL\' | translate }}\n    </button>\n</mat-dialog-actions>\n'}]}],B.ctorParameters=function(){return[{type:r.FormBuilder},{type:t.MatDialogRef},{type:c.AlfrescoApiService},{type:undefined,decorators:[{type:l.Optional},{type:l.Inject,args:[t.MAT_DIALOG_DATA]}]}]};var V=function(){function e(e,t,n,i,o){this.dialog=e,this.contentService=t,this.documentListService=n,this.siteService=i,this.translation=o,this.error=new l.EventEmitter}return e.prototype.openFileBrowseDialogByFolderId=function(e){var t=this;return this.documentListService.getFolderNode(e).switchMap(function(e){return t.openUploadFileDialog("Choose",e)})},e.prototype.openLockNodeDialog=function(e){var t=this,n=new d.Subject;return this.contentService.hasPermission(e,c.PermissionsEnum.LOCK)?this.dialog.open(B,{data:{node:e,onError:function(e){t.error.emit(e),n.error(e)}},width:"400px"}):n.error("OPERATION.FAIL.NODE.NO_PERMISSION"),n},e.prototype.openFileBrowseDialogBySite=function(){var t=this;return this.siteService.getSites().switchMap(function(e){return t.openFileBrowseDialogByFolderId(e.list.entries[0].entry.guid)})},e.prototype.openFolderBrowseDialogBySite=function(){var t=this;return this.siteService.getSites().switchMap(function(e){return t.openFolderBrowseDialogByFolderId(e.list.entries[0].entry.guid)})},e.prototype.openFolderBrowseDialogByFolderId=function(e){var t=this;return this.documentListService.getFolderNode(e).switchMap(function(e){return t.openUploadFolderDialog("Choose",e)})},e.prototype.openCopyMoveDialog=function(e,t,n){if(this.contentService.hasPermission(t,n)){var i=new d.Subject;i.subscribe({complete:this.close.bind(this)});var o={title:this.getTitleTranslation(e,t.name),actionName:e,currentFolderId:t.parentId,imageResolver:this.imageResolver.bind(this),rowFilter:this.rowFilter.bind(this,t.id),isSelectionValid:this.isCopyMoveSelectionValid.bind(this),select:i};return this.openContentNodeDialog(o,"adf-content-node-selector-dialog","630px"),i}var r=new Error(JSON.stringify({error:{statusCode:403}}));return a.Observable["throw"](r)},e.prototype.getTitleTranslation=function(e,t){return this.translation.instant("NODE_SELECTOR."+e.toUpperCase()+"_ITEM",{name:t})},e.prototype.openUploadFolderDialog=function(e,t){var n=new d.Subject;n.subscribe({complete:this.close.bind(this)});var i={title:e+" '"+t.name+"' to ...",actionName:e,currentFolderId:t.id,imageResolver:this.imageResolver.bind(this),isSelectionValid:this.hasPermissionOnNodeFolder.bind(this),rowFilter:this.rowFilter.bind(this,t.id),select:n};return this.openContentNodeDialog(i,"adf-content-node-selector-dialog","630px"),n},e.prototype.openUploadFileDialog=function(e,t){var n=new d.Subject;n.subscribe({complete:this.close.bind(this)});var i={title:e+" '"+t.name+"' to ...",actionName:e,currentFolderId:t.id,imageResolver:this.imageResolver.bind(this),isSelectionValid:this.isNodeFile.bind(this),select:n};return this.openContentNodeDialog(i,"adf-content-node-selector-dialog","630px"),n},e.prototype.openContentNodeDialog=function(e,t,n){this.dialog.open(U,{data:e,panelClass:t,width:n})},e.prototype.imageResolver=function(e,t){var n=e.node.entry;return this.contentService.hasPermission(n,"create")?null:this.documentListService.getMimeTypeIcon("disable/folder")},e.prototype.rowFilter=function(e,t){var n=t.node.entry;return n.id!==e&&!n.isFile},e.prototype.isNodeFile=function(e){return e.isFile},e.prototype.hasPermissionOnNodeFolder=function(e){return this.isNodeFolder(e)&&this.contentService.hasPermission(e,"create")},e.prototype.isNodeFolder=function(e){return e.isFolder},e.prototype.isCopyMoveSelectionValid=function(e){return this.hasEntityCreatePermission(e)&&!this.isSite(e)},e.prototype.hasEntityCreatePermission=function(e){return this.contentService.hasPermission(e,"create")},e.prototype.isSite=function(e){return!!e.guid||"st:site"===e.nodeType||"st:sites"===e.nodeType},e.prototype.close=function(){this.dialog.closeAll()},e}();V.decorators=[{type:l.Injectable}],V.ctorParameters=function(){return[{type:t.MatDialog},{type:c.ContentService},{type:_},{type:c.SitesService},{type:c.TranslationService}]},V.propDecorators={error:[{type:l.Output}]};var j=function(){function e(e,t,n,i){this.element=e,this.renderer=t,this.contentService=n,this.contentNodeDialogService=i}return e.prototype.onClick=function(e){e.preventDefault(),this.contentNodeDialogService.openLockNodeDialog(this.node)},e.prototype.ngAfterViewInit=function(){var e=this.contentService.hasPermission(this.node,c.PermissionsEnum.LOCK);this.renderer.setProperty(this.element.nativeElement,"disabled",!e)},e}();j.decorators=[{type:l.Directive,args:[{selector:"[adf-node-lock]"}]}],j.ctorParameters=function(){return[{type:l.ElementRef},{type:l.Renderer2},{type:c.ContentService},{type:V}]},j.propDecorators={node:[{type:l.Input,args:["adf-node-lock"]}],onClick:[{type:l.HostListener,args:["click",["$event"]]}]};var H=function(){};H.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k],declarations:[x,R,j],exports:[x,R,j]}]}],H.ctorParameters=function(){return[]};var G=function(){function e(e){this.apiService=e}return e.prototype.getRating=function(e,t){return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.getRating(e,t)).map(function(e){return e})["catch"](this.handleError)},e.prototype.postRating=function(e,t,n){var i={id:t,myRating:n};return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.rate(e,i)).map(function(e){return e})["catch"](this.handleError)},e.prototype.deleteRating=function(e,t){return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.removeRating(e,t)).map(function(e){return e})["catch"](this.handleError)},e.prototype.handleError=function(e){return console.error(e),a.Observable["throw"](e||"Server error")},e}();G.decorators=[{type:l.Injectable}],G.ctorParameters=function(){return[{type:c.AlfrescoApiService}]};var q=function(){function e(e){this.ratingService=e,this.average=0,this.ratingType="fiveStar",this.changeVote=new l.EventEmitter,this.stars=[]}return e.prototype.ngOnChanges=function(){var t=this,e=this.ratingService.getRating(this.nodeId,this.ratingType);return e.subscribe(function(e){e.entry.aggregate&&(t.average=e.entry.aggregate.average,t.calculateStars())}),e},e.prototype.calculateStars=function(){this.stars=[];for(var e=0;e<5;e++)e<this.average?this.stars.push({fill:!0}):this.stars.push({fill:!1});this.changeVote.emit(this.average)},e.prototype.updateVote=function(e){var t=this;this.ratingService.postRating(this.nodeId,this.ratingType,e).subscribe(function(e){e.entry.aggregate&&t.average!==e.entry.aggregate.average&&(t.average=e.entry.aggregate.average,t.calculateStars())})},e}();q.decorators=[{type:l.Component,args:[{selector:"adf-rating",styles:[".adf-rating-container{overflow:hidden;width:100%}.adf-rating-container .adf-rating-star{float:left;-webkit-transition:all .3s;transition:all .3s;padding:1px;cursor:pointer}.adf-rating-container .adf-rating-star .mat-list-item-content{padding:0 2px!important}.adf-rating-container .adf-colored-star{color:#ffe944}.adf-rating-container .adf-grey-star{color:grey}.adf-rating-container .adf-stars-container{padding:0!important;margin:0!important;display:inline-block}.adf-rating-container .adf-rating-star:hover{-webkit-transform:rotate(13deg) scale(1.2);transform:rotate(13deg) scale(1.2)}"],template:'<mat-list id="adf-rating-container" class="adf-rating-container">\n    <mat-list-item class="adf-rating-star" *ngFor="let currentRate of stars; let idx = index">\n            <span id="adf-rate-{{idx}}">\n                <mat-icon id="adf-grey-star-{{idx}}" *ngIf="currentRate.fill" class="adf-colored-star"\n                         (click)="updateVote(idx + 1)">star_rate\n                </mat-icon>\n                <mat-icon id="adf-colored-star-{{idx}}" *ngIf="!currentRate.fill" class="adf-grey-star"\n                         (click)="updateVote(idx + 1)">star_border\n                </mat-icon>\n            </span>\n    </mat-list-item>\n</mat-list>\n',encapsulation:l.ViewEncapsulation.None}]}],q.ctorParameters=function(){return[{type:G}]},q.propDecorators={nodeId:[{type:l.Input}],changeVote:[{type:l.Output}]};var $=function(){function e(e){this.ratingService=e,this.changeVote=new l.EventEmitter,this.likesCounter=0,this.ratingType="likes",this.isLike=!1}return e.prototype.ngOnChanges=function(){var t=this;this.clean(),this.ratingService.getRating(this.nodeId,this.ratingType).subscribe(function(e){e.entry.aggregate&&(t.likesCounter=e.entry.aggregate.numberOfRatings,e.entry.ratedAt&&(t.isLike=!0))})},e.prototype.likeClick=function(){var t=this;this.isLike?this.ratingService.deleteRating(this.nodeId,this.ratingType).subscribe(function(){t.likesCounter-=1,t.isLike=!1,t.changeVote.emit(t.likesCounter)}):this.ratingService.postRating(this.nodeId,this.ratingType,!0).subscribe(function(e){t.likesCounter=e.entry.aggregate.numberOfRatings,t.isLike=!0,t.changeVote.emit(t.likesCounter)})},e.prototype.clean=function(){this.isLike=!1,this.likesCounter=0},e}();$.decorators=[{type:l.Component,args:[{selector:"adf-like",styles:[".adf-like-container{overflow:hidden;width:100%}.adf-like-container .adf-like{padding:5px;cursor:pointer;float:left;margin:5px 0 5px 5px}.adf-like-container .adf-like-select{cursor:pointer;color:#2196f3}.adf-like-container .adf-like-grey,.adf-like-container .adf-like-select:hover{cursor:pointer;color:grey}.adf-like-container .adf-like-grey:hover{cursor:pointer;color:#2196f3}.adf-like-container .adf-like-counter{float:left;padding:13px 0 0}.adf-like-container .adf-left{float:left;padding:13px 0 0 4px}"],template:'<div id="adf-like-container" class="adf-like-container">\n    <div class="adf-like">\n        <span id="adf-like-{{nodeId}}" [ngClass]="{\'adf-like-select\': isLike ,\'adf-like-grey\': !isLike  }"\n              (click)="likeClick()">\n            <mat-icon>thumb_up</mat-icon>\n        </span>\n    </div>\n    <div id="adf-like-counter" class="adf-like-counter">{{likesCounter}}</div>\n    <div class="adf-left" *ngIf="likesCounter<=1">Like</div>\n    <div class="adf-left" *ngIf="likesCounter>1">Likes</div>\n</div>\n',encapsulation:l.ViewEncapsulation.None}]}],$.ctorParameters=function(){return[{type:G}]},$.propDecorators={nodeId:[{type:l.Input}],changeVote:[{type:l.Output}]};var Q=function(){};Q.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k],exports:[q,$],declarations:[q,$]}]}],Q.ctorParameters=function(){return[]};var z=function(){function e(e,t){this.apiService=e,this.logService=t,this.refresh=new l.EventEmitter}return e.prototype.getTagsByNodeId=function(e){var t=this;return a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getNodeTags(e))["catch"](function(e){return t.handleError(e)})},e.prototype.getAllTheTags=function(){var t=this;return a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getTags())["catch"](function(e){return t.handleError(e)})},e.prototype.addTag=function(e,t){var n=this,i=new(this.apiService.getInstance().core.TagBody);i.tag=t;var o=a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.addTag(e,i));return o.subscribe(function(e){n.refresh.emit(e)},function(e){n.handleError(e)}),o},e.prototype.removeTag=function(e,t){var n=this,i=a.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.removeTag(e,t));return i.subscribe(function(e){n.refresh.emit(e)},function(e){n.handleError(e)}),i},e.prototype.handleError=function(e){return this.logService.error(e),a.Observable["throw"](e||"Server error")},e}();z.decorators=[{type:l.Injectable}],z.ctorParameters=function(){return[{type:c.AlfrescoApiService},{type:c.LogService}]},z.propDecorators={refresh:[{type:l.Output}]};var Y=function(){function e(e,t){var n=this;this.tagService=e,this.translateService=t,this.successAdd=new l.EventEmitter,this.error=new l.EventEmitter,this.result=new l.EventEmitter,this.disableAddTag=!0,this.tagService.refresh.subscribe(function(){n.refreshTag()})}return e.prototype.ngOnChanges=function(){return this.refreshTag()},e.prototype.refreshTag=function(){var t=this;this.nodeId&&this.tagService.getTagsByNodeId(this.nodeId).subscribe(function(e){t.tagsEntries=e.list.entries,t.disableAddTag=!1,t.result.emit(t.tagsEntries)},function(){t.tagsEntries=null,t.disableAddTag=!0,t.result.emit(t.tagsEntries)})},e.prototype.addTag=function(){var t=this;this.searchTag(this.newTagName)?(this.translateService.get("TAG.MESSAGES.EXIST").subscribe(function(e){t.errorMsg=e}),this.error.emit(this.errorMsg)):this.tagService.addTag(this.nodeId,this.newTagName).subscribe(function(){t.newTagName="",t.successAdd.emit(t.nodeId)})},e.prototype.searchTag=function(t){if(this.tagsEntries)return this.tagsEntries.find(function(e){return t===e.entry.tag})},e.prototype.cleanErrorMsg=function(){this.errorMsg=""},e.prototype.removeTag=function(e){this.tagService.removeTag(this.nodeId,e)},e}();Y.decorators=[{type:l.Component,args:[{selector:"adf-tag-node-actions-list",template:'<mat-list>\n    <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <div class="adf-tag-actions-container" id="tag_delete_{{idx}}" (click)="removeTag(currentEntry.entry.id)">\n            <div class="adf-tag-actions-delete-text" id="tag_name_{{idx}}">\n                {{currentEntry.entry.tag}}\n            </div>\n            <mat-icon class="adf-tag-actions-delete-icon">delete</mat-icon>\n        </div>\n    </mat-list-item>\n</mat-list>\n<table class="adf-full-width" cellspacing="0">\n    <tr>\n        <td>\n            <mat-form-field class="adf-full-width">\n                <input matInput placeholder="{{\'TAG.LABEL.NEWTAG\' | translate }}"\n                       type="text"\n                       (keypress)="cleanErrorMsg()"\n                       [(ngModel)]="newTagName"\n                       id="new-tag-text"/>\n                <mat-hint data-automation-id="errorMessage" *ngIf="error" [ngStyle]="{\'color\': \'red\'}" align="start">{{errorMsg}}</mat-hint>\n            </mat-form-field>\n        </td>\n        <td>\n            <button class="adf-full-width" color="primary" id="add-tag" (click)="addTag()" [disabled]="disableAddTag"\n                    mat-raised-button>\n                {{\'TAG.BUTTON.ADD\' | translate }}\n            </button>\n        </td>\n    </tr>\n</table>\n',styles:[".adf-full-width{width:100%}.adf-tag-actions-delete-icon{float:right;cursor:pointer}.adf-tag-actions-delete-text{font-size:16px;float:left}.adf-tag-actions-container{padding:8px 0;height:20px}"],encapsulation:l.ViewEncapsulation.None}]}],Y.ctorParameters=function(){return[{type:z},{type:c.TranslationService}]},Y.propDecorators={nodeId:[{type:l.Input}],successAdd:[{type:l.Output}],error:[{type:l.Output}],result:[{type:l.Output}]};var W=function(){function e(e){var t=this;this.tagService=e,this.result=new l.EventEmitter,this.tagService.refresh.subscribe(function(){t.refreshTag()})}return e.prototype.ngOnInit=function(){return this.refreshTag()},e.prototype.refreshTag=function(){var t=this;this.tagService.getAllTheTags().subscribe(function(e){t.tagsEntries=e.list.entries,t.result.emit(t.tagsEntries)})},e}();W.decorators=[{type:l.Component,args:[{selector:"adf-tag-list",template:'<mat-list>\n    <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <div class="adf-list-tag" id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</div>\n    </mat-list-item>\n</mat-list>\n',styles:[".adf-list-tag{padding:16px;font-size:16px}"],encapsulation:l.ViewEncapsulation.None}]}],W.ctorParameters=function(){return[{type:z}]},W.propDecorators={result:[{type:l.Output}]};var Z=function(){function e(e){var t=this;this.tagService=e,this.results=new l.EventEmitter,this.tagService.refresh.subscribe(function(){t.refreshTag()})}return e.prototype.ngOnChanges=function(){return this.refreshTag()},e.prototype.refreshTag=function(){var t=this;this.nodeId&&this.tagService.getTagsByNodeId(this.nodeId).subscribe(function(e){t.tagsEntries=e.list.entries,t.results.emit(t.tagsEntries)})},e.prototype.removeTag=function(e){var t=this;this.tagService.removeTag(this.nodeId,e).subscribe(function(){t.refreshTag()})},e}();Z.decorators=[{type:l.Component,args:[{selector:"adf-tag-node-list",template:'<mat-chip-list>\n    <mat-chip class="adf-tag-chips adf-primary-background-color" *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <span id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</span>\n        <button class="adf-tag-chips-delete" id="tag_delete_{{idx}}" type="button" (click)="removeTag(currentEntry.entry.id)">\n            <mat-icon class="adf-tag-chips-delete-icon adf-primary-contrast-text-color" matChipRemove>cancel</mat-icon>\n        </button>\n    </mat-chip>\n</mat-chip-list>\n',styles:[".adf-tag-chips-delete{overflow:visible;cursor:pointer;height:17px;width:20px;float:right;border:0;background:0 0;padding:0;margin:-1px 0 0 10px}.adf-tag-chips-delete-icon{font-size:20px;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:20px;width:20px}"],encapsulation:l.ViewEncapsulation.None}]}],Z.ctorParameters=function(){return[{type:z}]},Z.propDecorators={nodeId:[{type:l.Input}],results:[{type:l.Output}]};var X=function(){};X.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k,u.TranslateModule,r.FormsModule,r.ReactiveFormsModule],exports:[Y,W,Z],declarations:[Y,W,Z],providers:[z]}]}],X.ctorParameters=function(){return[]};var K=function(){function e(e,t){this.apiService=e,this.logService=t,this.showData=!0,this.contextRoot="alfresco",this.servicePath="service",this.contentType="TEXT",this.success=new l.EventEmitter,this.data=undefined,this.showError=!1}return e.prototype.ngOnChanges=function(e){var i=this;return this.showData&&this.clean(),new Promise(function(t,n){i.apiService.getInstance().webScript.executeWebScript("GET",i.scriptPath,i.scriptArgs,i.contextRoot,i.servicePath).then(function(e){i.data=e,i.showData&&"DATATABLE"===i.contentType&&(i.data=i.showDataAsDataTable(e)),i.success.emit(i.data),t()},function(e){i.logService.log("Error"+e),n()})})},e.prototype.showDataAsDataTable=function(e){try{e.schema||(e.schema=c.ObjectDataTableAdapter.generateSchema(e.data)),e.schema&&0<e.schema.length&&(this.data=new c.ObjectDataTableAdapter(e.data,e.schema))}catch(t){this.logService.error("error during the cast as datatable")}return null},e.prototype.clean=function(){this.data=undefined},e.prototype.isDataTableContent=function(){return"DATATABLE"===this.contentType},e}();K.decorators=[{type:l.Component,args:[{selector:"adf-webscript-get",template:'<div *ngIf="showData">\n    <div *ngIf="contentType === \'JSON\'" id="webscript-data-JSON">{{data | json}}</div>\n    <div *ngIf="contentType === \'HTML\'" id="webscript-data-HTML" [innerHTML]="data"></div>\n    <div *ngIf="contentType === \'TEXT\'" id="webscript-data-TEXT">{{data}}</div>\n    <div *ngIf="isDataTableContent()">\n        <adf-datatable id="webscript-datatable-wrapper" [data]="data"></adf-datatable>\n        <div>\n            <div *ngIf="showError" id="error">{{\'WEBSCRIPT.ERROR\' | translate: {\n                data: data,\n                contentType: contentType\n                }\n                }}\n            </div>\n        </div>\n    </div>\n</div>\n'}]}],K.ctorParameters=function(){return[{type:c.AlfrescoApiService},{type:c.LogService}]},K.propDecorators={scriptPath:[{type:l.Input}],scriptArgs:[{type:l.Input}],showData:[{type:l.Input}],contextRoot:[{type:l.Input}],servicePath:[{type:l.Input}],contentType:[{type:l.Input}],success:[{type:l.Output}]};var J=function(){};J.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,c.PipeModule,k,c.DataTableModule,u.TranslateModule],exports:[K],declarations:[K]}]}],J.ctorParameters=function(){return[]};var ee=function(){function i(e,t,n){if(this.obj=e,this.documentListService=t,this.permissionsStyle=n,this.cache={},this.isSelected=!1,this.cssClass="",!e)throw new Error(i.ERR_OBJECT_NOT_FOUND);this.isDropTarget=this.isFolderAndHasPermissionToUpload(e),n&&(this.cssClass=this.getPermissionClass(e))}return Object.defineProperty(i.prototype,"node",{get:function(){return this.obj},enumerable:!0,configurable:!0}),i.prototype.getPermissionClass=function(t){var n=this,i="";return this.permissionsStyle.forEach(function(e){(n.applyPermissionStyleToFolder(t.entry,e)||n.applyPermissionStyleToFile(t.entry,e))&&n.documentListService.hasPermission(t.entry,e.permission)&&(i+=" "+e.css)}),i},i.prototype.applyPermissionStyleToFile=function(e,t){return t.isFile&&e.isFile},i.prototype.applyPermissionStyleToFolder=function(e,t){return t.isFolder&&e.isFolder},i.prototype.isFolderAndHasPermissionToUpload=function(e){return this.isFolder(e)&&this.documentListService.hasPermission(e.entry,"create")},i.prototype.isFolder=function(e){return e.entry&&e.entry.isFolder},i.prototype.cacheValue=function(e,t){return this.cache[e]=t},i.prototype.getValue=function(e){return this.cache[e]!==undefined?this.cache[e]:c.ObjectUtils.getValue(this.obj.entry,e)},i.prototype.hasValue=function(e){return this.getValue(e)!==undefined},i}();ee.ERR_OBJECT_NOT_FOUND="Object source not found";var te=function(){function e(e,t,n){void 0===t&&(t=[]),this.documentListService=e,this.ERR_ROW_NOT_FOUND="Row not found",this.ERR_COL_NOT_FOUND="Column not found",this.thumbnails=!1,this.rows=[],this.columns=t||[],this.sorting=n}return e.prototype.getRows=function(){return this.rows},e.prototype.setRows=function(e){this.rows=e||[],this.sort()},e.prototype.getColumns=function(){return this.columns},e.prototype.setColumns=function(e){this.columns=e||[]},e.prototype.getValue=function(e,t){if(!e)throw new Error(this.ERR_ROW_NOT_FOUND);if(!t)throw new Error(this.ERR_COL_NOT_FOUND);var n=e,i=e.getValue(t.key);if(n.cache[t.key]!==undefined)return n.cache[t.key];if("date"===t.type)try{var o=this.formatDate(t,i);return n.cacheValue(t.key,o)}catch(l){return console.error("Error parsing date "+i+" to format "+t.format),"Error"}if("$thumbnail"===t.key){var r;if(this.imageResolver)if(r=this.imageResolver(e,t))return r;var a=e.node;if(a.entry.isFolder)return this.documentListService.getMimeTypeIcon("folder");if(a.entry.isFile&&this.thumbnails)return this.documentListService.getDocumentThumbnailUrl(a);if(a.entry.content){var s=a.entry.content.mimeType;if(s)return this.documentListService.getMimeTypeIcon(s)}return this.documentListService.getDefaultMimeTypeIcon()}if("image"===t.type&&(this.imageResolver&&(r=this.imageResolver(e,t))))return r;return n.cacheValue(t.key,i)},e.prototype.formatDate=function(e,t){if("date"===e.type){var n=e.format||"medium";return"timeAgo"===n?(new c.TimeAgoPipe).transform(t):new p.DatePipe("en-US").transform(t,n)}return t},e.prototype.getSorting=function(){return this.sorting},e.prototype.setSorting=function(e){this.sorting=e,this.sortRows(this.rows,this.sorting)},e.prototype.sort=function(e,t){var n=this.sorting||new c.DataSorting;e&&(n.key=e,n.direction=t||"asc"),this.setSorting(n)},e.prototype.setFilter=function(e){this.filter=e},e.prototype.setImageResolver=function(e){this.imageResolver=e},e.prototype.sortRows=function(e,o){var r={};o&&o.key&&e&&0<e.length&&((o.key.includes("sizeInBytes")||"name"===o.key)&&(r.numeric=!0),e.sort(function(e,t){if(e.node.entry.isFolder!==t.node.entry.isFolder)return e.node.entry.isFolder?-1:1;var n=e.getValue(o.key);n=n?n instanceof Date?n.valueOf().toString():n.toString():"";var i=t.getValue(o.key);return i=i?i instanceof Date?i.valueOf().toString():i.toString():"","asc"===o.direction?n.localeCompare(i,undefined,r):i.localeCompare(n,undefined,r)}))},e.prototype.loadPage=function(e,t){var n=this;void 0===t&&(t=!1);var i=[];if(e&&e.list){var o=e.list.entries;if(o&&0<o.length&&(i=o.map(function(e){return new ee(e,n.documentListService,n.permissionsStyle)}),this.filter&&(i=i.filter(this.filter)),this.columns&&0<this.columns.length)){var r=this.getSorting();if(r)this.sortRows(i,r);else{var a=this.columns.filter(function(e){return e.sortable});0<a.length?this.sort(a[0].key,"asc"):this.sort(this.columns[0].key,"asc")}}}this.rows=t?this.rows.concat(i):i},e}(),ne={"-trashcan-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"archivedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_ON",format:"timeAgo",sortable:!0},{key:"archivedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_BY",sortable:!0}],"-sites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-mysites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-favorites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}],"-recent-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0}],"-sharedlinks-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0},{key:"sharedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.SHARED_BY",sortable:!0}],"default":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}]},ie=function(e){this.disableWithNoPermission=!1,this.disabled=!1,e&&(this.icon=e.icon,this.title=e.title,this.handler=e.handler,this.execute=e.execute,this.target=e.target,this.permission=e.permission,this.disableWithNoPermission=e.disableWithNoPermission,this.disabled=e.disabled)},oe={Document:"document",Folder:"folder",All:"all"},re=function(n){function e(e){var t=n.call(this,e)||this;return t.target="document",t}return D(e,n),e}(ie),ae=function(n){function e(e){var t=n.call(this,e)||this;return t.target="folder",t}return D(e,n),e}(ie),se=function(n){function e(e){var t=n.call(this)||this;return t.value=e,t}return D(e,n),e}(c.BaseEvent),le=function(n){function e(e){var t=n.call(this)||this;return t.value=e,t}return D(e,n),e}(c.BaseEvent),ce=function(){function e(e,t){this.apiService=e,this.logService=t,this.CREATE_PERMISSION="create"}return e.prototype.getRecentFiles=function(e,o){var r=this;return new a.Observable(function(i){r.apiService.peopleApi.getPerson(e).then(function(e){var t=e.entry.id,n={query:{query:"*",language:"afts"},filterQueries:[{query:"cm:modified:[NOW/DAY-30DAYS TO NOW/DAY+1DAY]"},{query:"cm:modifier:"+t+" OR cm:creator:"+t},{query:'TYPE:"content" AND -TYPE:"app:filelink" AND -TYPE:"fm:post"'}],include:["path","properties","allowableOperations"],sort:[{type:"FIELD",field:"cm:modified",ascending:!1}],paging:{maxItems:o.maxItems,skipCount:o.skipCount}};return r.apiService.searchApi.search(n).then(function(e){i.next(e),i.complete()},function(e){i.error(e),i.complete()})},function(e){i.error(e),i.complete()})})["catch"](function(e){return r.handleError(e)})},e.prototype.loadFavorites=function(e,t){var i=this;void 0===t&&(t=[]);var n=this.getIncludesFields(t),o={maxItems:e.maxItems,skipCount:e.skipCount,where:"(EXISTS(target/file) OR EXISTS(target/folder))",include:n};return new a.Observable(function(n){i.apiService.favoritesApi.getFavorites("-me-",o).then(function(e){var t={list:{entries:e.list.entries.map(function(e){var t=e.entry.target;return{entry:t.file||t.folder}}).map(function(e){var t=e.entry;return t.properties={"cm:title":t.title,"cm:description":t.description},{entry:t}}),pagination:e.list.pagination}};n.next(t),n.complete()},function(e){n.error(e),n.complete()})})["catch"](function(e){return i.handleError(e)})},e.prototype.loadMemberSites=function(e){var i=this,t={include:["properties"],maxItems:e.maxItems,skipCount:e.skipCount};return new a.Observable(function(n){i.apiService.peopleApi.getSiteMembership("-me-",t).then(function(e){var t={list:{entries:e.list.entries.map(function(e){var t=e.entry.site;return t.allowableOperations=t.allowableOperations?t.allowableOperations:[i.CREATE_PERMISSION],t.name=t.name||t.title,{entry:t}}),pagination:e.list.pagination}};n.next(t),n.complete()},function(e){n.error(e),n.complete()})})["catch"](function(e){return i.handleError(e)})},e.prototype.loadSites=function(e){var n=this,i={include:["properties"],maxItems:e.maxItems,skipCount:e.skipCount};return new a.Observable(function(t){n.apiService.sitesApi.getSites(i).then(function(e){e.list.entries.map(function(e){var t=e.entry;return t.name=t.name||t.title,{entry:t}}),t.next(e),t.complete()},function(e){t.error(e),t.complete()})})["catch"](function(e){return n.handleError(e)})},e.prototype.loadTrashcan=function(e,t){var n=this;void 0===t&&(t=[]);var i={include:this.getIncludesFields(t),maxItems:e.maxItems,skipCount:e.skipCount};return a.Observable.fromPromise(this.apiService.nodesApi.getDeletedNodes(i))["catch"](function(e){return n.handleError(e)})},e.prototype.loadSharedLinks=function(e,t){var n=this;void 0===t&&(t=[]);var i={include:this.getIncludesFields(t),maxItems:e.maxItems,skipCount:e.skipCount};return a.Observable.fromPromise(this.apiService.sharedLinksApi.findSharedLinks(i))["catch"](function(e){return n.handleError(e)})},e.prototype.isCustomSource=function(e){var t=!1;return-1<["-trashcan-","-sharedlinks-","-sites-","-mysites-","-favorites-","-recent-"].indexOf(e)&&(t=!0),t},e.prototype.loadFolderByNodeId=function(e,t,n){return"-trashcan-"===e?this.loadTrashcan(t,n):"-sharedlinks-"===e?this.loadSharedLinks(t,n):"-sites-"===e?this.loadSites(t):"-mysites-"===e?this.loadMemberSites(t):"-favorites-"===e?this.loadFavorites(t,n):"-recent-"===e?this.getRecentFiles("-me-",t):void 0},e.prototype.getCorrespondingNodeIds=function(e,t){var i=this;return"-trashcan-"===e?a.Observable.fromPromise(this.apiService.nodesApi.getDeletedNodes().then(function(e){return e.list.entries.map(function(e){return e.entry.id})})):"-sharedlinks-"===e?a.Observable.fromPromise(this.apiService.sharedLinksApi.findSharedLinks().then(function(e){return e.list.entries.map(function(e){return e.entry.nodeId})})):"-sites-"===e?a.Observable.fromPromise(this.apiService.sitesApi.getSites().then(function(e){return e.list.entries.map(function(e){return e.entry.guid})})):"-mysites-"===e?a.Observable.fromPromise(this.apiService.peopleApi.getSiteMembership("-me-").then(function(e){return e.list.entries.map(function(e){return e.entry.guid})})):"-favorites-"===e?a.Observable.fromPromise(this.apiService.favoritesApi.getFavorites("-me-").then(function(e){return e.list.entries.map(function(e){return e.entry.targetGuid})})):"-recent-"===e?new a.Observable(function(n){i.getRecentFiles("-me-",t).subscribe(function(e){var t=e.list.entries.map(function(e){return e.entry.id});n.next(t),n.complete()})}):a.Observable.of([])},e.prototype.getIncludesFields=function(e){return L(["path","properties","allowableOperations","permissions"],e).filter(function(e,t,n){return t===n.indexOf(e)})},e.prototype.handleError=function(e){return this.logService.error(e),a.Observable["throw"](e||"Server error")},e}();ce.decorators=[{type:l.Injectable}],ce.ctorParameters=function(){return[{type:c.AlfrescoApiService},{type:c.LogService}]};var de={Finite:0,Infinite:1};de[de.Finite]="Finite",de[de.Infinite]="Infinite";var pe=function(){function s(e,t,n,i,o,r,a){this.documentListService=e,this.ngZone=t,this.elementRef=n,this.appConfig=i,this.preferences=o,this.customResourcesService=r,this.contentService=a,this.display=c.DisplayMode.List,this.permissionsStyle=[],this.locationFormat="/",this.navigate=!0,this.showHeader=!0,this.navigationMode=s.DOUBLE_CLICK_NAVIGATION,this.thumbnails=!1,this.selectionMode="single",this.multiselect=!1,this.contentActions=!1,this.contentActionsPosition="right",this.contextMenuActions=!1,this.emptyFolderImageUrl="./assets/images/empty_doc_lib.svg",this.allowDropFiles=!1,this.loading=!1,this.rowFilter=null,this.imageResolver=null,this.currentFolderId=null,this.folderNode=null,this.node=null,this.skipCount=0,this.enableInfiniteScrolling=!1,this.nodeClick=new l.EventEmitter,this.nodeDblClick=new l.EventEmitter,this.folderChange=new l.EventEmitter,this.preview=new l.EventEmitter,this.ready=new l.EventEmitter,this.error=new l.EventEmitter,this.actions=[],this.contextActionHandler=new d.Subject,this.noPermission=!1,this.selection=new Array,this.layoutPresets={}}return s.prototype.getContextActions=function(t){var n=this;if(t&&t.entry){var e=this.getNodeActions(t);if(e&&0<e.length)return e.map(function(e){return{model:e,node:t,subject:n.contextActionHandler}})}return null},Object.defineProperty(s.prototype,"supportedPageSizes",{get:function(){return this.preferences.getDefaultPageSizes()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasCustomLayout",{get:function(){return this.columnList&&this.columnList.columns&&0<this.columnList.columns.length},enumerable:!0,configurable:!0}),s.prototype.getDefaultSorting=function(){var e;if(this.sorting){var t=F(this.sorting,2),n=t[0],i=t[1];e=new c.DataSorting(n,i)}return e},s.prototype.getLayoutPreset=function(e){return void 0===e&&(e="default"),(this.layoutPresets[e]||this.layoutPresets["default"]).map(function(e){return new c.ObjectDataColumn(e)})},Object.defineProperty(s.prototype,"pagination",{get:function(){var e=this.preferences.paginationSize;if(!this._pagination){this.maxItems&&(e=this.maxItems);var t={maxItems:e,skipCount:0,totalItems:0,hasMoreItems:!1};this._pagination=new h.BehaviorSubject(t)}return this._pagination},enumerable:!0,configurable:!0}),s.prototype.isEmptyTemplateDefined=function(){return!(!this.dataTable||!this.emptyFolderTemplate)},s.prototype.isNoPermissionTemplateDefined=function(){return!(!this.dataTable||!this.noPermissionTemplate)},s.prototype.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},s.prototype.isEmpty=function(){return!this.data||0===this.data.getRows().length},s.prototype.ngOnInit=function(){var t=this;this.loadLayoutPresets(),this.data=new te(this.documentListService,null,this.getDefaultSorting()),this.data.thumbnails=this.thumbnails,this.data.permissionsStyle=this.permissionsStyle,this.rowFilter&&this.data.setFilter(this.rowFilter),this.imageResolver&&this.data.setImageResolver(this.imageResolver),this.contextActionHandlerSubscription=this.contextActionHandler.subscribe(function(e){return t.contextActionCallback(e)}),this.enforceSingleClickNavigationForMobile()},s.prototype.ngAfterContentInit=function(){var e=[];this.hasCustomLayout&&(e=this.columnList.columns.map(function(e){return e})),this.data?e&&0<e.length&&this.data.setColumns(e):this.data=new te(this.documentListService,e,this.getDefaultSorting());var t=this.data.getColumns();t&&0!==t.length||this.setupDefaultColumns(this.currentFolderId)},s.prototype.ngOnChanges=function(e){var t=this;this.resetSelection(),e.folderNode&&e.folderNode.currentValue?(this.currentFolderId=e.folderNode.currentValue.id,this.resetNewFolderPagination(),this.loadFolder()):e.currentFolderId&&e.currentFolderId.currentValue&&e.currentFolderId.currentValue!==e.currentFolderId.previousValue?(this.resetNewFolderPagination(),this.loadFolder()):this.data&&(e.node&&e.node.currentValue?(e.node.currentValue.list.pagination&&(e.node.currentValue.list.pagination.skipCount=0),this.data.loadPage(e.node.currentValue),this.onDataReady(e.node.currentValue)):e.rowFilter?(this.data.setFilter(e.rowFilter.currentValue),this.currentFolderId&&this.loadFolderNodesByFolderNodeId(this.currentFolderId,this.pagination.getValue())["catch"](function(e){return t.error.emit(e)})):e.imageResolver&&this.data.setImageResolver(e.imageResolver.currentValue))},s.prototype.reload=function(){var e=this;this.ngZone.run(function(){e.resetSelection(),e.node?(e.data.loadPage(e.node),e.onDataReady(e.node)):e.loadFolder()})},s.prototype.contextActionCallback=function(e){e&&this.executeContentAction(e.node,e.model)},s.prototype.getNodeActions=function(t){var n=this,i=null;if(t&&t.entry&&(t.entry.isFile?i="document":t.entry.isFolder&&(i="folder"),i)){var e=this.actions.filter(function(e){return e.target.toLowerCase()===i}).map(function(e){return new ie(e)});return e.forEach(function(e){n.disableActionsWithNoPermissions(t,e)}),e}return[]},s.prototype.disableActionsWithNoPermissions=function(e,t){t.permission&&e.entry.allowableOperations&&!this.contentService.hasPermission(e.entry,t.permission)&&(t.disabled=!0)},s.prototype.onShowContextMenu=function(e){e&&this.contextMenuActions&&e.preventDefault()},s.prototype.performNavigation=function(e){return!!this.canNavigateFolder(e)&&(this.updateFolderData(e),!0)},s.prototype.performCustomSourceNavigation=function(e){return!!this.customResourcesService.isCustomSource(this.currentFolderId)&&(this.updateFolderData(e),!0)},s.prototype.updateFolderData=function(e){this.resetNewFolderPagination(),this.currentFolderId=e.entry.id,this.reload(),this.folderChange.emit(new le(e.entry))},s.prototype.updateCustomSourceData=function(e){this.folderNode=null,this.currentFolderId=e},s.prototype.executeContentAction=function(e,t){if(e&&e.entry&&t){var n=void 0;n="function"==typeof t.handler?t.handler(e,this,t.permission):a.Observable.of(!0),"function"==typeof t.execute&&n.subscribe(function(){t.execute(e)})}},s.prototype.loadFolder=function(){var t=this;if(this.pagination.getValue().merge||(this.loading=!0),this.hasCustomLayout||this.setupDefaultColumns(this.currentFolderId),this.folderNode)return this.loadFolderNodesByFolderNodeId(this.folderNode.id,this.pagination.getValue())["catch"](function(e){return t.handleError(e)});this.loadFolderByNodeId(this.currentFolderId)},s.prototype.loadFolderByNodeId=function(e){var t=this;this.customResourcesService.isCustomSource(e)?(this.updateCustomSourceData(e),this.customResourcesService.loadFolderByNodeId(e,this.pagination.getValue(),this.includeFields).subscribe(function(e){t.onPageLoaded(e)},function(e){t.error.emit(e)})):this.documentListService.getFolderNode(e,this.includeFields).subscribe(function(e){return t.folderNode=e,t.loadFolderNodesByFolderNodeId(e.id,t.pagination.getValue())["catch"](function(e){return t.handleError(e)})},function(e){t.handleError(e)})},s.prototype.loadFolderNodesByFolderNodeId=function(n,i){var o=this;return new Promise(function(t,e){o.documentListService.getFolder(null,{maxItems:i.maxItems,skipCount:i.skipCount,rootFolderId:n},o.includeFields).subscribe(function(e){o.data.loadPage(e,o.pagination.getValue().merge),o.loading=!1,o.onDataReady(e),t(!0)},function(e){o.handleError(e)})})},s.prototype.resetSelection=function(){this.dataTable.resetSelection(),this.selection=[],this.noPermission=!1},s.prototype.onPageLoaded=function(e){e&&(this.data.loadPage(e,this.pagination.getValue().merge),this.loading=!1,this.onDataReady(e))},s.prototype.setupDefaultColumns=function(e){if(void 0===e&&(e="default"),this.data){var t=this.getLayoutPreset(e);this.data.setColumns(t)}},s.prototype.onPreviewFile=function(e){e&&this.preview.emit(new se(e))},s.prototype.onNodeClick=function(e){var t=new CustomEvent("node-click",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t);var n=new se(e);this.nodeClick.emit(n),n.defaultPrevented||this.navigate&&this.navigationMode===s.SINGLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))},s.prototype.onNodeDblClick=function(e){var t=new CustomEvent("node-dblclick",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t);var n=new se(e);this.nodeDblClick.emit(n),n.defaultPrevented||this.navigate&&this.navigationMode===s.DOUBLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))},s.prototype.onNodeSelect=function(e){this.selection=e.selection.map(function(e){return e.node});var t=new CustomEvent("node-select",{detail:{node:e.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t)},s.prototype.onNodeUnselect=function(e){this.selection=e.selection.map(function(e){return e.node});var t=new CustomEvent("node-unselect",{detail:{node:e.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t)},s.prototype.onShowRowContextMenu=function(e){if(this.contextMenuActions){var t=e.value,n=t.row.node;n&&(t.actions=this.getContextActions(n)||[])}},s.prototype.onShowRowActionsMenu=function(e){if(this.contentActions){var t=e.value,n=t.row.node;n&&(t.actions=this.getNodeActions(n)||[])}},s.prototype.onExecuteRowAction=function(e){if(this.contentActions){var t=e.value,n=t.row.node,i=t.action;this.executeContentAction(n,i)}},s.prototype.enforceSingleClickNavigationForMobile=function(){this.isMobile()&&(this.navigationMode=s.SINGLE_CLICK_NAVIGATION)},s.prototype.canNavigateFolder=function(e){var t=!1;return this.customResourcesService.isCustomSource(this.currentFolderId)?t=!1:e&&e.entry&&e.entry.isFolder&&(t=!0),t},s.prototype.loadLayoutPresets=function(){var e=this.appConfig.get("document-list.presets",null);this.layoutPresets=e?Object.assign({},ne,e):ne},s.prototype.onDataReady=function(e){this.ready.emit(e),this.pagination.next(e.list.pagination)},s.prototype.updatePagination=function(e){this.reload()},s.prototype.navigateTo=function(e){this.currentFolderId=e,this.resetNewFolderPagination(),this.loadFolder(),this.folderChange.emit(new le({id:e}))},s.prototype.resetNewFolderPagination=function(){this.folderNode=null,this.pagination.value.skipCount=0},s.prototype.getCorrespondingNodeIds=function(e){var n=this;return this.customResourcesService.isCustomSource(e)?this.customResourcesService.getCorrespondingNodeIds(e,this.pagination.getValue()):e?new a.Observable(function(t){n.documentListService.getFolderNode(e,n.includeFields).subscribe(function(e){t.next([e.id]),t.complete()})}):void 0},s.prototype.ngOnDestroy=function(){this.contextActionHandlerSubscription&&(this.contextActionHandlerSubscription.unsubscribe(),this.contextActionHandlerSubscription=null)},s.prototype.handleError=function(e){e.message&&403===JSON.parse(e.message).error.statusCode&&(this.loading=!1,this.noPermission=!0),this.error.emit(e)},s}();pe.SINGLE_CLICK_NAVIGATION="click",pe.DOUBLE_CLICK_NAVIGATION="dblclick",pe.DEFAULT_PAGE_SIZE=20,pe.decorators=[{type:l.Component,args:[{selector:"adf-document-list",styles:[""],template:'<adf-datatable\n    #dataTable\n    [selectionMode]="selectionMode"\n    [data]="data"\n    [actions]="contentActions"\n    [actionsPosition]="contentActionsPosition"\n    [multiselect]="multiselect"\n    [allowDropFiles]="allowDropFiles"\n    [contextMenu]="contextMenuActions"\n    [rowStyle]="rowStyle"\n    [rowStyleClass]="rowStyleClass"\n    [loading]="loading"\n    [display]="display"\n    [noPermission]="noPermission"\n    [showHeader]="!isEmpty() && showHeader"\n    (showRowContextMenu)="onShowRowContextMenu($event)"\n    (showRowActionsMenu)="onShowRowActionsMenu($event)"\n    (executeRowAction)="onExecuteRowAction($event)"\n    (rowClick)="onNodeClick($event.value?.node)"\n    (rowDblClick)="onNodeDblClick($event.value?.node)"\n    (row-select)="onNodeSelect($event.detail)"\n    (row-unselect)="onNodeUnselect($event.detail)">\n\n    <div *ngIf="!isEmptyTemplateDefined()">\n        <no-content-template>\n            <ng-template>\n                <adf-empty-list>\n                    <div class="adf-empty-list_template adf-empty-folder">\n                        <div class="adf-empty-folder-this-space-is-empty">{{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}}</div>\n                        <div fxHide.lt-md="true" class="adf-empty-folder-drag-drop">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate }}</div>\n                        <div fxHide.lt-md="true" class="adf-empty-folder-any-files-here-to-add">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.SUBTITLE\' | translate }}</div>\n                        <img class="adf-empty-folder-image" [src]="emptyFolderImageUrl">\n                    </div>\n                    \x3c!-- <div adf-empty-list-header class="adf-empty-list-header"> {{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}} </div> --\x3e\n                </adf-empty-list>\n            </ng-template>\n        </no-content-template>\n    </div>\n\n    <div *ngIf="!isNoPermissionTemplateDefined()">\n        <no-permission-template>\n            <ng-template>\n                <div class="adf-no-permission__template">\n                    <mat-icon>ic_error</mat-icon>\n                    <p class="adf-no-permission__template--text">{{ \'ADF-DOCUMENT-LIST.NO_PERMISSION\' | translate }}</p>\n                </div>\n            </ng-template>\n        </no-permission-template>\n    </div>\n\n    <div>\n        <loading-content-template>\n            <ng-template>\n                <div class="adf-document-list-loading-container">\n                    <mat-progress-spinner\n                        id="adf-document-list-loading"\n                        class="adf-document-list-loading-margin"\n                        [color]="\'primary\'"\n                        [mode]="\'indeterminate\'">\n                    </mat-progress-spinner>\n                </div>\n            </ng-template>\n        </loading-content-template>\n    </div>\n</adf-datatable>\n',encapsulation:l.ViewEncapsulation.None}]}],pe.ctorParameters=function(){return[{type:_},{type:l.NgZone},{type:l.ElementRef},{type:c.AppConfigService},{type:c.UserPreferencesService},{type:ce},{type:c.ContentService}]},pe.propDecorators={columnList:[{type:l.ContentChild,args:[c.DataColumnListComponent]}],includeFields:[{type:l.Input}],display:[{type:l.Input}],permissionsStyle:[{type:l.Input}],locationFormat:[{type:l.Input}],navigate:[{type:l.Input}],showHeader:[{type:l.Input}],navigationMode:[{type:l.Input}],thumbnails:[{type:l.Input}],selectionMode:[{type:l.Input}],multiselect:[{type:l.Input}],contentActions:[{type:l.Input}],contentActionsPosition:[{type:l.Input}],contextMenuActions:[{type:l.Input}],emptyFolderImageUrl:[{type:l.Input}],allowDropFiles:[{type:l.Input}],sorting:[{type:l.Input}],rowStyle:[{type:l.Input}],rowStyleClass:[{type:l.Input}],loading:[{type:l.Input}],rowFilter:[{type:l.Input}],imageResolver:[{type:l.Input}],currentFolderId:[{type:l.Input}],folderNode:[{type:l.Input}],node:[{type:l.Input}],maxItems:[{type:l.Input}],skipCount:[{type:l.Input}],enableInfiniteScrolling:[{type:l.Input}],nodeClick:[{type:l.Output}],nodeDblClick:[{type:l.Output}],folderChange:[{type:l.Output}],preview:[{type:l.Output}],ready:[{type:l.Output}],error:[{type:l.Output}],dataTable:[{type:l.ViewChild,args:["dataTable"]}],onShowContextMenu:[{type:l.HostListener,args:["contextmenu",["$event"]]}]};var ue=function(){function e(e,t){this.documentList=e,this.logService=t,this.logService.log("ContentColumnListComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnListComponent instead.")}return e.prototype.registerColumn=function(e){return!(!this.documentList||!e)&&(this.documentList.data.getColumns().push(e),!0)},e}();ue.decorators=[{type:l.Component,args:[{selector:"content-columns",template:""}]}],ue.ctorParameters=function(){return[{type:pe},{type:c.LogService}]};var he=function(){function e(e,t){this.list=e,this.logService=t,this.type="text",this.sortable=!1,this.title="",this.logService.log("ContentColumnComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnComponent instead.")}return e.prototype.ngOnInit=function(){this.srTitle||"$thumbnail"!==this.key||(this.srTitle="Thumbnail")},e.prototype.ngAfterContentInit=function(){this.register()},e.prototype.register=function(){return!!this.list&&this.list.registerColumn(this)},e}();he.decorators=[{type:l.Component,args:[{selector:"content-column",template:""}]}],he.ctorParameters=function(){return[{type:ue},{type:c.LogService}]},he.propDecorators={key:[{type:l.Input}],type:[{type:l.Input}],format:[{type:l.Input}],sortable:[{type:l.Input}],title:[{type:l.Input}],template:[{type:l.ContentChild,args:[l.TemplateRef]}],srTitle:[{type:l.Input,args:["sr-title"]}],cssClass:[{type:l.Input,args:["class"]}]};var fe=function(e){e&&(this.type=e.type||null,this.action=e.action||null,this.permission=e.permission||null)},me=function(){function e(e,t,n,i,o,r){this.contentDialogService=e,this.dialogRef=t,this.content=n,this.documentListService=i,this.apiService=o,this.dialog=r,this.error=new l.EventEmitter}return e.prototype.downloadNode=function(e){new x(this.apiService,this.dialog).downloadNode(e)},e.prototype.copyContent=function(e,t){return this.doFileOperation("copy","content",e,t)},e.prototype.copyFolder=function(e,t){return this.doFileOperation("copy","folder",e,t)},e.prototype.moveContent=function(e,t){return this.doFileOperation("move","content",e,t)},e.prototype.moveFolder=function(e,t){return this.doFileOperation("move","folder",e,t)},e.prototype.doFileOperation=function(n,i,o,e){var r=this,a=new d.Subject;return this.contentDialogService.openCopyMoveDialog(n,o,e).subscribe(function(e){var t=e[0];r.documentListService[n+"Node"].call(r.documentListService,o.id,t.id).subscribe(a.next.bind(a,"OPERATION.SUCCES."+i.toUpperCase()+"."+n.toUpperCase()),a.error.bind(a))},function(e){return a.error(e),a}),a},e}();me.decorators=[{type:l.Injectable}],me.ctorParameters=function(){return[{type:V},{type:t.MatDialog},{type:c.ContentService},{type:_},{type:c.AlfrescoApiService},{type:t.MatDialog}]},me.propDecorators={error:[{type:l.Output}]};var ge=function(){function e(e,t,n,i,o){this.nodeActionsService=e,this.contentNodeDialogService=t,this.translation=n,this.documentListService=i,this.contentService=o,this.permissionEvent=new d.Subject,this.error=new d.Subject,this.success=new d.Subject,this.handlers={},this.setupActionHandlers()}return e.prototype.getHandler=function(e){if(e){var t=e.toLowerCase();return this.handlers[t]||null}return null},e.prototype.setHandler=function(e,t){if(e){var n=e.toLowerCase();return this.handlers[n]=t,!0}return!1},e.prototype.canExecuteAction=function(e){return this.documentListService&&e&&!0===e.entry.isFile},e.prototype.setupActionHandlers=function(){this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers["delete"]=this.deleteNode.bind(this),this.handlers.download=this.downloadNode.bind(this),this.handlers.lock=this.lockNode.bind(this)},e.prototype.lockNode=function(e,t,n){return this.contentNodeDialogService.openLockNodeDialog(e.entry)},e.prototype.downloadNode=function(e,t,n){this.nodeActionsService.downloadNode(e)},e.prototype.copyNode=function(e,t,n){var i=this.nodeActionsService.copyContent(e.entry,n);return this.prepareHandlers(i,"content","copy",t,n),i},e.prototype.moveNode=function(e,t,n){var i=this.nodeActionsService.moveContent(e.entry,n);return this.prepareHandlers(i,"content","move",t,n),i},e.prototype.prepareHandlers=function(e,t,n,i,o){var r=this;e.subscribe(function(e){r.success.next(e)},this.error.next.bind(this.error))},e.prototype.deleteNode=function(t,e,n){var i,o=this;if(this.canExecuteAction(t))return this.contentService.hasPermission(t.entry,n)?((i=this.documentListService.deleteNode(t.entry.id)).subscribe(function(){var e=o.translation.instant("CORE.DELETE_NODE.SINGULAR",{name:t.entry.name});o.success.next(e)},function(){var e=o.translation.instant("CORE.DELETE_NODE.ERROR_SINGULAR",{name:t.entry.name});o.error.next(e)}),i):(this.permissionEvent.next(new fe({type:"content",action:"delete",permission:n})),a.Observable["throw"](new Error("No permission to delete")))},e}();ge.decorators=[{type:l.Injectable}],ge.ctorParameters=function(){return[{type:me},{type:V},{type:c.TranslationService},{type:_},{type:c.ContentService}]};var ye=function(){function e(e,t,n,i){this.nodeActionsService=e,this.documentListService=t,this.contentService=n,this.translation=i,this.permissionEvent=new d.Subject,this.error=new d.Subject,this.success=new d.Subject,this.handlers={},this.setupActionHandlers()}return e.prototype.getHandler=function(e){if(e){var t=e.toLowerCase();return this.handlers[t]||null}return null},e.prototype.setHandler=function(e,t){if(e){var n=e.toLowerCase();return this.handlers[n]=t,!0}return!1},e.prototype.canExecuteAction=function(e){return this.documentListService&&e&&!0===e.entry.isFolder},e.prototype.setupActionHandlers=function(){this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers["delete"]=this.deleteNode.bind(this),this.handlers.download=this.downloadNode.bind(this)},e.prototype.downloadNode=function(e,t,n){this.nodeActionsService.downloadNode(e)},e.prototype.copyNode=function(e,t,n){var i=this.nodeActionsService.copyFolder(e.entry,n);return this.prepareHandlers(i,"folder","copy",t,n),i},e.prototype.moveNode=function(e,t,n){var i=this.nodeActionsService.moveFolder(e.entry,n);return this.prepareHandlers(i,"folder","move",t,n),i},e.prototype.prepareHandlers=function(e,t,n,i,o){var r=this;e.subscribe(function(e){i&&"function"==typeof i.reload&&i.reload(),r.success.next(e)},this.error.next.bind(this.error))},e.prototype.deleteNode=function(t,n,e){var i,o=this;if(this.canExecuteAction(t))return this.contentService.hasPermission(t.entry,e)?((i=this.documentListService.deleteNode(t.entry.id)).subscribe(function(){n&&"function"==typeof n.reload&&n.reload();var e=o.translation.instant("CORE.DELETE_NODE.SINGULAR",{name:t.entry.name});o.success.next(e)},function(){var e=o.translation.instant("CORE.DELETE_NODE.ERROR_SINGULAR",{name:t.entry.name});o.error.next(e)}),i):(this.permissionEvent.next(new fe({type:"folder",action:"delete",permission:e})),a.Observable["throw"](new Error("No permission to delete")))},e}();ye.decorators=[{type:l.Injectable}],ye.ctorParameters=function(){return[{type:me},{type:_},{type:c.ContentService},{type:c.TranslationService}]};var ve=function(){function e(e){this.documentList=e}return e.prototype.registerAction=function(e){return!(!this.documentList||!e)&&(this.documentList.actions.push(e),!0)},e}();ve.decorators=[{type:l.Component,args:[{selector:"content-actions",template:""}]}],ve.ctorParameters=function(){return[{type:pe}]};var be=function(){function e(e,t,n){this.list=e,this.documentActions=t,this.folderActions=n,this.title="Action",this.target=oe.All,this.disabled=!1,this.execute=new l.EventEmitter,this.permissionEvent=new l.EventEmitter,this.error=new l.EventEmitter,this.success=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.target===oe.All?(this.generateAction(oe.Folder),this.generateAction(oe.Document)):this.generateAction(this.target)},e.prototype.register=function(e){return!!this.list&&this.list.registerAction(e)},e.prototype.generateAction=function(e){var t=this,n=new ie({title:this.title,icon:this.icon,permission:this.permission,disableWithNoPermission:this.disableWithNoPermission,target:e,disabled:this.disabled});this.handler&&(n.handler=this.getSystemHandler(e,this.handler)),this.execute&&(n.execute=function(e){t.execute.emit({value:e})}),this.register(n)},e.prototype.getSystemHandler=function(e,t){var n=this;if(e){var i=e.toLowerCase();if(i===oe.Document)return this.documentActions?(this.documentActions.permissionEvent.subscribe(function(e){n.permissionEvent.emit(e)}),this.documentActions.error.subscribe(function(e){n.error.emit(e)}),this.documentActions.success.subscribe(function(e){n.success.emit(e)}),this.documentActions.getHandler(t)):null;if(i===oe.Folder)return this.folderActions?(this.folderActions.permissionEvent.subscribe(function(e){n.permissionEvent.emit(e)}),this.folderActions.error.subscribe(function(e){n.error.emit(e)}),this.folderActions.success.subscribe(function(e){n.success.emit(e)}),this.folderActions.getHandler(t)):null}return null},e}();be.decorators=[{type:l.Component,args:[{selector:"content-action",template:"",providers:[ge,ye]}]}],be.ctorParameters=function(){return[{type:ve},{type:ge},{type:ye}]},be.propDecorators={title:[{type:l.Input}],icon:[{type:l.Input}],handler:[{type:l.Input}],target:[{type:l.Input}],permission:[{type:l.Input}],disableWithNoPermission:[{type:l.Input}],disabled:[{type:l.Input}],execute:[{type:l.Output}],permissionEvent:[{type:l.Output}],error:[{type:l.Output}],success:[{type:l.Output}]};var Se=function(){function e(e){this.documentList=e}return e.prototype.ngAfterContentInit=function(){this.documentList.emptyFolderTemplate=this.template,this.documentList.dataTable.noContentTemplate=this.template},e}();Se.decorators=[{type:l.Directive,args:[{selector:"empty-folder-content"}]}],Se.ctorParameters=function(){return[{type:pe}]},Se.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var Ee=function(){function e(e){this.documentList=e}return e.prototype.ngAfterContentInit=function(){this.documentList.noPermissionTemplate=this.template,this.documentList.dataTable.noPermissionTemplate=this.template},e}();Ee.decorators=[{type:l.Directive,args:[{selector:"no-permission-content"}]}],Ee.ctorParameters=function(){return[{type:pe}]},Ee.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var Ie=function(){},Ce=function(){},Ae=function(){},Oe=function(){},we=function(){this.properties={}},De=function(){},Te=function(){},Fe=function(){},Le=function(){},Ne=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),this.isFolder=!0,this.isFile=!0,this.css=e,this.permission=t,this.isFile=n,this.isFolder=i},xe=function(){function e(e,t,n){this.uploadService=e,this.nodesApi=t,this.translateService=n,this.FileUploadStatus=c.FileUploadStatus,this.files=[],this.error=new l.EventEmitter}return e.prototype.cancelFile=function(e){this.uploadService.cancelUpload(e)},e.prototype.removeFile=function(e){var t=this;this.deleteNode(e).subscribe(function(){e.status===c.FileUploadStatus.Error&&t.notifyError(e),t.uploadService.cancelUpload(e)})},e.prototype.cancelAllFiles=function(){var i=this;this.getUploadingFiles().forEach(function(e){return i.uploadService.cancelUpload(e)});var e=this.files.filter(function(e){return e.status===c.FileUploadStatus.Complete}).map(function(e){return i.deleteNode(e)});a.Observable.forkJoin.apply(a.Observable,L(e)).subscribe(function(e){var t,n=e.filter(function(e){return e.status===c.FileUploadStatus.Error});n.length&&i.notifyError.apply(i,L(n)),(t=i.uploadService).cancelUpload.apply(t,L(e))})},e.prototype.isUploadCompleted=function(){return!this.isUploadCancelled()&&Boolean(this.files.length)&&!this.files.some(function(e){var t=e.status;return t===c.FileUploadStatus.Starting||t===c.FileUploadStatus.Progress||t===c.FileUploadStatus.Pending})},e.prototype.isUploadCancelled=function(){return!!this.files.length&&this.files.every(function(e){var t=e.status;return t===c.FileUploadStatus.Aborted||t===c.FileUploadStatus.Cancelled||t===c.FileUploadStatus.Deleted})},e.prototype.deleteNode=function(t){var e=t.data.entry.id;return this.nodesApi.deleteNode(e,{permanent:!0}).map(function(){return t.status=c.FileUploadStatus.Deleted,t})["catch"](function(e){return t.status=c.FileUploadStatus.Error,a.Observable.of(t)})},e.prototype.notifyError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;n=1===e.length?this.translateService.instant("FILE_UPLOAD.MESSAGES.REMOVE_FILE_ERROR",{fileName:e[0].name}):this.translateService.instant("FILE_UPLOAD.MESSAGES.REMOVE_FILES_ERROR",{total:e.length}),this.error.emit(n)},e.prototype.getUploadingFiles=function(){return this.files.filter(function(e){if(e.status===c.FileUploadStatus.Pending||e.status===c.FileUploadStatus.Progress||e.status===c.FileUploadStatus.Starting)return e})},e}();xe.decorators=[{type:l.Component,args:[{selector:"adf-file-uploading-list",template:'<div class="upload-list">\n    <ng-template\n        ngFor\n        [ngForOf]="files"\n        [ngForTemplate]="template">\n    </ng-template>\n</div>\n',styles:[":host{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}"]}]}],xe.ctorParameters=function(){return[{type:c.UploadService},{type:c.NodesApiService},{type:c.TranslationService}]},xe.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}],files:[{type:l.Input}],error:[{type:l.Output}]};var Me=function(){function e(e,t){this.uploadService=e,this.changeDetecor=t,this.position="right",this.error=new l.EventEmitter,this.filesUploadingList=[],this.isDialogActive=!1,this.totalCompleted=0,this.totalErrors=0,this.isDialogMinimized=!1,this.isConfirmation=!1}return e.prototype.ngOnInit=function(){var n=this;this.listSubscription=this.uploadService.queueChanged.subscribe(function(e){n.filesUploadingList=e,n.filesUploadingList.length&&(n.isDialogActive=!0)}),this.counterSubscription=a.Observable.merge(this.uploadService.fileUploadComplete,this.uploadService.fileUploadDeleted).subscribe(function(e){n.totalCompleted=e.totalComplete,n.changeDetecor.detectChanges()}),this.errorSubscription=this.uploadService.fileUploadError.subscribe(function(e){n.totalErrors=e.totalError,n.changeDetecor.detectChanges()}),this.fileUploadSubscription=this.uploadService.fileUpload.subscribe(function(){n.changeDetecor.detectChanges()}),this.uploadService.fileDeleted.subscribe(function(t){if(n.filesUploadingList){var e=n.filesUploadingList.find(function(e){return e.data.entry.id===t});e&&(e.status=c.FileUploadStatus.Cancelled,n.changeDetecor.detectChanges())}})},e.prototype.toggleConfirmation=function(){this.isConfirmation=!this.isConfirmation,this.isDialogMinimized&&(this.isDialogMinimized=!1)},e.prototype.cancelAllUploads=function(){this.toggleConfirmation(),this.uploadList.cancelAllFiles()},e.prototype.toggleMinimized=function(){this.isDialogMinimized=!this.isDialogMinimized,this.changeDetecor.detectChanges()},e.prototype.close=function(){this.isConfirmation=!1,this.totalCompleted=0,this.totalErrors=0,this.filesUploadingList=[],this.isDialogActive=!1,this.isDialogMinimized=!1,this.uploadService.clearQueue(),this.changeDetecor.detectChanges()},e.prototype.ngOnDestroy=function(){this.uploadService.clearQueue(),this.listSubscription.unsubscribe(),this.counterSubscription.unsubscribe(),this.fileUploadSubscription.unsubscribe(),this.errorSubscription.unsubscribe()},e}();Me.decorators=[{type:l.Component,args:[{selector:"adf-file-uploading-dialog, file-uploading-dialog",template:'<div *ngIf="isDialogActive"\n     class="upload-dialog"\n     [class.upload-dialog--minimized]="isDialogMinimized"\n     [class.upload-dialog--position-left]="position === \'left\'"\n     [class.upload-dialog--position-right]="position === \'right\'">\n    <header class="upload-dialog__header">\n        <button\n            mat-button\n            color="secondary"\n            [disabled]="isConfirmation"\n            (click)="toggleMinimized()">\n            <mat-icon\n                mat-list-icon\n                title="{{ (isDialogMinimized ? \'ADF_FILE_UPLOAD.BUTTON.MAXIMIZE\': \'ADF_FILE_UPLOAD.BUTTON.MINIMIZE\') | translate }}">\n                    {{ isDialogMinimized ? \'keyboard_arrow_up\' : \'keyboard_arrow_down\' }}\n            </mat-icon>\n        </button>\n\n        <span\n            class="upload-dialog__title"\n            *ngIf="!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_PROGRESS\'\n                | translate: {\n                    completed: totalCompleted,\n                    total: filesUploadingList.length\n                }\n            }}\n        </span>\n\n        <span\n            class="upload-dialog__title"\n            *ngIf="uploadList.isUploadCompleted()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_COMPLETED\'\n                | translate: {\n                    completed: totalCompleted,\n                    total: filesUploadingList.length\n                }\n            }}\n        </span>\n\n        <span\n            class="upload-dialog__title"\n            *ngIf="uploadList.isUploadCancelled()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_CANCELED\' | translate }}\n        </span>\n    </header>\n\n    <section\n        class="upload-dialog__info"\n        *ngIf="totalErrors">\n        {{\n            (totalErrors > 1\n                 ? \'FILE_UPLOAD.MESSAGES.UPLOAD_ERRORS\'\n                 : \'FILE_UPLOAD.MESSAGES.UPLOAD_ERROR\')\n                 | translate: { total: totalErrors }\n        }}\n    </section>\n\n    <section\n        class="upload-dialog__content"\n        [class.upload-dialog--padding]="isConfirmation">\n        <adf-file-uploading-list\n            (error)="onError($event)"\n            [class.upload-dialog--hide]="isConfirmation"\n            #uploadList\n            [files]="filesUploadingList">\n                <ng-template let-file="$implicit">\n                     <adf-file-uploading-list-row\n                        [file]="file"\n                        (remove)="uploadList.removeFile(file)"\n                        (cancel)="uploadList.cancelFile(file)">\n                    </adf-file-uploading-list-row>\n                </ng-template>\n        </adf-file-uploading-list>\n\n        <div\n            class="upload-dialog__confirmation"\n            [class.upload-dialog--hide]="!isConfirmation">\n                <p class="upload-dialog__confirmation--title">\n                    {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TITLE\' | translate }}\n                </p>\n\n                <p class="upload-dialog__confirmation--text">\n                    {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TEXT\' | translate }}\n                </p>\n        </div>\n    </section>\n\n    <footer\n        class="upload-dialog__actions"\n        [class.upload-dialog--hide]="isConfirmation">\n        <button\n            color="primary"\n            mat-button\n            *ngIf="!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()"\n            (click)="toggleConfirmation()">\n            {{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_ALL\' | translate }}\n        </button>\n\n        <button\n            *ngIf="uploadList.isUploadCompleted() || uploadList.isUploadCancelled()"\n            mat-button\n            color="primary"\n            (click)="close($event)">\n            {{ \'ADF_FILE_UPLOAD.BUTTON.CLOSE\' | translate }}\n        </button>\n    </footer>\n\n    <footer\n        class="upload-dialog__actions"\n        [class.upload-dialog--hide]="!isConfirmation">\n        <button\n            color="secondary"\n            mat-button\n            (click)="cancelAllUploads()">\n            {{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CANCEL\' | translate }}\n        </button>\n\n        <button\n            mat-button\n            color="primary"\n            (click)="toggleConfirmation()">\n            {{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CONTINUE\' | translate }}\n        </button>\n    </footer>\n</div>\n',styles:[""]}]}],Me.ctorParameters=function(){return[{type:c.UploadService},{type:l.ChangeDetectorRef}]},Me.propDecorators={uploadList:[{type:l.ViewChild,args:["uploadList"]}],position:[{type:l.Input}],error:[{type:l.Output}]};var Re=function(){function e(){this.cancel=new l.EventEmitter,this.remove=new l.EventEmitter,this.FileUploadStatus=c.FileUploadStatus}return e.prototype.onCancel=function(e){this.cancel.emit(e)},e.prototype.onRemove=function(e){this.remove.emit(e)},e}();Re.decorators=[{type:l.Component,args:[{selector:"adf-file-uploading-list-row",template:'<div class="adf-file-uploading-row">\n    <mat-icon\n        mat-list-icon\n        class="adf-file-uploading-row__type">\n        insert_drive_file\n    </mat-icon>\n\n    <span\n        class="adf-file-uploading-row__name"\n        title="{{ file.name }}">\n        {{ file.name }}\n    </span>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Progress || file.status === FileUploadStatus.Starting"\n        (click)="onCancel(file)"\n        class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle"\n        title="{{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_FILE\' | translate }}">\n        <span class="adf-file-uploading-row__status">\n            {{ file.progress.loaded | adfFileSize }} / {{ file.progress.total | adfFileSize }}\n        </span>\n\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--cancel">\n            clear\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Complete"\n        (click)="onRemove(file)"\n        class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle"\n        title="{{ \'ADF_FILE_UPLOAD.BUTTON.REMOVE_FILE\' | translate }}">\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__status adf-file-uploading-row__status--done">\n            check_circle\n        </mat-icon>\n\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n            remove_circle\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Pending"\n        (click)="onCancel(file)"\n        class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle">\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__status adf-file-uploading-row__status--pending">\n            schedule\n        </mat-icon>\n\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n            remove_circle\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Error"\n        class="adf-file-uploading-row__block adf-file-uploading-row__status--error"\n        title="{{ file.response }}">\n        <mat-icon mat-list-icon>\n            report_problem\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Cancelled  ||\n            file.status === FileUploadStatus.Aborted ||\n            file.status === FileUploadStatus.Deleted"\n        class="adf-file-uploading-row__block adf-file-uploading-row__status--cancelled">\n        {{ \'ADF_FILE_UPLOAD.STATUS.FILE_CANCELED_STATUS\' | translate }}\n    </div>\n<div>',styles:[""]}]}],Re.ctorParameters=function(){return[]},Re.propDecorators={file:[{type:l.Input}],cancel:[{type:l.Output}],remove:[{type:l.Output}]};var Pe=function(){function e(){this.acceptedFilesType="*"}return e.prototype.isFileAcceptable=function(e){return"*"===this.acceptedFilesType||-1!==this.acceptedFilesType.split(",").map(function(e){return e.replace(/^\./,"")}).indexOf(e.extension)},e}();Pe.propDecorators={acceptedFilesType:[{type:l.Input}]};var ke=function(r){function e(e,t,n,i){var o=r.call(this)||this;return o.uploadService=e,o.contentService=t,o.translateService=n,o.logService=i,o.disabled=!1,o.uploadFolders=!1,o.multipleFiles=!1,o.versioning=!1,o.tooltip=null,o.rootFolderId="-root-",o.success=new l.EventEmitter,o.error=new l.EventEmitter,o.createFolder=new l.EventEmitter,o.permissionEvent=new l.EventEmitter,o.hasPermission=!1,o.permissionValue=new d.Subject,o}return D(e,r),e.prototype.ngOnInit=function(){var t=this;this.permissionValue.subscribe(function(e){t.hasPermission=e})},e.prototype.ngOnChanges=function(e){var t=e.rootFolderId;t&&t.currentValue&&this.checkPermission()},e.prototype.isButtonDisabled=function(){return!!this.disabled||undefined},e.prototype.onFilesAdded=function(e){var t=c.FileUtils.toFileArray(e.currentTarget.files);this.hasPermission?this.uploadFiles(t):this.permissionEvent.emit(new fe({type:"content",action:"upload",permission:"create"})),e.target.value=""},e.prototype.onDirectoryAdded=function(e){if(this.hasPermission){var t=c.FileUtils.toFileArray(e.currentTarget.files);this.uploadFiles(t)}else this.permissionEvent.emit(new fe({type:"content",action:"upload",permission:"create"}));e.target.value=""},e.prototype.uploadFiles=function(e){var t,n=e.map(this.createFileModel.bind(this)).filter(this.isFileAcceptable.bind(this)).filter(this.isFileSizeAcceptable.bind(this));0<n.length&&((t=this.uploadService).addToQueue.apply(t,L(n)),this.uploadService.uploadFilesInTheQueue(this.success))},e.prototype.createFileModel=function(e){return new c.FileModel(e,{newVersion:this.versioning,parentId:this.rootFolderId,path:(e.webkitRelativePath||"").replace(/\/[^\/]*$/,"")})},e.prototype.isFileSizeAcceptable=function(e){var t=this,n=!0;return this.isFileSizeAllowed(e)&&(n=!1,this.translateService.get("FILE_UPLOAD.MESSAGES.EXCEED_MAX_FILE_SIZE",{fileName:e.name}).subscribe(function(e){t.error.emit(e)})),n},e.prototype.isFileSizeAllowed=function(e){return this.isMaxFileSizeDefined()&&this.isFileSizeCorrect(e)},e.prototype.isMaxFileSizeDefined=function(){return this.maxFilesSize!==undefined&&null!==this.maxFilesSize},e.prototype.isFileSizeCorrect=function(e){return this.maxFilesSize<0||e.size>this.maxFilesSize},e.prototype.checkPermission=function(){var t=this;if(this.rootFolderId){this.contentService.getNode(this.rootFolderId,{includeSource:!0,include:["allowableOperations"]}).subscribe(function(e){return t.permissionValue.next(t.hasCreatePermission(e.entry))},function(e){return t.error.emit(e)})}},e.prototype.hasCreatePermission=function(e){return!(!e||!e.allowableOperations)&&!!e.allowableOperations.find(function(e){return"create"===e})},e}(Pe);ke.decorators=[{type:l.Component,args:[{selector:"adf-upload-button",template:'<form class="adf-upload-button-file-container">\n    \x3c!--Files Upload--\x3e\n    <a *ngIf="!uploadFolders"\n        [disabled]="isButtonDisabled()"\n        mat-raised-button color="primary">\n        <mat-icon>file_upload</mat-icon>\n\n        \x3c!--Multiple Files Upload--\x3e\n        <span *ngIf="multipleFiles">\n            <label\n                id="upload-multiple-file-label"\n                *ngIf="!staticTitle"\n                for="upload-multiple-files">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n            <label\n                id="upload-multiple-file-label-static"\n                *ngIf="staticTitle"\n                for="upload-multiple-files">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id="upload-multiple-files"\n                data-automation-id="upload-multiple-files"\n                type="file"\n                name="uploadFiles"\n                multiple="multiple"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </span>\n\n        \x3c!--Single Files Upload--\x3e\n        <span *ngIf="!multipleFiles">\n            <label\n                id="upload-single-file-label"\n                *ngIf="!staticTitle"\n                for="upload-single-file">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n            <label\n                id="upload-single-file-label-static"\n                *ngIf="staticTitle"\n                for="upload-single-file">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id="upload-single-file"\n                data-automation-id="upload-single-file"\n                type="file"\n                name="uploadFiles"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </span>\n    </a>\n\n    \x3c!--Folders Upload--\x3e\n    <a *ngIf="uploadFolders"\n        [disabled]="isButtonDisabled()" mat-raised-button color="primary">\n        <mat-icon>file_upload</mat-icon>\n        <label\n            id="uploadFolder-label"\n            *ngIf="!staticTitle"\n            for="uploadFolder">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER\' | translate }}</label>\n        <label\n            id="uploadFolder-label-static"\n            *ngIf="staticTitle"\n            for="uploadFolder">{{ staticTitle }}</label>\n        <input #uploadFolders\n            id="uploadFolder"\n            data-automation-id="uploadFolder"\n            type="file"\n            name="uploadFiles"\n            multiple="multiple"\n            accept="{{acceptedFilesType}}"\n            webkitdirectory directory\n            [attr.disabled]="isButtonDisabled()"\n            [title]="tooltip"\n            (change)="onDirectoryAdded($event)">\n    </a>\n</form>\n',styles:[".adf-upload-button-file-container input{cursor:pointer;height:100%;right:0;opacity:0;position:absolute;top:0;width:300px;z-index:4}"],viewProviders:[{provide:c.EXTENDIBLE_COMPONENT,useExisting:l.forwardRef(function(){return ke})}],encapsulation:l.ViewEncapsulation.None}]}],ke.ctorParameters=function(){return[{type:c.UploadService},{type:c.ContentService},{type:c.TranslationService},{type:c.LogService}]},ke.propDecorators={disabled:[{type:l.Input}],uploadFolders:[{type:l.Input}],multipleFiles:[{type:l.Input}],versioning:[{type:l.Input}],maxFilesSize:[{type:l.Input}],staticTitle:[{type:l.Input}],tooltip:[{type:l.Input}],rootFolderId:[{type:l.Input}],success:[{type:l.Output}],error:[{type:l.Output}],createFolder:[{type:l.Output}],permissionEvent:[{type:l.Output}]};var _e=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return D(e,i),e.prototype.ngOnChanges=function(e){if(i.prototype.ngOnChanges.call(this,e),e.acceptedFilesType){var t=this.translateService.instant("FILE_UPLOAD.VERSION.MESSAGES.NO_ACCEPTED_FILE_TYPES");this.logService.error(t)}this.acceptedFilesType="."+this.node.name.split(".").pop()},e.prototype.createFileModel=function(e){var t=i.prototype.createFileModel.call(this,e);if(t.options.newVersionBaseName=this.node.name,!this.isFileAcceptable(t)){var n=this.translateService.instant("FILE_UPLOAD.VERSION.MESSAGES.INCOMPATIBLE_VERSION");this.error.emit(n)}return t},e}(ke);_e.decorators=[{type:l.Component,args:[{selector:"adf-upload-version-button",template:'<form class="adf-upload-button-file-container">\n    \x3c!--Files Upload--\x3e\n    <a *ngIf="!uploadFolders"\n        [disabled]="isButtonDisabled()"\n        mat-raised-button color="primary">\n        <mat-icon>file_upload</mat-icon>\n\n        \x3c!--Multiple Files Upload--\x3e\n        <span *ngIf="multipleFiles">\n            <label\n                id="upload-multiple-file-label"\n                *ngIf="!staticTitle"\n                for="upload-multiple-files">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n            <label\n                id="upload-multiple-file-label-static"\n                *ngIf="staticTitle"\n                for="upload-multiple-files">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id="upload-multiple-files"\n                data-automation-id="upload-multiple-files"\n                type="file"\n                name="uploadFiles"\n                multiple="multiple"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </span>\n\n        \x3c!--Single Files Upload--\x3e\n        <span *ngIf="!multipleFiles">\n            <label\n                id="upload-single-file-label"\n                *ngIf="!staticTitle"\n                for="upload-single-file">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n            <label\n                id="upload-single-file-label-static"\n                *ngIf="staticTitle"\n                for="upload-single-file">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id="upload-single-file"\n                data-automation-id="upload-single-file"\n                type="file"\n                name="uploadFiles"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </span>\n    </a>\n\n    \x3c!--Folders Upload--\x3e\n    <a *ngIf="uploadFolders"\n        [disabled]="isButtonDisabled()" mat-raised-button color="primary">\n        <mat-icon>file_upload</mat-icon>\n        <label\n            id="uploadFolder-label"\n            *ngIf="!staticTitle"\n            for="uploadFolder">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER\' | translate }}</label>\n        <label\n            id="uploadFolder-label-static"\n            *ngIf="staticTitle"\n            for="uploadFolder">{{ staticTitle }}</label>\n        <input #uploadFolders\n            id="uploadFolder"\n            data-automation-id="uploadFolder"\n            type="file"\n            name="uploadFiles"\n            multiple="multiple"\n            accept="{{acceptedFilesType}}"\n            webkitdirectory directory\n            [attr.disabled]="isButtonDisabled()"\n            [title]="tooltip"\n            (change)="onDirectoryAdded($event)">\n    </a>\n</form>\n',styles:[".adf-upload-button-file-container input{cursor:pointer;height:100%;right:0;opacity:0;position:absolute;top:0;width:300px;z-index:4}"],viewProviders:[{provide:c.EXTENDIBLE_COMPONENT,useExisting:l.forwardRef(function(){return _e})}],encapsulation:l.ViewEncapsulation.None}]}],_e.ctorParameters=function(){return[]},_e.propDecorators={node:[{type:l.Input}]};var Ue=function(o){function e(e,t,n){var i=o.call(this)||this;return i.uploadService=e,i.translateService=t,i.notificationService=n,i.disabled=!1,i.versioning=!1,i.success=new l.EventEmitter,i.error=new l.EventEmitter,i}return D(e,o),e.prototype.onFilesDropped=function(e){var t=this;if(!this.disabled&&e.length){var n=e.map(function(e){return new c.FileModel(e,{newVersion:t.versioning,path:"/",parentId:t.parentId})}).filter(this.isFileAcceptable.bind(this));this.addNodeInUploadQueue(n)}},e.prototype.onFilesEntityDropped=function(n){var i=this;this.disabled||n.file(function(e){var t=new c.FileModel(e,{newVersion:i.versioning,parentId:i.parentId,path:n.fullPath.replace(n.name,"")});i.isFileAcceptable(t)&&i.addNodeInUploadQueue([t])})},e.prototype.onFolderEntityDropped=function(e){var n=this;!this.disabled&&e.isDirectory&&c.FileUtils.flattern(e).then(function(e){var t=e.map(function(e){return new c.FileModel(e.file,{newVersion:n.versioning,parentId:n.parentId,path:e.relativeFolder})}).filter(n.isFileAcceptable.bind(n));n.addNodeInUploadQueue(t)})},e.prototype.addNodeInUploadQueue=function(e){var t,n=this;e.length&&((t=this.uploadService).addToQueue.apply(t,L(e)),this.uploadService.uploadFilesInTheQueue(this.success),this.uploadService.fileUploadError.subscribe(function(e){n.error.emit(e)}))},e.prototype.showUndoNotificationBar=function(t){var e,n,i=this;e=this.translateService.get("FILE_UPLOAD.MESSAGES.PROGRESS"),n=this.translateService.get("FILE_UPLOAD.ACTION.UNDO"),this.notificationService.openSnackMessageAction(e.value,n.value,3e3).onAction().subscribe(function(){var e;(e=i.uploadService).cancelUpload.apply(e,L(t))})},e.prototype.isDroppable=function(){return!this.disabled},e.prototype.onUploadFiles=function(e){var t=this;if(e.stopPropagation(),e.preventDefault(),this.hasCreatePermission(e.detail.data.obj.entry)){var n=e.detail.files;if(n&&0<n.length){var i=this.parentId;e.detail.data&&e.detail.data.obj.entry.isFolder&&(i=e.detail.data.obj.entry.id||this.parentId);var o=n.map(function(e){return new c.FileModel(e.file,{newVersion:t.versioning,path:e.relativeFolder,parentId:i})}).filter(this.isFileAcceptable.bind(this));this.addNodeInUploadQueue(o)}}},e.prototype.hasCreatePermission=function(e){var t=!1;e&&e.allowableOperations&&(t=!!e.allowableOperations.find(function(e){return"create"===e}));return t},e}(Pe);Ue.decorators=[{type:l.Component,args:[{selector:"adf-upload-drag-area",template:'<div [file-draggable]="isDroppable()" id="UploadBorder" class="upload-border"\n     (filesDropped)="onFilesDropped($event)"\n     (filesEntityDropped)="onFilesEntityDropped($event)"\n     (folderEntityDropped)="onFolderEntityDropped($event)"\n     (upload-files)="onUploadFiles($event)"\n     dropzone="" webkitdropzone="*" #droparea>\n    <ng-content></ng-content>\n</div>\n',styles:["adf-upload-drag-area{overflow:hidden}.upload-border{vertical-align:middle;text-align:center;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.file-draggable__input-focus{color:#2196f3;border:1px dashed #2196f3}"],host:{"class":"adf-upload-drag-area"},viewProviders:[{provide:c.EXTENDIBLE_COMPONENT,useExisting:l.forwardRef(function(){return Ue})}],encapsulation:l.ViewEncapsulation.None}]}],Ue.ctorParameters=function(){return[{type:c.UploadService},{type:c.TranslationService},{type:c.NotificationService}]},Ue.propDecorators={disabled:[{type:l.Input}],versioning:[{type:l.Input}],parentId:[{type:l.Input}],success:[{type:l.Output}],error:[{type:l.Output}]};var Be=function(){function e(e,t){this.ngZone=t,this.enabled=!0,this.filesDropped=new l.EventEmitter,this.filesEntityDropped=new l.EventEmitter,this.folderEntityDropped=new l.EventEmitter,this.cssClassName="file-draggable__input-focus",this.element=e.nativeElement}return e.prototype.ngOnInit=function(){var e=this;this.ngZone.runOutsideAngular(function(){e.element.addEventListener("dragenter",e.onDragEnter.bind(e)),e.element.addEventListener("dragover",e.onDragOver.bind(e)),e.element.addEventListener("dragleave",e.onDragLeave.bind(e)),e.element.addEventListener("drop",e.onDropFiles.bind(e))})},e.prototype.ngOnDestroy=function(){this.element.removeEventListener("dragenter",this.onDragEnter),this.element.removeEventListener("dragover",this.onDragOver),this.element.removeEventListener("dragleave",this.onDragLeave),this.element.removeEventListener("drop",this.onDropFiles)},e.prototype.onDropFiles=function(e){if(this.enabled&&!e.defaultPrevented){this.preventDefault(e);var t=e.dataTransfer.items;if(t)for(var n=0;n<t.length;n++)if("undefined"!=typeof t[n].webkitGetAsEntry){var i=t[n].webkitGetAsEntry();i&&(i.isFile?this.filesEntityDropped.emit(i):i.isDirectory&&this.folderEntityDropped.emit(i))}else{var o=c.FileUtils.toFileArray(e.dataTransfer.files);this.filesDropped.emit(o)}else{o=c.FileUtils.toFileArray(e.dataTransfer.files);this.filesDropped.emit(o)}this.element.classList.remove(this.cssClassName)}},e.prototype.onDragEnter=function(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),this.element.classList.add(this.cssClassName))},e.prototype.onDragLeave=function(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),this.element.classList.remove(this.cssClassName))},e.prototype.onDragOver=function(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),this.element.classList.add(this.cssClassName))},e.prototype.preventDefault=function(e){e.stopPropagation(),e.preventDefault()},e}();Be.decorators=[{type:l.Directive,args:[{selector:"[file-draggable]"}]}],Be.ctorParameters=function(){return[{type:l.ElementRef},{type:l.NgZone}]},Be.propDecorators={enabled:[{type:l.Input,args:["file-draggable"]}],filesDropped:[{type:l.Output}],filesEntityDropped:[{type:l.Output}],folderEntityDropped:[{type:l.Output}]};var Ve=function(){};Ve.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k,u.TranslateModule,c.PipeModule],declarations:[Be,Ue,ke,_e,Me,xe,Re],exports:[Be,Ue,ke,_e,Me,xe,Re]}]}],Ve.ctorParameters=function(){return[]};var je=function(){};je.decorators=[{type:l.NgModule,args:[{imports:[c.ToolbarModule,p.CommonModule,c.DataTableModule,m.FlexLayoutModule,k,Ve,u.TranslateModule,c.PaginationModule],declarations:[pe,he,ue,be,ve,Se,Ee],providers:[_,ye,ge,me,ce],exports:[pe,he,ue,be,ve,Se,Ee]}]}],je.ctorParameters=function(){return[]};var He=function(){function e(e,t){if(this.api=t,this.updated=new d.Subject,this.executed=new d.Subject,this.categories=[],this.queryFragments={},this.fields={},this.filterQueries=[],this.ranges={},this.paging=null,this.config=e.get("search"),!this.config)throw new Error("Search configuration not found.");this.config.query&&this.config.query.categories&&(this.categories=this.config.query.categories.filter(function(e){return e.enabled})),this.filterQueries=this.config.filterQueries||[],this.scope={locations:null}}return e.prototype.addFilterQuery=function(t){t&&(this.filterQueries.find(function(e){return e.query===t})||this.filterQueries.push({query:t}))},e.prototype.removeFilterQuery=function(t){t&&(this.filterQueries=this.filterQueries.filter(function(e){return e.query!==t}))},e.prototype.getFacetQuery=function(t){return t?(this.config.facetQueries||[]).find(function(e){return e.label===t}):null},e.prototype.update=function(){var e=this.buildQuery();this.updated.next(e)},e.prototype.execute=function(){return t=this,l=function(){var t,n;return T(this,function(e){switch(e.label){case 0:return t=this.buildQuery(),[4,this.api.searchApi.search(t)];case 1:return n=e.sent(),this.executed.next(n),[2]}})},new((s=a=void 0)||(s=Promise))(function(e,n){function i(e){try{r(l.next(e))}catch(t){n(t)}}function o(e){try{r(l["throw"](e))}catch(t){n(t)}}function r(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,o)}r((l=l.apply(t,a||[])).next())});var t,a,s,l},e.prototype.buildQuery=function(){var c=this,d="",p=[];return this.categories.forEach(function(e){var t=c.queryFragments[e.id];t&&(0<d.length&&(d+=" AND "),d+="("+t+")");var n,i,o=c.fields[e.id];if(o&&0<o.length)try{for(var r=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(o),a=r.next();!a.done;a=r.next()){var s=a.value;p.includes(s)||p.push(s)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}}),d?{query:{query:d,language:"afts"},include:["path","allowableOperations"],fields:p,paging:this.paging,filterQueries:this.filterQueries,facetQueries:this.config.facetQueries,facetFields:this.config.facetFields,limits:this.config.limits,scope:this.scope}:null},e}();He.decorators=[{type:l.Injectable}],He.ctorParameters=function(){return[{type:c.AppConfigService},{type:c.AlfrescoApiService}]};var Ge=function(){function e(e,t){var n=this;this.searchService=e,this._elementRef=t,this.displayWith=null,this.maxResults=20,this.skipResults=0,this.searchTerm="",this.resultLoaded=new l.EventEmitter,this.error=new l.EventEmitter,this.showPanel=!1,this._isOpen=!1,this.keyPressedStream=new d.Subject,this._classList={},this.keyPressedStream.asObservable().debounceTime(200).subscribe(function(e){n.loadSearchResults(e)}),e.dataLoaded.subscribe(function(e){return n.onSearchDataLoaded(e)},function(e){return n.onSearchDataError(e)})}return Object.defineProperty(e.prototype,"classList",{set:function(e){var t=this;e&&e.length&&(e.split(" ").forEach(function(e){return t._classList[e.trim()]=!0}),this._elementRef.nativeElement.className="")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen&&this.showPanel},set:function(e){this._isOpen=e},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.setVisibility()},e.prototype.ngOnChanges=function(e){e.queryBody&&this.hasDifferentQueryBody(e.queryBody.previousValue,e.queryBody.currentValue)&&this.loadSearchResults(),e.searchTerm&&e.searchTerm.currentValue&&this.loadSearchResults(e.searchTerm.currentValue)},e.prototype.resetResults=function(){this.cleanResults(),this.setVisibility()},e.prototype.reload=function(){this.loadSearchResults(this.searchTerm)},e.prototype.hasDifferentQueryBody=function(e,t){return JSON.stringify(e)!==JSON.stringify(t)},e.prototype.cleanResults=function(){this.results&&(this.results={})},e.prototype.loadSearchResults=function(e){var t=this;this.resetResults(),e?this.queryBody?this.searchService.searchByQueryBody(this.queryBody).subscribe(function(e){return t.onSearchDataLoaded(e)},function(e){return t.onSearchDataError(e)}):this.searchService.search(e,this.maxResults,this.skipResults).subscribe(function(e){return t.onSearchDataLoaded(e)},function(e){return t.onSearchDataError(e)}):this.cleanResults()},e.prototype.onSearchDataLoaded=function(e){e&&(this.results=e,this.resultLoaded.emit(this.results),this.isOpen=!0,this.setVisibility())},e.prototype.onSearchDataError=function(e){e&&400!==e.status&&(this.results=null,this.error.emit(e))},e.prototype.hidePanel=function(){this.isOpen&&(this._classList["adf-search-show"]=!1,this._classList["adf-search-hide"]=!0,this.isOpen=!1)},e.prototype.setVisibility=function(){this.showPanel=!!this.results&&!!this.results.list,this._classList["adf-search-show"]=this.showPanel,this._classList["adf-search-hide"]=!this.showPanel},e}();Ge.decorators=[{type:l.Component,args:[{selector:"adf-search",template:'<div role="listbox" id="adf-search-results-content" [ngClass]="_classList" #panel>\n    <ng-template\n        [ngTemplateOutlet]="template"\n        [ngTemplateOutletContext]="{ $implicit: results }">\n    </ng-template>\n</div>\n\n\n',styles:[""],encapsulation:l.ViewEncapsulation.None,preserveWhitespaces:!1,exportAs:"searchAutocomplete",host:{"class":"adf-search"}}]}],Ge.ctorParameters=function(){return[{type:c.SearchService},{type:l.ElementRef}]},Ge.propDecorators={panel:[{type:l.ViewChild,args:["panel"]}],template:[{type:l.ContentChild,args:[l.TemplateRef]}],displayWith:[{type:l.Input}],maxResults:[{type:l.Input}],skipResults:[{type:l.Input}],queryBody:[{type:l.Input}],searchTerm:[{type:l.Input}],classList:[{type:l.Input,args:["class"]}],resultLoaded:[{type:l.Output}],error:[{type:l.Output}]};var qe=function(){};qe.decorators=[{type:l.Component,args:[{selector:"adf-empty-search-result",template:'<div class="adf-empty-search-result">\n    <ng-content></ng-content>\n</div>\n',encapsulation:l.ViewEncapsulation.None}]}],qe.ctorParameters=function(){return[]};var $e=function(){function e(e,t){var n=this;this.authService=e,this.thumbnailService=t,this.expandable=!0,this.highlight=!1,this.inputType="text",this.autocomplete=!1,this.liveSearchEnabled=!0,this.liveSearchMaxResults=5,this.submit=new l.EventEmitter,this.searchChange=new l.EventEmitter,this.optionClicked=new l.EventEmitter,this.searchTerm="",this.noSearchResultTemplate=null,this.toggleSearch=new d.Subject,this.focusSubject=new d.Subject,this.toggleSearch.asObservable().pipe(y.debounceTime(200)).subscribe(function(){n.expandable&&(n.subscriptAnimationState="inactive"===n.subscriptAnimationState?"active":"inactive","inactive"===n.subscriptAnimationState&&(n.searchTerm="",n.searchAutocomplete.resetResults(),document.activeElement.id===n.searchInput.nativeElement.id&&n.searchInput.nativeElement.blur()))})}return e.prototype.applySearchFocus=function(e){"active"===e.toState&&this.searchInput.nativeElement.focus()},e.prototype.ngOnInit=function(){this.subscriptAnimationState=this.expandable?"inactive":"no-animation",this.setupFocusEventHandlers()},e.prototype.isNoSearchTemplatePresent=function(){return!!this.emptySearchTemplate},e.prototype.ngOnDestroy=function(){this.focusSubject&&(this.focusSubject.unsubscribe(),this.focusSubject=null),this.toggleSearch&&(this.toggleSearch.unsubscribe(),this.toggleSearch=null)},e.prototype.isLoggedIn=function(){return this.authService.isEcmLoggedIn()},e.prototype.searchSubmit=function(e){this.submit.emit(e),this.toggleSearchBar()},e.prototype.inputChange=function(e){this.searchChange.emit(e)},e.prototype.getAutoComplete=function(){return this.autocomplete?"on":"off"},e.prototype.getMimeTypeIcon=function(e){var t;return e.entry.content&&e.entry.content.mimeType&&(t=e.entry.content.mimeType),e.entry.isFolder&&(t="folder"),this.thumbnailService.getMimeTypeIcon(t)},e.prototype.isSearchBarActive=function(){return"active"===this.subscriptAnimationState&&this.liveSearchEnabled},e.prototype.toggleSearchBar=function(){this.toggleSearch&&this.toggleSearch.next()},e.prototype.elementClicked=function(e){e.entry&&(this.optionClicked.next(e),this.toggleSearchBar())},e.prototype.onFocus=function(e){this.focusSubject.next(e)},e.prototype.onBlur=function(e){this.focusSubject.next(e)},e.prototype.activateToolbar=function(){this.isSearchBarActive()||this.toggleSearchBar()},e.prototype.selectFirstResult=function(){this.listResultElement&&0<this.listResultElement.length&&this.listResultElement.first._getHostElement().focus()},e.prototype.onRowArrowDown=function(e){var t=this.getNextElementSibling(e.target);t&&t.focus()},e.prototype.onRowArrowUp=function(e){var t=this.getPreviousElementSibling(e.target);t?t.focus():(this.searchInput.nativeElement.focus(),this.focusSubject.next(new FocusEvent("focus")))},e.prototype.setupFocusEventHandlers=function(){var t=this;this.focusSubject.asObservable().debounceTime(50).filter(function(e){return t.isSearchBarActive()&&("blur"===e.type||"focusout"===e.type)}).subscribe(function(){t.toggleSearchBar()})},e.prototype.getNextElementSibling=function(e){return e.nextElementSibling},e.prototype.getPreviousElementSibling=function(e){return e.previousElementSibling},e}();$e.decorators=[{type:l.Component,args:[{selector:"adf-search-control",template:'<div class="adf-search-container">\n    <div *ngIf="isLoggedIn()" [@transitionMessages]="subscriptAnimationState" (@transitionMessages.done)="applySearchFocus($event)">\n        <a mat-icon-button\n            *ngIf="expandable"\n            id="adf-search-button"\n            class="adf-search-button"\n            (click)="toggleSearchBar($event)"\n            (keyup.enter)="toggleSearchBar($event)">\n            <mat-icon aria-label="search button">search</mat-icon>\n        </a>\n        <mat-form-field class="adf-input-form-field-divider">\n            <input matInput #searchInput\n                [type]="inputType"\n                [autocomplete]="getAutoComplete()"\n                id="adf-control-input"\n                [(ngModel)]="searchTerm"\n                (focus)="activateToolbar($event)"\n                (blur)="onBlur($event)"\n                (keyup.escape)="toggleSearchBar()"\n                (keyup.arrowdown)="selectFirstResult()"\n                (ngModelChange)="inputChange($event)"\n                [searchAutocomplete]="auto"\n                (keyup.enter)="searchSubmit($event)">\n        </mat-form-field>\n    </div>\n</div>\n\n<adf-search #search\n            #auto="searchAutocomplete"\n            class="adf-search-result-autocomplete"\n            [maxResults]="liveSearchMaxResults"\n            [queryBody]="customQueryBody">\n    <ng-template let-data>\n        <mat-list *ngIf="isSearchBarActive()" id="autocomplete-search-result-list">\n            <mat-list-item\n                *ngFor="let item of data?.list?.entries; let idx = index"\n                id="result_option_{{idx}}"\n                [attr.data-automation-id]="\'autocomplete_for_\' + item.entry.name"\n                [tabindex]="0"\n                (focus)="onFocus($event)"\n                (blur)="onBlur($event)"\n                (keyup.arrowdown)="onRowArrowDown($event)"\n                (keyup.arrowup)="onRowArrowUp($event)"\n                class="adf-search-autocomplete-item"\n                (click)="elementClicked(item)"\n                (keyup.enter)="elementClicked(item)">\n                <mat-icon mat-list-icon>\n                    <img [src]="getMimeTypeIcon(item)" />\n                </mat-icon>\n                <h4 mat-line id="result_name_{{idx}}"\n                    *ngIf="highlight; else elseBlock"\n                    class="adf-search-fixed-text"\n                    [innerHtml]="item.entry.name | highlight: searchTerm">\n                    {{ item?.entry.name }}\n                </h4>\n                <ng-template #elseBlock>\n                    <h4 class="adf-search-fixed-text" mat-line id="result_name_{{idx}}" [innerHtml]="item.entry.name"></h4>\n                </ng-template>\n                <p mat-line class="adf-search-fixed-text"> {{item?.entry.createdByUser.displayName}} </p>\n            </mat-list-item>\n            <mat-list-item id="search_no_result"\n                data-automation-id="search_no_result_found"\n                *ngIf="data?.list?.entries.length === 0">\n                <ng-content\n                    selector="adf-empty-search-result"\n                    *ngIf="isNoSearchTemplatePresent() else defaultNoResult">\n                </ng-content>\n                <ng-template #defaultNoResult>\n                    <p mat-line class="adf-search-fixed-text">{{ \'SEARCH.RESULTS.NONE\' | translate:{searchTerm: searchTerm} }}</p>\n                </ng-template>\n            </mat-list-item>\n        </mat-list>\n    </ng-template>\n</adf-search>\n',styles:[""],animations:[g.trigger("transitionMessages",[g.state("active",g.style({transform:"translateX(0%)","margin-left":"13px"})),g.state("inactive",g.style({transform:"translateX(81%)"})),g.state("no-animation",g.style({transform:"translateX(0%)",width:"100%"})),g.transition("inactive => active",g.animate("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")),g.transition("active => inactive",g.animate("300ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-search-control"}}]}],$e.ctorParameters=function(){return[{type:c.AuthenticationService},{type:c.ThumbnailService}]},$e.propDecorators={expandable:[{type:l.Input}],highlight:[{type:l.Input}],inputType:[{type:l.Input}],autocomplete:[{type:l.Input}],liveSearchEnabled:[{type:l.Input}],liveSearchMaxResults:[{type:l.Input}],customQueryBody:[{type:l.Input}],submit:[{type:l.Output}],searchChange:[{type:l.Output}],optionClicked:[{type:l.Output}],searchAutocomplete:[{type:l.ViewChild,args:["search"]}],searchInput:[{type:l.ViewChild,args:["searchInput"]}],listResultElement:[{type:l.ViewChildren,args:[t.MatListItem]}],emptySearchTemplate:[{type:l.ContentChild,args:[qe]}]};var Qe={provide:r.NG_VALUE_ACCESSOR,useExisting:l.forwardRef(function(){return ze}),multi:!0},ze=function(){function e(e,t,n,i){this.element=e,this.ngZone=t,this.changeDetectorRef=n,this.document=i,this._panelOpen=!1,this.escapeEventStream=new d.Subject,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnDestroy=function(){this.escapeEventStream&&(this.escapeEventStream.unsubscribe(),this.escapeEventStream=null),this.closingActionsSubscription&&this.closingActionsSubscription.unsubscribe()},Object.defineProperty(e.prototype,"panelOpen",{get:function(){return this._panelOpen&&this.searchPanel.showPanel},enumerable:!0,configurable:!0}),e.prototype.openPanel=function(){this.searchPanel.isOpen=this._panelOpen=!0,this.closingActionsSubscription=this.subscribeToClosingActions()},e.prototype.closePanel=function(){this._panelOpen&&(this.closingActionsSubscription.unsubscribe(),this._panelOpen=!1,this.searchPanel.resetResults(),this.searchPanel.hidePanel(),this.changeDetectorRef.detectChanges())},Object.defineProperty(e.prototype,"panelClosingActions",{get:function(){return E.merge(this.escapeEventStream,this.outsideClickStream)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outsideClickStream",{get:function(){var n=this;return this.document?E.merge(S.fromEvent(this.document,"click"),S.fromEvent(this.document,"touchend")).filter(function(e){var t=e.target;return n._panelOpen&&t!==n.element.nativeElement}):a.Observable.of(null)},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var t=this;Promise.resolve(null).then(function(){return t.setTriggerValue(e)})},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.handleKeydown=function(e){var t=e.keyCode;t===v.ESCAPE&&this.panelOpen?(this.escapeEventStream.next(),e.stopPropagation()):t===v.ENTER&&(this.escapeEventStream.next(),e.preventDefault())},e.prototype.handleInput=function(e){if(document.activeElement===e.target){var t=e.target.value;this.onChange(t),t?(this.searchPanel.keyPressedStream.next(t),this.openPanel()):(this.searchPanel.resetResults(),this.closePanel())}},e.prototype.isPanelOptionClicked=function(e){var t=!1;if(e){var n=e.target;t=!this.isNoResultOption(e)&&!!this.searchPanel.panel&&!!this.searchPanel.panel.nativeElement.contains(n)}return t},e.prototype.isNoResultOption=function(e){return!this.searchPanel.results.list||0===this.searchPanel.results.list.entries.length},e.prototype.subscribeToClosingActions=function(){var t=this,e=this.ngZone.onStable.asObservable(),n=this.searchPanel.keyPressedStream.asObservable();return E.merge(e,n).switchMap(function(){return t.searchPanel.setVisibility(),t.panelClosingActions}).subscribe(function(e){return t.setValueAndClose(e)})},e.prototype.setTriggerValue=function(e){var t=this.searchPanel&&this.searchPanel.displayWith?this.searchPanel.displayWith(e):e,n=null!=t?t:"";this.element.nativeElement.value=n},e.prototype.setValueAndClose=function(e){this.isPanelOptionClicked(e)&&(this.setTriggerValue(e.target.textContent.trim()),this.onChange(e.target.textContent.trim()),this.element.nativeElement.focus()),this.closePanel()},e}();ze.decorators=[{type:l.Directive,args:[{selector:"input[searchAutocomplete], textarea[searchAutocomplete]",host:{role:"combobox",autocomplete:"off","aria-autocomplete":"list","[attr.aria-expanded]":"panelOpen.toString()","[attr.aria-owns]":"autocomplete?.id","(blur)":"onTouched()","(input)":"handleInput($event)","(keydown)":"handleKeydown($event)"},providers:[Qe]}]}],ze.ctorParameters=function(){return[{type:l.ElementRef},{type:l.NgZone},{type:l.ChangeDetectorRef},{type:undefined,decorators:[{type:l.Optional},{type:l.Inject,args:[b.DOCUMENT]}]}]},ze.propDecorators={searchPanel:[{type:l.Input,args:["searchAutocomplete"]}]};var Ye=function(){function e(e,t){var n=this;this.queryBuilder=e,this.search=t,this.selectedFacetQueries=[],this.selectedBuckets=[],this.responseFacetQueries=[],this.responseFacetFields=[],this.queryBuilder.updated.subscribe(function(e){n.queryBuilder.execute()})}return e.prototype.ngOnInit=function(){var t=this;this.queryBuilder&&this.queryBuilder.executed.subscribe(function(e){t.onDataLoaded(e),t.search.dataLoaded.next(e)})},e.prototype.onCategoryExpanded=function(e){e.expanded=!0},e.prototype.onCategoryCollapsed=function(e){e.expanded=!1},e.prototype.onFacetFieldExpanded=function(e){e.$expanded=!0},e.prototype.onFacetFieldCollapsed=function(e){e.$expanded=!1},e.prototype.onFacetQueryToggle=function(e,t){var n=this.queryBuilder.getFacetQuery(t.label);e.checked?(t.$checked=!0,this.selectedFacetQueries.push(n.label),n&&this.queryBuilder.addFilterQuery(n.query)):(t.$checked=!1,this.selectedFacetQueries=this.selectedFacetQueries.filter(function(e){return e!==t.label}),n&&this.queryBuilder.removeFilterQuery(n.query)),this.queryBuilder.update()},e.prototype.onFacetToggle=function(e,t,n){if(e.checked)n.$checked=!0,this.selectedBuckets.push(Object.assign({},n)),this.queryBuilder.addFilterQuery(n.filterQuery);else{n.$checked=!1;var i=this.selectedBuckets.findIndex(function(e){return e.$field===n.$field&&e.label===n.label});0<=i&&this.selectedBuckets.splice(i,1),this.queryBuilder.removeFilterQuery(n.filterQuery)}this.queryBuilder.update()},e.prototype.unselectFacetQuery=function(t){var e=this.queryBuilder.getFacetQuery(t);this.selectedFacetQueries=this.selectedFacetQueries.filter(function(e){return e!==t}),this.queryBuilder.removeFilterQuery(e.query),this.queryBuilder.update()},e.prototype.unselectFacetBucket=function(t){if(t){var e=this.selectedBuckets.findIndex(function(e){return e.$field===t.$field&&e.label===t.label});0<=e&&this.selectedBuckets.splice(e,1),this.queryBuilder.removeFilterQuery(t.filterQuery),this.queryBuilder.update()}},e.prototype.onDataLoaded=function(e){var n=this,t=e.list.context;if(t){this.responseFacetQueries=(t.facetQueries||[]).map(function(e){return e.$checked=n.selectedFacetQueries.includes(e.label),e});var i=this.responseFacetFields.filter(function(e){return e.$expanded}).map(function(e){return e.label});this.responseFacetFields=(t.facetsFields||[]).map(function(e){return e.$expanded=i.includes(e.label),(e.buckets||[]).forEach(function(t){t.$field=e.label,t.$checked=!1,n.selectedBuckets.find(function(e){return e.$field===t.$field&&e.label===t.label})&&(t.$checked=!0)}),e})}else this.responseFacetQueries=[],this.responseFacetFields=[]},e}();Ye.decorators=[{type:l.Component,args:[{selector:"adf-search-filter",template:'<mat-accordion multi="true" displayMode="flat">\n\n    <mat-expansion-panel\n        *ngFor="let category of queryBuilder.categories"\n        [expanded]="category.expanded"\n        (opened)="onCategoryExpanded(category)"\n        (closed)="onCategoryCollapsed(category)">\n        <mat-expansion-panel-header>\n            <mat-panel-title>\n                {{ category.name | translate }}\n            </mat-panel-title>\n        </mat-expansion-panel-header>\n        <adf-search-widget-container\n            [id]="category.id"\n            [selector]="category.component.selector"\n            [settings]="category.component.settings">\n        </adf-search-widget-container>\n    </mat-expansion-panel>\n\n    <mat-expansion-panel>\n        <mat-expansion-panel-header>\n            <mat-panel-title>Facet Queries</mat-panel-title>\n        </mat-expansion-panel-header>\n        <div class="checklist">\n            <ng-container *ngFor="let query of responseFacetQueries">\n                <mat-checkbox\n                    *ngIf="query.count > 0"\n                    [checked]="query.$checked"\n                    (change)="onFacetQueryToggle($event, query)">\n                    {{ query.label }} ({{ query.count }})\n                </mat-checkbox>\n            </ng-container>\n        </div>\n    </mat-expansion-panel>\n\n    <mat-expansion-panel\n        *ngFor="let field of responseFacetFields"\n        [expanded]="field.$expanded"\n        (opened)="onFacetFieldExpanded(field)"\n        (closed)="onFacetFieldCollapsed(field)">\n        <mat-expansion-panel-header>\n            <mat-panel-title>{{ field.label }}</mat-panel-title>\n        </mat-expansion-panel-header>\n        <div class="checklist">\n            <mat-checkbox\n                *ngFor="let bucket of field.buckets"\n                [checked]="bucket.$checked"\n                (change)="onFacetToggle($event, field, bucket)">\n                {{ bucket.display || bucket.label }} ({{ bucket.count }})\n            </mat-checkbox>\n        </div>\n    </mat-expansion-panel>\n\n</mat-accordion>\n',styles:[".checklist{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.checklist .mat-checkbox{margin:5px}"],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-search-filter"}}]}],Ye.ctorParameters=function(){return[{type:He},{type:c.SearchService}]};var We=function(){};We.decorators=[{type:l.Component,args:[{selector:"adf-search-chip-list",template:'<mat-chip-list>\n    <ng-container *ngIf="searchFilter && searchFilter.selectedFacetQueries">\n        <mat-chip\n            *ngFor="let label of searchFilter.selectedFacetQueries"\n            [removable]="true"\n            (remove)="searchFilter.unselectFacetQuery(label)">\n            {{ label }}\n            <mat-icon matChipRemove>cancel</mat-icon>\n        </mat-chip>\n    </ng-container>\n    <ng-container *ngIf="searchFilter && searchFilter.selectedBuckets">\n        <mat-chip\n            *ngFor="let bucket of searchFilter.selectedBuckets"\n            [removable]="true"\n            (remove)="searchFilter.unselectFacetBucket(bucket)">\n            {{ bucket.display || bucket.label }}\n            <mat-icon matChipRemove>cancel</mat-icon>\n        </mat-chip>\n    </ng-container>\n</mat-chip-list>\n',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-search-chip-list"}}]}],We.ctorParameters=function(){return[]},We.propDecorators={searchFilter:[{type:l.Input}]};var Ze=function(){function e(){this.value=""}return e.prototype.ngOnInit=function(){if(this.context&&this.settings){var e=new RegExp(this.settings.pattern,"g").exec(this.context.queryFragments[this.id]||"");e&&1<e.length&&(this.value=e[1])}},e.prototype.onChangedHandler=function(e){this.value=e.target.value,this.value&&(this.context.queryFragments[this.id]=this.settings.field+":'"+this.value+"'",this.context.update())},e}();Ze.decorators=[{type:l.Component,args:[{selector:"adf-search-text",template:'<mat-form-field>\n    <input\n        matInput\n        [placeholder]="settings?.placeholder"\n        [value]="value"\n        (change)="onChangedHandler($event)">\n</mat-form-field>\n',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-search-text"}}]}],Ze.ctorParameters=function(){return[]},Ze.propDecorators={value:[{type:l.Input}]};var Xe=function(){function e(){}return e.prototype.ngOnInit=function(){this.setValue(this.getSelectedValue())},e.prototype.getSelectedValue=function(){var e=this.settings.options||[];if(e&&0<e.length){var t=e.find(function(e){return e["default"]});return t||(t=e[0]),t.value}return null},e.prototype.setValue=function(e){this.value=e,this.context.queryFragments[this.id]=e,this.context.update()},e.prototype.changeHandler=function(e){this.setValue(e.value)},e}();Xe.decorators=[{type:l.Component,args:[{selector:"adf-search-radio",template:'<mat-radio-group [(ngModel)]="value" (change)="changeHandler($event)">\n    <mat-radio-button\n        *ngFor="let option of settings.options" [value]="option.value">\n        {{ option.name }}\n    </mat-radio-button>\n</mat-radio-group>\n',styles:[".adf-search-radio .mat-radio-group{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.adf-search-radio .mat-radio-button{margin:5px}"],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-search-radio"}}]}],Xe.ctorParameters=function(){return[]},Xe.propDecorators={value:[{type:l.Input}]};var Ke=function(){function e(){}return e.prototype.ngOnInit=function(){var e=(this.settings.options||[]).filter(function(e){return e["default"]}).map(function(e){return e.checked=!0,e});0<e.length&&this.flush(e)},e.prototype.changeHandler=function(e,t){t.checked=e.checked,this.flush(this.settings.options)},e.prototype.flush=function(e){void 0===e&&(e=[]);var t=e.filter(function(e){return e.checked}).map(function(e){return e.fields}).reduce(function(e,t){return e.concat(t)},[]);this.context.fields[this.id]=t,this.context.update()},e}();Ke.decorators=[{type:l.Component,args:[{selector:"adf-search-fields",template:'<mat-checkbox\n    *ngFor="let option of settings.options"\n    [checked]="option.checked"\n    (change)="changeHandler($event, option)">\n    {{ option.name }}\n</mat-checkbox>\n',styles:[".adf-search-fields{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.adf-search-fields .mat-checkbox{margin:5px}"],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-search-fields"}}]}],Ke.ctorParameters=function(){return[]},Ke.propDecorators={value:[{type:l.Input}]};var Je=function(){function e(){}return e.prototype.ngOnInit=function(){var e=(this.settings.options||[]).find(function(e){return e["default"]});e&&this.flush(e.value)},e.prototype.changeHandler=function(e){this.flush(e.value)},e.prototype.flush=function(e){this.value=e,this.context.scope.locations=e,this.context.update()},e}();Je.decorators=[{type:l.Component,args:[{selector:"adf-search-scope-locations",template:'<mat-form-field>\n    <mat-select\n        [(value)]="value"\n        (selectionChange)="changeHandler($event)">\n        <mat-option\n            *ngFor="let option of settings.options"\n            [value]="option.value">\n            {{option.name}}\n        </mat-option>\n    </mat-select>\n</mat-form-field>\n',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-search-scope-locations"}}]}],Je.ctorParameters=function(){return[]},Je.propDecorators={value:[{type:l.Input}]};var et=function(){};et.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,r.FormsModule,r.ReactiveFormsModule,t.MatButtonModule,t.MatInputModule,t.MatRadioModule,t.MatCheckboxModule,t.MatSelectModule],declarations:[Ze,Xe,Ke,Je],exports:[Ze,Xe,Ke,Je],entryComponents:[Ze,Xe,Ke,Je]}]}],et.ctorParameters=function(){return[]};var tt=function(){function e(e,t){this.queryBuilder=t,this.module=e.compileModuleAndAllComponentsSync(et)}return e.prototype.ngOnInit=function(){var t=this,e=this.module.componentFactories.find(function(e){return e.selector===t.selector});e&&(this.content.clear(),this.componentRef=this.content.createComponent(e,0),this.setupWidget(this.componentRef))},e.prototype.setupWidget=function(e){e&&e.instance&&(e.instance.id=this.id,e.instance.settings=Object.assign({},this.settings),e.instance.context=this.queryBuilder)},e.prototype.ngOnDestroy=function(){this.componentRef&&(this.componentRef.destroy(),this.componentRef=null)},e}();tt.decorators=[{type:l.Component,args:[{selector:"adf-search-widget-container",template:"<div #content></div>"}]}],tt.ctorParameters=function(){return[{type:l.Compiler},{type:He}]},tt.propDecorators={content:[{type:l.ViewChild,args:["content",{read:l.ViewContainerRef}]}],id:[{type:l.Input}],selector:[{type:l.Input}],settings:[{type:l.Input}],config:[{type:l.Input}]};var nt=[Ge,$e,ze,qe,Ye,We],it=function(){};it.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,r.FormsModule,r.ReactiveFormsModule,k,c.PipeModule,u.TranslateModule],declarations:L(nt,[tt]),exports:L(nt,[tt]),entryComponents:[tt]}]}],it.ctorParameters=function(){return[]};var ot={Members:"members",Containers:"containers"},rt=function(){function e(e,t){this.sitesService=e,this.logService=t,this.hideMyFiles=!1,this.siteList=null,this.value=null,this.placeholder="DROPDOWN.PLACEHOLDER_LABEL",this.change=new l.EventEmitter,this.selected=null,this.MY_FILES_VALUE="-my-"}return e.prototype.ngOnInit=function(){this.siteList||this.setDefaultSiteList()},e.prototype.selectedSite=function(e){this.change.emit(e.value)},e.prototype.setDefaultSiteList=function(){var t=this,e=null;this.relations&&(e={relations:[this.relations]}),this.sitesService.getSites(e).subscribe(function(e){if(t.siteList=t.relations===ot.Members?t.filteredResultsByMember(e):e,!t.hideMyFiles){t.siteList.list.entries.unshift({entry:{id:"-my-",guid:"-my-",title:"DROPDOWN.MY_FILES_OPTION"}}),t.value||(t.value="-my-")}t.selected=t.siteList.list.entries.find(function(e){return e.entry.id===t.value})},function(e){t.logService.error(e)})},e.prototype.filteredResultsByMember=function(e){var t=this,n=this.sitesService.getEcmCurrentLoggedUserName();return e.list.entries=e.list.entries.filter(function(e){return t.isCurrentUserMember(e,n)}),e},e.prototype.isCurrentUserMember=function(e,t){return"PUBLIC"===e.entry.visibility||!!e.relations.members.list.entries.find(function(e){return e.entry.id.toLowerCase()===t.toLowerCase()})},e}();rt.decorators=[{type:l.Component,args:[{selector:"adf-sites-dropdown",styles:[".adf-sites-dropdown.full-width .mat-input-container{width:100%}"],template:'<div id="site-dropdown-container" class="adf-site-dropdown-container">\n    <mat-form-field>\n        <mat-select\n            data-automation-id="site-my-files-option"\n            class="adf-site-dropdown-list-element"\n            id="site-dropdown"\n            placeholder="{{placeholder | translate}}"\n            floatPlaceholder="never"\n            data-automation-id="site-my-files-select"\n            [(value)]="selected"\n            (selectionChange)="selectedSite($event)">\n            <mat-option *ngFor="let site of siteList?.list.entries" [value]="site">\n                {{ site.entry.title | translate}}\n            </mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-sites-dropdown"}}]}],rt.ctorParameters=function(){return[{type:c.SitesService},{type:c.LogService}]},rt.propDecorators={hideMyFiles:[{type:l.Input}],siteList:[{type:l.Input}],value:[{type:l.Input}],placeholder:[{type:l.Input}],relations:[{type:l.Input}],change:[{type:l.Output}]};var at=function(){};at.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k,u.TranslateModule,r.FormsModule,r.ReactiveFormsModule],exports:[rt],declarations:[rt]}]}],at.ctorParameters=function(){return[]};var st=function(){function e(){this.folderNode=null,this.root=null,this.rootId=null,this.route=[],this.navigate=new l.EventEmitter}return Object.defineProperty(e.prototype,"hasRoot",{get:function(){return!!this.root},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.transform=this.transform?this.transform:null},e.prototype.ngOnChanges=function(e){if(e.folderNode){var t=null;t=this.transform?this.transform(e.folderNode.currentValue):e.folderNode.currentValue,this.route=this.parseRoute(t)}if(e.transform){t=this.transform?this.transform(this.folderNode):this.folderNode;this.route=this.parseRoute(t)}},e.prototype.parseRoute=function(e){if(e&&e.path){var t=(e.path.elements||[]).slice();t.push({id:e.id,name:e.name});var n=this.getElementPosition(t,this.rootId);return 0<n&&t.splice(0,n),-1===n&&this.rootId&&(t[0].id=this.rootId),this.root&&(t[0].name=this.root),t}return[]},e.prototype.getElementPosition=function(e,t){var n=-1;return e&&0<e.length&&t&&(n=e.findIndex(function(e){return e.id===t})),n},e.prototype.onRoutePathClick=function(e,t){t&&t.preventDefault(),e&&(this.navigate.emit(e),this.target&&this.target.navigateTo(e.id))},e}();st.decorators=[{type:l.Component,args:[{selector:"adf-breadcrumb",template:'<div *ngIf="folderNode" data-automation-id="breadcrumb" class="adf-breadcrumb-container">\n    <li *ngFor="let item of route; let last = last"\n        [class.active]="last"\n        [ngSwitch]="last"\n        title="{{ item.name | translate }}"\n        class="adf-breadcrumb-item">\n\n        <a *ngSwitchDefault href="#" [attr.data-automation-id]="\'breadcrumb_\' + item.name"\n           class="adf-breadcrumb-item-anchor"\n           (click)="onRoutePathClick(item, $event)">\n            {{ item.name | translate }}\n        </a>\n\n        <div *ngSwitchCase="true" class="adf-breadcrumb-item-current">\n            {{ item.name | translate }}\n        </div>\n\n        <mat-icon class="adf-breadcrumb-item-chevron" *ngIf="!last">\n            chevron_right\n        </mat-icon>\n    </li>\n</div>\n<div *ngIf="!folderNode && hasRoot">\n    <li class="adf-breadcrumb-item">\n        <div class="adf-breadcrumb-item-current">\n            {{ root | translate }}\n        </div>\n    </li>\n</div>\n',styles:[""],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-breadcrumb"}}]}],st.ctorParameters=function(){return[]},st.propDecorators={folderNode:[{type:l.Input}],root:[{type:l.Input}],rootId:[{type:l.Input}],target:[{type:l.Input}],transform:[{type:l.Input}],navigate:[{type:l.Output}]};var lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D(e,t),e.prototype.ngOnChanges=function(e){t.prototype.ngOnChanges.call(this,e),this.recalculateNodes()},e.prototype.recalculateNodes=function(){this.currentNode=this.route[this.route.length-1],this.previousNodes=this.route.slice(0,this.route.length-1).reverse()},e.prototype.open=function(){this.selectbox&&this.selectbox.open()},e.prototype.hasPreviousNodes=function(){return 0<this.previousNodes.length},e}(st);lt.decorators=[{type:l.Component,args:[{selector:"adf-dropdown-breadcrumb",template:'<ng-container *ngIf="route.length > 0">\n\n    <button\n        tabindex="0"\n        class="adf-dropdown-breadcumb-trigger"\n        (click)="open()"\n        data-automation-id="dropdown-breadcrumb-trigger">\n        <mat-icon [class.isRoot]="!hasPreviousNodes()">folder</mat-icon>\n    </button>\n    <mat-icon class="adf-dropdown-breadcrumb-item-chevron">chevron_right</mat-icon>\n\n    <mat-select\n        #select\n        *ngIf="hasPreviousNodes()"\n        class="adf-dropdown-breadcrumb-path"\n        tabindex="0"\n        data-automation-id="dropdown-breadcrumb-path" >\n\n        <mat-option\n            *ngFor="let node of previousNodes;"\n            (click)="onRoutePathClick(node, $event)"\n            class="adf-dropdown-breadcrumb-path-option"\n            tabindex="0"\n            data-automation-class="dropdown-breadcrumb-path-option">\n            {{ node.name }}\n        </mat-option>\n    </mat-select>\n\n    <span\n        class="adf-current-folder"\n        [class.isRoot]="!hasPreviousNodes()"\n        data-automation-id="current-folder">{{ currentNode.name }}</span>\n</ng-container>\n',styles:[""],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-dropdown-breadcrumb"}}]}],lt.ctorParameters=function(){return[]},lt.propDecorators={selectbox:[{type:l.ViewChild,args:["select"]}]};var ct=function(){};ct.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k,u.TranslateModule],exports:[st,lt],declarations:[st,lt]}]}],ct.ctorParameters=function(){return[]};var dt=function(e){e=e||{},this.title=e.title||"ADF_CONFIRM_DIALOG.CONFIRM",this.message=e.message||"ADF_CONFIRM_DIALOG.MESSAGE",this.yesLabel=e.yesLabel||"ADF_CONFIRM_DIALOG.YES_LABEL",this.noLabel=e.noLabel||"ADF_CONFIRM_DIALOG.NO_LABEL"};dt.decorators=[{type:l.Component,args:[{selector:"adf-confirm-dialog",template:'\n        <h1 mat-dialog-title>{{ title | translate }}</h1>\n        <mat-dialog-content>\n            <p>{{ message | translate }}</p>\n        </mat-dialog-content>\n        <mat-dialog-actions>\n            <span class="spacer"></span>\n            <button mat-button [mat-dialog-close]="true">{{ yesLabel | translate }}</button>\n            <button mat-button color="primary" [mat-dialog-close]="false" cdkFocusInitial>{{ noLabel | translate }}</button>\n        </mat-dialog-actions>\n    ',styles:["\n        .spacer { flex: 1 1 auto; }\n\n        .adf-confirm-dialog .mat-dialog-actions .mat-button-wrapper {\n            text-transform: uppercase;\n        }\n    "],host:{"class":"adf-confirm-dialog"},encapsulation:l.ViewEncapsulation.None}]}],dt.ctorParameters=function(){return[{type:undefined,decorators:[{type:l.Inject,args:[t.MAT_DIALOG_DATA]}]}]};var pt=function(){function e(e,t,n,i){this.alfrescoApi=e,this.contentService=t,this.dialog=n,this.el=i,this.versions=[],this.isLoading=!0,this.showComments=!0,this.allowDownload=!0,this.versionsApi=this.alfrescoApi.versionsApi}return e.prototype.ngOnChanges=function(){this.loadVersionHistory()},e.prototype.canUpdate=function(){return this.contentService.hasPermission(this.node,"update")},e.prototype.restore=function(e){var t=this;this.canUpdate()&&this.versionsApi.revertVersion(this.node.id,e,{majorVersion:!0,comment:""}).then(function(){return t.onVersionRestored()})},e.prototype.loadVersionHistory=function(){var t=this;this.isLoading=!0,this.versionsApi.listVersionHistory(this.node.id).then(function(e){t.versions=e.list.entries,t.isLoading=!1})},e.prototype.downloadVersion=function(e){if(this.allowDownload){var t=this.getVersionContentUrl(this.node.id,e,!0);this.downloadContent(t)}},e.prototype.deleteVersion=function(t){var n=this;this.canUpdate()&&this.dialog.open(dt,{data:{title:"ADF_VERSION_LIST.CONFIRM_DELETE.TITLE",message:"ADF_VERSION_LIST.CONFIRM_DELETE.MESSAGE",yesLabel:"ADF_VERSION_LIST.CONFIRM_DELETE.YES_LABEL",noLabel:"ADF_VERSION_LIST.CONFIRM_DELETE.NO_LABEL"},minWidth:"250px"}).afterClosed().subscribe(function(e){!0===e&&n.alfrescoApi.versionsApi.deleteVersion(n.node.id,t).then(function(){return n.onVersionDeleted()})})},e.prototype.onVersionDeleted=function(){this.loadVersionHistory();var e=new CustomEvent("version-deleted",{bubbles:!0});this.el.nativeElement.dispatchEvent(e)},e.prototype.onVersionRestored=function(){this.loadVersionHistory();var e=new CustomEvent("version-restored",{bubbles:!0});this.el.nativeElement.dispatchEvent(e)},e.prototype.getVersionContentUrl=function(e,t,n){return this.alfrescoApi.contentApi.getContentUrl(e,n).replace("/content","/versions/"+t+"/content")},e.prototype.downloadContent=function(e){if(e){var t=document.createElement("a");t.style.display="none",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},e}();pt.decorators=[{type:l.Component,args:[{selector:"adf-version-list",template:'<mat-list class="adf-version-list" *ngIf="!isLoading; else loading_template">\n    <mat-list-item *ngFor="let version of versions">\n        <mat-icon mat-list-icon>insert_drive_file</mat-icon>\n        <h4 mat-line class="adf-version-list-item-name">{{version.entry.name}}</h4>\n        <p mat-line>\n            <span class="adf-version-list-item-version">{{version.entry.id}}</span> -\n            <span class="adf-version-list-item-date">{{version.entry.modifiedAt | date}}</span>\n        </p>\n        <p mat-line class="adf-version-list-item-comment" *ngIf="showComments">{{version.entry.versionComment}}</p>\n\n        <mat-menu #versionMenu="matMenu" yPosition="below" xPosition="before">\n            <button *ngIf="canUpdate()"\n                mat-menu-item\n                (click)="restore(version.entry.id)">\n                {{ \'ADF_VERSION_LIST.ACTIONS.RESTORE\' | translate }}\n            </button>\n            <button *ngIf="allowDownload"\n                mat-menu-item\n                (click)="downloadVersion(version.entry.id)">\n                {{ \'ADF_VERSION_LIST.ACTIONS.DOWNLOAD\' | translate }}\n            </button>\n            <button *ngIf="canUpdate()"\n                (click)="deleteVersion(version.entry.id)"\n                mat-menu-item>\n                {{ \'ADF_VERSION_LIST.ACTIONS.DELETE\' | translate }}\n            </button>\n        </mat-menu>\n\n        <button mat-icon-button [matMenuTriggerFor]="versionMenu">\n            <mat-icon>more_vert</mat-icon>\n        </button>\n    </mat-list-item>\n</mat-list>\n\n<ng-template #loading_template>\n    <mat-progress-bar data-automation-id="version-history-loading-bar" mode="indeterminate" color="accent"></mat-progress-bar>\n</ng-template>\n',styles:[".adf-version-list .mat-list-item{border-bottom:1px solid #d8d8d8}.adf-version-list-item-version{font-weight:700}.adf-version-list-item-date{opacity:.6}.adf-version-list-item-comment{opacity:.5}"],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-version-list"}}]}],pt.ctorParameters=function(){return[{type:c.AlfrescoApiService},{type:c.ContentService},{type:t.MatDialog},{type:l.ElementRef}]},pt.propDecorators={id:[{type:l.Input}],node:[{type:l.Input}],showComments:[{type:l.Input}],allowDownload:[{type:l.Input}]};var ut=function(){function e(e,t){this.contentService=t,this.showComments=!0,this.allowDownload=!0,this.uploadSuccess=new l.EventEmitter,this.uploadError=new l.EventEmitter,this.showComments=e.get("adf-version-manager.allowComments",!0),this.allowDownload=e.get("adf-version-manager.allowDownload",!0)}return e.prototype.onUploadSuccess=function(e){this.versionListComponent.loadVersionHistory(),this.uploadSuccess.emit(e)},e.prototype.canUpdate=function(){return this.contentService.hasPermission(this.node,"update")},e}();ut.decorators=[{type:l.Component,args:[{selector:"adf-version-manager",template:'<div class="adf-new-version-uploader-container" fxLayout="row" fxLayoutAlign="end center">\n    <adf-version-upload\n        [node]="node"\n        (success)="onUploadSuccess($event)"\n        (error)="uploadError.emit($event)">\n    </adf-version-upload>\n</div>\n<div class="adf-version-list-container">\n    <adf-version-list\n        #versionList\n        [node]="node"\n        [allowDownload]="allowDownload"\n        [showComments]="showComments">\n    </adf-version-list>\n</div>\n',styles:[".adf-button.upload-new-version{-webkit-box-shadow:none;box-shadow:none}.adf-new-version-uploader-container{border-bottom:1px solid #d8d8d8;padding:16px 0}"],encapsulation:l.ViewEncapsulation.None}]}],ut.ctorParameters=function(){return[{type:c.AppConfigService},{type:c.ContentService}]},ut.propDecorators={node:[{type:l.Input}],showComments:[{type:l.Input}],allowDownload:[{type:l.Input}],uploadSuccess:[{type:l.Output}],uploadError:[{type:l.Output}],versionListComponent:[{type:l.ViewChild,args:["versionList"]}]};var ht=function(){function e(e){this.contentService=e,this.success=new l.EventEmitter,this.error=new l.EventEmitter}return e.prototype.canUpload=function(){return this.contentService.hasPermission(this.node,"update")},e}();ht.decorators=[{type:l.Component,args:[{selector:"adf-version-upload",template:'<adf-upload-version-button\n    data-automation-id="adf-new-version-file-upload"\n    class="adf-new-version-file-upload"\n    staticTitle="{{ \'ADF_VERSION_LIST.ACTIONS.UPLOAD.TITLE\' | translate }}"\n    [node]="node"\n    [disabled]="!canUpload()"\n    [rootFolderId]="node.parentId"\n    tooltip="{{ \'ADF_VERSION_LIST.ACTIONS.UPLOAD.TOOLTIP\' | translate }}"\n    [versioning]="true"\n    (success)="success.emit($event)"\n    (error)="error.emit($event)">\n</adf-upload-version-button>\n',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-version-upload"}}]}],ht.ctorParameters=function(){return[{type:c.ContentService}]},ht.propDecorators={node:[{type:l.Input}],success:[{type:l.Output}],error:[{type:l.Output}]};var ft=function(){};ft.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k,u.TranslateModule,Ve],exports:[ht,ut,pt],declarations:[ht,ut,pt],providers:[]}]}],ft.ctorParameters=function(){return[]};var mt=function(){function e(){this.name="",this.path=""}return e.prototype.ngOnInit=function(){if(this.row){this.name=this.row.getValue("name");var e=this.row.getValue("path");e&&(this.path=e.name||"")}},e}();mt.decorators=[{type:l.Component,args:[{selector:"adf-name-location-cell",template:'\n        <div class="adf-name-location-cell-name">{{ name }}</div>\n        <div class="adf-name-location-cell-location" [title]="path">{{ path }}</div>\n    ',styles:[""],encapsulation:l.ViewEncapsulation.None,changeDetection:l.ChangeDetectionStrategy.OnPush,host:{"class":"adf-name-location-cell"}}]}],mt.ctorParameters=function(){return[]},mt.propDecorators={row:[{type:l.Input}]};var gt=function(){function e(e){this.searchService=e}return e.prototype.search=function(e,t,n,i,o){void 0===t&&(t=null),void 0===n&&(n=0),void 0===i&&(i=25);var r="";o&&o.length&&o.filter(function(e){return e!==t}).forEach(function(e){r+=" OR ANCESTOR:'workspace://SpacesStore/"+e+"'"});var a={query:{query:e+"* OR name:"+e+"*"},include:["path","allowableOperations"],paging:{maxItems:i,skipCount:n},filterQueries:L([{query:"TYPE:'cm:folder'"},{query:"NOT cm:creator:System"}],t?[{query:"ANCESTOR:'workspace://SpacesStore/"+t+"'"+r}]:[]),scope:{locations:["nodes"]}};return this.searchService.searchByQueryBody(a)},e}();gt.decorators=[{type:l.Injectable}],gt.ctorParameters=function(){return[{type:c.SearchService}]};var yt=function(){return!0},vt=function(){function e(e,t,n){var i=this;this.contentNodeSelectorService=e,this.apiService=t,this.preferences=n,this.currentFolderId=null,this.dropdownHideMyFiles=!1,this.dropdownSiteList=null,this.rowFilter=null,this.imageResolver=null,this.isSelectionValid=yt,this.select=new l.EventEmitter,this.nodes=null,this.searchTerm="",this.showingSearchResults=!1,this.loadingSearchResults=!1,this.inDialog=!1,this._chosenNode=null,this.folderIdToShow=null,this.paginationStrategy=de.Infinite,this.skipCount=0,this.infiniteScroll=!1,this.debounceSearch=200,this.searchInput=new r.FormControl,this.searchInput.valueChanges.pipe(y.debounceTime(this.debounceSearch)).subscribe(function(e){i.search(e)}),this.pageSize=this.preferences.paginationSize;var o={maxItems:this.pageSize,skipCount:0,totalItems:0,hasMoreItems:!1};this.pagination=new h.BehaviorSubject(o)}return Object.defineProperty(e.prototype,"chosenNode",{get:function(){return this._chosenNode},set:function(e){var t=null;(this._chosenNode=e)&&(t=[e]),this.select.next(t)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.folderIdToShow=this.currentFolderId,this.breadcrumbTransform=this.breadcrumbTransform?this.breadcrumbTransform:null,this.isSelectionValid=this.isSelectionValid?this.isSelectionValid:yt},e.prototype.siteChanged=function(e){this.siteId=e.entry.guid,this.updateResults()},e.prototype.search=function(e){this.searchTerm=e,this.updateResults()},Object.defineProperty(e.prototype,"breadcrumbFolderNode",{get:function(){return this.showingSearchResults&&this.chosenNode?this.chosenNode:this.documentList.folderNode},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.clearSearch(),this.folderIdToShow=this.siteId||this.currentFolderId},e.prototype.clearSearch=function(){this.searchTerm="",this.nodes=null,this.skipCount=0,this.chosenNode=null,this.showingSearchResults=!1},e.prototype.updateResults=function(){0===this.searchTerm.length?this.clear():this.startNewSearch()},e.prototype.startNewSearch=function(){this.nodes=null,this.skipCount=0,this.chosenNode=null,this.folderIdToShow=null,this.querySearch()},e.prototype.updatePagination=function(e){this.infiniteScroll=!0,this.skipCount=e.skipCount,0<this.searchTerm.length&&this.querySearch()},e.prototype.querySearch=function(){var t=this;this.loadingSearchResults=!0,this.dropdownSiteList?this.documentList.getCorrespondingNodeIds(this.siteId).subscribe(function(e){t.contentNodeSelectorService.search(t.searchTerm,t.siteId,t.skipCount,t.pageSize,e).subscribe(t.showSearchResults.bind(t))},function(){t.showSearchResults({list:{entries:[]}})}):this.contentNodeSelectorService.search(this.searchTerm,this.siteId,this.skipCount,this.pageSize).subscribe(this.showSearchResults.bind(this))},e.prototype.showSearchResults=function(e){this.showingSearchResults=!0,this.loadingSearchResults=!1,this.nodes?this.documentList.data.loadPage(e,!0):this.nodes=e,this.pagination.next(e.list.pagination),this.highlight()},e.prototype.highlight=function(){var e=this;setTimeout(function(){e.highlighter.highlight(e.searchTerm)},0)},e.prototype.onFolderChange=function(){this.showingSearchResults=!1,this.infiniteScroll=!1,this.clearSearch()},e.prototype.onFolderLoaded=function(e){this.showingSearchResults||this.attemptNodeSelection(this.documentList.folderNode)},e.prototype.showBreadcrumbs=function(){return!this.showingSearchResults||this.chosenNode},e.prototype.getNextPageOfSearch=function(e){this.infiniteScroll=!0,this.skipCount=e.skipCount,0<this.searchTerm.length&&this.querySearch()},e.prototype.attemptNodeSelection=function(e){this.isSelectionValid(e)?this.chosenNode=e:this.resetChosenNode()},e.prototype.resetChosenNode=function(){this.chosenNode=null},e.prototype.onNodeSelect=function(e){this.attemptNodeSelection(e.detail.node.entry)},e.prototype.onNodeDoubleClick=function(e){var t=this,n=e.detail.node.entry;if(n&&n.guid){var i={maxItems:this.pageSize,skipCount:this.skipCount,include:["path","properties","allowableOperations"]};this.apiService.nodesApi.getNode(n.guid,i).then(function(e){t.documentList.performCustomSourceNavigation(e)})}},e}();vt.decorators=[{type:l.Component,args:[{selector:"adf-content-node-selector-panel",styles:[""],template:'<div class="adf-content-node-selector-content" (node-select)="onNodeSelect($event)">\n    <mat-form-field floatPlaceholder="never" class="adf-content-node-selector-content-input">\n        <input matInput\n            id="searchInput"\n            [formControl]="searchInput"\n            type="text"\n            placeholder="{{\'NODE_SELECTOR.SEARCH\' | translate}}"\n            [value]="searchTerm"\n            data-automation-id="content-node-selector-search-input">\n\n        <mat-icon *ngIf="searchTerm.length > 0"\n            matSuffix (click)="clear()"\n            class="adf-content-node-selector-content-input-icon"\n            data-automation-id="content-node-selector-search-clear">clear\n        </mat-icon>\n\n        <mat-icon *ngIf="searchTerm.length === 0"\n            matSuffix\n            class="adf-content-node-selector-content-input-icon"\n            data-automation-id="content-node-selector-search-icon">search\n        </mat-icon>\n\n    </mat-form-field>\n\n    <adf-sites-dropdown\n        class="full-width"\n        (change)="siteChanged($event)"\n        [placeholder]="\'NODE_SELECTOR.SELECT_LOCATION\'"\n        [hideMyFiles]="dropdownHideMyFiles"\n        [siteList]="dropdownSiteList"\n        data-automation-id="content-node-selector-sites-combo">\n    </adf-sites-dropdown>\n\n    <adf-toolbar>\n        <adf-toolbar-title>\n            <ng-container *ngIf="!showBreadcrumbs()">\n                <span class="search-results-label">{{ \'NODE_SELECTOR.SEARCH_RESULTS\' | translate }}</span>\n            </ng-container>\n            <adf-dropdown-breadcrumb *ngIf="showBreadcrumbs()"\n                class="adf-content-node-selector-content-breadcrumb"\n                (navigate)="clearSearch()"\n                [target]="documentList"\n                [transform]="breadcrumbTransform"\n                [folderNode]="breadcrumbFolderNode"\n                data-automation-id="content-node-selector-content-breadcrumb">\n            </adf-dropdown-breadcrumb>\n        </adf-toolbar-title>\n    </adf-toolbar>\n\n    <div\n        class="adf-content-node-selector-content-list"\n        [class.adf-content-node-selector-content-list-searchLayout]="showingSearchResults"\n        data-automation-id="content-node-selector-content-list">\n        <adf-document-list\n            #documentList\n            adf-highlight\n            adf-highlight-selector="adf-name-location-cell .adf-name-location-cell-name"\n            [showHeader]="false"\n            [node]="nodes"\n            [maxItems]="pageSize"\n            [rowFilter]="rowFilter"\n            [imageResolver]="imageResolver"\n            [currentFolderId]="folderIdToShow"\n            selectionMode="single"\n            [contextMenuActions]="false"\n            [contentActions]="false"\n            [allowDropFiles]="false"\n            (folderChange)="onFolderChange()"\n            (ready)="onFolderLoaded($event)"\n            (node-dblclick)="onNodeDoubleClick($event)"\n            data-automation-id="content-node-selector-document-list">\n            <empty-folder-content>\n                <ng-template>\n                    <div>{{ \'NODE_SELECTOR.NO_RESULTS\' | translate }}</div>\n                </ng-template>\n            </empty-folder-content>\n\n            <data-columns>\n                <data-column key="$thumbnail" type="image"></data-column>\n                <data-column key="name" type="text" class="full-width ellipsis-cell">\n                    <ng-template let-context>\n                        <adf-name-location-cell [row]="context.row"></adf-name-location-cell>\n                    </ng-template>\n                </data-column>\n                <data-column key="modifiedAt" type="date" format="timeAgo" class="adf-content-selector-modified-cell"></data-column>\n                <data-column key="modifiedByUser.displayName" type="text" class="adf-content-selector-modifier-cell"></data-column>\n                <data-column key="visibility" type="text"></data-column>\n            </data-columns>\n\n        </adf-document-list>\n\n        <adf-infinite-pagination\n            [target]="documentList"\n            [loading]="loadingSearchResults"\n            (loadMore)="getNextPageOfSearch($event)"\n            data-automation-id="content-node-selector-search-pagination">\n            {{ \'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE\' | translate }}\n        </adf-infinite-pagination>\n    </div>\n</div>\n',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-content-node-selector-panel"}}]}],vt.ctorParameters=function(){return[{type:gt},{type:c.AlfrescoApiService},{type:c.UserPreferencesService}]},vt.propDecorators={currentFolderId:[{type:l.Input}],dropdownHideMyFiles:[{type:l.Input}],dropdownSiteList:[{type:l.Input}],rowFilter:[{type:l.Input}],imageResolver:[{type:l.Input}],pageSize:[{type:l.Input}],isSelectionValid:[{type:l.Input}],breadcrumbTransform:[{type:l.Input}],select:[{type:l.Output}],documentList:[{type:l.ViewChild,args:["documentList"]}],highlighter:[{type:l.ViewChild,args:[c.HighlightDirective]}]};var bt=function(){};bt.decorators=[{type:l.NgModule,args:[{imports:[r.FormsModule,r.ReactiveFormsModule,c.DirectiveModule,p.CommonModule,k,u.TranslateModule,at,ct,c.ToolbarModule,je,c.DataColumnModule,c.DataTableModule,c.PaginationModule],exports:[vt,mt,U],entryComponents:[vt,U],declarations:[vt,mt,U],providers:[gt,V]}]}],bt.ctorParameters=function(){return[]};var St="CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS";function Et(e){var t=e.value;return!/([\*\"\<\>\\\/\?\:\|])/.test(t)?null:{message:St+".SPECIAL_CHARACTERS"}}function It(e){return"."!==(e.value||"").trim().split("").pop()?null:{message:St+".ENDING_DOT"}}function Ct(e){return!!(e.value||"").trim()?null:{message:St+".ONLY_SPACES"}}var At=function(){function e(e,t,n,i,o){this.formBuilder=e,this.dialog=t,this.nodesApi=n,this.translation=i,this.data=o,this.folder=null,this.error=new l.EventEmitter}return Object.defineProperty(e.prototype,"editing",{get:function(){return!!this.data.folder},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.data.folder,t="",n="";if(e){var i=e.properties;t=e.name||"",n=i?i["cm:description"]:""}var o={name:[r.Validators.required,Et,It,Ct]};this.form=this.formBuilder.group({name:[t,o.name],description:[n]})},Object.defineProperty(e.prototype,"name",{get:function(){return(this.form.value.name||"").trim()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return(this.form.value.description||"").trim()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return{"cm:title":this.name,"cm:description":this.description}},enumerable:!0,configurable:!0}),e.prototype.create=function(){var e=this.name,t=this.properties,n=this.nodesApi,i=this.data.parentNodeId;return n.createFolder(i,{name:e,properties:t})},e.prototype.edit=function(){var e=this.name,t=this.properties,n=this.nodesApi,i=this.data.folder.id;return n.updateNode(i,{name:e,properties:t})},e.prototype.submit=function(){var t=this,e=this.form,n=this.dialog,i=this.editing;e.valid&&(i?this.edit():this.create()).subscribe(function(e){return n.close(e)},function(e){return t.handleError(e)})},e.prototype.handleError=function(e){var t="CORE.MESSAGES.ERRORS.GENERIC";try{409===JSON.parse(e.message).error.statusCode&&(t="CORE.MESSAGES.ERRORS.EXISTENT_FOLDER")}catch(n){}return this.error.emit(this.translation.instant(t)),e},e}();At.decorators=[{type:l.Component,args:[{selector:"adf-folder-dialog",styles:[".adf-fill-remaining-space{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.adf-full-width{width:100%}"],template:'<h2 mat-dialog-title>\n    {{\n    (editing\n    ? \'CORE.FOLDER_DIALOG.EDIT_FOLDER_TITLE\'\n    : \'CORE.FOLDER_DIALOG.CREATE_FOLDER_TITLE\'\n    ) | translate\n    }}\n</h2>\n\n<mat-dialog-content>\n    <form [formGroup]="form" (submit)="submit()">\n        <mat-input-container class="adf-full-width">\n            <input\n                placeholder="{{ \'CORE.FOLDER_DIALOG.FOLDER_NAME.LABEL\' | translate }}"\n                matInput\n                required\n                [formControl]="form.controls[\'name\']"\n            />\n\n            <mat-hint *ngIf="form.controls[\'name\'].dirty">\n                <span *ngIf="form.controls[\'name\'].errors?.required">\n                    {{ \'CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS.REQUIRED\' | translate }}\n                </span>\n\n                <span *ngIf="!form.controls[\'name\'].errors?.required && form.controls[\'name\'].errors?.message">\n                    {{ form.controls[\'name\'].errors?.message | translate }}\n                </span>\n            </mat-hint>\n        </mat-input-container>\n\n        <br />\n        <br />\n\n        <mat-input-container class="adf-full-width">\n            <textarea\n                matInput\n                placeholder="{{ \'CORE.FOLDER_DIALOG.FOLDER_DESCRIPTION.LABEL\' | translate }}"\n                rows="4"\n                [formControl]="form.controls[\'description\']"></textarea>\n        </mat-input-container>\n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions class="adf-dialog-buttons">\n    <span class="adf-fill-remaining-space"></span>\n\n    <button\n        mat-button\n        mat-dialog-close>\n        {{ \'CORE.FOLDER_DIALOG.CANCEL_BUTTON.LABEL\' | translate }}\n    </button>\n\n    <button class="adf-dialog-action-button"\n            mat-button\n            (click)="submit()"\n            [disabled]="!form.valid">\n        {{\n        (editing\n        ? \'CORE.FOLDER_DIALOG.UPDATE_BUTTON.LABEL\'\n        : \'CORE.FOLDER_DIALOG.CREATE_BUTTON.LABEL\'\n        ) | translate\n        }}\n    </button>\n</mat-dialog-actions>\n'}]}],At.ctorParameters=function(){return[{type:r.FormBuilder},{type:t.MatDialogRef},{type:c.NodesApiService},{type:c.TranslationService},{type:undefined,decorators:[{type:l.Optional},{type:l.Inject,args:[t.MAT_DIALOG_DATA]}]}]},At.propDecorators={error:[{type:l.Output}]};var Ot=function(){};Ot.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k,u.TranslateModule,r.FormsModule,c.FormModule,r.ReactiveFormsModule,C.MatMomentDatetimeModule,I.MatDatetimepickerModule],declarations:[N,At,B,M,dt],exports:[N,At,B,M,dt],entryComponents:[N,At,B,M,dt]}]}],Ot.ctorParameters=function(){return[]};var wt="-my-",Dt=function(){function t(e,t){this.dialogRef=e,this.content=t,this.parentNodeId=wt,this.error=new l.EventEmitter}return t.prototype.onClick=function(e){e.preventDefault(),this.openDialog()},Object.defineProperty(t.prototype,"dialogConfig",{get:function(){var e=t.DIALOG_WIDTH;return{data:{parentNodeId:this.parentNodeId},width:e+"px"}},enumerable:!0,configurable:!0}),t.prototype.openDialog=function(){var t=this,e=this.dialogRef,n=this.dialogConfig,i=this.content,o=e.open(At,n);o.componentInstance.error.subscribe(function(e){t.error.emit(e)}),o.afterClosed().subscribe(function(e){e&&i.folderCreate.next(e)})},t}();Dt.DIALOG_WIDTH=400,Dt.decorators=[{type:l.Directive,args:[{selector:"[adf-create-folder]"}]}],Dt.ctorParameters=function(){return[{type:t.MatDialog},{type:c.ContentService}]},Dt.propDecorators={parentNodeId:[{type:l.Input,args:["adf-create-folder"]}],error:[{type:l.Output}],onClick:[{type:l.HostListener,args:["click",["$event"]]}]};var Tt=function(){function t(e,t,n){this.dialogRef=e,this.elementRef=t,this.content=n,this.error=new l.EventEmitter}return t.prototype.onClick=function(e){e.preventDefault(),this.folder&&this.openDialog()},Object.defineProperty(t.prototype,"dialogConfig",{get:function(){var e=t.DIALOG_WIDTH;return{data:{folder:this.folder},width:e+"px"}},enumerable:!0,configurable:!0}),t.prototype.openDialog=function(){var t=this,e=this.dialogRef,n=this.dialogConfig,i=this.content,o=e.open(At,n);o.componentInstance.error.subscribe(function(e){t.error.emit(e)}),o.afterClosed().subscribe(function(e){e&&i.folderEdit.next(e)})},t}();Tt.DIALOG_WIDTH=400,Tt.decorators=[{type:l.Directive,args:[{selector:"[adf-edit-folder]"}]}],Tt.ctorParameters=function(){return[{type:t.MatDialog},{type:l.ElementRef},{type:c.ContentService}]},Tt.propDecorators={folder:[{type:l.Input,args:["adf-edit-folder"]}],error:[{type:l.Output}],onClick:[{type:l.HostListener,args:["click",["$event"]]}]};var Ft=function(){};Ft.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k],declarations:[Dt,Tt],exports:[Dt,Tt]}]}],Ft.ctorParameters=function(){return[]};var Lt=function(){function e(){this.displayEmpty=!1,this.readOnly=!1,this.multi=!1,this.editable=!1,this.expanded=!1}return e.prototype.toggleEdit=function(){this.editable=!this.editable},e.prototype.toggleExpanded=function(){this.expanded=!this.expanded},e}();Lt.decorators=[{type:l.Component,args:[{selector:"adf-content-metadata-card",template:'<mat-card *ngIf="node">\n    <mat-card-content>\n        <adf-content-metadata\n            [node]="node"\n            [displayEmpty]="displayEmpty"\n            [editable]="editable"\n            [expanded]="expanded"\n            [multi]="multi"\n            [preset]="preset">\n        </adf-content-metadata>\n    </mat-card-content>\n    <mat-card-footer class="adf-content-metadata-card-footer" fxLayout="row" fxLayoutAlign="space-between stretch">\n        <div>\n            <button *ngIf="!readOnly"\n                mat-icon-button\n                (click)="toggleEdit()"\n                [attr.title]="\'CORE.METADATA.ACTIONS.EDIT\' | translate"\n                data-automation-id="mata-data-card-toggle-edit">\n                <mat-icon>mode_edit</mat-icon>\n            </button>\n        </div>\n        <button mat-button (click)="toggleExpanded()" data-automation-id="mata-data-card-toggle-expand">\n            <ng-container *ngIf="!expanded">\n                <span data-automation-id="mata-data-card-toggle-expand-label">{{ \'ADF_VIEWER.SIDEBAR.METADATA.MORE_INFORMATION\' | translate }}</span>\n                <mat-icon>keyboard_arrow_down</mat-icon>\n            </ng-container>\n            <ng-container *ngIf="expanded">\n                <span data-automation-id="mata-data-card-toggle-expand-label">{{ \'ADF_VIEWER.SIDEBAR.METADATA.LESS_INFORMATION\' | translate }}</span>\n                <mat-icon>keyboard_arrow_up</mat-icon>\n            </ng-container>\n        </button>\n    </mat-card-footer>\n</mat-card>\n',styles:[""],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-content-metadata-card"}}]}],Lt.ctorParameters=function(){return[]},Lt.propDecorators={node:[{type:l.Input}],displayEmpty:[{type:l.Input}],preset:[{type:l.Input}],readOnly:[{type:l.Input}],multi:[{type:l.Input}]};var Nt=function(){function e(e){this.fileSizePipe=e}return e.prototype.getProperties=function(e){var t=e.content?e.content.sizeInBytes:"",n=e.content?e.content.mimeTypeName:"",i=e.properties?e.properties["cm:author"]:"",o=e.properties?e.properties["cm:description"]:"",r=e.properties?e.properties["cm:title"]:"";return[new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.NAME",value:e.name,key:"name",editable:!0}),new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.TITLE",value:r,key:"properties.cm:title",editable:!0}),new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.CREATOR",value:e.createdByUser.displayName,key:"createdByUser.displayName",editable:!1}),new c.CardViewDateItemModel({label:"CORE.METADATA.BASIC.CREATED_DATE",value:e.createdAt,key:"createdAt",editable:!1}),new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.SIZE",value:t,key:"content.sizeInBytes",pipes:[{pipe:this.fileSizePipe}],editable:!1}),new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.MODIFIER",value:e.modifiedByUser.displayName,key:"modifiedByUser.displayName",editable:!1}),new c.CardViewDateItemModel({label:"CORE.METADATA.BASIC.MODIFIED_DATE",value:e.modifiedAt,key:"modifiedAt",editable:!1}),new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.MIMETYPE",value:n,key:"content.mimeTypeName",editable:!1}),new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.AUTHOR",value:i,key:"properties.cm:author",editable:!0}),new c.CardViewTextItemModel({label:"CORE.METADATA.BASIC.DESCRIPTION",value:o,key:"properties.cm:description",multiline:!0,editable:!0})]},e}();Nt.decorators=[{type:l.Injectable}],Nt.ctorParameters=function(){return[{type:c.FileSizePipe}]};var xt="d:mltext",Mt="d:datetime",Rt="d:float",Pt="d:double",kt="d:boolean",_t=function(){function t(e){this.logService=e}return t.prototype.translateToCardViewGroups=function(e,n){var i=this;return e.map(function(e){var t=Object.assign({},e);return t.properties=i.translateArray(e.properties,n),t})},t.prototype.translateArray=function(e,t){var n=this;return e.map(function(e){return n.translate(e,t[e.name])})},t.prototype.translate=function(e,t){this.checkECMTypeValidity(e.dataType);var n,i={label:e.title,value:t,key:"properties."+e.name,"default":e.defaultValue,editable:!0};switch(e.dataType){case xt:n=new c.CardViewTextItemModel(Object.assign(i,{multiline:!0}));break;case"d:int":case"d:long":n=new c.CardViewIntItemModel(i);break;case Rt:case Pt:n=new c.CardViewFloatItemModel(i);break;case"d:date":n=new c.CardViewDateItemModel(i);break;case Mt:n=new c.CardViewDatetimeItemModel(i);break;case kt:n=new c.CardViewBoolItemModel(i);break;case"d:text":default:n=new c.CardViewTextItemModel(Object.assign(i,{multiline:!1}))}return n},t.prototype.checkECMTypeValidity=function(e){-1===t.RECOGNISED_ECM_TYPES.indexOf(e)&&this.logService.error("Unknown type for mapping: "+e)},t}();_t.RECOGNISED_ECM_TYPES=["d:text",xt,"d:date",Mt,"d:int","d:long",Rt,Pt,kt],_t.decorators=[{type:l.Injectable}],_t.ctorParameters=function(){return[{type:c.LogService}]};var Ut={properties:{}};function Bt(e,t){return e[t]}function Vt(e,t,n){var i,o,r=Bt(e,t)||Ut;return"*"===n?(o=r.properties,i=Object.keys(o).map(function(e){return o[e]})):i=r.properties[n],i}var jt=function(){function e(e){this.config=e}return e.prototype.isGroupAllowed=function(e){return-1!==Object.keys(this.config).indexOf(e)},e.prototype.reorganiseByConfig=function(i){var o=this,e=this.config;return Object.keys(e).reduce(function(e,t){var n=o.getOrganisedPropertyGroup(i,t);return e.concat(n)},[]).filter(function(e){return 0<e.properties.length})},e.prototype.getOrganisedPropertyGroup=function(t,n){var e=Bt(t,n),i=[];if(e){var o=this.config[n],r=void 0;r="*"===o?Vt(t,n,o):o.map(function(e){return Vt(t,n,e)}).filter(function(e){return e!==undefined}),i=[{title:e.title,properties:r}]}return i},e}();jt.decorators=[{type:l.Injectable}],jt.ctorParameters=function(){return[null]};var Ht=function(){function e(e){}return e.prototype.isGroupAllowed=function(e){return!0},e.prototype.reorganiseByConfig=function(i){return Object.keys(i).map(function(e){var t=i[e],n=t.properties;return Object.assign({},t,{properties:Object.keys(n).map(function(e){return n[e]})})})},e}();Ht.decorators=[{type:l.Injectable}],Ht.ctorParameters=function(){return[null]};var Gt=function(){function e(e){this.config=e}return e.prototype.isGroupAllowed=function(e){return 0<this.getMatchingGroups(e).length},e.prototype.reorganiseByConfig=function(i){var n=this;return this.config.map(function(e){var t=n.flattenItems(e.items).reduce(function(e,t){var n=Vt(i,t.groupName,t.propertyName)||[];return e.concat(n)},[]);return{title:e.title,properties:t}})},e.prototype.flattenItems=function(e){return e.reduce(function(e,t){var n=(Array.isArray(t.properties)?t.properties:[t.properties]).map(function(e){return{groupName:t.aspect||t.type,propertyName:e}});return e.concat(n)},[])},e.prototype.getMatchingGroups=function(t){return this.config.map(function(e){return e.items}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.aspect===t||e.type===t})},e}();Gt.decorators=[{type:l.Injectable}],Gt.ctorParameters=function(){return[null]};var qt=function(){function i(e,t){this.appConfigService=e,this.logService=t}return i.prototype.get=function(e){var t;void 0===e&&(e="default");try{t=this.appConfigService.config["content-metadata"].presets[e]}catch(n){e!==i.DEFAULT_PRESET_NAME&&this.logService.error("No content-metadata preset for: "+e),t=i.INDIFFERENT_PRESET}return this.createConfig(t)},i.prototype.createConfig=function(e){var t;return t=this.isLayoutOrientedPreset(e)?new Gt(e):this.isAspectOrientedPreset(e)?new jt(e):new Ht(e),Object.freeze(t),t},i.prototype.isAspectOrientedPreset=function(e){return this.isObject(e)},i.prototype.isLayoutOrientedPreset=function(e){return Array.isArray(e)},i.prototype.isObject=function(e){return null!=e&&"object"==typeof e},i}();qt.INDIFFERENT_PRESET="*",qt.DEFAULT_PRESET_NAME="default",qt.decorators=[{type:l.Injectable}],qt.ctorParameters=function(){return[{type:c.AppConfigService},{type:c.LogService}]};var $t=function(){function e(e){this.alfrescoApiService=e}return e.prototype.load=function(e){var t=this,n=e.map(function(e){return e.replace(":","_")}).map(function(e){return O.defer(function(){return t.alfrescoApiService.classesApi.getClass(e)})});return A.forkJoin(n).map(this.convertToObject)},e.prototype.convertToObject=function(e){return e.reduce(function(e,t){return Object.assign({},e,((n={})[t.name]=t,n));var n},{})},e}();$t.decorators=[{type:l.Injectable}],$t.ctorParameters=function(){return[{type:c.AlfrescoApiService}]};var Qt=function(){function e(e,t,n,i){this.basicPropertiesService=e,this.contentMetadataConfigFactory=t,this.propertyGroupTranslatorService=n,this.propertyDescriptorsService=i}return e.prototype.getBasicProperties=function(e){return a.Observable.of(this.basicPropertiesService.getProperties(e))},e.prototype.getGroupedProperties=function(t,e){var n=this;void 0===e&&(e="default");var i=a.Observable.of([]);if(t.aspectNames){var o=this.contentMetadataConfigFactory.get(e),r=t.aspectNames.concat(t.nodeType).filter(function(e){return o.isGroupAllowed(e)});0<r.length&&(i=this.propertyDescriptorsService.load(r).map(function(e){return o.reorganiseByConfig(e)}).map(function(e){return n.propertyGroupTranslatorService.translateToCardViewGroups(e,t.properties)}))}return i},e}();Qt.decorators=[{type:l.Injectable}],Qt.ctorParameters=function(){return[{type:Nt},{type:qt},{type:_t},{type:$t}]};var zt=function(){function e(e,t,n,i,o){this.contentMetadataService=e,this.cardViewUpdateService=t,this.nodesApi=n,this.logService=i,this.apiService=o,this.editable=!1,this.displayEmpty=!1,this.expanded=!1,this.multi=!1,this.nodeHasBeenUpdated=!1}return e.prototype.ngOnInit=function(){var t=this;this.cardViewUpdateService.itemUpdated$.switchMap(this.saveNode.bind(this)).subscribe(function(e){t.nodeHasBeenUpdated=!0,t.node=e,t.apiService.nodeUpdated.next(e)},function(e){return t.logService.error(e)})},e.prototype.ngOnChanges=function(e){var t=e.node;if(t||this.nodeHasBeenUpdated){var n=t&&t.currentValue||this.node;this.nodeHasBeenUpdated=!1,this.basicProperties$=this.contentMetadataService.getBasicProperties(n),this.groupedProperties$=this.contentMetadataService.getGroupedProperties(n,this.preset)}},e.prototype.saveNode=function(e){var t=e.changed;return this.nodesApi.updateNode(this.node.id,t)},e}();zt.decorators=[{type:l.Component,args:[{selector:"adf-content-metadata",template:'<div class="adf-metadata-properties">\n    <mat-accordion displayMode="flat" [multi]="multi">\n        <mat-expansion-panel [expanded]="!expanded" [hideToggle]="!expanded">\n            <mat-expansion-panel-header>\n                <mat-panel-title>\n                    {{ \'CORE.METADATA.BASIC.HEADER\' | translate }}\n                </mat-panel-title>\n            </mat-expansion-panel-header>\n\n            <adf-card-view\n                [properties]="basicProperties$ | async"\n                [editable]="editable"\n                [displayEmpty]="displayEmpty">\n            </adf-card-view>\n        </mat-expansion-panel>\n\n        <ng-container *ngIf="expanded">\n            <ng-container *ngIf="groupedProperties$ | async; else loading; let groupedProperties">\n                <div *ngFor="let group of groupedProperties" class="adf-metadata-grouped-properties-container">\n                    <mat-expansion-panel>\n                        <mat-expansion-panel-header>\n                            <mat-panel-title>\n                                {{ group.title | translate }}\n                            </mat-panel-title>\n                        </mat-expansion-panel-header>\n\n                        <adf-card-view\n                            [properties]="group.properties"\n                            [editable]="editable"\n                            [displayEmpty]="displayEmpty">\n                        </adf-card-view>\n                    </mat-expansion-panel>\n                </div>\n            </ng-container>\n            <ng-template #loading>\n                <mat-progress-bar mode="indeterminate"></mat-progress-bar>\n            </ng-template>\n        </ng-container>\n    </mat-accordion>\n</div>',styles:[""],host:{"class":"adf-content-metadata"},encapsulation:l.ViewEncapsulation.None}]}],zt.ctorParameters=function(){return[{type:Qt},{type:c.CardViewUpdateService},{type:c.NodesApiService},{type:c.LogService},{type:c.AlfrescoApiService}]},zt.propDecorators={node:[{type:l.Input}],editable:[{type:l.Input}],displayEmpty:[{type:l.Input}],expanded:[{type:l.Input}],multi:[{type:l.Input}],preset:[{type:l.Input}]};var Yt=function(){};Yt.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,k,u.TranslateModule,m.FlexLayoutModule,c.CardViewModule],exports:[zt,Lt],declarations:[zt,Lt]}]}],Yt.ctorParameters=function(){return[]};var Wt=function(e){this.isInherited=!1,e&&(this.authorityId=e.authorityId,this.name=e.name,this.accessStatus=e.accessStatus,this.isInherited=null!==e.isInherited&&e.isInherited!==undefined&&e.isInherited,this.icon=e.icon?e.icon:"lock_open")},Zt=function(){function e(e,t,n){this.apiService=e,this.searchApiService=t,this.nodeService=n}return e.prototype.getNodeRoles=function(n){var i=this,e=this.buildRetrieveSiteQueryBody(n.path.elements);return this.searchApiService.searchByQueryBody(e).switchMap(function(e){if(0<e.list.entries.length){var t=e.list.entries[0].entry.name;return i.getGroupMembersBySiteName(t)}return a.Observable.of(n.permissions.settable)})},e.prototype.updatePermissionRoles=function(e,t){var n={permissions:{locallySet:[]}},i=e.permissions.locallySet.map(function(e){return e.authorityId}).indexOf(t.authorityId);return n.permissions.locallySet=n.permissions.locallySet.concat(e.permissions.locallySet),-1!==i?n.permissions.locallySet[i]=t:n.permissions.locallySet.push(t),this.nodeService.updateNode(e.id,n)},e.prototype.getGroupMembersBySiteName=function(n){var i=this,e="GROUP_site_"+n;return this.getGroupMemeberByGroupName(e).map(function(e){var t=[];return e.list.entries.forEach(function(e){t.push(i.formattedRoleName(e.entry.displayName,"site_"+n))}),t})},e.prototype.getGroupMemeberByGroupName=function(e,t){return a.Observable.fromPromise(this.apiService.groupsApi.getGroupMembers(e,t))},e.prototype.formattedRoleName=function(e,t){return e.replace(t+"_","")},e.prototype.buildRetrieveSiteQueryBody=function(e){return{query:{query:e.map(function(e){return'name: "'+e.name+'"'}).join(" OR ")},paging:{maxItems:100,skipCount:0},include:["aspectNames","properties"],filterQueries:[{query:"TYPE:'st:site'"}]}},e}();Zt.decorators=[{type:l.Injectable}],Zt.ctorParameters=function(){return[{type:c.AlfrescoApiService},{type:c.SearchService},{type:c.NodesApiService}]};var Xt=function(){function e(e,t){this.nodeService=e,this.nodePermissionService=t,this.nodeId="",this.update=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.fetchNodePermissions()},e.prototype.reload=function(){this.fetchNodePermissions()},e.prototype.fetchNodePermissions=function(){var t=this;this.nodeService.getNode(this.nodeId).subscribe(function(e){t.actualNode=e,t.permissionList=t.getPermissionList(e),t.nodePermissionService.getNodeRoles(e).subscribe(function(e){t.settableRoles=e})})},e.prototype.getPermissionList=function(e){var n=[];return e.permissions.locallySet&&e.permissions.locallySet.map(function(e){var t=new Wt(e);n.push(t)}),e.permissions.inherited&&e.permissions.inherited.map(function(e){var t=new Wt(e);t.isInherited=!0,n.push(t)}),n},e.prototype.saveNewRole=function(e,t){var n=this,i=this.buildUpdatedPermission(e.value,t);this.nodePermissionService.updatePermissionRoles(this.actualNode,i).subscribe(function(e){n.update.emit(i)})},e.prototype.buildUpdatedPermission=function(e,t){var n={};return n.accessStatus=t.accessStatus,n.name=e,n.authorityId=t.authorityId,n},e}();Xt.decorators=[{type:l.Component,args:[{selector:"adf-permission-list",template:'<div id="adf-permission-display-container" class="adf-display-permission-container">\n    <adf-datatable [rows]="permissionList" class="adf-datatable-permission">\n        <data-columns>\n            <data-column key="icon" type="icon" [sortable]="false">\n            </data-column>\n            <data-column title="{{\'PERMISSION_MANAGER.PERMISSION_DISPLAY.AUTHORITY_ID\' | translate}}" key="authorityId"></data-column>\n            <data-column title="{{\'PERMISSION_MANAGER.PERMISSION_DISPLAY.ROLE\' | translate}}" key="name">\n                <ng-template let-entry="$implicit">\n                    <mat-form-field *ngIf="!entry.row.getValue(\'isInherited\') else show_only_label">\n                        <mat-select id="adf-select-role-permission"\n                                    value="{{entry.data.getValue(entry.row, entry.col)}}"\n                                    (selectionChange)="saveNewRole($event, entry.row.obj)">\n                          <mat-option *ngFor="let role of settableRoles" [value]="role">\n                            {{ role }}\n                          </mat-option>\n                        </mat-select>\n                      </mat-form-field>\n                      <ng-template #show_only_label>\n                          <span>{{entry.data.getValue(entry.row, entry.col)}}</span>\n                      </ng-template>\n                </ng-template>\n            </data-column>\n            <data-column title="{{\'PERMISSION_MANAGER.PERMISSION_DISPLAY.INHERITED\' | translate}}" key="isInherited">\n                <ng-template let-entry="$implicit">\n                    <mat-chip-list>\n                        <mat-chip *ngIf="!!entry.data.getValue(entry.row, entry.col) else locally_set_chip"\n                                id="adf-permission-inherited-label"\n                                color="primary" selected="true">{{\'PERMISSION_MANAGER.PERMISSION_DISPLAY.INHERITED\' | translate}}</mat-chip>\n                    </mat-chip-list>\n                    <ng-template #locally_set_chip>\n                            <mat-chip-list>\n                                    <mat-chip id="adf-permission-locallyset-label"\n                                              color="accent" selected="true">\n                                              {{\'PERMISSION_MANAGER.PERMISSION_DISPLAY.LOCALLY_SET\' | translate}}\n                                    </mat-chip>\n                            </mat-chip-list>\n                    </ng-template>\n                </ng-template>\n            </data-column>\n        </data-columns>\n    </adf-datatable>\n</div>\n\n',styles:[""],encapsulation:l.ViewEncapsulation.None}]}],Xt.ctorParameters=function(){return[{type:c.NodesApiService},{type:Zt}]},Xt.propDecorators={nodeId:[{type:l.Input}],update:[{type:l.Output}]};var Kt=function(){function e(e){this.nodeService=e,this.updated=new l.EventEmitter}return e.prototype.onInheritPermissionClicked=function(){var n=this;this.nodeService.getNode(this.nodeId).subscribe(function(e){var t={permissions:{isInheritanceEnabled:!e.permissions.isInheritanceEnabled}};n.nodeService.updateNode(n.nodeId,t,{include:["permissions"]}).subscribe(function(e){n.updated.emit(e)})})},e}();Kt.decorators=[{type:l.Directive,args:[{selector:"button[adf-inherit-permission], mat-button-toggle[adf-inherit-permission]",host:{role:"button","(click)":"onInheritPermissionClicked()"}}]}],Kt.ctorParameters=function(){return[{type:c.NodesApiService}]},Kt.propDecorators={nodeId:[{type:l.Input}],updated:[{type:l.Output}]};var Jt=function(){};Jt.decorators=[{type:l.NgModule,args:[{imports:[p.CommonModule,r.FormsModule,r.ReactiveFormsModule,k,u.TranslateModule,c.DataTableModule,c.DataColumnModule],declarations:[Xt,Kt],providers:[Zt],exports:[Xt,Kt]}]}],Jt.ctorParameters=function(){return[]};var en=function(){};en.decorators=[{type:l.NgModule,args:[{imports:[c.CoreModule,Q,X,p.CommonModule,J,r.FormsModule,r.ReactiveFormsModule,Ot,it,je,Ve,k,at,ct,bt,Yt,Ft,H,Jt,ft],providers:[{provide:c.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"adf-content-services",source:"assets/adf-content-services"}},G,Qt,$t,qt,Nt,_t,He],exports:[c.CoreModule,Q,X,J,je,Ve,it,at,ct,bt,Yt,Ot,Ft,H,Jt,ft]}]}],en.ctorParameters=function(){return[]},e.NodeDownloadDirective=x,e.NodeSharedDirective=R,e.ContentDirectiveModule=H,e.RatingComponent=q,e.LikeComponent=$,e.RatingService=G,e.SocialModule=Q,e.TagActionsComponent=Y,e.TagListComponent=W,e.TagNodeListComponent=Z,e.TagService=z,e.TagModule=X,e.WebscriptComponent=K,e.WebScriptModule=J,e.PaginationStrategy=de,e.DocumentListComponent=pe,e.NodeEntityEvent=se,e.NodeEntryEvent=le,e.ContentColumnComponent=he,e.ContentColumnListComponent=ue,e.ContentActionComponent=be,e.ContentActionListComponent=ve,e.EmptyFolderContentDirective=Se,e.NoPermissionContentDirective=Ee,e.ShareDataTableAdapter=te,e.ShareDataRow=ee,e.FolderActionsService=ye,e.DocumentActionsService=ge,e.DocumentListService=_,e.NodeActionsService=me,e.CustomResourcesService=ce,e.ContentActionModel=ie,e.ContentActionTarget=oe,e.DocumentActionModel=re,e.FolderActionModel=ae,e.NodePaging=Ie,e.NodePagingList=Ce,e.NodeMinimalEntry=Ae,e.Pagination=Oe,e.NodeMinimal=we,e.UserInfo=De,e.ContentInfo=Te,e.PathInfoEntity=Fe,e.PathElementEntity=Le,e.PermissionModel=fe,e.PermissionStyleModel=Ne,e.DocumentListModule=je,e.UploadButtonComponent=ke,e.UploadVersionButtonComponent=_e,e.FileUploadingDialogComponent=Me,e.UploadDragAreaComponent=Ue,e.FileUploadingListComponent=xe,e.FileUploadingListRowComponent=Re,e.FileDraggableDirective=Be,e.UploadBase=Pe,e.UploadModule=Ve,e.SearchQueryBuilderService=He,e.SearchComponent=Ge,e.SearchControlComponent=$e,e.SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR=Qe,e.SearchTriggerDirective=ze,e.EmptySearchResultComponent=qe,e.SearchFilterComponent=Ye,e.SearchChipListComponent=We,e.ALFRESCO_SEARCH_DIRECTIVES=nt,e.SearchModule=it,e.Relations=ot,e.DropdownSitesComponent=rt,e.SitesDropdownModule=at,e.BreadcrumbComponent=st,e.DropdownBreadcrumbComponent=lt,e.BreadcrumbModule=ct,e.VersionListComponent=pt,e.VersionManagerComponent=ut,e.VersionUploadComponent=ht,e.VersionManagerModule=ft,e.NameLocationCellComponent=mt,e.ContentNodeSelectorPanelComponent=vt,e.ContentNodeSelectorComponent=U,e.ContentNodeSelectorService=gt,e.ContentNodeDialogService=V,e.ContentNodeSelectorModule=bt,e.DownloadZipDialogComponent=N,e.FolderDialogComponent=At,e.NodeLockDialogComponent=B,e.ShareDialogComponent=M,e.ConfirmDialogComponent=dt,e.DialogModule=Ot,e.FolderCreateDirective=Dt,e.FolderEditDirective=Tt,e.FolderDirectiveModule=Ft,e.ContentMetadataCardComponent=Lt,e.BasicPropertiesService=Nt,e.ContentMetadataService=Qt,e.PropertyDescriptorsService=$t,e.PropertyGroupTranslatorService=_t,e.ContentMetadataConfigFactory=qt,e.IndifferentConfigService=Ht,e.LayoutOrientedConfigService=Gt,e.AspectOrientedConfigService=jt,e.ContentMetadataModule=Yt,e.PermissionListComponent=Xt,e.InheritPermissionDirective=Kt,e.NodePermissionService=Zt,e.PermissionDisplayModel=Wt,e.PermissionManagerModule=Jt,e.ContentModule=en,e.e=zt,e.c=j,e.b=k,e.a=P,e.i=Kt,e.g=Xt,e.f=Jt,e.h=Zt,e.d=tt,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=adf-content-services.umd.min.js.map
