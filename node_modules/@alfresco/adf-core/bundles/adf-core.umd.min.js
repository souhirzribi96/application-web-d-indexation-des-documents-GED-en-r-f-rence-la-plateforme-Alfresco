/**
 * @license
 * Copyright 2018 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("@angular/core"),require("rxjs/BehaviorSubject"),require("alfresco-js-api"),require("rxjs/Subject"),require("@angular/common"),require("@ngx-translate/core"),require("rxjs/add/operator/distinctUntilChanged"),require("rxjs/Observable"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/operator/catch"),require("rxjs/add/observable/throw"),require("@angular/platform-browser"),require("rxjs/add/operator/do"),require("@angular/material"),require("@angular/forms"),require("rxjs/add/operator/toPromise"),require("@mat-datetimepicker/core"),require("rxjs/add/observable/of"),require("rxjs/add/operator/concat"),require("rxjs/add/operator/share"),require("rxjs/add/operator/map"),require("rxjs/add/operator/merge"),require("rxjs/add/operator/switchMap"),require("rxjs/add/operator/toArray"),require("rxjs/add/operator/take"),require("moment-es6"),require("@angular/flex-layout"),require("@angular/router"),require("moment"),require("rxjs/add/operator/debounceTime"),require("rxjs/add/operator/buffer"),require("rxjs/add/operator/filter"),require("@angular/cdk/overlay"),require("@angular/cdk/scrolling"),require("rxjs/observable/forkJoin"),require("rxjs/add/observable/from"),require("rxjs/add/observable/zip"),require("rxjs/add/operator/mergeMap"),require("@mat-datetimepicker/moment"),require("rxjs/add/operator/defaultIfEmpty"),require("@angular/animations"),require("@angular/cdk/keycodes"),require("@angular/http"),require("@angular/cdk/layout"),require("rxjs/add/operator/concatMap"),require("rxjs/add/operator/combineAll"),require("rxjs/add/observable/interval"),require("rxjs/add/operator/takeWhile"),require("rxjs/operators"),require("rxjs/add/observable/forkJoin"),require("minimatch")):"function"==typeof define&&define.amd?define("@alfresco/adf-core",["exports","@angular/common/http","@angular/core","rxjs/BehaviorSubject","alfresco-js-api","rxjs/Subject","@angular/common","@ngx-translate/core","rxjs/add/operator/distinctUntilChanged","rxjs/Observable","rxjs/add/observable/fromPromise","rxjs/add/operator/catch","rxjs/add/observable/throw","@angular/platform-browser","rxjs/add/operator/do","@angular/material","@angular/forms","rxjs/add/operator/toPromise","@mat-datetimepicker/core","rxjs/add/observable/of","rxjs/add/operator/concat","rxjs/add/operator/share","rxjs/add/operator/map","rxjs/add/operator/merge","rxjs/add/operator/switchMap","rxjs/add/operator/toArray","rxjs/add/operator/take","moment-es6","@angular/flex-layout","@angular/router","moment","rxjs/add/operator/debounceTime","rxjs/add/operator/buffer","rxjs/add/operator/filter","@angular/cdk/overlay","@angular/cdk/scrolling","rxjs/observable/forkJoin","rxjs/add/observable/from","rxjs/add/observable/zip","rxjs/add/operator/mergeMap","@mat-datetimepicker/moment","rxjs/add/operator/defaultIfEmpty","@angular/animations","@angular/cdk/keycodes","@angular/http","@angular/cdk/layout","rxjs/add/operator/concatMap","rxjs/add/operator/combineAll","rxjs/add/observable/interval","rxjs/add/operator/takeWhile","rxjs/operators","rxjs/add/observable/forkJoin","minimatch"],t):t((e.alfresco=e.alfresco||{},e.alfresco["adf-core"]={}),e.ng.common.http,e.ng.core,e.Rx,e["alfresco-js-api"],e.Rx,e.ng.common,e["@ngx-translate/core"],e.Rx.Observable.prototype,e.Rx,e.Rx.Observable,e.Rx.Observable.prototype,e.Rx.Observable,e.ng.platformBrowser,e.Rx.Observable.prototype,e["@angular/material"],e.ng.forms,e.Rx.Observable.prototype,e["@mat-datetimepicker/core"],e.Rx.Observable,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e["moment-es6"],e["@angular/flex-layout"],e.ng.router,e.moment,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.ng.cdk.overlay,e.ng.cdk.scrolling,e.Rx.Observable,e.Rx.Observable,e.Rx.Observable,e.Rx.Observable.prototype,e["@mat-datetimepicker/moment"],e.Rx.Observable.prototype,e["@angular/animations"],e.ng.cdk.keycodes,e.ng.http,e.ng.cdk.layout,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable,e.minimatch)}(this,function(e,t,l,r,n,o,i,a,s,u,c,p,d,m,f,h,g,y,v,b,w,E,I,C,S,T,x,O,A,P,D,F,R,k,_,M,L,V,N,U,B,j,Y,q,z,H,G,W,X,$,K,J,Q){"use strict";O=O&&O.hasOwnProperty("default")?O["default"]:O;var Z=Q["default"],ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function te(e,t){function n(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ne(t,a,s,l){return new(s||(s=Promise))(function(e,n){function i(e){try{o(l.next(e))}catch(t){n(t)}}function r(e){try{o(l["throw"](e))}catch(t){n(t)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,r)}o((l=l.apply(t,a||[])).next())})}function ie(n,i){var r,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function re(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function oe(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a}function ae(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(oe(arguments[t]));return e}var se=function(){function e(){this.isDefaultPrevented=!1}return Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this.isDefaultPrevented},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){this.isDefaultPrevented=!0},e}(),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(se),ue={Pending:0,Complete:1,Starting:2,Progress:3,Cancelled:4,Aborted:5,Error:6,Deleted:7};ue[ue.Pending]="Pending",ue[ue.Complete]="Complete",ue[ue.Starting]="Starting",ue[ue.Progress]="Progress",ue[ue.Cancelled]="Cancelled",ue[ue.Aborted]="Aborted",ue[ue.Error]="Error",ue[ue.Deleted]="Deleted";var ce=function(){function e(e,t){this.status=ue.Pending,this.file=e,this.id=this.generateId(),this.name=e.name,this.size=e.size,this.data=null,this.progress={loaded:0,total:0,percent:0},this.options=Object.assign({},{newVersion:!1},t)}return e.prototype.generateId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},Object.defineProperty(e.prototype,"extension",{get:function(){return this.name.slice((Math.max(0,this.name.lastIndexOf("."))||Infinity)+1)},enumerable:!0,configurable:!0}),e}(),pe=function(e,t,n){void 0===t&&(t=ue.Pending),void 0===n&&(n=null),this.file=e,this.status=t,this.error=n},de=function(o){function e(e,t,n,i){void 0===t&&(t=0),void 0===i&&(i=0);var r=o.call(this,e,ue.Complete)||this;return r.totalComplete=t,r.data=n,r.totalAborted=i,r}return te(e,o),e}(pe),me=function(i){function e(e,t){void 0===t&&(t=0);var n=i.call(this,e,ue.Deleted)||this;return n.totalComplete=t,n}return te(e,i),e}(pe),fe=function(r){function e(e,t,n){void 0===n&&(n=0);var i=r.call(this,e,ue.Error)||this;return i.error=t,i.totalError=n,i}return te(e,r),e}(pe),he=function(){function i(){}return i.getValue=function(e,t){if(!e)return undefined;var n=t.split(".");t="";do{var i=e[t+=n.shift()];i===undefined||"object"!=typeof i&&n.length?n.length?t+=".":e=undefined:(e=i,t="")}while(n.length);return e},i.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};return e.forEach(function(t){Object.keys(t).forEach(function(e){e in n&&Array.isArray(n[e])?n[e]=n[e].concat(t[e]):e in n&&"object"==typeof n[e]?n[e]=i.merge(n[e],t[e]):n[e]=t[e]})}),n},i}(),ge=function(){function e(e){this.http=e,this.config={application:{name:"Alfresco ADF Application"},ecmHost:"http://{hostname}{:port}/ecm",bpmHost:"http://{hostname}{:port}/bpm",logLevel:"silent",alfrescoRepositoryName:"alfresco-1"},this.onLoadSubject=new r.BehaviorSubject(this.config),this.onLoad=this.onLoadSubject.asObservable()}return e.prototype.select=function(t){return this.onLoadSubject.map(function(e){return e[t]}).distinctUntilChanged()},e.prototype.get=function(e,t){var n=he.getValue(this.config,e);if("string"==typeof n){var i=new Map;i.set("hostname",this.getLocationHostname()),i.set(":port",this.getLocationPort(":")),i.set("port",this.getLocationPort()),n=this.formatString(n,i)}return n===undefined?t:n},e.prototype.getLocationHostname=function(){return location.hostname},e.prototype.getLocationPort=function(e){return void 0===e&&(e=""),location.port?e+location.port:""},e.prototype.load=function(){var n=this;return new Promise(function(t){n.http.get("app.config.json").subscribe(function(e){n.config=Object.assign({},n.config,e||{}),n.onLoadSubject.next(n.config),t(n.config)},function(){t(n.config)})})},e.prototype.formatString=function(e,t){var i=e;return t.forEach(function(e,t){var n=new RegExp("{"+t+"}","gm");i=i.replace(n,e)}),i},e}();ge.APP_CONFIG_LANGUAGES_KEY="languages",ge.decorators=[{type:l.Injectable}],ge.ctorParameters=function(){return[{type:t.HttpClient}]};var ye=function(){function e(){this.memoryStore={},this.useLocalStorage=!1,this.useLocalStorage=this.storageAvailable("localStorage")}return e.prototype.getItem=function(e){return this.useLocalStorage?localStorage.getItem(e):this.memoryStore.hasOwnProperty(e)?this.memoryStore[e]:null},e.prototype.setItem=function(e,t){this.useLocalStorage?localStorage.setItem(e,t):this.memoryStore[e]=t.toString()},e.prototype.clear=function(){this.useLocalStorage?localStorage.clear():this.memoryStore={}},e.prototype.removeItem=function(e){this.useLocalStorage?localStorage.removeItem(e):delete this.memoryStore[e]},e.prototype.hasItem=function(e){return this.useLocalStorage?!!localStorage.getItem(e):this.memoryStore.hasOwnProperty(e)},e.prototype.storageAvailable=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n,n),!0}catch(i){return!1}},e}();ye.decorators=[{type:l.Injectable}],ye.ctorParameters=function(){return[]};var ve=function(){function e(e,t){this.appConfig=e,this.storage=t,this.nodeUpdated=new o.Subject}return e.prototype.getInstance=function(){return this.alfrescoApi},Object.defineProperty(e.prototype,"contentApi",{get:function(){return this.getInstance().content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodesApi",{get:function(){return this.getInstance().nodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renditionsApi",{get:function(){return this.getInstance().core.renditionsApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sharedLinksApi",{get:function(){return this.getInstance().core.sharedlinksApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sitesApi",{get:function(){return this.getInstance().core.sitesApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"favoritesApi",{get:function(){return this.getInstance().core.favoritesApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peopleApi",{get:function(){return this.getInstance().core.peopleApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchApi",{get:function(){return this.getInstance().search.searchApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"versionsApi",{get:function(){return this.getInstance().core.versionsApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classesApi",{get:function(){return this.getInstance().core.classesApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupsApi",{get:function(){return this.getInstance().core.groupsApi},enumerable:!0,configurable:!0}),e.prototype.load=function(){return ne(this,void 0,void 0,function(){var t=this;return ie(this,function(e){switch(e.label){case 0:return[4,this.appConfig.load().then(function(){t.initAlfrescoApi()})];case 1:return e.sent(),[2]}})})},e.prototype.reset=function(){return ne(this,void 0,void 0,function(){return ie(this,function(e){return this.initAlfrescoApi(),[2]})})},e.prototype.initAlfrescoApi=function(){this.alfrescoApi=new n({provider:this.storage.getItem("AUTH_TYPE"),ticketEcm:this.storage.getItem("ticket-ECM"),ticketBpm:this.storage.getItem("ticket-BPM"),hostEcm:this.appConfig.get("ecmHost"),hostBpm:this.appConfig.get("bpmHost"),contextRootBpm:this.appConfig.get("contextRootBpm"),contextRoot:this.appConfig.get("contextRootEcm"),disableCsrf:"true"===this.storage.getItem("DISABLE_CSRF"),oauth2:this.appConfig.get("oauth2")})},e}();ve.decorators=[{type:l.Injectable}],ve.ctorParameters=function(){return[{type:ge},{type:ye}]};var be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(Number);be.TRACE=5,be.DEBUG=4,be.INFO=3,be.WARN=2,be.ERROR=1,be.SILENT=0;var we=[{level:be.TRACE,name:"TRACE"},{level:be.DEBUG,name:"DEBUG"},{level:be.INFO,name:"INFO"},{level:be.WARN,name:"WARN"},{level:be.ERROR,name:"ERROR"},{level:be.SILENT,name:"SILENT"}],Ee=function(){function e(e){this.appConfig=e,this.onMessage=new o.Subject}return Object.defineProperty(e.prototype,"currentLogLevel",{get:function(){var e=this.appConfig.get("logLevel");return e?this.getLogLevel(e):be.TRACE},enumerable:!0,configurable:!0}),e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.currentLogLevel>=be.ERROR&&(this.messageBus(e,"ERROR"),console.error.apply(console,ae([e],t)))},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.currentLogLevel>=be.DEBUG&&(this.messageBus(e,"DEBUG"),console.debug.apply(console,ae([e],t)))},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.currentLogLevel>=be.INFO&&(this.messageBus(e,"INFO"),console.info.apply(console,ae([e],t)))},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.currentLogLevel>=be.TRACE&&(this.messageBus(e,"LOG"),console.log.apply(console,ae([e],t)))},e.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.currentLogLevel>=be.TRACE&&(this.messageBus(e,"TRACE"),console.trace.apply(console,ae([e],t)))},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.currentLogLevel>=be.WARN&&(this.messageBus(e,"WARN"),console.warn.apply(console,ae([e],t)))},e.prototype.assert=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.currentLogLevel!==be.SILENT&&(this.messageBus(t,"ASSERT"),console.assert.apply(console,ae([e,t],n)))},e.prototype.group=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.currentLogLevel!==be.SILENT&&console.group.apply(console,ae([e],t))},e.prototype.groupEnd=function(){this.currentLogLevel!==be.SILENT&&console.groupEnd()},e.prototype.getLogLevel=function(t){var e=we.find(function(e){return e.name.toLocaleLowerCase()===t.toLocaleLowerCase()});return e?e.level:5},e.prototype.messageBus=function(e,t){this.onMessage.next({text:e,type:t})},e}();Ee.decorators=[{type:l.Injectable}],Ee.ctorParameters=function(){return[{type:ge}]};var Ie=function(){};Ie.decorators=[{type:l.Component,args:[{selector:"adf-viewer-more-actions",encapsulation:l.ViewEncapsulation.None,changeDetection:l.ChangeDetectionStrategy.OnPush,host:{"class":"adf-viewer-more-actions"},template:"<ng-content></ng-content>"}]}],Ie.ctorParameters=function(){return[]};var Ce=function(){};Ce.decorators=[{type:l.Component,args:[{selector:"adf-viewer-open-with",encapsulation:l.ViewEncapsulation.None,changeDetection:l.ChangeDetectionStrategy.OnPush,host:{"class":"adf-viewer-open-with"},template:"<ng-content></ng-content>"}]}],Ce.ctorParameters=function(){return[]};var Se=function(){};Se.decorators=[{type:l.Component,args:[{selector:"adf-viewer-sidebar",encapsulation:l.ViewEncapsulation.None,changeDetection:l.ChangeDetectionStrategy.OnPush,host:{"class":"adf-viewer-sidebar"},template:"<ng-content></ng-content>"}]}],Se.ctorParameters=function(){return[]};var Te=function(){};Te.decorators=[{type:l.Component,args:[{selector:"adf-viewer-toolbar",encapsulation:l.ViewEncapsulation.None,changeDetection:l.ChangeDetectionStrategy.OnPush,host:{"class":"adf-viewer-toolbar"},template:"<ng-content></ng-content>"}]}],Te.ctorParameters=function(){return[]};var xe=function(){function e(e,t,n,i){this.apiService=e,this.logService=t,this.location=n,this.el=i,this.urlFile="",this.urlFileViewer=null,this.fileNodeId=null,this.sharedLinkId=null,this.overlayMode=!1,this.showViewer=!0,this.showToolbar=!0,this.allowGoBack=!0,this.allowDownload=!0,this.allowPrint=!1,this.allowShare=!1,this.allowFullScreen=!0,this.allowNavigate=!1,this.canNavigateBefore=!0,this.canNavigateNext=!0,this.allowSidebar=!1,this.allowThumbnails=!0,this.showSidebar=!1,this.sidebarPosition="right",this.sidebarTemplate=null,this.thumbnailsTemplate=null,this.downloadUrl=null,this.maxRetries=5,this.goBack=new l.EventEmitter,this.download=new l.EventEmitter,this.print=new l.EventEmitter,this.share=new l.EventEmitter,this.showViewerChange=new l.EventEmitter,this.extensionChange=new l.EventEmitter,this.navigateBefore=new l.EventEmitter,this.navigateNext=new l.EventEmitter,this.showPdfThumbnails=!1,this.viewerType="unknown",this.isLoading=!1,this.extensionTemplates=[],this.externalExtensions=[],this.sidebarTemplateContext={node:null},this.subscriptions=[],this.extensions={image:["png","jpg","jpeg","gif","bpm","svg"],media:["wav","mp4","mp3","webm","ogg"],text:["txt","xml","js","html","json","ts"],pdf:["pdf"]},this.mimeTypes={text:["text/plain","text/csv","text/xml","text/html","application/x-javascript"],pdf:["application/pdf"],image:["image/png","image/jpeg","image/gif","image/bmp","image/svg+xml"],media:["video/mp4","video/webm","video/ogg","audio/mpeg","audio/ogg","audio/wav"]}}return e.prototype.isSourceDefined=function(){return!!(this.urlFile||this.blobFile||this.fileNodeId||this.sharedLinkId)},e.prototype.ngOnInit=function(){var t=this;this.subscriptions=this.subscriptions.concat([this.apiService.nodeUpdated.subscribe(function(e){return t.onNodeUpdated(e)})])},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions=[]},e.prototype.onNodeUpdated=function(e){e&&e.id===this.fileNodeId&&this.setUpNodeFile(e)},e.prototype.ngOnChanges=function(e){var t=this;if(this.showViewer){if(!this.isSourceDefined())throw new Error("A content source attribute value is missing.");this.blobFile?this.setUpBlobData():this.urlFile?this.setUpUrlFile():this.fileNodeId?(this.isLoading=!0,this.apiService.nodesApi.getNodeInfo(this.fileNodeId).then(function(e){t.setUpNodeFile(e)},function(e){t.isLoading=!1,t.logService.error("This node does not exist")})):this.sharedLinkId&&(this.isLoading=!0,this.apiService.sharedLinksApi.getSharedLink(this.sharedLinkId).then(function(e){t.setUpSharedLinkFile(e)}))}},e.prototype.setUpBlobData=function(){this.displayName=this.getDisplayName("Unknown"),this.isLoading=!0,this.mimeType=this.blobFile.type,this.viewerType=this.getViewerTypeByMimeType(this.mimeType),this.allowDownload=!1,this.extensionChange.emit(this.mimeType),this.isLoading=!1,this.scrollTop()},e.prototype.setUpUrlFile=function(){this.isLoading=!0;var e=this.getFilenameFromUrl(this.urlFile);this.displayName=this.getDisplayName(e),this.extension=this.getFileExtension(e),this.urlFileContent=this.urlFile,this.downloadUrl=this.urlFile,this.fileName=this.displayName,this.viewerType=this.urlFileViewer||this.getViewerTypeByExtension(this.extension),"unknown"===this.viewerType&&(this.viewerType=this.getViewerTypeByMimeType(this.mimeType)),this.extensionChange.emit(this.extension),this.isLoading=!1,this.scrollTop()},e.prototype.setUpNodeFile=function(e){this.mimeType=e.content.mimeType,this.displayName=e.name,this.urlFileContent=this.apiService.contentApi.getContentUrl(e.id),this.extension=this.getFileExtension(e.name),this.fileName=e.name,this.downloadUrl=this.apiService.contentApi.getContentUrl(e.id,!0),this.viewerType=this.getViewerTypeByExtension(this.extension),"unknown"===this.viewerType&&(this.viewerType=this.getViewerTypeByMimeType(this.mimeType)),"unknown"===this.viewerType?this.displayNodeRendition(e.id):this.isLoading=!1,this.extensionChange.emit(this.extension),this.sidebarTemplateContext.node=e,this.scrollTop()},e.prototype.setUpSharedLinkFile=function(e){this.mimeType=e.entry.content.mimeType,this.displayName=this.getDisplayName(e.entry.name),this.extension=this.getFileExtension(e.entry.name),this.fileName=e.entry.name,this.urlFileContent=this.apiService.contentApi.getSharedLinkContentUrl(this.sharedLinkId,!1),this.downloadUrl=this.apiService.contentApi.getSharedLinkContentUrl(this.sharedLinkId,!0),this.viewerType=this.getViewerTypeByMimeType(this.mimeType),"unknown"===this.viewerType&&(this.viewerType=this.getViewerTypeByExtension(this.extension)),"unknown"===this.viewerType?this.displaySharedLinkRendition(this.sharedLinkId):this.isLoading=!1,this.extensionChange.emit(this.extension),this.isLoading=!1},e.prototype.toggleSidebar=function(){var t=this;this.showSidebar=!this.showSidebar,this.showSidebar&&this.fileNodeId&&this.apiService.getInstance().nodes.getNodeInfo(this.fileNodeId).then(function(e){t.sidebarTemplateContext.node=e})},e.prototype.getDisplayName=function(e){return this.displayName||e},e.prototype.scrollTop=function(){window.scrollTo(0,1)},e.prototype.getViewerTypeByMimeType=function(e){if(e){e=e.toLowerCase();var t=Object.keys(this.mimeTypes);try{for(var n=re(t),i=n.next();!i.done;i=n.next()){var r=i.value;if(0<=this.mimeTypes[r].indexOf(e))return r}}catch(s){o={error:s}}finally{try{i&&!i.done&&(a=n["return"])&&a.call(n)}finally{if(o)throw o.error}}}return"unknown";var o,a},e.prototype.getViewerTypeByExtension=function(e){return e&&(e=e.toLowerCase()),this.isCustomViewerExtension(e)?"custom":0<=this.extensions.image.indexOf(e)?"image":0<=this.extensions.media.indexOf(e)?"media":0<=this.extensions.text.indexOf(e)?"text":0<=this.extensions.pdf.indexOf(e)?"pdf":"unknown"},e.prototype.onBackButtonClick=function(){if(this.overlayMode)this.close();else{var e=new se;this.goBack.next(e),e.defaultPrevented||this.location.back()}},e.prototype.onNavigateBeforeClick=function(){this.navigateBefore.next()},e.prototype.onNavigateNextClick=function(){this.navigateNext.next()},e.prototype.close=function(){this.otherMenu&&(this.otherMenu.hidden=!1),this.showViewer=!1,this.showViewerChange.emit(this.showViewer)},e.prototype.getFilenameFromUrl=function(e){var t=e.indexOf("#"),n=e.indexOf("?"),i=Math.min(0<t?t:e.length,0<n?n:e.length);return e.substring(e.lastIndexOf("/",i)+1,i)},e.prototype.getFileExtension=function(e){if(e){var t=e.match(/\.([^\./\?\#]+)($|\?|\#)/);return t?t[1]:null}return null},e.prototype.isCustomViewerExtension=function(e){var t=this.externalExtensions||[];return!!(e&&0<t.length)&&(e=e.toLowerCase(),0<=t.indexOf(e))},e.prototype.handleKeyboardEvent=function(e){var t=e.keyCode;27===t&&this.overlayMode&&this.close(),37===t&&this.canNavigateBefore&&(e.preventDefault(),this.onNavigateBeforeClick()),39===t&&this.canNavigateNext&&(e.preventDefault(),this.onNavigateNextClick()),70===t&&e.ctrlKey&&(e.preventDefault(),this.enterFullScreen())},e.prototype.downloadContent=function(){if(this.allowDownload&&this.downloadUrl&&this.fileName){var e=new se;if(this.download.next(e),!e.defaultPrevented){var t=document.createElement("a");t.style.display="none",t.download=this.fileName,t.href=this.downloadUrl,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},e.prototype.printContent=function(){if(this.allowPrint){var e=new se;this.print.next(e)}},e.prototype.shareContent=function(){if(this.allowShare){var e=new se;this.share.next(e)}},e.prototype.enterFullScreen=function(){if(this.allowFullScreen){var e=this.el.nativeElement.querySelector(".adf-viewer__fullscreen-container");e&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())}},e.prototype.displayNodeRendition=function(r){return ne(this,void 0,void 0,function(){var t,n,i;return ie(this,function(e){switch(e.label){case 0:this.isLoading=!0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.resolveRendition(r,"pdf")];case 2:return(t=e.sent())&&("pdf"===(n=t.entry.id)?this.viewerType="pdf":"imgpreview"===n&&(this.viewerType="image"),this.urlFileContent=this.apiService.contentApi.getRenditionUrl(r,n)),[3,4];case 3:return i=e.sent(),this.logService.error(i),[3,4];case 4:return this.isLoading=!1,[2]}})})},e.prototype.displaySharedLinkRendition=function(i){return ne(this,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:this.isLoading=!0,e.label=1;case 1:return e.trys.push([1,3,,8]),[4,this.apiService.renditionsApi.getSharedLinkRendition(i,"pdf")];case 2:return"CREATED"===e.sent().entry.status.toString()&&(this.viewerType="pdf",this.urlFileContent=this.apiService.contentApi.getSharedLinkRenditionUrl(i,"pdf")),[3,8];case 3:t=e.sent(),this.logService.error(t),e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.apiService.renditionsApi.getSharedLinkRendition(i,"imgpreview")];case 5:return"CREATED"===e.sent().entry.status.toString()&&(this.viewerType="image",this.urlFileContent=this.apiService.contentApi.getSharedLinkRenditionUrl(i,"imgpreview")),[3,7];case 6:return n=e.sent(),this.logService.error(n),[3,7];case 7:return[3,8];case 8:return this.isLoading=!1,[2]}})})},e.prototype.resolveRendition=function(o,a){return ne(this,void 0,void 0,function(){var t,n,i,r;return ie(this,function(e){switch(e.label){case 0:return a=a.toLowerCase(),[4,this.apiService.renditionsApi.getRenditions(o)];case 1:return t=e.sent(),(n=t.list.entries.find(function(e){return e.entry.id.toLowerCase()===a}))||(a="imgpreview",n=t.list.entries.find(function(e){return e.entry.id.toLowerCase()===a}))?"CREATED"!==(i=n.entry.status.toString())?[3,2]:[2,n]:[2,null];case 2:if("NOT_CREATED"!==i)return[3,7];e.label=3;case 3:return e.trys.push([3,6,,7]),[4,this.apiService.renditionsApi.createRendition(o,{id:a})];case 4:return e.sent(),[4,this.waitRendition(o,a,0)];case 5:return[2,e.sent()];case 6:return r=e.sent(),this.logService.error(r),[2,null];case 7:return[2]}})})},e.prototype.waitRendition=function(n,i,r){return ne(this,void 0,void 0,function(){var t;return ie(this,function(e){switch(e.label){case 0:return[4,this.apiService.renditionsApi.getRendition(n,i)];case 1:return t=e.sent(),r>this.maxRetries?[2,null]:"CREATED"!==t.entry.status.toString()?[3,2]:[2,t];case 2:return r+=1,[4,this.wait(1e3)];case 3:return e.sent(),[4,this.waitRendition(n,i,r)];case 4:return[2,e.sent()]}})})},e.prototype.wait=function(t){return new Promise(function(e){return setTimeout(e,t)})},e}();xe.decorators=[{type:l.Component,args:[{selector:"adf-viewer",template:'<div *ngIf="showViewer"\n    class="adf-viewer-container"\n    [class.adf-viewer-overlay-container]="overlayMode"\n    [class.adf-viewer-inline-container]="!overlayMode">\n\n    <div class="adf-viewer-content" fxLayout="column">\n        <ng-content select="adf-viewer-toolbar"></ng-content>\n        <ng-container *ngIf="showToolbar && !toolbar">\n            <adf-toolbar color="default" class="adf-viewer-toolbar">\n\n                <adf-toolbar-title>\n                    <button *ngIf="allowGoBack"\n                        class="adf-viewer-close-button"\n                        data-automation-id="toolbar-back"\n                        mat-icon-button\n                        title="{{ \'ADF_VIEWER.ACTIONS.CLOSE\' | translate }}"\n                        (click)="onBackButtonClick()">\n                        <mat-icon>close</mat-icon>\n                    </button>\n                </adf-toolbar-title>\n\n                <div fxFlex="1 1 auto">\n                    <button\n                        *ngIf="allowNavigate && canNavigateBefore"\n                        data-automation-id="toolbar-pref-file"\n                        mat-icon-button\n                        title="{{ \'ADF_VIEWER.ACTIONS.PREV_FILE\' | translate }}"\n                        (click)="onNavigateBeforeClick()">\n                        <mat-icon>navigate_before</mat-icon>\n                    </button>\n                    <img class="adf-viewer__mimeicon" [src]="mimeType | adfMimeTypeIcon">\n                    <span class="adf-viewer__display-name" id="adf-viewer-display-name">{{ displayName }}</span>\n                    <button\n                        *ngIf="allowNavigate && canNavigateNext"\n                        data-automation-id="toolbar-next-file"\n                        mat-icon-button\n                        title="{{ \'ADF_VIEWER.ACTIONS.NEXT_FILE\' | translate }}"\n                        (click)="onNavigateNextClick()">\n                        <mat-icon>navigate_next</mat-icon>\n                    </button>\n                </div>\n\n                <ng-content select="adf-viewer-toolbar-actions"></ng-content>\n\n                <ng-container *ngIf="mnuOpenWith">\n                    <button\n                        mat-button\n                        [matMenuTriggerFor]="mnuOpenWith"\n                        data-automation-id="toolbar-open-with">\n                        <span>{{ \'ADF_VIEWER.ACTIONS.OPEN_WITH\' | translate }}</span>\n                        <mat-icon>arrow_drop_down</mat-icon>\n                    </button>\n                    <mat-menu #mnuOpenWith="matMenu" [overlapTrigger]="false">\n                        <ng-content select="adf-viewer-open-with"></ng-content>\n                    </mat-menu>\n                </ng-container>\n\n                <adf-toolbar-divider></adf-toolbar-divider>\n\n                <button\n                    *ngIf="allowDownload"\n                    mat-icon-button\n                    title="{{ \'ADF_VIEWER.ACTIONS.DOWNLOAD\' | translate }}"\n                    data-automation-id="toolbar-download"\n                    (click)="downloadContent()">\n                    <mat-icon>file_download</mat-icon>\n                </button>\n\n                <button\n                    *ngIf="allowPrint"\n                    mat-icon-button\n                    title="{{ \'ADF_VIEWER.ACTIONS.PRINT\' | translate }}"\n                    data-automation-id="toolbar-print"\n                    (click)="printContent()">\n                    <mat-icon>print</mat-icon>\n                </button>\n\n                <button\n                    *ngIf="allowShare"\n                    mat-icon-button\n                    title="{{ \'ADF_VIEWER.ACTIONS.SHARE\' | translate }}"\n                    data-automation-id="toolbar-share"\n                    (click)="shareContent()">\n                    <mat-icon>share</mat-icon>\n                </button>\n\n                <button\n                    *ngIf="viewerType !== \'media\' && allowFullScreen"\n                    mat-icon-button\n                    title="{{ \'ADF_VIEWER.ACTIONS.FULLSCREEN\' | translate }}"\n                    data-automation-id="toolbar-fullscreen"\n                    (click)="enterFullScreen()">\n                    <mat-icon>fullscreen</mat-icon>\n                </button>\n\n                <ng-container *ngIf="mnuMoreActions">\n                    <button\n                        mat-icon-button\n                        [matMenuTriggerFor]="mnuMoreActions"\n                        title="{{ \'ADF_VIEWER.ACTIONS.MORE_ACTIONS\' | translate }}"\n                        data-automation-id="toolbar-more-actions">\n                        <mat-icon>more_vert</mat-icon>\n                    </button>\n                    <mat-menu #mnuMoreActions="matMenu" [overlapTrigger]="false">\n                        <ng-content select="adf-viewer-more-actions"></ng-content>\n                    </mat-menu>\n                </ng-container>\n\n                <ng-container *ngIf="allowSidebar">\n                    <adf-toolbar-divider></adf-toolbar-divider>\n\n                    <button\n                        mat-icon-button\n                        title="{{ \'ADF_VIEWER.ACTIONS.INFO\' | translate }}"\n                        data-automation-id="toolbar-sidebar"\n                        [color]="showSidebar ? \'accent\' : \'default\'"\n                        (click)="toggleSidebar($event)">\n                        <mat-icon>info_outline</mat-icon>\n                    </button>\n                </ng-container>\n\n            </adf-toolbar>\n        </ng-container>\n\n        <ng-container *ngIf="isLoading">\n            <div class="adf-viewer__loading-screen" fxFlex="1 1 auto">\n                <h2>{{ \'ADF_VIEWER.LOADING\' | translate }}</h2>\n                <div>\n                    <mat-spinner></mat-spinner>\n                </div>\n            </div>\n        </ng-container>\n\n        <div *ngIf="!isLoading" fxLayout="row" fxFlex="1 1 auto">\n\n            <ng-container *ngIf="allowSidebar && showSidebar">\n                <div class="adf-viewer__sidebar adf-viewer__sidebar__{{sidebarPosition}}" fxFlexOrder="{{sidebarPosition === \'left\'? 1 : 4 }}">\n                    <ng-container *ngIf="sidebarTemplate">\n                        <ng-container *ngTemplateOutlet="sidebarTemplate;context:sidebarTemplateContext"></ng-container>\n                    </ng-container>\n                    <ng-content *ngIf="!sidebarTemplate" select="adf-viewer-sidebar"></ng-content>\n                </div>\n            </ng-container>\n\n            <div class="adf-viewer-main" fxFlexOrder="{{sidebarPosition !== \'left\'? 1 : 4}}" fxFlex="1 1 auto">\n                <div class="adf-viewer-layout-content adf-viewer__fullscreen-container">\n                    <div class="adf-viewer-content-container" [ngSwitch]="viewerType">\n                        <ng-container *ngSwitchCase="\'pdf\'">\n                            <adf-pdf-viewer [thumbnailsTemplate]="thumbnailsTemplate" [allowThumbnails]="allowThumbnails" [blobFile]="blobFile" [urlFile]="urlFileContent" [nameFile]="displayName"></adf-pdf-viewer>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase="\'image\'">\n                            <adf-img-viewer [urlFile]="urlFileContent" [nameFile]="displayName" [blobFile]="blobFile"></adf-img-viewer>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase="\'media\'">\n                            <adf-media-player [urlFile]="urlFileContent" [mimeType]="mimeType" [blobFile]="blobFile" [nameFile]="displayName"></adf-media-player>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase="\'text\'">\n                            <adf-txt-viewer [urlFile]="urlFileContent" [blobFile]="blobFile"></adf-txt-viewer>\n                        </ng-container>\n\n                        <ng-container *ngSwitchCase="\'custom\'">\n                            <span class="adf-viewer-custom-content" *ngFor="let extensionTemplate of extensionTemplates">\n                                <ng-template *ngIf="extensionTemplate.isVisible" [ngTemplateOutlet]="extensionTemplate.template" [ngTemplateOutletContext]="{ urlFileContent: urlFileContent, extension:extension }">\n                                </ng-template>\n                            </span>\n                        </ng-container>\n\n                        <ng-container *ngSwitchDefault>\n                            <adf-viewer-unknown-format></adf-viewer-unknown-format>\n                        </ng-container>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n',styles:[""],host:{"class":"adf-viewer"},encapsulation:l.ViewEncapsulation.None}]}],xe.ctorParameters=function(){return[{type:ve},{type:Ee},{type:i.Location},{type:l.ElementRef}]},xe.propDecorators={toolbar:[{type:l.ContentChild,args:[Te]}],sidebar:[{type:l.ContentChild,args:[Se]}],mnuOpenWith:[{type:l.ContentChild,args:[Ce]}],mnuMoreActions:[{type:l.ContentChild,args:[Ie]}],urlFile:[{type:l.Input}],urlFileViewer:[{type:l.Input}],blobFile:[{type:l.Input}],fileNodeId:[{type:l.Input}],sharedLinkId:[{type:l.Input}],overlayMode:[{type:l.Input}],showViewer:[{type:l.Input}],showToolbar:[{type:l.Input}],displayName:[{type:l.Input}],allowGoBack:[{type:l.Input}],allowDownload:[{type:l.Input}],allowPrint:[{type:l.Input}],allowShare:[{type:l.Input}],allowFullScreen:[{type:l.Input}],allowNavigate:[{type:l.Input}],canNavigateBefore:[{type:l.Input}],canNavigateNext:[{type:l.Input}],allowSidebar:[{type:l.Input}],allowThumbnails:[{type:l.Input}],showSidebar:[{type:l.Input}],sidebarPosition:[{type:l.Input}],sidebarTemplate:[{type:l.Input}],thumbnailsTemplate:[{type:l.Input}],mimeType:[{type:l.Input}],fileName:[{type:l.Input}],downloadUrl:[{type:l.Input}],maxRetries:[{type:l.Input}],goBack:[{type:l.Output}],download:[{type:l.Output}],print:[{type:l.Output}],share:[{type:l.Output}],showViewerChange:[{type:l.Output}],extensionChange:[{type:l.Output}],navigateBefore:[{type:l.Output}],navigateNext:[{type:l.Output}],handleKeyboardEvent:[{type:l.HostListener,args:["document:keyup",["$event"]]}]};var Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(String);Oe.DELETE="delete",Oe.UPDATE="update",Oe.CREATE="create",Oe.COPY="copy",Oe.LOCK="lock",Oe.UPDATEPERMISSIONS="updatePermissions",Oe.NOT_DELETE="!delete",Oe.NOT_UPDATE="!update",Oe.NOT_CREATE="!create",Oe.NOT_UPDATEPERMISSIONS="!updatePermissions";var Ae=function(){function e(){}return e.prototype.isEnabled=function(){return!1!==navigator.cookieEnabled&&(document.cookie="test-cookie",0<document.cookie.indexOf("test-cookie"))},e.prototype.getItem=function(e){var t=new RegExp("(?:"+e+"|;s*"+e+")=(.*?)(?:;|$)","g").exec(document.cookie);return null===t?null:t[1]},e.prototype.setItem=function(e,t,n,i){document.cookie=e+"="+t+(n?";expires="+n.toUTCString():"")+(i?";path="+i:";path=/")},e}();Ae.decorators=[{type:l.Injectable}],Ae.ctorParameters=function(){return[]};var Pe={PaginationSize:"PAGINATION_SIZE",DisableCSRF:"DISABLE_CSRF",Locale:"LOCALE",SupportedPageSizes:"supportedPageSizes"},De=function(){function e(e,t,n,i){this.translate=e,this.appConfig=t,this.storage=n,this.apiService=i,this.defaults={paginationSize:25,supportedPageSizes:[5,10,15,20],locale:"en"},this.userPreferenceStatus={paginationSize:25,supportedPageSizes:[5,10,15,20],LOCALE:"en"},this.appConfig.onLoad.subscribe(this.initUserPreferenceStatus.bind(this)),this.localeSubject=new r.BehaviorSubject(this.defaults.locale),this.locale$=this.localeSubject.asObservable(),this.onChangeSubject=new r.BehaviorSubject(this.userPreferenceStatus),this.onChange=this.onChangeSubject.asObservable()}return e.prototype.initUserPreferenceStatus=function(){this.userPreferenceStatus[Pe.Locale]=this.locale||this.getDefaultLocale(),this.userPreferenceStatus[Pe.PaginationSize]=this.appConfig.get("pagination.size",this.defaults.paginationSize),this.userPreferenceStatus[Pe.SupportedPageSizes]=this.appConfig.get("pagination.supportedPageSizes",this.defaults.supportedPageSizes),this.userPreferenceStatus[Pe.DisableCSRF]=this.disableCSRF},e.prototype.select=function(t){return this.onChange.map(function(e){return e[t]}).distinctUntilChanged()},e.prototype.get=function(e,t){var n=this.getPropertyKey(e),i=this.storage.getItem(n);return i===undefined||null===i?t:i},e.prototype.set=function(e,t){e&&(this.storage.setItem(this.getPropertyKey(e),t),this.userPreferenceStatus[e]=t,this.onChangeSubject.next(this.userPreferenceStatus))},e.prototype.getStoragePrefix=function(){return this.storage.getItem("USER_PROFILE")||"GUEST"},e.prototype.setStoragePrefix=function(e){this.storage.setItem("USER_PROFILE",e||"GUEST")},e.prototype.getPropertyKey=function(e){return this.getStoragePrefix()+"__"+e},e.prototype.getDefaultPageSizes=function(){return this.defaults.supportedPageSizes},Object.defineProperty(e.prototype,"authType",{get:function(){return this.storage.getItem("AUTH_TYPE")||"ALL"},set:function(e){this.storage.setItem("AUTH_TYPE",e),this.apiService.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disableCSRF",{get:function(){return"true"===this.get("DISABLE_CSRF")},set:function(e){this.set("DISABLE_CSRF",e),this.apiService.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paginationSize",{get:function(){return Number(this.get("PAGINATION_SIZE"))||this.defaults.paginationSize},set:function(e){this.set("PAGINATION_SIZE",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.get("LOCALE")},set:function(e){this.localeSubject.next(e),this.set("LOCALE",e)},enumerable:!0,configurable:!0}),e.prototype.getDefaultLocale=function(){return this.appConfig.get("locale")||this.translate.getBrowserLang()||"en"},e}();De.decorators=[{type:l.Injectable}],De.ctorParameters=function(){return[{type:a.TranslateService},{type:ge},{type:ye},{type:ve}]};var Fe="ALFRESCO_REMEMBER_ME",Re=function(){function e(e,t,n,i,r){this.preferences=e,this.alfrescoApi=t,this.storage=n,this.cookie=i,this.logService=r,this.redirectUrl=null,this.onLogin=new o.Subject,this.onLogout=new o.Subject}return e.prototype.isLoggedIn=function(){return!!this.alfrescoApi.getInstance().isLoggedIn()},e.prototype.login=function(e,t,n){var i=this;return void 0===n&&(n=!1),this.removeTicket(),u.Observable.fromPromise(this.callApiLogin(e,t)).map(function(e){return i.saveRememberMeCookie(n),i.saveTickets(),i.onLogin.next(e),{type:i.preferences.authType,ticket:e}})["catch"](function(e){return i.handleError(e)})},e.prototype.saveRememberMeCookie=function(e){var t=null;if(e){var n=(t=new Date).getTime()+2592e6;t.setTime(n)}this.cookie.setItem(Fe,"1",t,null)},e.prototype.isRememberMeSet=function(){return null!==this.cookie.getItem(Fe)},e.prototype.callApiLogin=function(e,t){return this.alfrescoApi.getInstance().login(e,t)},e.prototype.logout=function(){var t=this;return u.Observable.fromPromise(this.callApiLogout())["do"](function(e){return t.removeTicket(),t.onLogout.next(e),e})["catch"](function(e){return t.handleError(e)})},e.prototype.callApiLogout=function(){if(this.alfrescoApi.getInstance())return this.alfrescoApi.getInstance().logout()},e.prototype.removeTicket=function(){this.storage.removeItem("ticket-ECM"),this.storage.removeItem("ticket-BPM"),this.alfrescoApi.getInstance().setTicket(undefined,undefined)},e.prototype.getTicketEcm=function(){return this.storage.getItem("ticket-ECM")},e.prototype.getTicketBpm=function(){return this.storage.getItem("ticket-BPM")},e.prototype.getTicketEcmBase64=function(){var e=this.storage.getItem("ticket-ECM");return e?"Basic "+btoa(e):null},e.prototype.saveTickets=function(){this.saveTicketEcm(),this.saveTicketBpm(),this.saveTicketAuth()},e.prototype.saveTicketEcm=function(){this.alfrescoApi.getInstance()&&this.alfrescoApi.getInstance().getTicketEcm()&&this.storage.setItem("ticket-ECM",this.alfrescoApi.getInstance().getTicketEcm())},e.prototype.saveTicketBpm=function(){this.alfrescoApi.getInstance()&&this.alfrescoApi.getInstance().getTicketBpm()&&this.storage.setItem("ticket-BPM",this.alfrescoApi.getInstance().getTicketBpm())},e.prototype.saveTicketAuth=function(){this.alfrescoApi.getInstance()&&this.alfrescoApi.getInstance().getTicketAuth()&&this.storage.setItem("ticket-AUTH",this.alfrescoApi.getInstance().getTicketAuth())},e.prototype.isEcmLoggedIn=function(){return!(this.cookie.isEnabled()&&!this.isRememberMeSet())&&(this.alfrescoApi.getInstance().ecmAuth&&!!this.alfrescoApi.getInstance().ecmAuth.isLoggedIn())},e.prototype.isBpmLoggedIn=function(){return!(this.cookie.isEnabled()&&!this.isRememberMeSet())&&(this.alfrescoApi.getInstance().bpmAuth&&!!this.alfrescoApi.getInstance().bpmAuth.isLoggedIn())},e.prototype.getEcmUsername=function(){return this.alfrescoApi.getInstance().ecmAuth.username},e.prototype.getBpmUsername=function(){return this.alfrescoApi.getInstance().bpmAuth.username},e.prototype.setRedirectUrl=function(e){this.redirectUrl=e},e.prototype.getRedirectUrl=function(e){return this.hasValidRedirection(e)?this.redirectUrl.url:null},e.prototype.hasValidRedirection=function(e){return this.redirectUrl&&(this.redirectUrl.provider===e||this.hasSelectedProviderAll(e))},e.prototype.hasSelectedProviderAll=function(e){return this.redirectUrl&&("ALL"===this.redirectUrl.provider||"ALL"===e)},e.prototype.handleError=function(e){return this.logService.error("Error when logging in",e),u.Observable["throw"](e||"Server error")},e}();Re.decorators=[{type:l.Injectable}],Re.ctorParameters=function(){return[{type:De},{type:ve},{type:ye},{type:Ae},{type:Ee}]};var ke=function(){function e(e,t,n,i){var a;this.authService=e,this.apiService=t,this.logService=n,this.sanitizer=i,this.folderCreated=new o.Subject,this.folderCreate=new o.Subject,this.folderEdit=new o.Subject,this.saveData=(a=document.createElement("a"),document.body.appendChild(a),a.style.display="none",function(e,t,n){var i=null;if("blob"!==t&&"data"!==t||(i=new Blob([e],{type:"octet/stream"})),"object"===t||"json"===t){var r=JSON.stringify(e);i=new Blob([r],{type:"octet/stream"})}if(i)if("undefined"!=typeof window.navigator&&window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(i,n);else{var o=window.URL.createObjectURL(i);a.href=o,a.download=n,a.click(),window.URL.revokeObjectURL(o)}})}return e.prototype.downloadBlob=function(e,t){this.saveData(e,"blob",t)},e.prototype.downloadData=function(e,t){this.saveData(e,"data",t)},e.prototype.downloadJSON=function(e,t){this.saveData(e,"json",t)},e.prototype.createTrustedUrl=function(e){var t=window.URL.createObjectURL(e);return this.sanitizer.bypassSecurityTrustUrl(t)},Object.defineProperty(e.prototype,"contentApi",{get:function(){return this.apiService.getInstance().content},enumerable:!0,configurable:!0}),e.prototype.getDocumentThumbnailUrl=function(e,t,n){return e&&e.entry&&(e=e.entry.id),this.contentApi.getDocumentThumbnailUrl(e,t,n)},e.prototype.getContentUrl=function(e,t,n){return e&&e.entry&&(e=e.entry.id),this.contentApi.getContentUrl(e,t,n)},e.prototype.getNodeContent=function(e){return u.Observable.fromPromise(this.apiService.getInstance().core.nodesApi.getFileContent(e).then(function(e){return e}))["catch"](this.handleError)},e.prototype.createFolder=function(t,n,i){var r=this;return u.Observable.fromPromise(this.apiService.getInstance().nodes.createFolder(n,t,i))["do"](function(e){r.folderCreated.next({relativePath:t,name:n,parentId:i,node:e})})["catch"](function(e){return r.handleError(e)})},e.prototype.getNode=function(e,t){return u.Observable.fromPromise(this.apiService.getInstance().nodes.getNode(e,t))},e.prototype.hasPermission=function(e,t){var n=!1;return this.hasAllowableOperations(e)?n=t&&t.startsWith("!")?!e.allowableOperations.find(function(e){return e===t.replace("!","")}):!!e.allowableOperations.find(function(e){return e===t}):t&&t.startsWith("!")&&(n=!0),t===Oe.COPY&&(n=!0),t===Oe.LOCK&&(n=e.isFile,e.isLocked&&this.hasAllowableOperations(e)&&(n=!!~e.allowableOperations.indexOf("updatePermissions"))),n},e.prototype.hasAllowableOperations=function(e){return!(!e||!e.allowableOperations)},e.prototype.handleError=function(e){return this.logService.error(e),u.Observable["throw"](e||"Server error")},e}();ke.decorators=[{type:l.Injectable}],ke.ctorParameters=function(){return[{type:Re},{type:ve},{type:Ee},{type:m.DomSanitizer}]};var _e=function(){function e(e,t){this.contentService=e,this.el=t,this.showToolbar=!0,this.rotate=0,this.scaleX=1,this.scaleY=1,this.offsetX=0,this.offsetY=0,this.isDragged=!1,this.drag={x:0,y:0},this.delta={x:0,y:0}}return Object.defineProperty(e.prototype,"transform",{get:function(){return"scale("+this.scaleX+", "+this.scaleY+") rotate("+this.rotate+"deg) translate("+this.offsetX+"px, "+this.offsetY+"px)"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentScaleText",{get:function(){return Math.round(100*this.scaleX)+"%"},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.element=this.el.nativeElement.querySelector("#viewer-image"),this.element&&(this.element.addEventListener("mousedown",this.onMouseDown.bind(this)),this.element.addEventListener("mouseup",this.onMouseUp.bind(this)),this.element.addEventListener("mouseleave",this.onMouseLeave.bind(this)),this.element.addEventListener("mouseout",this.onMouseOut.bind(this)),this.element.addEventListener("mousemove",this.onMouseMove.bind(this)))},e.prototype.ngOnDestroy=function(){this.element&&(this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mouseup",this.onMouseUp),this.element.removeEventListener("mouseleave",this.onMouseLeave),this.element.removeEventListener("mouseout",this.onMouseOut),this.element.removeEventListener("mousemove",this.onMouseMove))},e.prototype.onMouseDown=function(e){e.preventDefault(),this.isDragged=!0,this.drag={x:e.pageX,y:e.pageY}},e.prototype.onMouseMove=function(e){if(this.isDragged){e.preventDefault(),this.delta.x=e.pageX-this.drag.x,this.delta.y=e.pageY-this.drag.y,this.drag.x=e.pageX,this.drag.y=e.pageY;var t=0!==this.scaleX?this.scaleX:1,n=0!==this.scaleY?this.scaleY:1;this.offsetX+=this.delta.x/t,this.offsetY+=this.delta.y/n}},e.prototype.onMouseUp=function(e){this.isDragged&&(e.preventDefault(),this.isDragged=!1)},e.prototype.onMouseLeave=function(e){this.isDragged&&(e.preventDefault(),this.isDragged=!1)},e.prototype.onMouseOut=function(e){this.isDragged&&(e.preventDefault(),this.isDragged=!1)},e.prototype.ngOnChanges=function(e){var t=e.blobFile;if(t&&t.currentValue)this.urlFile=this.contentService.createTrustedUrl(this.blobFile);else if(!this.urlFile&&!this.blobFile)throw new Error("Attribute urlFile or blobFile is required")},e.prototype.zoomIn=function(){var e=+(this.scaleX+.2).toFixed(1);this.scaleX=this.scaleY=e},e.prototype.zoomOut=function(){var e=+(this.scaleX-.2).toFixed(1);e<.2&&(e=.2),this.scaleX=this.scaleY=e},e.prototype.rotateLeft=function(){var e=this.rotate-90;this.rotate=Math.abs(e)<360?e:0},e.prototype.rotateRight=function(){var e=this.rotate+90;this.rotate=Math.abs(e)<360?e:0},e.prototype.reset=function(){this.rotate=0,this.scaleX=1,this.scaleY=1,this.offsetX=0,this.offsetY=0},e}();_e.decorators=[{type:l.Component,args:[{selector:"adf-img-viewer",template:'<div class="image-container" [ngStyle]="{ transform: transform }">\n    <img id="viewer-image" [src]="urlFile" [alt]="nameFile" [ngStyle]="{ \'cursor\' : isDragged ? \'move\': \'default\' } " />\n</div>\n\n<div class="adf-image-viewer__toolbar" *ngIf="showToolbar">\n    <adf-toolbar>\n        <button\n            id="viewer-zoom-in-button"\n            mat-icon-button\n            title="{{ \'ADF_VIEWER.ARIA.ZOOM_IN\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.ZOOM_IN\' | translate }}"\n            (click)="zoomIn()">\n            <mat-icon>zoom_in</mat-icon>\n        </button>\n\n        <button\n            id="viewer-zoom-out-button"\n            title="{{ \'ADF_VIEWER.ARIA.ZOOM_OUT\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.ZOOM_OUT\' | translate }}"\n            mat-icon-button\n            (click)="zoomOut()">\n            <mat-icon>zoom_out</mat-icon>\n        </button>\n\n        <div class="adf-viewer__toolbar-page-scale">\n            {{ currentScaleText }}\n        </div>\n\n        <button\n            id="viewer-rotate-left-button"\n            title="{{ \'ADF_VIEWER.ARIA.ROTATE_LEFT\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.ROTATE_LEFT\' | translate }}"\n            mat-icon-button\n            (click)="rotateLeft()">\n            <mat-icon>rotate_left</mat-icon>\n        </button>\n\n        <button\n            id="viewer-rotate-right-button"\n            title="{{ \'ADF_VIEWER.ARIA.ROTATE_RIGHT\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.ROTATE_RIGHT\' | translate }}"\n            mat-icon-button\n            (click)="rotateRight()">\n            <mat-icon>rotate_right</mat-icon>\n        </button>\n\n        <button\n            id="viewer-reset-button"\n            title="{{ \'ADF_VIEWER.ARIA.RESET\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.RESET\' | translate }}"\n            mat-icon-button\n            (click)="reset()">\n            <mat-icon>zoom_out_map</mat-icon>\n        </button>\n    </adf-toolbar>\n</div>\n',styles:[""],host:{"class":"adf-image-viewer"},encapsulation:l.ViewEncapsulation.None}]}],_e.ctorParameters=function(){return[{type:ke},{type:l.ElementRef}]},_e.propDecorators={showToolbar:[{type:l.Input}],urlFile:[{type:l.Input}],blobFile:[{type:l.Input}],nameFile:[{type:l.Input}]};var Me=function(){function e(e){this.contentService=e}return e.prototype.ngOnChanges=function(e){var t=e.blobFile;if(t&&t.currentValue)this.urlFile=this.contentService.createTrustedUrl(this.blobFile);else if(!this.urlFile&&!this.blobFile)throw new Error("Attribute urlFile or blobFile is required")},e}();Me.decorators=[{type:l.Component,args:[{selector:"adf-media-player",template:'<video controls>\n    <source [src]="urlFile" [type]="mimeType" />\n</video>\n',styles:[".adf-media-player{display:-webkit-box;display:-ms-flexbox;display:flex}.adf-media-player video{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:90vh;max-width:100%}"],host:{"class":"adf-media-player"},encapsulation:l.ViewEncapsulation.None}]}],Me.ctorParameters=function(){return[{type:ke}]},Me.propDecorators={urlFile:[{type:l.Input}],blobFile:[{type:l.Input}],mimeType:[{type:l.Input}],nameFile:[{type:l.Input}]};var Le=function(){function e(){this.renderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},this.CLEANUP_TIMEOUT=3e4,this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return e.prototype.setViewer=function(e){this.pdfViewer=e},e.prototype.setThumbnailViewer=function(e){this.pdfThumbnailViewer=e},e.prototype.isHighestPriority=function(e){return this.highestPriorityPage===e.renderingId},e.prototype.renderHighestPriority=function(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(e)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),this.CLEANUP_TIMEOUT))},e.prototype.getHighestPriority=function(e,t,n){var i=e.views,r=i.length;if(0===r)return!1;for(var o=0;o<r;++o){var a=i[o].view;if(!this.isViewFinished(a))return a}if(n){var s=e.last.id;if(t[s]&&!this.isViewFinished(t[s]))return t[s]}else{var l=e.first.id-2;if(t[l]&&!this.isViewFinished(t[l]))return t[l]}return null},e.prototype.isViewFinished=function(e){return e.renderingState===this.renderingStates.FINISHED},e.prototype.renderView=function(e){switch(e.renderingState){case this.renderingStates.FINISHED:return!1;case this.renderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case this.renderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case this.renderingStates.INITIAL:this.highestPriorityPage=e.renderingId;var t=function(){this.renderHighestPriority()}.bind(this);e.draw().then(t,t)}return!0},e}();Le.decorators=[{type:l.Injectable}],Le.ctorParameters=function(){return[]};var Ve=function(){function e(e,t){this.dialogRef=e,this.data=t}return e.prototype.ngOnInit=function(){this.passwordFormControl=new g.FormControl("",[g.Validators.required])},e.prototype.isError=function(){return this.data.reason===PDFJS.PasswordResponses.INCORRECT_PASSWORD},e.prototype.isValid=function(){return!this.passwordFormControl.hasError("required")},e.prototype.submit=function(){this.dialogRef.close(this.passwordFormControl.value)},e}();Ve.decorators=[{type:l.Component,args:[{selector:"adf-pdf-viewer-password-dialog",template:'<div mat-dialog-title>\n    <mat-icon>lock</mat-icon>\n</div>\n\n<mat-dialog-content>\n    <form (submit)="submit()">\n        <mat-input-container class="adf-full-width">\n                <input matInput\n                type="password"\n                placeholder="{{ \'ADF_VIEWER.PDF_DIALOG.PLACEHOLDER\' | translate }}"\n                [formControl]="passwordFormControl" />\n        </mat-input-container>\n\n        <mat-error *ngIf="isError()">{{ \'ADF_VIEWER.PDF_DIALOG.ERROR\' | translate }}</mat-error>\n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions class="adf-dialog-buttons">\n    <span class="adf-fill-remaining-space"></span>\n\n    <button mat-button mat-dialog-close>{{ \'ADF_VIEWER.PDF_DIALOG.CLOSE\' | translate }}</button>\n\n    <button mat-button\n        class="adf-dialog-action-button"\n        [disabled]="!isValid()"\n        (click)="submit()">\n        {{ \'ADF_VIEWER.PDF_DIALOG.SUBMIT\' | translate }}\n    </button>\n</mat-dialog-actions>',styles:[".adf-fill-remaining-space{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.adf-full-width{width:100%}"]}]}],Ve.ctorParameters=function(){return[{type:h.MatDialogRef},{type:undefined,decorators:[{type:l.Inject,args:[h.MAT_DIALOG_DATA]}]}]};var Ne=function(){function e(e,t,n){this.dialog=e,this.renderingQueueServices=t,this.logService=n,this.showToolbar=!0,this.allowThumbnails=!1,this.thumbnailsTemplate=null,this.rendered=new l.EventEmitter,this.error=new l.EventEmitter,this.currentScaleMode="auto",this.currentScale=1,this.MAX_AUTO_SCALE=1.25,this.DEFAULT_SCALE_DELTA=1.1,this.MIN_SCALE=.25,this.MAX_SCALE=10,this.isPanelDisabled=!0,this.showThumbnails=!1,this.pdfThumbnailsContext={viewer:null},this.onPageChange=this.onPageChange.bind(this),this.onPagesLoaded=this.onPagesLoaded.bind(this),this.onPagerendered=this.onPagerendered.bind(this)}return Object.defineProperty(e.prototype,"currentScaleText",{get:function(){return Math.round(100*this.currentScale)+"%"},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=this,n=e.blobFile;if(n&&n.currentValue){var i=new FileReader;i.onload=function(){t.executePdf(i.result)},i.readAsArrayBuffer(n.currentValue)}var r=e.urlFile;if(r&&r.currentValue&&this.executePdf(r.currentValue),!this.urlFile&&!this.blobFile)throw new Error("Attribute urlFile or blobFile is required")},e.prototype.executePdf=function(e){var n=this;this.loadingTask=this.getPDFJS().getDocument(e),this.loadingTask.onPassword=function(e,t){n.onPdfPassword(e,t)},this.loadingTask.onProgress=function(e){var t=e.loaded/e.total;n.loadingPercent=Math.round(100*t)},this.loadingTask.then(function(e){n.currentPdfDocument=e,n.totalPages=e.numPages,n.page=1,n.displayPage=1,n.initPDFViewer(n.currentPdfDocument),n.currentPdfDocument.getPage(1).then(function(){n.scalePage("auto")},function(e){n.error.emit()})},function(e){n.error.emit()})},e.prototype.getPDFJS=function(){return PDFJS},e.prototype.initPDFViewer=function(e){PDFJS.verbosity=1,PDFJS.disableWorker=!1;var t=document.getElementById("viewer-viewerPdf");this.documentContainer=document.getElementById("viewer-pdf-viewer"),this.documentContainer.addEventListener("pagechange",this.onPageChange,!0),this.documentContainer.addEventListener("pagesloaded",this.onPagesLoaded,!0),this.documentContainer.addEventListener("textlayerrendered",this.onPagerendered,!0),this.pdfViewer=new PDFJS.PDFViewer({container:this.documentContainer,viewer:t,renderingQueue:this.renderingQueueServices}),this.renderingQueueServices.setViewer(this.pdfViewer),this.pdfViewer.setDocument(e),this.pdfThumbnailsContext.viewer=this.pdfViewer},e.prototype.ngOnDestroy=function(){this.documentContainer&&(this.documentContainer.removeEventListener("pagechange",this.onPageChange,!0),this.documentContainer.removeEventListener("pagesloaded",this.onPagesLoaded,!0),this.documentContainer.removeEventListener("textlayerrendered",this.onPagerendered,!0)),this.loadingTask&&this.loadingTask.destroy()},e.prototype.toggleThumbnails=function(){this.showThumbnails=!this.showThumbnails},e.prototype.scalePage=function(e){if(this.currentScaleMode=e,this.pdfViewer){var t=document.getElementById("viewer-main-container"),n=document.getElementById("viewer-pdf-viewer"),i=void 0,r=void 0;t&&t.clientWidth<=n.clientWidth?(i=t.clientWidth,r=t.clientHeight):(i=n.clientWidth,r=n.clientHeight);var o=this.pdfViewer._pages[this.pdfViewer._currentPageNumber-1],a=(i-20)/o.width*o.scale,s=(r-20)/o.width*o.scale,l=void 0;switch(this.currentScaleMode){case"page-actual":l=1;break;case"page-width":l=a;break;case"page-height":l=s;break;case"page-fit":l=Math.min(a,s);break;case"auto":var u=void 0;u=this.isLandscape?Math.min(s,a):a,l=Math.min(this.MAX_AUTO_SCALE,u);break;default:return void this.logService.error("pdfViewSetScale: '"+e+"' is an unknown zoom value.")}this.setScaleUpdatePages(l)}},e.prototype.setScaleUpdatePages=function(t){this.isSameScale(this.currentScale,t)||(this.currentScale=t,this.pdfViewer._pages.forEach(function(e){e.update(t)}),this.pdfViewer.update())},e.prototype.isSameScale=function(e,t){return t===e},e.prototype.isLandscape=function(e,t){return t<e},e.prototype.onResize=function(){this.scalePage(this.currentScaleMode)},e.prototype.pageFit=function(){"page-fit"!==this.currentScaleMode?this.scalePage("page-fit"):this.scalePage("auto")},e.prototype.zoomIn=function(e){for(var t=this.currentScale;t=(t*this.DEFAULT_SCALE_DELTA).toFixed(2),t=Math.ceil(10*t)/10,t=Math.min(this.MAX_SCALE,t),0<--e&&t<this.MAX_SCALE;);this.currentScaleMode="auto",this.setScaleUpdatePages(t)},e.prototype.zoomOut=function(e){for(var t=this.currentScale;t=(t/this.DEFAULT_SCALE_DELTA).toFixed(2),t=Math.floor(10*t)/10,t=Math.max(this.MIN_SCALE,t),0<--e&&t>this.MIN_SCALE;);this.currentScaleMode="auto",this.setScaleUpdatePages(t)},e.prototype.previousPage=function(){this.pdfViewer&&1<this.page&&(this.page--,this.displayPage=this.page,this.pdfViewer.currentPageNumber=this.page)},e.prototype.nextPage=function(){this.pdfViewer&&this.page<this.totalPages&&(this.page++,this.displayPage=this.page,this.pdfViewer.currentPageNumber=this.page)},e.prototype.inputPage=function(e){var t=parseInt(e,10);!isNaN(t)&&0<t&&t<=this.totalPages?(this.page=t,this.displayPage=this.page,this.pdfViewer.currentPageNumber=this.page):this.displayPage=this.page},e.prototype.onPageChange=function(e){this.page=e.pageNumber,this.displayPage=e.pageNumber},e.prototype.onPdfPassword=function(t,e){this.dialog.open(Ve,{width:"400px",disableClose:!0,data:{reason:e}}).afterClosed().subscribe(function(e){e&&t(e)})},e.prototype.onPagerendered=function(){this.rendered.emit()},e.prototype.onPagesLoaded=function(e){this.isPanelDisabled=!1},e.prototype.handleKeyboardEvent=function(e){var t=e.keyCode;39===t?this.nextPage():37===t&&this.previousPage()},e}();Ne.decorators=[{type:l.Component,args:[{selector:"adf-pdf-viewer",template:'<div class="adf-pdf-viewer__container">\n    <ng-container *ngIf="showThumbnails">\n        <div class="adf-pdf-viewer__thumbnails">\n            <div class="thumbnails-template__container">\n                <div class="thumbnails-template__buttons">\n                    <button mat-icon-button (click)="toggleThumbnails()">\n                            <mat-icon>close</mat-icon>\n                    </button>\n                </div>\n\n                <ng-container *ngIf="thumbnailsTemplate">\n                    <ng-container *ngTemplateOutlet="thumbnailsTemplate;context:pdfThumbnailsContext"></ng-container>\n                </ng-container>\n\n                <ng-container *ngIf="!thumbnailsTemplate">\n                    <adf-pdf-thumbnails [pdfViewer]="pdfViewer"></adf-pdf-thumbnails>\n                </ng-container>\n            </div>\n        </div>\n    </ng-container>\n\n    <div class="adf-pdf-viewer__content">\n        <div id="viewer-pdf-viewer" class="viewer-pdf-viewer" (window:resize)="onResize()">\n            <div id="viewer-viewerPdf" class="pdfViewer">\n                <div id="loader-container" class="loader-container">\n                    <div class="loader-item">\n                        <mat-progress-bar mode="indeterminate"></mat-progress-bar>\n                    </div >\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="adf-pdf-viewer__toolbar" *ngIf="showToolbar">\n    <adf-toolbar>\n\n        <ng-container *ngIf="allowThumbnails">\n            <button mat-icon-button\n                [disabled]="isPanelDisabled"\n                (click)="toggleThumbnails()">\n                <mat-icon>dashboard</mat-icon>\n            </button>\n            <adf-toolbar-divider></adf-toolbar-divider>\n        </ng-container>\n\n        <button\n            id="viewer-previous-page-button"\n            title="{{ \'ADF_VIEWER.ARIA.PREVIOUS_PAGE\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.PREVIOUS_PAGE\' | translate }}"\n            mat-icon-button\n            (click)="previousPage()">\n            <mat-icon>keyboard_arrow_up</mat-icon>\n        </button>\n\n        <button\n            id="viewer-next-page-button"\n            title="{{ \'ADF_VIEWER.ARIA.NEXT_PAGE\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.NEXT_PAGE\' | translate }}"\n            mat-icon-button\n            (click)="nextPage()">\n            <mat-icon>keyboard_arrow_down</mat-icon>\n        </button>\n\n        <div class="adf-pdf-viewer__toolbar-page-selector">\n            <span>{{ \'ADF_VIEWER.PAGE_LABEL.SHOWING\' | translate }}</span>\n            <input #page\n                type="text"\n                pattern="-?[0-9]*(.[0-9]+)?"\n                value="{{ displayPage }}"\n                (keyup.enter)="inputPage(page.value)">\n            <span>{{ \'ADF_VIEWER.PAGE_LABEL.OF\' | translate }} {{ totalPages }}</span>\n        </div>\n\n        <div class="adf-viewer__toolbar-page-scale">\n            {{ currentScaleText }}\n        </div>\n\n        <button\n            id="viewer-zoom-in-button"\n            title="{{ \'ADF_VIEWER.ARIA.ZOOM_IN\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.ZOOM_IN\' | translate }}"\n            mat-icon-button\n            (click)="zoomIn()">\n            <mat-icon>zoom_in</mat-icon>\n        </button>\n\n        <button\n            id="viewer-zoom-out-button"\n            title="{{ \'ADF_VIEWER.ARIA.ZOOM_OUT\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.ZOOM_OUT\' | translate }}"\n            mat-icon-button\n            (click)="zoomOut()">\n            <mat-icon>zoom_out</mat-icon>\n        </button>\n\n        <button\n            id="viewer-scale-page-button"\n            title="{{ \'ADF_VIEWER.ARIA.FIT_PAGE\' | translate }}"\n            attr.aria-label="{{ \'ADF_VIEWER.ARIA.FIT_PAGE\' | translate }}"\n            mat-icon-button\n            (click)="pageFit()">\n            <mat-icon>zoom_out_map</mat-icon>\n        </button>\n\n    </adf-toolbar>\n</div>\n',styles:["",".adf-pdf-viewer .textLayer{position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;border:1px solid gray}.adf-pdf-viewer .textLayer>div{color:transparent;position:absolute;white-space:pre;cursor:text;-webkit-transform-origin:0 0;transform-origin:0 0}.adf-pdf-viewer .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}.adf-pdf-viewer .textLayer .highlight.begin{border-radius:4px 0 0 4px}.adf-pdf-viewer .textLayer .highlight.end{border-radius:0 4px 4px 0}.adf-pdf-viewer .textLayer .highlight.middle{border-radius:0}.adf-pdf-viewer .textLayer .highlight.selected{background-color:#006400}.adf-pdf-viewer .textLayer::selection{background:#00f}.adf-pdf-viewer .textLayer::-moz-selection{background:#00f}.adf-pdf-viewer .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;user-select:none;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none}.adf-pdf-viewer .textLayer .endOfContent.active{top:0}.adf-pdf-viewer .annotationLayer section{position:absolute}.adf-pdf-viewer .annotationLayer .linkAnnotation>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%;background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)}.adf-pdf-viewer .annotationLayer .linkAnnotation>a:hover{opacity:.2;background:#ff0;-webkit-box-shadow:0 2px 10px #ff0;box-shadow:0 2px 10px #ff0}.adf-pdf-viewer .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}.adf-pdf-viewer .annotationLayer .popupWrapper{position:absolute;width:20em}.adf-pdf-viewer .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;-webkit-box-shadow:0 2px 5px #333;box-shadow:0 2px 5px #333;border-radius:2px;padding:.6em;margin-left:5px;cursor:pointer;word-wrap:break-word}.adf-pdf-viewer .annotationLayer .popup h1{font-size:1em;border-bottom:1px solid #000;padding-bottom:.2em}.adf-pdf-viewer .annotationLayer .popup p{padding-top:.2em}.adf-pdf-viewer .annotationLayer .fileAttachmentAnnotation,.adf-pdf-viewer .annotationLayer .highlightAnnotation,.adf-pdf-viewer .annotationLayer .squigglyAnnotation,.adf-pdf-viewer .annotationLayer .strikeoutAnnotation,.adf-pdf-viewer .annotationLayer .underlineAnnotation{cursor:pointer}.adf-pdf-viewer .pdfViewer canvasWrapper{overflow:hidden}.adf-pdf-viewer .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:1px auto -8px;position:relative;overflow:visible;border:9px solid transparent;background-clip:content-box;background-color:#fff}.adf-pdf-viewer .pdfViewer .page canvas{margin:0;display:block}.adf-pdf-viewer .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0}.adf-pdf-viewer .pdfViewer .page *{padding:0;margin:0}.adf-pdf-viewer .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}.adf-pdf-viewer .pdfViewer .loadingIcon{width:100px;height:100px;left:50%!important;top:50%!important;margin-top:-50px;margin-left:-50px;font-size:5px;text-indent:-9999em;border-top:1.1em solid rgba(3,0,2,.2);border-right:1.1em solid rgba(3,0,2,.2);border-bottom:1.1em solid rgba(3,0,2,.2);border-left:1.1em solid #030002;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:1.1s linear infinite load8;animation:1.1s linear infinite load8;border-radius:50%}.adf-pdf-viewer .pdfViewer .loadingIcon:after{border-radius:50%}.adf-pdf-viewer .hidden,.adf-pdf-viewer [hidden]{display:none!important}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.viewer-pdf-viewer{overflow:auto;-webkit-overflow-scrolling:touch;position:absolute;top:0;right:0;bottom:0;left:0;outline:0}html[dir=ltr] .viewer-pdf-viewer{-webkit-box-shadow:inset 1px 0 0 rgba(255,255,255,.05);box-shadow:inset 1px 0 0 rgba(255,255,255,.05)}html[dir=rtl] .viewer-pdf-viewer{-webkit-box-shadow:inset -1px 0 0 rgba(255,255,255,.05);box-shadow:inset -1px 0 0 rgba(255,255,255,.05)}"],providers:[Le],host:{"class":"adf-pdf-viewer"},encapsulation:l.ViewEncapsulation.None}]}],Ne.ctorParameters=function(){return[{type:h.MatDialog},{type:Le},{type:Ee}]},Ne.propDecorators={urlFile:[{type:l.Input}],blobFile:[{type:l.Input}],nameFile:[{type:l.Input}],showToolbar:[{type:l.Input}],allowThumbnails:[{type:l.Input}],thumbnailsTemplate:[{type:l.Input}],rendered:[{type:l.Output}],error:[{type:l.Output}],handleKeyboardEvent:[{type:l.HostListener,args:["document:keydown",["$event"]]}]};var Ue=function(){function e(e){this.element=e,this.virtualHeight=0,this.translateY=0,this.renderItems=[],this.items=[],this.margin=15,this.itemHeight=114+this.margin,this.calculateItems=this.calculateItems.bind(this),this.onPageChange=this.onPageChange.bind(this)}return e.prototype.onResize=function(e){this.calculateItems()},e.prototype.ngOnInit=function(){this.element.nativeElement.addEventListener("scroll",this.calculateItems,!0),this.pdfViewer.eventBus.on("pagechange",this.onPageChange),this.items=this.getPages(),this.calculateItems()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.scrollInto(e.pdfViewer.currentPageNumber)},0)},e.prototype.ngOnDestroy=function(){this.element.nativeElement.removeEventListener("scroll",this.calculateItems,!0),this.pdfViewer.eventBus.off("pagechange",this.onPageChange)},e.prototype.trackByFn=function(e,t){return t.id},e.prototype.isSelected=function(e){return this.pdfViewer.currentPageNumber===e},e.prototype.goTo=function(e){this.pdfViewer.currentPageNumber=e},e.prototype.scrollInto=function(t){if(this.items.length){var e=this.items.findIndex(function(e){return e.id===t});if(e<0||e>=this.items.length)return;this.element.nativeElement.scrollTop=e*this.itemHeight,this.calculateItems()}},e.prototype.getPages=function(){var t=this;return this.pdfViewer._pages.map(function(e){return{id:e.id,getPage:function(){return t.pdfViewer.pdfDocument.getPage(e.id)}}})},e.prototype.calculateItems=function(){var e=this.getContainerSetup(),t=e.element,n=e.viewPort,i=e.itemsInView,r=t.scrollTop/n*this.items.length/i,o=Math.floor(r),a=Math.ceil(r)+i;this.translateY=this.itemHeight*Math.ceil(o),this.virtualHeight=this.itemHeight*this.items.length-this.translateY,this.renderItems=this.items.slice(o,a)},e.prototype.getContainerSetup=function(){var e=this.element.nativeElement,t=e.getBoundingClientRect(),n=Math.ceil(t.height/this.itemHeight);return{element:e,viewPort:this.itemHeight*this.items.length/n,itemsInView:n}},e.prototype.onPageChange=function(t){var e=this.renderItems.findIndex(function(e){return e.id===t.pageNumber});e<0&&this.scrollInto(t.pageNumber),e>=this.renderItems.length-1&&(this.element.nativeElement.scrollTop+=this.itemHeight)},e}();Ue.decorators=[{type:l.Component,args:[{selector:"adf-pdf-thumbnails",template:'<div class="pdf-thumbnails__content"\n    [style.height.px]="virtualHeight"\n    [style.transform]="\'translate(-50%, \' + translateY + \'px)\'">\n    <adf-pdf-thumb *ngFor="let page of renderItems; trackBy: trackByFn"\n        class="pdf-thumbnails__thumb"\n        [ngClass]="{\'pdf-thumbnails__thumb--selected\' : isSelected(page.id)}"\n        [page]="page"\n        (click)="goTo(page.id)">\n    </adf-pdf-thumb>\n</div>\n',styles:[""],host:{"class":"pdf-thumbnails"},encapsulation:l.ViewEncapsulation.None}]}],Ue.ctorParameters=function(){return[{type:l.ElementRef}]},Ue.propDecorators={pdfViewer:[{type:l.Input}],template:[{type:l.ContentChild,args:[l.TemplateRef]}],onResize:[{type:l.HostListener,args:["window:resize",["$event"]]}]};var Be=function(){function e(e,t){this.element=e,this.sanitizer=t,this.page=null}return e.prototype.ngOnInit=function(){var t=this;this.image$=this.page.getPage().then(function(e){return t.getThumb(e)})},e.prototype.getThumb=function(e){var t=this,n=this.getCanvas(),i=e.getViewport(1),r=Math.min(n.height/i.height,n.width/i.width);return e.render({canvasContext:n.getContext("2d"),viewport:e.getViewport(r)}).then(function(){var e=n.toDataURL();return t.sanitizer.bypassSecurityTrustUrl(e)})},e.prototype.getCanvas=function(){var e=this.element.nativeElement.getBoundingClientRect(),t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t},e}();Be.decorators=[{type:l.Component,args:[{selector:"adf-pdf-thumb",template:'<ng-container *ngIf="image$ | async as image">\n    <img [src]="image"\n        title="{{ \'ADF_VIEWER.SIDEBAR.THUMBNAILS.PAGE\' | translate: { pageNum: page.id } }}">\n</ng-container>',encapsulation:l.ViewEncapsulation.None}]}],Be.ctorParameters=function(){return[{type:l.ElementRef},{type:m.DomSanitizer}]},Be.propDecorators={page:[{type:l.Input,args:["page"]}]};var je=function(){function e(e){this.http=e}return e.prototype.ngOnChanges=function(e){var t=e.blobFile;if(t&&t.currentValue)return this.readBlob(t.currentValue);var n=e.urlFile;if(n&&n.currentValue)return this.getUrlContent(n.currentValue);if(!this.urlFile&&!this.blobFile)throw new Error("Attribute urlFile or blobFile is required")},e.prototype.getUrlContent=function(e){var i=this;return new Promise(function(t,n){i.http.get(e,{responseType:"text"}).subscribe(function(e){i.content=e,t()},function(e){n(e)})})},e.prototype.readBlob=function(i){var r=this;return new Promise(function(e,t){var n=new FileReader;n.onload=function(){r.content=n.result,e()},n.onerror=function(e){t(e)},n.readAsText(i)})},e}();je.decorators=[{type:l.Component,args:[{selector:"adf-txt-viewer",template:'<pre class="adf-txt-viewer-content">\n    {{content}}\n</pre>\n',styles:[""],host:{"class":"adf-txt-viewer"},encapsulation:l.ViewEncapsulation.None}]}],je.ctorParameters=function(){return[{type:t.HttpClient}]},je.propDecorators={urlFile:[{type:l.Input}],blobFile:[{type:l.Input}]};var Ye=function(){};Ye.decorators=[{type:l.Component,args:[{selector:"adf-viewer-unknown-format",template:'<div class="adf-viewer__unknown-format-view">\n    <div>\n        <mat-icon class="icon">wifi_tethering</mat-icon>\n        <div class="label">{{ \'ADF_VIEWER.UNKNOWN_FORMAT\' | translate }}</div>\n    </div>\n</div>\n',styles:[".adf-viewer__unknown-format-view{height:90vh;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}"]}]}],Ye.ctorParameters=function(){return[]};var qe=function(){};qe.decorators=[{type:l.Component,args:[{selector:"adf-viewer-toolbar-actions",encapsulation:l.ViewEncapsulation.None,changeDetection:l.ChangeDetectionStrategy.OnPush,host:{"class":"adf-viewer-toolbar-actions"},template:"<ng-content></ng-content>"}]}],qe.ctorParameters=function(){return[]};var ze=function(){function e(e){this.viewerComponent=e}return e.prototype.ngAfterContentInit=function(){var t=this;this.templateModel={template:this.template,isVisible:!1},this.viewerComponent.extensionTemplates.push(this.templateModel),this.viewerComponent.extensionChange.subscribe(function(e){t.templateModel.isVisible=t.isVisible(e)}),this.supportedExtensions instanceof Array&&this.supportedExtensions.forEach(function(e){t.viewerComponent.externalExtensions.push(e)})},e.prototype.isVisible=function(t){var e;return this.supportedExtensions&&this.supportedExtensions instanceof Array&&(e=this.supportedExtensions.find(function(e){return e.toLowerCase()===t})),!!e},e}();function He(){return[h.MatAutocompleteModule,h.MatButtonModule,h.MatCardModule,h.MatCheckboxModule,h.MatChipsModule,h.MatDatepickerModule,h.MatDialogModule,h.MatGridListModule,h.MatIconModule,h.MatInputModule,h.MatListModule,h.MatNativeDateModule,h.MatOptionModule,h.MatProgressSpinnerModule,h.MatRadioModule,h.MatRippleModule,h.MatSelectModule,h.MatSlideToggleModule,h.MatTableModule,h.MatTabsModule,h.MatMenuModule,h.MatProgressBarModule,h.MatSidenavModule,h.MatSnackBarModule,h.MatToolbarModule,h.MatTooltipModule,v.MatDatetimepickerModule,v.MatNativeDatetimeModule]}ze.decorators=[{type:l.Directive,args:[{selector:"adf-viewer-extension"}]}],ze.ctorParameters=function(){return[{type:xe}]},ze.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}],urlFileContent:[{type:l.Input}],extension:[{type:l.Input}],supportedExtensions:[{type:l.Input}]};var Ge=function(){};Ge.decorators=[{type:l.NgModule,args:[{imports:He(),exports:He()}]}],Ge.ctorParameters=function(){return[]};var We=function(){};We.decorators=[{type:l.Component,args:[{selector:"adf-toolbar-divider",template:"<div></div>",host:{"class":"adf-toolbar-divider"},styles:["\n        .adf-toolbar-divider > div {\n            height: 24px;\n            width: 1px;\n            background: rgba(0, 0, 0, 0.26);\n            margin-left: 5px;\n            margin-right: 5px;\n        }\n    "],encapsulation:l.ViewEncapsulation.None}]}],We.ctorParameters=function(){return[]};var Xe=function(){};Xe.decorators=[{type:l.Component,args:[{selector:"adf-toolbar-title",template:"<ng-content></ng-content>",host:{"class":"adf-toolbar-title"}}]}],Xe.ctorParameters=function(){return[]};var $e=function(){this.title=""};$e.decorators=[{type:l.Component,args:[{selector:"adf-toolbar",template:'<mat-toolbar [color]="color">\n    <span *ngIf="title">{{ title }}</span>\n    <ng-content select="adf-toolbar-title"></ng-content>\n    <span class="adf-toolbar--spacer"></span>\n    <ng-content></ng-content>\n</mat-toolbar>\n',styles:[""],changeDetection:l.ChangeDetectionStrategy.OnPush,encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-toolbar"}}]}],$e.ctorParameters=function(){return[]},$e.propDecorators={title:[{type:l.Input}],color:[{type:l.Input}]};var Ke=function(){};Ke.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge],declarations:[$e,Xe,We],exports:[$e,Xe,We]}]}],Ke.ctorParameters=function(){return[]};var Je=new l.InjectionToken("Injection token for translation providers."),Qe=function(){function e(e,t,n){var i,r,o=this;if(this.translate=e,this.customLoader=this.translate.currentLoader,this.defaultLang="en",e.setDefaultLang(this.defaultLang),n&&0<n.length)try{for(var a=re(n),s=a.next();!s.done;s=a.next()){var l=s.value;this.addTranslationFolder(l.name,l.source)}}catch(u){i={error:u}}finally{try{s&&!s.done&&(r=a["return"])&&r.call(a)}finally{if(i)throw i.error}}t.locale$.subscribe(function(e){o.userLang=e,o.use(o.userLang)})}return e.prototype.addTranslationFolder=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=""),this.customLoader.providerRegistered(e)||(this.customLoader.registerProvider(e,t),this.userLang!==this.defaultLang?this.translate.getTranslation(this.defaultLang).subscribe(function(){n.translate.getTranslation(n.userLang).subscribe(function(){n.translate.use(n.userLang),n.onTranslationChanged(n.userLang)})}):this.translate.getTranslation(this.userLang).subscribe(function(){n.translate.use(n.userLang),n.onTranslationChanged(n.userLang)}))},e.prototype.onTranslationChanged=function(e){this.translate.onTranslationChange.next({lang:e,translations:this.customLoader.getFullTranslationJSON(e)})},e.prototype.use=function(e){return this.customLoader.init(e),this.translate.use(e)},e.prototype.get=function(e,t){return this.translate.get(e,t)},e.prototype.instant=function(e,t){return this.translate.instant(e,t)},e}();Qe.decorators=[{type:l.Injectable}],Qe.ctorParameters=function(){return[{type:a.TranslateService},{type:De},{type:Array,decorators:[{type:l.Optional},{type:l.Inject,args:[Je]}]}]};var Ze=function(){function e(e){this.translation=e}return e.prototype.transform=function(e,t){if(void 0===t&&(t=2),null==e||e===undefined)return"";if(0===e)return"0 "+this.translation.instant("CORE.FILE_SIZE.BYTES");var n=t||2,i=Math.floor(Math.log(e)/Math.log(1024)),r=this.translation.instant("CORE.FILE_SIZE."+["BYTES","KB","MB","GB","TB","PB","EB","ZB","YB"][i]);return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+r},e}();Ze.decorators=[{type:l.Pipe,args:[{name:"adfFileSize",pure:!1}]}],Ze.ctorParameters=function(){return[{type:Qe}]};var et=function(){function e(e,t,n){var i=this;this.contentService=e,this.DEFAULT_ICON="./assets/images/ft_ic_miscellaneous.svg",this.mimeTypeIcons={"image/png":"./assets/images/ft_ic_raster_image.svg","image/jpeg":"./assets/images/ft_ic_raster_image.svg","image/gif":"./assets/images/ft_ic_raster_image.svg","image/bmp":"./assets/images/ft_ic_raster_image.svg","image/cgm":"./assets/images/ft_ic_raster_image.svg","image/ief":"./assets/images/ft_ic_raster_image.svg","image/jp2":"./assets/images/ft_ic_raster_image.svg","image/tiff":"./assets/images/ft_ic_raster_image.svg","image/vnd.adobe.photoshop":"./assets/images/ft_ic_raster_image.svg","image/vnd.adobe.premiere":"./assets/images/ft_ic_raster_image.svg","image/x-cmu-raster":"./assets/images/ft_ic_raster_image.svg","image/x-dwt":"./assets/images/ft_ic_raster_image.svg","image/x-portable-anymap":"./assets/images/ft_ic_raster_image.svg","image/x-portable-bitmap":"./assets/images/ft_ic_raster_image.svg","image/x-portable-graymap":"./assets/images/ft_ic_raster_image.svg","image/x-portable-pixmap":"./assets/images/ft_ic_raster_image.svg","image/x-raw-adobe":"./assets/images/ft_ic_raster_image.svg","image/x-raw-canon":"./assets/images/ft_ic_raster_image.svg","image/x-raw-fuji":"./assets/images/ft_ic_raster_image.svg","image/x-raw-hasselblad":"./assets/images/ft_ic_raster_image.svg","image/x-raw-kodak":"./assets/images/ft_ic_raster_image.svg","image/x-raw-leica":"./assets/images/ft_ic_raster_image.svg","image/x-raw-minolta":"./assets/images/ft_ic_raster_image.svg","image/x-raw-nikon":"./assets/images/ft_ic_raster_image.svg","image/x-raw-olympus":"./assets/images/ft_ic_raster_image.svg","image/x-raw-panasonic":"./assets/images/ft_ic_raster_image.svg","image/x-raw-pentax":"./assets/images/ft_ic_raster_image.svg","image/x-raw-red":"./assets/images/ft_ic_raster_image.svg","image/x-raw-sigma":"./assets/images/ft_ic_raster_image.svg","image/x-raw-sony":"./assets/images/ft_ic_raster_image.svg","image/x-xbitmap":"./assets/images/ft_ic_raster_image.svg","image/x-xpixmap":"./assets/images/ft_ic_raster_image.svg","image/x-xwindowdump":"./assets/images/ft_ic_raster_image.svg","image/svg+xml":"./assets/images/ft_ic_vector_image.svg","application/eps":"./assets/images/ft_ic_raster_image.svg","application/illustrator":"./assets/images/ft_ic_raster_image.svg","application/pdf":"./assets/images/ft_ic_pdf.svg","application/vnd.ms-excel":"./assets/images/ft_ic_ms_excel.svg","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"./assets/images/ft_ic_ms_excel.svg","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"./assets/images/ft_ic_ms_excel.svg","application/vnd.ms-excel.addin.macroenabled.12":"./assets/images/ft_ic_ms_excel.svg","application/vnd.ms-excel.sheet.binary.macroenabled.12":"./assets/images/ft_ic_ms_excel.svg","application/vnd.ms-excel.sheet.macroenabled.12":"./assets/images/ft_ic_ms_excel.svg","application/vnd.ms-excel.template.macroenabled.12":"./assets/images/ft_ic_ms_excel.svg","application/vnd.sun.xml.calc":"./assets/images/ft_ic_ms_excel.svg","application/vnd.sun.xml.calc.template":"./assets/images/ft_ic_ms_excel.svg","application/vnd.ms-outlook":"./assets/images/ft_ic_document.svg","application/msword":"./assets/images/ft_ic_ms_word.svg","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"./assets/images/ft_ic_ms_word.svg","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"./assets/images/ft_ic_ms_word.svg","application/vnd.ms-word.document.macroenabled.12":"./assets/images/ft_ic_ms_word.svg","application/vnd.ms-word.template.macroenabled.12":"./assets/images/ft_ic_ms_word.svg","application/vnd.sun.xml.writer":"./assets/images/ft_ic_ms_word.svg","application/vnd.sun.xml.writer.template":"./assets/images/ft_ic_ms_word.svg","application/rtf":"./assets/images/ft_ic_ms_word.svg","application/vnd.ms-powerpoint":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.openxmlformats-officedocument.presentationml.presentation":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.openxmlformats-officedocument.presentationml.template":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.oasis.opendocument.presentation":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.oasis.opendocument.presentation-template":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.openxmlformats-officedocument.presentationml.slide":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.sun.xml.impress":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.sun.xml.impress.template":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.oasis.opendocument.spreadsheet":"./assets/images/ft_ic_ms_excel.svg","application/vnd.oasis.opendocument.spreadsheet-template":"./assets/images/ft_ic_ms_excel.svg","application/vnd.ms-powerpoint.addin.macroenabled.12":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.ms-powerpoint.presentation.macroenabled.12":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.ms-powerpoint.slide.macroenabled.12":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.ms-powerpoint.slideshow.macroenabled.12":"./assets/images/ft_ic_ms_powerpoint.svg","application/vnd.ms-powerpoint.template.macroenabled.12":"./assets/images/ft_ic_ms_powerpoint.svg","video/mp4":"./assets/images/ft_ic_video.svg","video/3gpp":"./assets/images/ft_ic_video.svg","video/3gpp2":"./assets/images/ft_ic_video.svg","video/mp2t":"./assets/images/ft_ic_video.svg","video/mpeg":"./assets/images/ft_ic_video.svg","video/mpeg2":"./assets/images/ft_ic_video.svg","video/ogg":"./assets/images/ft_ic_video.svg","video/quicktime":"./assets/images/ft_ic_video.svg","video/webm":"./assets/images/ft_ic_video.svg","video/x-flv":"./assets/images/ft_ic_video.svg","video/x-m4v":"./assets/images/ft_ic_video.svg","video/x-ms-asf":"./assets/images/ft_ic_video.svg","video/x-ms-wmv":"./assets/images/ft_ic_video.svg","video/x-msvideo":"./assets/images/ft_ic_video.svg","video/x-rad-screenplay":"./assets/images/ft_ic_video.svg","video/x-sgi-movie":"./assets/images/ft_ic_video.svg","video/x-matroska":"./assets/images/ft_ic_video.svg","audio/mpeg":"./assets/images/ft_ic_audio.svg","audio/ogg":"./assets/images/ft_ic_audio.svg","audio/wav":"./assets/images/ft_ic_audio.svg","audio/basic":"./assets/images/ft_ic_audio.svg","audio/mp4":"./assets/images/ft_ic_audio.svg","audio/vnd.adobe.soundbooth":"./assets/images/ft_ic_audio.svg","audio/vorbis":"./assets/images/ft_ic_audio.svg","audio/x-aiff":"./assets/images/ft_ic_audio.svg","audio/x-flac":"./assets/images/ft_ic_audio.svg","audio/x-ms-wma":"./assets/images/ft_ic_audio.svg","audio/x-wav":"./assets/images/ft_ic_audio.svg","x-world/x-vrml":"./assets/images/ft_ic_video.svg","text/plain":"./assets/images/ft_ic_document.svg","application/vnd.oasis.opendocument.text":"./assets/images/ft_ic_document.svg","application/vnd.oasis.opendocument.text-template":"./assets/images/ft_ic_document.svg","application/x-javascript":"./assets/images/ft_ic_document.svg","application/json":"./assets/images/ft_ic_document.svg","text/csv":"./assets/images/ft_ic_document.svg","text/xml":"./assets/images/ft_ic_document.svg","text/html":"./assets/images/ft_ic_website.svg","application/x-compressed":"./assets/images/ft_ic_archive.svg","application/x-zip-compressed":"./assets/images/ft_ic_archive.svg","application/zip":"./assets/images/ft_ic_archive.svg","application/x-tar":"./assets/images/ft_ic_archive.svg","application/vnd.apple.keynote":"./assets/images/ft_ic_presentation.svg","application/vnd.apple.pages":"./assets/images/ft_ic_document.svg","application/vnd.apple.numbers":"./assets/images/ft_ic_spreadsheet.svg","application/vnd.visio":"./assets/images/ft_ic_document.svg","application/wordperfect":"./assets/images/ft_ic_document.svg","application/x-cpio":"./assets/images/ft_ic_document.svg",folder:"./assets/images/ft_ic_folder.svg","disable/folder":"./assets/images/ft_ic_folder_disable.svg",selected:"./assets/images/ft_ic_selected.svg"},Object.keys(this.mimeTypeIcons).forEach(function(e){t.addSvgIcon(e,n.bypassSecurityTrustResourceUrl(i.mimeTypeIcons[e]))})}return e.prototype.getDocumentThumbnailUrl=function(e){return this.contentService.getDocumentThumbnailUrl(e)||this.DEFAULT_ICON},e.prototype.getMimeTypeIcon=function(e){return this.mimeTypeIcons[e]||this.DEFAULT_ICON},e.prototype.getDefaultMimeTypeIcon=function(){return this.DEFAULT_ICON},e}();et.decorators=[{type:l.Injectable}],et.ctorParameters=function(){return[{type:ke},{type:h.MatIconRegistry},{type:m.DomSanitizer}]};var tt=function(){function e(e){this.thumbnailService=e}return e.prototype.transform=function(e){return this.thumbnailService.getMimeTypeIcon(e)},e}();tt.decorators=[{type:l.Pipe,args:[{name:"adfMimeTypeIcon"}]}],tt.ctorParameters=function(){return[{type:et}]};var nt=function(){function e(){}return e.prototype.transform=function(e){return e?this.getNodeTooltip(e):null},e.prototype.containsLine=function(e,t){return e.some(function(e){return e.toLowerCase()===t.toLowerCase()})},e.prototype.removeDuplicateLines=function(e){var n=this;return e.reduce(function(e,t){return n.containsLine(e,t)||e.push(t),e},[])},e.prototype.getNodeTooltip=function(e){if(!e||!e.entry)return null;var t=e.entry,n=t.properties,i=[t.name];if(n){var r=n["cm:title"],o=n["cm:description"];r&&o&&(i[0]=r,i[1]=o),r&&(i[1]=r),o&&(i[1]=o)}return this.removeDuplicateLines(i).join("\n")},e}();nt.decorators=[{type:l.Pipe,args:[{name:"adfNodeNameTooltip"}]}],nt.ctorParameters=function(){return[]};var it=function(){function e(){}return e.prototype.highlight=function(e,t,n){void 0===n&&(n="highlight");var i=!1,r=e;if(t&&e){var o=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");o=o.split(" ").filter(function(e){return 0<e.length}).join("|");var a=new RegExp(o,"gi");return{text:r=e.replace(a,function(e){return i=!0,'<span class="'+n+'">'+e+"</span>"}),changed:i}}return{text:r,changed:i}},e}(),rt=function(){function e(e){this.highlightTransformService=e}return e.prototype.transform=function(e,t){return this.highlightTransformService.highlight(e,t).text},e}();rt.decorators=[{type:l.Pipe,args:[{name:"highlight"}]}],rt.ctorParameters=function(){return[{type:it}]};var ot=function(){function e(){}return e.prototype.transform=function(e){if(null!==e&&e!==undefined){var t=O(e);return 7<O().diff(t,"days")?t.format("DD/MM/YYYY HH:mm"):t.fromNow()}return""},e}();ot.decorators=[{type:l.Pipe,args:[{name:"adfTimeAgo"}]}],ot.ctorParameters=function(){return[]};var at=function(){function e(e){this.sanitized=e}return e.prototype.transform=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n="");var i="";if(e){var r=this.getInitialUserName(e.firstName,e.lastName,n);i=this.sanitized.bypassSecurityTrustHtml('<div id="user-initials-image" class="'+t+'">'+r+"</div>")}return i},e.prototype.getInitialUserName=function(e,t,n){return(e=e?e[0]:"")+n+(t=t?t[0]:"")},e}();at.decorators=[{type:l.Pipe,args:[{name:"usernameInitials"}]}],at.ctorParameters=function(){return[{type:m.DomSanitizer}]};var st=function(){};st.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule],declarations:[Ze,rt,ot,tt,at,nt],providers:[Ze,rt,ot,tt,at,nt],exports:[Ze,rt,ot,tt,at,nt]}]}],st.ctorParameters=function(){return[]};var lt=function(){};lt.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge,a.TranslateModule,g.FormsModule,g.ReactiveFormsModule,Ke,st,A.FlexLayoutModule],declarations:[Ve,xe,_e,je,Me,Ne,Be,Ue,ze,Ye,Te,Se,Ce,Ie,qe],entryComponents:[Ve],exports:[xe,_e,je,Me,Ne,Ve,Be,Ue,ze,Ye,Te,Se,Ce,Ie,qe]}]}],lt.ctorParameters=function(){return[]};var ut=function(){function e(e){e&&(this.apps=e.apps,this.capabilities=e.capabilities,this.company=e.company,this.created=e.created,this.email=e.email,this.externalId=e.externalId,this.firstName=e.firstName,this.lastName=e.lastName,this.fullname=e.fullname,this.fullNameDisplay=e?this.formatValue(e.firstName).trim()+" "+this.formatValue(e.lastName).trim():null,this.groups=e.groups,this.id=e.id,this.lastUpdate=e.lastUpdate,this.latestSyncTimeStamp=e.latestSyncTimeStamp,this.password=e.password,this.pictureId=e.pictureId,this.status=e.status,this.tenantId=e.tenantId,this.tenantName=e.tenantName,this.tenantPictureId=e.tenantPictureId,this.type=e.type)}return e.prototype.formatValue=function(e){return e&&"null"!==e?e:""},e}(),ct=function(){function e(e){this.id=e&&e.id||null,this.firstName=e&&e.firstName,this.lastName=e&&e.lastName,this.fullNameDisplay=e?this.formatValue(e.firstName).trim()+" "+this.formatValue(e.lastName).trim():null,this.description=e&&e.description||null,this.avatarId=e&&e.avatarId||null,this.email=e&&e.email||null,this.skypeId=e&&e.skypeId,this.googleId=e&&e.googleId,this.instantMessageId=e&&e.instantMessageId,this.jobTitle=e&&e.jobTitle||null,this.location=e&&e.location||null,this.company=e&&e.company,this.mobile=e&&e.mobile,this.telephone=e&&e.telephone,this.statusUpdatedAt=e&&e.statusUpdatedAt,this.userStatus=e&&e.userStatus,this.enabled=e&&e.enabled,this.emailNotificationsEnabled=e&&e.emailNotificationsEnabled}return e.prototype.formatValue=function(e){return e&&"null"!==e?e:""},e}(),pt=function(){function e(e,t){this.apiService=e,this.logService=t}return e.prototype.getCurrentUserInfo=function(){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.profileApi.getProfile()).map(function(e){return e})["catch"](function(e){return t.handleError(e)})},e.prototype.getCurrentUserProfileImage=function(){return this.apiService.getInstance().activiti.profileApi.getProfilePictureUrl()},e.prototype.handleError=function(e){return this.logService.error(e),u.Observable["throw"](e||"Server error")},e}();pt.decorators=[{type:l.Injectable}],pt.ctorParameters=function(){return[{type:ve},{type:Ee}]};var dt=function(){function e(e,t,n){this.apiService=e,this.contentService=t,this.logService=n}return e.prototype.getUserInfo=function(e){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().core.peopleApi.getPerson(e)).map(function(e){return e.entry})["catch"](function(e){return t.handleError(e)})},e.prototype.getCurrentUserInfo=function(){return this.getUserInfo("-me-")},e.prototype.getUserProfileImage=function(e){if(e){var t={entry:{id:e}};return this.contentService.getContentUrl(t)}},e.prototype.handleError=function(e){return this.logService.error(e),u.Observable["throw"](e||"Server error")},e}();dt.decorators=[{type:l.Injectable}],dt.ctorParameters=function(){return[{type:ve},{type:ke},{type:Ee}]};var mt=function(){function e(e,t,n){this.ecmUserService=e,this.bpmUserService=t,this.authService=n,this.ecmBackgroundImage="./assets/images/ecm-background.png",this.bpmBackgroundImage="./assets/images/bpm-background.png",this.menuPositionX="after",this.menuPositionY="below",this.showName=!0,this.namePosition="right"}return e.prototype.ngOnInit=function(){this.getUserInfo()},e.prototype.getUserInfo=function(){this.loadEcmUserInfo(),this.loadBpmUserInfo()},e.prototype.isLoggedIn=function(){return this.authService.isLoggedIn()},e.prototype.loadEcmUserInfo=function(){var t=this;this.authService.isEcmLoggedIn()?this.ecmUserService.getCurrentUserInfo().subscribe(function(e){t.ecmUser=new ct(e),t.getEcmAvatar()}):(this.ecmUser=null,this.ecmUserImage=null)},e.prototype.loadBpmUserInfo=function(){var t=this;this.authService.isBpmLoggedIn()?(this.bpmUserService.getCurrentUserInfo().subscribe(function(e){t.bpmUser=new ut(e)}),this.bpmUserImage=this.bpmUserService.getCurrentUserProfileImage()):(this.bpmUser=null,this.bpmUserImage=null)},e.prototype.stopClosing=function(e){e.stopPropagation()},e.prototype.getEcmAvatar=function(){this.ecmUserImage=this.ecmUserService.getUserProfileImage(this.ecmUser.avatarId)},e.prototype.showOnRight=function(){return"right"===this.namePosition},e.prototype.hasBpmUserPictureId=function(){return!!this.bpmUser.pictureId},e.prototype.hasEcmUserAvatarId=function(){return!!this.ecmUser.avatarId},e}();mt.decorators=[{type:l.Component,args:[{selector:"adf-userinfo",styles:[""],template:'<div id="userinfo_container"\n    [class.adf-userinfo-name-right]="showOnRight()"\n    class="adf-userinfo-container" *ngIf="isLoggedIn()">\n    <span *ngIf="ecmUser && showName" id="adf-userinfo-ecm-name-display"\n          class="adf-userinfo-name">{{ecmUser.fullNameDisplay}}</span>\n    <span *ngIf="bpmUser && !ecmUser && showName" id="adf-userinfo-bpm-name-display"\n          class="adf-userinfo-name">{{bpmUser.fullNameDisplay}}</span>\n    <button mat-button [matMenuTriggerFor]="menu" class="adf-userinfo-menu_button">\n        <div class="adf-userinfo-button-profile" id="user-profile" data-automation-id="user-profile">\n            <div *ngIf="bpmUser && !ecmUser" id="bpm-user-image">\n                <div *ngIf="!hasBpmUserPictureId()" [outerHTML]="bpmUser | usernameInitials:\'adf-userinfo-pic\'"></div>\n                <div *ngIf="hasBpmUserPictureId()" class="adf-userinfo-profile-container">\n                    <img id="logged-user-img" [src]="bpmUserImage" alt="user-info-profile-button"\n                        class="adf-userinfo-profile-image"/>\n                </div>\n            </div>\n            <div *ngIf="ecmUser" id="ecm-user-image">\n                    <div *ngIf="!hasEcmUserAvatarId()" [outerHTML]="ecmUser | usernameInitials:\'adf-userinfo-pic\'"></div>\n                    <div *ngIf="hasEcmUserAvatarId()" class="adf-userinfo-profile-container">\n                        <img id="logged-user-img" [src]="ecmUserImage" alt="user-info-profile-button"\n                            class="adf-userinfo-profile-image"/>\n                    </div>\n            </div>\n    </div>\n</button>\n    <mat-menu #menu="matMenu" id="user-profile-lists" [xPosition]="menuPositionX" [yPosition]="menuPositionY" [overlapTrigger]="false" class="adf-userinfo-menu">\n        <mat-tab-group id="tab-group-env" (click)="stopClosing($event)"\n            class="adf-userinfo-tab" [class.adf-hide-tab]="!bpmUser || !ecmUser">\n            <mat-tab id="ecm-panel" label="{{ \'USER_PROFILE.TAB.CS\' | translate }}" *ngIf="ecmUser">\n                <mat-card class="adf-userinfo-card">\n                    <mat-card-header class="adf-userinfo-card-header" [style.background-image]="\'url(\' + ecmBackgroundImage + \')\'">\n                        <div *ngIf="!hasEcmUserAvatarId()" [outerHTML]="ecmUser | usernameInitials:\'adf-userinfo-profile-initials adf-hide-small\'"></div>\n                        <div *ngIf="hasEcmUserAvatarId()" class="adf-userinfo-profile-container adf-hide-small">\n                            <img class="adf-userinfo-profile-picture" id="ecm-user-detail-image"\n                                alt="ecm-profile-image" [src]="ecmUserImage" />\n                        </div>\n                       <div class="adf-userinfo-title" id="ecm-username">{{ecmUser.fullNameDisplay}}</div>\n                    </mat-card-header>\n                    <mat-card-content>\n                        <div class="adf-userinfo-supporting-text">\n                                <div class="adf-userinfo-detail">\n                                    <span id="ecm-full-name" class="adf-userinfo__detail-title">{{ecmUser.fullNameDisplay}}</span>\n                                    <span class="adf-userinfo__detail-profile" id="ecm-email"> {{ecmUser.email}} </span>\n                                </div>\n                                <div class="adf-userinfo-detail">\n                                    <span class="adf-userinfo__secondary-info" id="ecm-job-title-label">\n                                        {{ \'USER_PROFILE.LABELS.ECM.JOB_TITLE\' | translate }}\n                                        <span id="ecm-job-title" class="adf-userinfo__detail-profile"> {{ ecmUser.jobTitle ? ecmUser.jobTitle : \'N/A\' }} </span>\n                                    </span>\n                                </div>\n                        </div>\n                    </mat-card-content>\n                </mat-card>\n            </mat-tab>\n            <mat-tab id="bpm-panel" label="{{ \'USER_PROFILE.TAB.PS\' | translate }}" *ngIf="bpmUser">\n            <mat-card class="adf-userinfo-card">\n                <mat-card-header class="adf-userinfo-card-header" [style.background-image]="\'url(\' + bpmBackgroundImage + \')\'">\n                    <div *ngIf="!hasBpmUserPictureId()" [outerHTML]="bpmUser | usernameInitials:\'adf-userinfo-profile-initials adf-hide-small\'"></div>\n                    <img *ngIf="hasBpmUserPictureId()" class="adf-userinfo-profile-picture adf-hide-small" id="bpm-user-detail-image"\n                            alt="bpm-profile-image" [src]="bpmUserImage"/>\n                   <div class="adf-userinfo-title" id="bpm-username">{{bpmUser.fullNameDisplay}}</div>\n                </mat-card-header>\n                <mat-card-content>\n                    <div class="adf-userinfo-supporting-text">\n                            <div class="adf-userinfo-detail">\n                                <span id="bpm-full-name" class="adf-userinfo__detail-title">{{ bpmUser.fullNameDisplay }}</span>\n                                <span class="adf-userinfo__detail-profile" id="bpm-email"> {{bpmUser.email}} </span>\n                            </div>\n                            <div class="adf-userinfo-detail">\n                                <span id="bpm-tenant" class="adf-userinfo__secondary-info">\n                                    {{ \'USER_PROFILE.LABELS.BPM.TENANT\' | translate }}\n                                    <span class="adf-userinfo__detail-profile">{{ bpmUser.tenantName ? bpmUser.tenantName : \'\' }}</span>\n                                </span>\n                            </div>\n                    </div>\n                </mat-card-content>\n            </mat-card>\n            </mat-tab>\n        </mat-tab-group>\n    </mat-menu>\n</div>\n',encapsulation:l.ViewEncapsulation.None}]}],mt.ctorParameters=function(){return[{type:dt},{type:pt},{type:Re}]},mt.propDecorators={ecmBackgroundImage:[{type:l.Input}],bpmBackgroundImage:[{type:l.Input}],menuPositionX:[{type:l.Input}],menuPositionY:[{type:l.Input}],showName:[{type:l.Input}],namePosition:[{type:l.Input}]};var ft=function(){};ft.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge,a.TranslateModule,st],declarations:[mt],providers:[dt,pt],exports:[mt]}]}],ft.ctorParameters=function(){return[]};var ht=function(){function e(e,t,n){this.appConfig=e,this.logService=t,this.preferences=n}return Object.defineProperty(e.prototype,"ecmHost",{get:function(){return this.logService.log("SettingsService.ecmHost is deprecated. Use AppConfigService instead."),this.appConfig.get("ecmHost")},set:function(e){this.logService.log("SettingsService.ecmHost is deprecated. Use AppConfigService instead.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"csrfDisabled",{set:function(e){this.logService.log("SettingsService.csrfDisabled is deprecated. Use UserPreferencesService.disableCSRF instead."),this.preferences.disableCSRF=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bpmHost",{get:function(){return this.logService.log("SettingsService.bpmHost is deprecated. Use AppConfigService instead."),this.appConfig.get("bpmHost")},set:function(e){this.logService.log("SettingsService.bpmHost is deprecated. Use AppConfigService instead.")},enumerable:!0,configurable:!0}),e.prototype.getBPMApiBaseUrl=function(){return this.logService.log("SettingsService.getBPMApiBaseUrl is deprecated."),this.bpmHost+"/activiti-app"},e.prototype.getProviders=function(){return this.logService.log("SettingsService.getProviders is deprecated. Use UserPreferencesService.authType instead."),this.preferences.authType},e.prototype.setProviders=function(e){this.logService.log("SettingsService.getProviders is deprecated. Use UserPreferencesService.authType instead."),this.preferences.authType=e},e}();ht.decorators=[{type:l.Injectable}],ht.ctorParameters=function(){return[{type:ge},{type:Ee},{type:De}]};var gt=function(){function e(e,t,n,i){this.settingsService=e,this.storage=t,this.logService=n,this.translationService=i,this.HOST_REGEX="^(http|https)://.*[^/]$",this.urlFormControlEcm=new g.FormControl("",[g.Validators.required,g.Validators.pattern(this.HOST_REGEX)]),this.urlFormControlBpm=new g.FormControl("",[g.Validators.required,g.Validators.pattern(this.HOST_REGEX)]),this.providers="ALL",this.error=new l.EventEmitter,this.ecmHostChange=new l.EventEmitter,this.bpmHostChange=new l.EventEmitter,this.ecmHostTmp=this.ecmHost=t.getItem("ecmHost")||this.settingsService.ecmHost,this.bpmHostTmp=this.bpmHost=t.getItem("bpmHost")||this.settingsService.bpmHost}return e.prototype.onChangeECMHost=function(e){var t=this,n=e.target.value.trim();n&&this.isValidUrl(n)?(this.logService.info("ECM host: "+n),this.ecmHostTmp=n,this.ecmHostChange.emit(n)):this.translationService.get("CORE.HOST_SETTING.CS_URL_ERROR").subscribe(function(e){t.error.emit(e)})},e.prototype.onChangeBPMHost=function(e){var t=this,n=e.target.value.trim();n&&this.isValidUrl(n)?(this.logService.info("BPM host: "+n),this.bpmHostTmp=n,this.bpmHostChange.emit(n)):this.translationService.get("CORE.HOST_SETTING.PS_URL_ERROR").subscribe(function(e){t.error.emit(e)})},e.prototype.save=function(e){this.bpmHost!==this.bpmHostTmp&&this.storage.setItem("bpmHost",this.bpmHostTmp),this.ecmHost!==this.ecmHostTmp&&this.storage.setItem("ecmHost",this.ecmHostTmp),window.location.href="/"},e.prototype.isValidUrl=function(e){return/^(http|https):\/\/.*/.test(e)},e}();gt.decorators=[{type:l.Component,args:[{selector:"adf-host-settings",template:'<div class="adf-setting-container">\n    <div class="adf-setting-card-padding"></div>\n    <mat-toolbar color="primary" class="adf-setting-toolbar">\n        <h3>{{\'CORE.HOST_SETTINGS.TITLE\' | translate}}</h3>\n    </mat-toolbar>\n\n    <mat-card class="adf-setting-card">\n        <div *ngIf="providers===\'ALL\' || providers===\'ECM\'">\n            <mat-card-header>\n                <mat-card-subtitle>{{\'CORE.HOST_SETTINGS.CS-HOST\' | translate }}</mat-card-subtitle>\n            </mat-card-header>\n            <mat-card-content>\n                <mat-form-field class="full-width">\n                    <mat-icon class="adf-CORE.HOST_SETTINGS-link-icon" matPrefix>link</mat-icon>\n                    <input matInput\n                           [formControl]="urlFormControlEcm"\n                           data-automation-id="ecmHost"\n                           type="text"\n                           (change)="onChangeECMHost($event)"\n                           tabindex="2"\n                           id="ecmHost"\n                           value="{{ecmHost}}"\n                           placeholder="http(s)://host|ip:port(/path)">\n                    <mat-error *ngIf="urlFormControlEcm.hasError(\'pattern\')">\n                        {{ \'CORE.HOST_SETTINGS.NOT_VALID\'| translate }}\n                    </mat-error>\n                </mat-form-field>\n                <p>\n            </mat-card-content>\n        </div>\n        <p>\n        <div *ngIf="providers===\'ALL\' || providers===\'BPM\'">\n            <mat-card-header>\n                <mat-card-subtitle>{{\'CORE.HOST_SETTINGS.BP-HOST\' | translate }}</mat-card-subtitle>\n            </mat-card-header>\n            <mat-card-content>\n\n                <mat-form-field class="full-width">\n                    <mat-icon class="adf-CORE.HOST_SETTINGS-link-icon" matPrefix>link</mat-icon>\n                    <input matInput\n                           [formControl]="urlFormControlBpm"\n                           data-automation-id="bpmHost"\n                           type="text"\n                           (change)="onChangeBPMHost($event)"\n                           tabindex="2"\n                           id="bpmHost"\n                           value="{{bpmHost}}"\n                           placeholder="http(s)://host|ip:port(/path)">\n                    <mat-error *ngIf="urlFormControlBpm.hasError(\'pattern\')">\n                        {{ \'CORE.HOST_SETTINGS.NOT_VALID\'| translate }}\n                    </mat-error>\n                </mat-form-field>\n            </mat-card-content>\n        </div>\n        <mat-card-actions class="adf-CORE.HOST_SETTINGS-actions">\n\n            <button mat-button onclick="window.history.back()" color="primary">\n                {{\'CORE.HOST_SETTINGS.BACK\' | translate }}\n            </button>\n\n            <button mat-raised-button (click)="save($event)"\n                    [disabled]="urlFormControlBpm.hasError(\'pattern\') || urlFormControlEcm.hasError(\'pattern\')"\n                    color="primary">\n                {{\'CORE.HOST_SETTINGS.APPLY\' | translate }}\n            </button>\n\n        </mat-card-actions>\n    </mat-card>\n    <div class="adf-setting-card-padding"></div>\n</div>\n',host:{"class":"adf-host-settings"},styles:[""],encapsulation:l.ViewEncapsulation.None}]}],gt.ctorParameters=function(){return[{type:ht},{type:ye},{type:Ee},{type:Qe}]},gt.propDecorators={providers:[{type:l.Input}],error:[{type:l.Output}],ecmHostChange:[{type:l.Output}],bpmHostChange:[{type:l.Output}]};var yt=function(){};yt.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge,a.TranslateModule,g.FormsModule,g.ReactiveFormsModule],declarations:[gt],exports:[gt]}]}],yt.ctorParameters=function(){return[]};var vt=function(e){e&&(this.count=e.count,this.hasMoreItems=!!e.hasMoreItems&&e.hasMoreItems,this.merge=!!e.merge&&e.merge,this.totalItems=e.totalItems,this.skipCount=e.skipCount,this.maxItems=e.maxItems)},bt=function(){function h(e){this.cdr=e,this.supportedPageSizes=[5,25,50,100],this.pagination=h.DEFAULT_PAGINATION,this.change=new l.EventEmitter,this.changePageNumber=new l.EventEmitter,this.changePageSize=new l.EventEmitter,this.nextPage=new l.EventEmitter,this.prevPage=new l.EventEmitter}return h.prototype.ngOnInit=function(){var t=this;this.target&&(this.paginationSubscription=this.target.pagination.subscribe(function(e){t.pagination=e,t.cdr.detectChanges()})),this.pagination||(this.pagination=h.DEFAULT_PAGINATION)},Object.defineProperty(h.prototype,"lastPage",{get:function(){var e=this.pagination,t=e.maxItems,n=e.totalItems;return n&&t?Math.ceil(n/t):1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"current",{get:function(){var e=this.pagination,t=e.maxItems,n=e.skipCount;return n&&t?Math.floor(n/t)+1:1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isLastPage",{get:function(){return this.current===this.lastPage},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isFirstPage",{get:function(){return 1===this.current},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"next",{get:function(){return this.isLastPage?this.current:this.current+1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"previous",{get:function(){return this.isFirstPage?1:this.current-1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"hasItems",{get:function(){return this.pagination&&0<this.pagination.count},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isEmpty",{get:function(){return!this.hasItems},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"range",{get:function(){var e=this.pagination,t=e.skipCount,n=e.maxItems,i=e.totalItems;return[i?t+1:0,this.isLastPage?i:t+n]},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"pages",{get:function(){return Array(this.lastPage).fill("n").map(function(e,t){return t+1})},enumerable:!0,configurable:!0}),h.prototype.goNext=function(){if(this.hasItems){var e=this.pagination.maxItems,t=(this.next-1)*e;this.pagination.skipCount=t,this.handlePaginationEvent(h.ACTIONS.NEXT_PAGE,{skipCount:t,maxItems:e})}},h.prototype.goPrevious=function(){if(this.hasItems){var e=this.pagination.maxItems,t=(this.previous-1)*e;this.pagination.skipCount=t,this.handlePaginationEvent(h.ACTIONS.PREV_PAGE,{skipCount:t,maxItems:e})}},h.prototype.onChangePageNumber=function(e){if(this.hasItems){var t=this.pagination.maxItems,n=(e-1)*t;this.pagination.skipCount=n,this.handlePaginationEvent(h.ACTIONS.CHANGE_PAGE_NUMBER,{skipCount:n,maxItems:t})}},h.prototype.onChangePageSize=function(e){this.pagination.skipCount=0,this.pagination.maxItems=e,this.handlePaginationEvent(h.ACTIONS.CHANGE_PAGE_SIZE,{skipCount:0,maxItems:e})},h.prototype.handlePaginationEvent=function(e,t){var n=h.ACTIONS,i=n.NEXT_PAGE,r=n.PREV_PAGE,o=n.CHANGE_PAGE_NUMBER,a=n.CHANGE_PAGE_SIZE,s=this,l=s.change,u=s.changePageNumber,c=s.changePageSize,p=s.nextPage,d=s.prevPage,m=s.pagination,f=Object.assign({},m,t);e===i&&p.emit(f),e===r&&d.emit(f),e===o&&u.emit(f),e===a&&c.emit(f),l.emit(t),this.target&&this.target.updatePagination(t)},h.prototype.ngOnDestroy=function(){this.paginationSubscription&&this.paginationSubscription.unsubscribe()},h}();bt.DEFAULT_PAGINATION={skipCount:0,maxItems:25,totalItems:0},bt.ACTIONS={NEXT_PAGE:"NEXT_PAGE",PREV_PAGE:"PREV_PAGE",CHANGE_PAGE_SIZE:"CHANGE_PAGE_SIZE",CHANGE_PAGE_NUMBER:"CHANGE_PAGE_NUMBER"},bt.decorators=[{type:l.Component,args:[{selector:"adf-pagination",host:{"class":"adf-pagination"},template:'<ng-container *ngIf="hasItems">\n    <div class="adf-pagination__block adf-pagination__range-block">\n        <span class="adf-pagination__range">\n            {{\n                \'CORE.PAGINATION.ITEMS_RANGE\' | translate: {\n                    range: range.join(\'-\'),\n                    total: pagination.totalItems\n                }\n            }}\n        </span>\n    </div>\n\n    <div class="adf-pagination__block adf-pagination__perpage-block">\n        <span>\n            {{ \'CORE.PAGINATION.ITEMS_PER_PAGE\' | translate }}\n        </span>\n\n        <span class="adf-pagination__max-items">\n            {{ pagination.maxItems }}\n        </span>\n\n        <button mat-icon-button [matMenuTriggerFor]="pageSizeMenu">\n            <mat-icon>arrow_drop_down</mat-icon>\n        </button>\n\n        <mat-menu #pageSizeMenu="matMenu" class="adf-pagination__page-selector">\n            <button\n                mat-menu-item\n                *ngFor="let pageSize of supportedPageSizes"\n                (click)="onChangePageSize(pageSize)">\n                {{ pageSize }}\n            </button>\n        </mat-menu>\n    </div>\n\n    <div class="adf-pagination__block adf-pagination__actualinfo-block">\n        <span class="adf-pagination__current-page">\n            {{ \'CORE.PAGINATION.CURRENT_PAGE\' | translate: { number: current } }}\n        </span>\n\n        <button\n            mat-icon-button\n            [matMenuTriggerFor]="pagesMenu"\n            *ngIf="pages.length > 1">\n            <mat-icon>arrow_drop_down</mat-icon>\n        </button>\n\n        <span class="adf-pagination__total-pages">\n            {{ \'CORE.PAGINATION.TOTAL_PAGES\' | translate: { total: pages.length } }}\n        </span>\n\n        <mat-menu #pagesMenu="matMenu" class="adf-pagination__page-selector">\n            <button\n                mat-menu-item\n                *ngFor="let pageNumber of pages"\n                (click)="onChangePageNumber(pageNumber)">\n                {{ pageNumber }}\n            </button>\n        </mat-menu>\n    </div>\n\n    <div class="adf-pagination__block adf-pagination__controls-block">\n        <button\n            class="adf-pagination__previous-button"\n            mat-icon-button\n            [disabled]="isFirstPage"\n            (click)="goPrevious()">\n            <mat-icon>keyboard_arrow_left</mat-icon>\n        </button>\n\n        <button\n            class="adf-pagination__next-button"\n            mat-icon-button\n            [disabled]="isLastPage"\n            (click)="goNext()">\n            <mat-icon>keyboard_arrow_right</mat-icon>\n        </button>\n    </div>\n</ng-container>\n',styles:[""],changeDetection:l.ChangeDetectionStrategy.OnPush,encapsulation:l.ViewEncapsulation.None}]}],bt.ctorParameters=function(){return[{type:l.ChangeDetectorRef}]},bt.propDecorators={target:[{type:l.Input}],supportedPageSizes:[{type:l.Input}],pagination:[{type:l.Input}],change:[{type:l.Output}],changePageNumber:[{type:l.Output}],changePageSize:[{type:l.Output}],nextPage:[{type:l.Output}],prevPage:[{type:l.Output}],isEmpty:[{type:l.HostBinding,args:["class.adf-pagination__empty"]}]};var wt=function(){function n(e){this.cdr=e,this.pageSize=n.DEFAULT_PAGE_SIZE,this.isLoading=!1,this.loadMore=new l.EventEmitter}return n.prototype.ngOnInit=function(){var t=this;this.target&&(this.paginationSubscription=this.target.pagination.subscribe(function(e){t.isLoading=!1,t.pagination=e,t.pageSize=e.maxItems,t.cdr.detectChanges()})),this.pagination||(this.pagination=n.DEFAULT_PAGINATION)},n.prototype.onLoadMore=function(){this.pagination.skipCount+=this.pageSize,this.pagination.skipCount=this.pagination.skipCount,this.pagination.merge=!0,this.loadMore.next(this.pagination),this.pagination.skipCount+this.pageSize>this.pagination.totalItems&&(this.pagination.hasMoreItems=!1),this.target&&(this.target.pagination.value.merge=this.pagination.merge,this.target.pagination.value.skipCount=this.pagination.skipCount,this.isLoading=!0,this.target.updatePagination(this.pagination))},n.prototype.ngOnDestroy=function(){this.paginationSubscription&&this.paginationSubscription.unsubscribe()},n}();wt.DEFAULT_PAGE_SIZE=25,wt.DEFAULT_PAGINATION={skipCount:0,hasMoreItems:!1,merge:!0},wt.decorators=[{type:l.Component,args:[{selector:"adf-infinite-pagination",host:{"class":"infinite-adf-pagination"},template:'<div *ngIf="pagination?.hasMoreItems || isLoading" class="adf-infinite-pagination">\n    <button mat-button\n        *ngIf="!isLoading"\n        class="adf-infinite-pagination-load-more"\n        (click)="onLoadMore($event)"\n        data-automation-id="adf-infinite-pagination-button">\n            <ng-content></ng-content>\n    </button>\n\n    <mat-progress-bar *ngIf="isLoading"\n        mode="indeterminate"\n        class="adf-infinite-pagination-spinner"\n        data-automation-id="adf-infinite-pagination-spinner"></mat-progress-bar>\n</div>\n',styles:[".adf-infinite-pagination{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;min-height:56px}.adf-infinite-pagination-load-more{margin-bottom:10px;margin-top:10px}"],changeDetection:l.ChangeDetectionStrategy.OnPush,encapsulation:l.ViewEncapsulation.None}]}],wt.ctorParameters=function(){return[{type:l.ChangeDetectorRef}]},wt.propDecorators={pagination:[{type:l.Input}],target:[{type:l.Input}],pageSize:[{type:l.Input}],isLoading:[{type:l.Input,args:["loading"]}],loadMore:[{type:l.Output}]};var Et=function(){};Et.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge,a.TranslateModule],declarations:[wt,bt],exports:[wt,bt]}]}],Et.ctorParameters=function(){return[]};var It=function(e){this.err=e},Ct=function(){function e(e){this._defaultPrevented=!1,this._values=e}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){this._defaultPrevented=!0},e}(),St=function(e,t,n){this.token=e,this.username=t,this.password=n},Tt={Landing:0,Checking:1,Welcome:2};Tt[Tt.Landing]="Landing",Tt[Tt.Checking]="Checking",Tt[Tt.Welcome]="Welcome";var xt=function(){function e(e,t,n,i,r,o,a,s){this._fb=e,this.authService=t,this.settingsService=n,this.translateService=i,this.logService=r,this.elementRef=o,this.router=a,this.userPreferences=s,this.isPasswordShow=!1,this.showRememberMe=!0,this.showLoginActions=!0,this.needHelpLink="",this.registerLink="",this.logoImageUrl="./assets/images/alfresco-logo.svg",this.backgroundImageUrl="./assets/images/background.svg",this.copyrightText="© 2016 Alfresco Software, Inc. All Rights Reserved.",this.successRoute=null,this.success=new l.EventEmitter,this.error=new l.EventEmitter,this.executeSubmit=new l.EventEmitter,this.isError=!1,this.actualLoginStep=Tt.Landing,this.LoginSteps=Tt,this.rememberMe=!0,this.minLength=2,this.initFormError(),this.initFormFieldsMessages()}return e.prototype.ngOnInit=function(){var t=this;this.hasCustomFiledsValidation()?this.form=this._fb.group(this.fieldsValidation):(this.initFormFieldsDefault(),this.initFormFieldsMessagesDefault()),this.form.valueChanges.subscribe(function(e){return t.onValueChanged(e)})},e.prototype.onSubmit=function(e){if(!this.checkRequiredParams())return!1;this.settingsService.setProviders(this.providers),this.settingsService.csrfDisabled=this.disableCsrf,this.disableError();var t=new Ct(this.form);if(this.executeSubmit.emit(t),t.defaultPrevented)return!1;this.performLogin(e)},e.prototype.onValueChanged=function(e){for(var t in this.disableError(),this.formError){if(t)if(this.formError[t]="",this.form.controls[t].errors&&""!==e[t]||this.form.controls[t].dirty&&!this.form.controls[t].valid)for(var n in this.form.controls[t].errors)n&&(this.formError[t]+=this._message[t][n]+"")}},e.prototype.performLogin=function(n){var i=this;this.actualLoginStep=Tt.Checking,this.authService.login(n.username,n.password,this.rememberMe).subscribe(function(e){var t=i.authService.getRedirectUrl(i.providers);i.actualLoginStep=Tt.Welcome,i.userPreferences.setStoragePrefix(n.username),n.password=null,i.success.emit(new St(e,n.username,null)),t?(i.authService.setRedirectUrl(null),i.router.navigate([t])):i.successRoute&&i.router.navigate([i.successRoute])},function(e){i.actualLoginStep=Tt.Landing,i.displayErrorMessage(e),i.enableError(),i.error.emit(new It(e))},function(){return i.logService.info("Login done")})},e.prototype.displayErrorMessage=function(e){e.error&&e.error.crossDomain&&-1!==e.error.message.indexOf("Access-Control-Allow-Origin")?this.errorMsg=e.error.message:403===e.status&&-1!==e.message.indexOf("Invalid CSRF-token")?this.errorMsg="LOGIN.MESSAGES.LOGIN-ERROR-CSRF":403===e.status&&-1!==e.message.indexOf("The system is currently in read-only mode")?this.errorMsg="LOGIN.MESSAGES.LOGIN-ECM-LICENSE":this.errorMsg="LOGIN.MESSAGES.LOGIN-ERROR-CREDENTIALS"},e.prototype.checkRequiredParams=function(){var e=!0;if(this.providers===undefined||null===this.providers||""===this.providers){this.errorMsg="LOGIN.MESSAGES.LOGIN-ERROR-PROVIDERS",this.enableError();var t;t=this.translateService.get(this.errorMsg),this.error.emit(new It(t.value)),e=!1}return e},e.prototype.addCustomFormError=function(e,t){this.formError[e]+=t},e.prototype.addCustomValidationError=function(t,n,e,i){var r=this;i?this.translateService.get(e,i).subscribe(function(e){r._message[t][n]=e}):this._message[t][n]=e},e.prototype.toggleShowPassword=function(){this.isPasswordShow=!this.isPasswordShow,this.elementRef.nativeElement.querySelector("#password").type=this.isPasswordShow?"text":"password"},e.prototype.isErrorStyle=function(e){return!e.valid&&e.dirty&&!e.pristine},e.prototype.trimUsername=function(e){e.target.value=e.target.value.trim()},e.prototype.initFormError=function(){this.formError={username:"",password:""}},e.prototype.initFormFieldsMessages=function(){this._message={username:{},password:{}}},e.prototype.initFormFieldsMessagesDefault=function(){var t=this;this._message={username:{required:"LOGIN.MESSAGES.USERNAME-REQUIRED"},password:{required:"LOGIN.MESSAGES.PASSWORD-REQUIRED"}},this.translateService.get("LOGIN.MESSAGES.USERNAME-MIN",{minLength:this.minLength}).subscribe(function(e){t._message.username.minlength=e})},e.prototype.initFormFieldsDefault=function(){this.form=this._fb.group({username:["",g.Validators.required],password:["",g.Validators.required]})},e.prototype.disableError=function(){this.isError=!1,this.initFormError()},e.prototype.enableError=function(){this.isError=!0},e.prototype.hasCustomFiledsValidation=function(){return this.fieldsValidation!==undefined},e}();xt.decorators=[{type:l.Component,args:[{selector:"adf-login",template:'<div class="adf-login-content" [style.background-image]="\'url(\' + backgroundImageUrl + \')\'">\n     <div class="ie11FixerParent">\n         <div class="ie11FixerChild">\n\n            <mat-card class="adf-login-card-wide">\n                <form id="adf-login-form" [formGroup]="form" (submit)="onSubmit(form.value)" autocomplete="off">\n\n                    <mat-card-header>\n                        <mat-card-title>\n                            <div class="adf-alfresco-logo">\n                                \x3c!--HEADER TEMPLATE--\x3e\n                                <ng-template *ngIf="headerTemplate"\n                                            ngFor [ngForOf]="[data]"\n                                            [ngForTemplate]="headerTemplate">\n                                </ng-template>\n                                <img *ngIf="!headerTemplate" class="adf-img-logo" [src]="logoImageUrl"\n                                    alt="{{\'LOGIN.LOGO\' | translate }}">\n                            </div>\n                        </mat-card-title>\n                    </mat-card-header>\n\n                    <mat-card-content class="adf-login-controls">\n\n                        \x3c!--ERRORS AREA--\x3e\n                        <div class="adf-error-container">\n                            <div *ngIf="isError" id="login-error" data-automation-id="login-error"\n                                class="error  adf-error-message">\n                                <mat-icon class="error-icon">warning</mat-icon>\n                                <span class="login-error-message">{{errorMsg | translate }}</span>\n                            </div>\n                        </div>\n\n                        \x3c!--USERNAME FIELD--\x3e\n                        <div class="adf-login__field" [ngClass]="{\'is-invalid\': isErrorStyle(form.controls.username)}">\n                            <mat-form-field class="adf-full-width" floatPlaceholder="never" color="primary">\n                                <input matInput placeholder="{{\'LOGIN.LABEL.USERNAME\' | translate }}"\n                                    type="text"\n                                    class="adf-full-width"\n                                    [formControl]="form.controls[\'username\']"\n                                    autocapitalize="none"\n                                    id="username"\n                                    data-automation-id="username"\n                                    (blur)="trimUsername($event)"\n                                    tabindex="1">\n                            </mat-form-field>\n\n                            <span class="adf-login-validation" for="username" *ngIf="formError.username">\n                                <span id="username-error" class="adf-login-error" data-automation-id="username-error">{{formError.username | translate }}</span>\n                            </span>\n                        </div>\n\n                        \x3c!--PASSWORD FIELD--\x3e\n                        <div class="adf-login__field">\n                            <mat-form-field class="adf-full-width" floatPlaceholder="never" color="primary">\n                                <input matInput placeholder="{{\'LOGIN.LABEL.PASSWORD\' | translate }}"\n                                    type="password"\n                                    [formControl]="form.controls[\'password\']"\n                                    id="password"\n                                    data-automation-id="password"\n                                    tabindex="2">\n                                <mat-icon *ngIf="isPasswordShow" matSuffix class="adf-login-password-icon"\n                                        data-automation-id="hide_password" (click)="toggleShowPassword()">visibility\n                                </mat-icon>\n                                <mat-icon *ngIf="!isPasswordShow" matSuffix class="adf-login-password-icon"\n                                        data-automation-id="show_password" (click)="toggleShowPassword()">visibility_off\n                                </mat-icon>\n                            </mat-form-field>\n                            <span class="adf-login-validation" for="password" *ngIf="formError.password">\n                                <span id="password-required" class="adf-login-error"\n                                    data-automation-id="password-required">{{formError.password | translate }}</span>\n                            </span>\n                        </div>\n\n                        \x3c!--CUSTOM CONTENT--\x3e\n                        <ng-content></ng-content>\n\n                        <br>\n                        <button type="submit" id="login-button" tabindex="3"\n                                class="adf-login-button"\n                                mat-raised-button color="primary"\n                                [class.isChecking]="actualLoginStep === LoginSteps.Checking"\n                                [class.isWelcome]="actualLoginStep === LoginSteps.Welcome"\n                                data-automation-id="login-button" [disabled]="!form.valid">\n\n                            <span *ngIf="actualLoginStep === LoginSteps.Landing" class="adf-login-button-label">{{ \'LOGIN.BUTTON.LOGIN\' | translate }}</span>\n\n                            <div *ngIf="actualLoginStep === LoginSteps.Checking" class="adf-interactive-login-label">\n                                <span class="adf-login-button-label">{{ \'LOGIN.BUTTON.CHECKING\' | translate }}</span>\n                                <div class="adf-login-spinner-container">\n                                    <mat-spinner id="checking-spinner" class="adf-login-checking-spinner" [diameter]="25"></mat-spinner>\n                                </div>\n                            </div>\n\n\n                            <div *ngIf="actualLoginStep === LoginSteps.Welcome" class="adf-interactive-login-label">\n                                <span class="adf-login-button-label">{{ \'LOGIN.BUTTON.WELCOME\' | translate }}</span>\n                                <mat-icon class="welcome-icon">done</mat-icon>\n                            </div>\n\n                        </button>\n                        <div *ngIf="showRememberMe" class="adf-login__remember-me">\n                            <mat-checkbox id="adf-login-remember" color="primary" class="adf-login-rememberme" [checked]="rememberMe"\n                                        (change)="rememberMe = !rememberMe">{{ \'LOGIN.LABEL.REMEMBER\' | translate }}\n                            </mat-checkbox>\n                        </div>\n                    </mat-card-content>\n                    <mat-card-actions *ngIf="footerTemplate || showLoginActions">\n\n                        <div class="adf-login-action-container">\n                            \x3c!--FOOTER TEMPLATE--\x3e\n                            <ng-template *ngIf="footerTemplate"\n                                        ngFor [ngForOf]="[data]"\n                                        [ngForTemplate]="footerTemplate">\n                            </ng-template>\n                            <div class="adf-login-action" *ngIf="!footerTemplate && showLoginActions">\n                                <div id="adf-login-action-left" class="adf-login-action-left">\n                                    <a href="{{needHelpLink}}">{{\'LOGIN.ACTION.HELP\' | translate }}</a>\n                                </div>\n                                <div id="adf-login-action-right" class="adf-login-action-right">\n                                    <a href="{{registerLink}}">{{\'LOGIN.ACTION.REGISTER\' | translate }}</a>\n                                </div>\n                            </div>\n                        </div>\n                    </mat-card-actions>\n\n                </form>\n            </mat-card>\n\n            <div class="copyright" data-automation-id="login-copyright">\n                {{ copyrightText }}\n            </div>\n\n        </div>\n     </div>\n</div>\n',styles:[""],host:{"(blur)":"onBlur($event)"},encapsulation:l.ViewEncapsulation.None}]}],xt.ctorParameters=function(){return[{type:g.FormBuilder},{type:Re},{type:ht},{type:Qe},{type:Ee},{type:l.ElementRef},{type:P.Router},{type:De}]},xt.propDecorators={showRememberMe:[{type:l.Input}],showLoginActions:[{type:l.Input}],needHelpLink:[{type:l.Input}],registerLink:[{type:l.Input}],logoImageUrl:[{type:l.Input}],backgroundImageUrl:[{type:l.Input}],copyrightText:[{type:l.Input}],providers:[{type:l.Input}],fieldsValidation:[{type:l.Input}],disableCsrf:[{type:l.Input}],successRoute:[{type:l.Input}],success:[{type:l.Output}],error:[{type:l.Output}],executeSubmit:[{type:l.Output}]};var Ot=function(){function e(e){this.alfrescoLoginComponent=e}return e.prototype.ngAfterContentInit=function(){this.alfrescoLoginComponent.headerTemplate=this.template},e}();Ot.decorators=[{type:l.Directive,args:[{selector:"login-header"}]}],Ot.ctorParameters=function(){return[{type:xt}]},Ot.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var At=function(){function e(e){this.alfrescoLoginComponent=e}return e.prototype.ngAfterContentInit=function(){this.alfrescoLoginComponent.footerTemplate=this.template},e}();At.decorators=[{type:l.Directive,args:[{selector:"login-footer"}]}],At.ctorParameters=function(){return[{type:xt}]},At.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var Pt=function(){};Pt.decorators=[{type:l.NgModule,args:[{imports:[P.RouterModule,Ge,g.FormsModule,g.ReactiveFormsModule,i.CommonModule,a.TranslateModule],declarations:[xt,At,Ot],exports:[[xt,At,Ot]]}]}],Pt.ctorParameters=function(){return[]};var Dt=function(){function e(e,t){this.appConfig=e,this.userPreference=t,this.languages=[{key:"en",label:"English"}]}return e.prototype.ngOnInit=function(){var e=this.appConfig.get(ge.APP_CONFIG_LANGUAGES_KEY);e&&(this.languages=e)},e.prototype.changeLanguage=function(e){this.userPreference.locale=e},e}();Dt.decorators=[{type:l.Component,args:[{selector:"adf-language-menu",template:'<button mat-menu-item *ngFor="let language of languages" (click)="changeLanguage(language.key)">{{language.label}}\n</button>\n'}]}],Dt.ctorParameters=function(){return[{type:ge},{type:De}]};var Ft=function(){};Ft.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge],declarations:[Dt],exports:[Dt]}]}],Ft.ctorParameters=function(){return[]};var Rt=function(){};Rt.decorators=[{type:l.Component,args:[{selector:"adf-info-drawer-layout",template:'<div class="adf-info-drawer-layout-header">\n    <div class="adf-info-drawer-layout-header-title">\n        <ng-content select="[info-drawer-title]"></ng-content>\n    </div>\n    <div class="adf-info-drawer-layout-header-buttons">\n        <ng-content select="[info-drawer-buttons]"></ng-content>\n    </div>\n</div>\n<div class="adf-info-drawer-layout-content">\n    <ng-content select="[info-drawer-content]"></ng-content>\n</div>',styles:[""],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-info-drawer-layout"}}]}],Rt.ctorParameters=function(){return[]};var kt=function(){};kt.decorators=[{type:l.Directive,args:[{selector:"[info-drawer-title]"}]}],kt.ctorParameters=function(){return[]};var _t=function(){};_t.decorators=[{type:l.Directive,args:[{selector:"[info-drawer-buttons]"}]}],_t.ctorParameters=function(){return[]};var Mt=function(){};Mt.decorators=[{type:l.Directive,args:[{selector:"[info-drawer-content]"}]}],Mt.ctorParameters=function(){return[]};var Lt=function(){this.label="Main tab"};Lt.decorators=[{type:l.Component,args:[{selector:"adf-info-drawer-tab",template:"<ng-template><ng-content></ng-content></ng-template>"}]}],Lt.ctorParameters=function(){return[]},Lt.propDecorators={label:[{type:l.Input,args:["label"]}],content:[{type:l.ViewChild,args:[l.TemplateRef]}]};var Vt=function(){function e(){this.title=null,this.selectedIndex=0,this.currentTab=new l.EventEmitter}return e.prototype.showTabLayout=function(){return 0<this.contentBlocks.length},e.prototype.onTabChange=function(e){this.currentTab.emit(e.index)},e}();function Nt(){return[Rt,Lt,Vt,kt,_t,Mt]}Vt.decorators=[{type:l.Component,args:[{selector:"adf-info-drawer",template:'<adf-info-drawer-layout>\n    <div *ngIf="title" info-drawer-title>{{title}}</div>\n    <ng-content *ngIf="!title" info-drawer-title select="[info-drawer-title]"></ng-content>\n\n    <ng-content info-drawer-buttons select="[info-drawer-buttons]"></ng-content>\n\n    <ng-container info-drawer-content *ngIf="showTabLayout(); then tabLayout else singleLayout"></ng-container>\n\n    <ng-template #tabLayout>\n        <mat-tab-group [(selectedIndex)]="selectedIndex" class="adf-info-drawer-tabs" (selectedTabChange)="onTabChange($event)">\n            <ng-container *ngFor="let contentBlock of contentBlocks">\n                <mat-tab [label]="contentBlock.label" class="adf-info-drawer-tab">\n                    <ng-container *ngTemplateOutlet="contentBlock.content"></ng-container>\n                </mat-tab>\n            </ng-container>\n        </mat-tab-group>\n    </ng-template>\n\n    <ng-template #singleLayout>\n        <ng-content select="[info-drawer-content]"></ng-content>\n    </ng-template>\n</adf-info-drawer-layout>\n',styles:[".adf-info-drawer{display:block}.adf-info-drawer .adf-info-drawer-layout-content{padding:0}.adf-info-drawer .adf-info-drawer-layout-content>:not(.adf-info-drawer-tabs){padding:10px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content>*,.adf-info-drawer .adf-info-drawer-layout-content>:not(.adf-info-drawer-tabs)>*{margin-bottom:20px;display:block}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content>:last-child{margin-bottom:0}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-label{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-ink-bar{height:4px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body{padding:10px}.adf-info-drawer .adf-info-drawer-layout-content .adf-info-drawer-tabs .mat-tab-body-content{overflow:initial}"],encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-info-drawer"}}]}],Vt.ctorParameters=function(){return[]},Vt.propDecorators={title:[{type:l.Input}],selectedIndex:[{type:l.Input}],currentTab:[{type:l.Output}],contentBlocks:[{type:l.ContentChildren,args:[Lt]}]};var Ut=function(){};Ut.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge],declarations:Nt(),exports:Nt()}]}],Ut.ctorParameters=function(){return[]};var Bt=function(){function e(){}return e.prototype.isExpanded=function(){return this.expanded},e}();Bt.decorators=[{type:l.Component,args:[{selector:"adf-sidebar-action-menu",template:'<div class="adf-sidebar-action-menu">\n    <button *ngIf="isExpanded()" mat-raised-button class="adf-sidebar-action-menu-button" data-automation-id="create-button" [matMenuTriggerFor]="adfSidebarMenu">\n        <span *ngIf="title" class="adf-sidebar-action-menu-text">{{ title }}</span>\n        <ng-content select="[sidebar-menu-title-icon]"></ng-content>\n    </button>\n\n    <div *ngIf="!isExpanded()" class="adf-sidebar-action-menu-icon" [matMenuTriggerFor]="adfSidebarMenu">\n        <ng-content select="[sidebar-menu-expand-icon]"></ng-content>\n    </div>\n\n    <mat-menu #adfSidebarMenu="matMenu" class="adf-sidebar-action-menu-panel" [overlapTrigger]="false" yPosition="below">\n        <div class="adf-sidebar-action-menu-options">\n            <ng-content select="[sidebar-menu-options]"></ng-content>\n        </div>\n    </mat-menu>\n</div>\n',styles:[""],changeDetection:l.ChangeDetectionStrategy.OnPush,encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-sidebar-action-menu"}}]}],Bt.ctorParameters=function(){return[]},Bt.propDecorators={title:[{type:l.Input}],expanded:[{type:l.Input}]};var jt=function(){};jt.decorators=[{type:l.Directive,args:[{selector:"[sidebar-menu-options]"}]}],jt.ctorParameters=function(){return[]};var Yt=function(){};Yt.decorators=[{type:l.Directive,args:[{selector:"[sidebar-menu-title-icon]"}]}],Yt.ctorParameters=function(){return[]};var qt=function(){};qt.decorators=[{type:l.Directive,args:[{selector:"[sidebar-menu-expand-icon]"}]}],qt.ctorParameters=function(){return[]};var zt=function(){function e(){this.type="text",this.sortable=!0,this.title=""}return e.prototype.ngOnInit=function(){this.srTitle||"$thumbnail"!==this.key||(this.srTitle="Thumbnail")},e}();zt.decorators=[{type:l.Component,args:[{selector:"data-column",template:""}]}],zt.ctorParameters=function(){return[]},zt.propDecorators={key:[{type:l.Input}],type:[{type:l.Input}],format:[{type:l.Input}],sortable:[{type:l.Input}],title:[{type:l.Input}],template:[{type:l.ContentChild,args:[l.TemplateRef]}],formatTooltip:[{type:l.Input}],srTitle:[{type:l.Input,args:["sr-title"]}],cssClass:[{type:l.Input,args:["class"]}]};var Ht=function(){};Ht.decorators=[{type:l.Component,args:[{selector:"data-columns",template:""}]}],Ht.ctorParameters=function(){return[]},Ht.propDecorators={columns:[{type:l.ContentChildren,args:[zt]}]};var Gt=function(){};Gt.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule],declarations:[zt,Ht],exports:[zt,Ht]}]}],Gt.ctorParameters=function(){return[]};for(var Wt=function(r){function e(e,t,n){var i=r.call(this)||this;return i.value=e,i.event=t,i.sender=n,i}return te(e,r),e}(le),Xt=function(e,t){this.key=e,this.direction=t},$t=function(){function a(){}return a.flattern=function(e){var r=e.createReader(),o=[];return new Promise(function(n){var i=[];!function t(){r.readEntries(function(e){e.length?(i.push(Promise.all(e.map(function(n){return n.isFile?new Promise(function(t){n.file(function(e){o.push({entry:n,file:e,relativeFolder:n.fullPath.replace(/\/[^\/]*$/,"")}),t()})}):a.flattern(n).then(function(e){o.push.apply(o,ae(e))})}))),t()):Promise.all(i).then(function(e){return n(o)})})}()})},a.toFileArray=function(e){var t=[];if(e&&0<e.length)for(var n=0;n<e.length;n++)t.push(e[n]);return t},a}(),Kt={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM Y",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM Y"}},Jt=[],Qt=1;Qt<=31;Qt++)Jt.push(String(Qt));var Zt=[];for(Qt=1;Qt<=31;Qt++)Zt.push(String(Qt));var en=function(n){function e(){var e=n.apply(this,ae(arguments))||this;return e.localeData=O.localeData(),e}return te(e,n),e.prototype.getYear=function(e){return e.year()},e.prototype.getMonth=function(e){return e.month()},e.prototype.getDate=function(e){return e.date()},e.prototype.getDayOfWeek=function(e){return e.day()},e.prototype.getMonthNames=function(e){switch(e){case"long":return this.localeData.months();case"short":return this.localeData.monthsShort();case"narrow":return this.localeData.monthsShort().map(function(e){return e[0]});default:return}},e.prototype.getDateNames=function(){return Zt},e.prototype.getDayOfWeekNames=function(e){switch(e){case"long":return this.localeData.weekdays();case"short":case"narrow":return this.localeData.weekdaysShort();default:return}},e.prototype.getYearName=function(e){return String(e.year())},e.prototype.getFirstDayOfWeek=function(){return this.localeData.firstDayOfWeek()},e.prototype.getNumDaysInMonth=function(e){return e.daysInMonth()},e.prototype.clone=function(e){return e.clone()},e.prototype.createDate=function(e,t,n){return O([e,t,n])},e.prototype.today=function(){return O()},e.prototype.parse=function(e,t){var n=O(e,t,!0);if(n.isValid()||(n=O(e,this.overrideDisplyaFormat)),n.isValid()){if(2001===n.year()&&-1===e.indexOf("2001")){var i=(new Date).getFullYear();n.set("year",i),n.isAfter(O())&&n.set("year",i-1)}return n}return null},e.prototype.format=function(e,t){return t=this.overrideDisplyaFormat?this.overrideDisplyaFormat:t,e&&e.format?e.format(t):""},e.prototype.addCalendarYears=function(e,t){return e.clone().add(t,"y")},e.prototype.addCalendarMonths=function(e,t){return e.clone().add(t,"M")},e.prototype.addCalendarDays=function(e,t){return e.clone().add(t,"d")},e.prototype.getISODateString=function(e){return e.toISOString()},e.prototype.setLocale=function(e){this.localeData=O.localeData(e)},e.prototype.compareDate=function(e,t){return e.diff(t,"seconds",!0)},e.prototype.sameDate=function(e,t){return null==e?null==t:D.isMoment(e)?e.isSame(t):n.prototype.sameDate.call(this,e,t)},e.prototype.clampDate=function(e,t,n){return t&&e.isBefore(t)?t:n&&e.isAfter(n)?n:e},e.prototype.isDateInstance=function(e){var t=!1;return e&&(t=e._isAMomentObject),t},e.prototype.isValid=function(e){return e.isValid()},e.prototype.toIso8601=function(e){return this.clone(e).format()},e.prototype.fromIso8601=function(e){var t=O(e,O.ISO_8601).locale(this.locale);return this.isValid(t)?t:null},e.prototype.invalid=function(){return O.invalid()},e}(h.DateAdapter),tn=function(){function e(e,t){if(void 0===t&&(t=!1),this.obj=e,this.isSelected=t,!e)throw new Error("Object source not found")}return e.prototype.getValue=function(e){return he.getValue(this.obj,e)},e.prototype.hasValue=function(e){return this.getValue(e)!==undefined},e}(),nn=function(e){this.key=e.key,this.type=e.type||"text",this.format=e.format,this.sortable=e.sortable,this.title=e.title,this.srTitle=e.srTitle,this.cssClass=e.cssClass,this.template=e.template},rn=function(){function e(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=[]),this._rows=[],this._columns=[],e&&0<e.length&&(this._rows=e.map(function(e){return new tn(e)})),t&&0<t.length){this._columns=t.map(function(e){return new nn(e)});var n=this._columns.filter(function(e){return e.sortable});0<n.length&&this.sort(n[0].key,"asc")}}return e.generateSchema=function(e){var t=[];if(e&&e.length){var n=e[0];if("object"==typeof n)for(var i in n)n.hasOwnProperty(i)&&t.push({type:"text",key:i,title:i,sortable:!1})}return t},e.prototype.getRows=function(){return this._rows},e.prototype.setRows=function(e){this._rows=e||[],this.sort()},e.prototype.getColumns=function(){return this._columns},e.prototype.setColumns=function(e){this._columns=e||[]},e.prototype.getValue=function(e,t){if(!e)throw new Error("Row not found");if(!t)throw new Error("Column not found");var n=e.getValue(t.key);if("date"===t.type)try{return this.formatDate(t,n)}catch(i){console.error("Error parsing date "+n+" to format "+t.format)}return"icon"===t.type?e.getValue(t.key):n},e.prototype.formatDate=function(e,t){if("date"===e.type){var n=e.format||"medium";return"timeAgo"===n?(new ot).transform(t):new i.DatePipe("en-US").transform(t,n)}return t},e.prototype.getSorting=function(){return this._sorting},e.prototype.setSorting=function(r){(this._sorting=r)&&r.key&&this._rows.sort(function(e,t){var n=e.getValue(r.key);n=n?n instanceof Date?n.valueOf().toString():n.toString():"";var i=t.getValue(r.key);return i=i?i instanceof Date?i.valueOf().toString():i.toString():"","asc"===r.direction?n.localeCompare(i):i.localeCompare(n)})},e.prototype.sort=function(e,t){var n=this._sorting||new Xt;e&&(n.key=e,n.direction=t||"asc"),this.setSorting(n)},e}(),on=function(e,t,n){this.row=e,this.col=t,this.actions=n||[]},an=function(r){function e(e,t,n){var i=r.call(this)||this;return i.value=new on(e,t,n),i}return te(e,r),e}(se),sn=function(e,t){this.row=e,this.action=t},ln=function(i){function e(e,t){var n=i.call(this)||this;return n.value=new sn(e,t),n}return te(e,i),Object.defineProperty(e.prototype,"args",{get:function(){return this.value},enumerable:!0,configurable:!0}),e}(se),un=function(){function e(){}return e.prototype.ngOnInit=function(){!this.value&&this.column&&this.column.key&&this.row&&this.data&&(this.value=this.data.getValue(this.row,this.column),this.tooltip||(this.tooltip=this.value))},e}();un.decorators=[{type:l.Component,args:[{selector:"adf-datatable-cell",changeDetection:l.ChangeDetectionStrategy.OnPush,template:'\n        <ng-container>\n            <span [title]="tooltip" class="adf-datatable-cell-value">{{value}}</span>\n        </ng-container>',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-datatable-cell"}}]}],un.ctorParameters=function(){return[]},un.propDecorators={data:[{type:l.Input}],column:[{type:l.Input}],row:[{type:l.Input}],value:[{type:l.Input}],tooltip:[{type:l.Input}]};var cn={List:"list",Gallery:"gallery"},pn=function(){function e(e,t,n){var i=this;this.elementRef=e,this.thumbnailService=n,this.display=cn.List,this.rows=[],this.selectionMode="single",this.multiselect=!1,this.actions=!1,this.actionsPosition="right",this.contextMenu=!1,this.allowDropFiles=!1,this.rowStyleClass="",this.showHeader=!0,this.rowClick=new l.EventEmitter,this.rowDblClick=new l.EventEmitter,this.showRowContextMenu=new l.EventEmitter,this.showRowActionsMenu=new l.EventEmitter,this.executeRowAction=new l.EventEmitter,this.loading=!1,this.noPermission=!1,this.isSelectAllChecked=!1,this.selection=new Array,this.schema=[],this.rowMenuCache={},t&&(this.differ=t.find([]).create(null)),this.click$=new u.Observable(function(e){return i.clickObserver=e}).share()}return e.prototype.ngAfterContentInit=function(){this.setTableSchema()},e.prototype.ngOnChanges=function(e){this.initAndSubscribeClickStream(),this.isPropertyChanged(e.data)?this.isTableEmpty()?this.initTable():this.data=e.data.currentValue:this.isPropertyChanged(e.rows)?this.isTableEmpty()?this.initTable():this.setTableRows(e.rows.currentValue):e.selectionMode&&!e.selectionMode.isFirstChange()&&(this.resetSelection(),this.emitRowSelectionEvent("row-unselect",null))},e.prototype.ngDoCheck=function(){this.differ.diff(this.rows)&&this.setTableRows(this.rows)},e.prototype.isPropertyChanged=function(e){return!(!e||!e.currentValue)},e.prototype.convertToRowsData=function(e){return e.map(function(e){return new tn(e)})},e.prototype.initAndSubscribeClickStream=function(){var n=this;this.unsubscribeClickStream();var e=this.click$.buffer(this.click$.debounceTime(250)).map(function(e){return e}).filter(function(e){return 1===e.length});this.singleClickStreamSub=e.subscribe(function(e){var t=e[0];n.rowClick.emit(t),t.defaultPrevented||n.elementRef.nativeElement.dispatchEvent(new CustomEvent("row-click",{detail:t,bubbles:!0}))});var t=this.click$.buffer(this.click$.debounceTime(250)).map(function(e){return e}).filter(function(e){return 2<=e.length});this.multiClickStreamSub=t.subscribe(function(e){var t=e[0];n.rowDblClick.emit(t),t.defaultPrevented||n.elementRef.nativeElement.dispatchEvent(new CustomEvent("row-dblclick",{detail:t,bubbles:!0}))})},e.prototype.unsubscribeClickStream=function(){this.singleClickStreamSub&&this.singleClickStreamSub.unsubscribe(),this.multiClickStreamSub&&this.multiClickStreamSub.unsubscribe()},e.prototype.initTable=function(){this.data=new rn(this.rows,this.schema),this.rowMenuCache={}},e.prototype.isTableEmpty=function(){return this.data===undefined||null===this.data},e.prototype.setTableRows=function(e){this.data&&this.data.setRows(this.convertToRowsData(e))},e.prototype.setTableSchema=function(){this.columnList&&this.columnList.columns&&(this.schema=this.columnList.columns.map(function(e){return e})),this.data&&this.schema&&0<this.schema.length&&this.data.setColumns(this.schema)},e.prototype.onRowClick=function(e,t){if(t&&t.preventDefault(),e){this.handleRowSelection(e,t);var n=new Wt(e,t,this);this.clickObserver.next(n)}},e.prototype.onEnterKeyPressed=function(e,t){e&&this.handleRowSelection(e,t)},e.prototype.handleRowSelection=function(e,t){if(this.data&&(this.isSingleSelectionMode()&&(this.resetSelection(),this.selectRow(e,!0),this.emitRowSelectionEvent("row-select",e)),this.isMultiSelectionMode())){var n=t&&(t.metaKey||t.ctrlKey),i=!n||!e.isSelected,r=i?"row-select":"row-unselect";n||this.resetSelection(),this.selectRow(e,i),this.emitRowSelectionEvent(r,e)}},e.prototype.resetSelection=function(){if(this.data){var e=this.data.getRows();e&&0<e.length&&e.forEach(function(e){return e.isSelected=!1}),this.selection.splice(0)}this.isSelectAllChecked=!1},e.prototype.onRowDblClick=function(e,t){t&&t.preventDefault();var n=new Wt(e,t,this);this.clickObserver.next(n)},e.prototype.onRowKeyUp=function(e,t){var n=new CustomEvent("row-keyup",{detail:{row:e,keyboardEvent:t,sender:this},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(n),n.defaultPrevented?t.preventDefault():"Enter"===t.key&&this.onKeyboardNavigate(e,t)},e.prototype.onKeyboardNavigate=function(e,t){t&&t.preventDefault();var n=new Wt(e,t,this);this.rowDblClick.emit(n),this.elementRef.nativeElement.dispatchEvent(new CustomEvent("row-dblclick",{detail:n,bubbles:!0}))},e.prototype.onColumnHeaderClick=function(e){if(e&&e.sortable){var t=this.data.getSorting(),n="asc";t&&e.key===t.key&&(n="asc"===t.direction?"desc":"asc"),this.data.setSorting(new Xt(e.key,n)),this.emitSortingChangedEvent(e.key,n)}},e.prototype.onSelectAllClick=function(e){if(this.isSelectAllChecked=e.checked,this.multiselect){var t=this.data.getRows();if(t&&0<t.length)for(var n=0;n<t.length;n++)this.selectRow(t[n],e.checked);var i=e.checked?"row-select":"row-unselect",r=0<this.selection.length?this.selection[0]:null;this.emitRowSelectionEvent(i,r)}},e.prototype.onCheckboxChange=function(e,t){var n=t.checked;this.selectRow(e,n);var i=n?"row-select":"row-unselect";this.emitRowSelectionEvent(i,e)},e.prototype.onImageLoadingError=function(e,t){if(e){var n=e.target;this.fallbackThumbnail?n.src=this.fallbackThumbnail:n.src=this.thumbnailService.getMimeTypeIcon(t)}},e.prototype.isIconValue=function(e,t){if(e&&t){var n=e.getValue(t.key);return n&&n.startsWith("material-icons://")}return!1},e.prototype.asIconValue=function(e,t){return this.isIconValue(e,t)?(e.getValue(t.key)||"").replace("material-icons://",""):null},e.prototype.iconAltTextKey=function(e){return e?"ICONS."+e.substring(e.lastIndexOf("/")+1).replace(/\.[a-z]+/,""):""},e.prototype.isColumnSorted=function(e,t){if(e&&t){var n=this.data.getSorting();return n&&n.key===e.key&&n.direction===t}return!1},e.prototype.getContextMenuActions=function(e,t){var n=new an(e,t,[]);return this.showRowContextMenu.emit(n),n.value.actions},e.prototype.getRowActions=function(e,t){var n=e.getValue("id");if(!this.rowMenuCache[n]){var i=new an(e,t,[]);this.showRowActionsMenu.emit(i),this.rowMenuCache[n]=i.value.actions}return this.rowMenuCache[n]},e.prototype.onExecuteRowAction=function(e,t){t.disabled||t.disabled?event.stopPropagation():this.executeRowAction.emit(new ln(e,t))},e.prototype.rowAllowsDrop=function(e){return!0===e.isDropTarget},e.prototype.hasSelectionMode=function(){return this.isSingleSelectionMode()||this.isMultiSelectionMode()},e.prototype.isSingleSelectionMode=function(){return this.selectionMode&&"single"===this.selectionMode.toLowerCase()},e.prototype.isMultiSelectionMode=function(){return this.selectionMode&&"multiple"===this.selectionMode.toLowerCase()},e.prototype.getRowStyle=function(e){return e.cssClass=e.cssClass?e.cssClass:"",this.rowStyleClass=this.rowStyleClass?this.rowStyleClass:"",e.cssClass+" "+this.rowStyleClass},e.prototype.getFilename=function(e){return e.getValue("name")},e.prototype.getSortingKey=function(){if(this.data.getSorting())return this.data.getSorting().key},e.prototype.selectRow=function(e,t){if(e){e.isSelected=t;var n=this.selection.indexOf(e);t?n<0&&this.selection.push(e):-1<n&&this.selection.splice(n,1)}},e.prototype.getCellTooltip=function(e,t){if(e&&t&&t.formatTooltip){var n=t.formatTooltip(e,t);if(n)return n}return null},e.prototype.getSortableColumns=function(){return this.data.getColumns().filter(function(e){return!0===e.sortable})},e.prototype.isEmpty=function(){return 0===this.data.getRows().length},e.prototype.isHeaderVisible=function(){return this.showHeader&&!this.loading&&!this.isEmpty()},e.prototype.emitRowSelectionEvent=function(e,t){var n=new CustomEvent(e,{detail:{row:t,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(n)},e.prototype.emitSortingChangedEvent=function(e,t){var n=new CustomEvent("sorting-changed",{detail:{key:e,direction:t},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(n)},e}();pn.decorators=[{type:l.Component,args:[{selector:"adf-datatable",styles:[""],template:'<div\n    *ngIf="data" class="full-width"\n    [class.adf-data-table-card]="display === \'gallery\'"\n    [class.adf-data-table]="display === \'list\'">\n    <div *ngIf="isHeaderVisible()" class="adf-datatable-header">\n        <div class="adf-datatable-row" *ngIf="display === \'list\'">\n            \x3c!-- Actions (left) --\x3e\n            <div *ngIf="actions && actionsPosition === \'left\'" class="actions-column adf-datatable-table-cell-header">\n                <span class="sr-only">Actions</span>\n            </div>\n            \x3c!-- Columns --\x3e\n            <div *ngIf="multiselect" class="adf-datatable-table-cell-header">\n                <mat-checkbox [checked]="isSelectAllChecked" (change)="onSelectAllClick($event)"></mat-checkbox>\n            </div>\n            <div class="adf-data-table-cell--{{col.type || \'text\'}} {{col.cssClass}} adf-datatable-table-cell-header"\n                 *ngFor="let col of data.getColumns()"\n                 [class.sortable]="col.sortable"\n                 [attr.data-automation-id]="\'auto_id_\' + col.key"\n                 [class.adf-data-table__header--sorted-asc]="isColumnSorted(col, \'asc\')"\n                 [class.adf-data-table__header--sorted-desc]="isColumnSorted(col, \'desc\')"\n                 (click)="onColumnHeaderClick(col)"\n                 (keyup.enter)="onColumnHeaderClick(col)"\n                 role="button"\n                 tabindex="0"\n                 title="{{ col.title | translate }}">\n                <span *ngIf="col.srTitle" class="sr-only">{{ col.srTitle | translate }}</span>\n                <span *ngIf="col.title">{{ col.title | translate}}</span>\n            </div>\n            \x3c!-- Actions (right) --\x3e\n            <div *ngIf="actions && actionsPosition === \'right\'" class="actions-column adf-datatable-table-cell-header">\n                <span class="sr-only">Actions</span>\n            </div>\n        </div>\n        <mat-form-field *ngIf="display === \'gallery\'">\n            <mat-select [value]="getSortingKey()">\n                <mat-option *ngFor="let col of getSortableColumns()"\n                            [value]="col.key"\n                            (click)="onColumnHeaderClick(col)"\n                            (keyup.enter)="onColumnHeaderClick(col)">\n                    {{ col.title | translate}}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n\n    </div>\n\n    <div class="adf-datatable-body">\n        <ng-container *ngIf="!loading && !noPermission">\n            <div *ngFor="let row of data.getRows(); let idx = index"\n                 class="adf-datatable-row"\n                 role="button"\n                 [class.is-selected]="row.isSelected"\n                 [adf-upload]="allowDropFiles && rowAllowsDrop(row)" [adf-upload-data]="row"\n                 [ngStyle]="rowStyle"\n                 [ngClass]="getRowStyle(row)"\n                 (keyup)="onRowKeyUp(row, $event)">\n\n                \x3c!-- Actions (left) --\x3e\n                <div *ngIf="actions && actionsPosition === \'left\'" class="adf-datatable-table-cell">\n                    <button mat-icon-button [matMenuTriggerFor]="menu"\n                            [attr.id]="\'action_menu_left_\' + idx"\n                            [attr.data-automation-id]="\'action_menu_\' + idx">\n                        <mat-icon>more_vert</mat-icon>\n                    </button>\n                    <mat-menu #menu="matMenu">\n                        <button mat-menu-item *ngFor="let action of getRowActions(row)"\n                                [attr.data-automation-id]="action.title"\n                                [disabled]="action.disabled"\n                                (click)="onExecuteRowAction(row, action)">\n                            <mat-icon *ngIf="action.icon">{{ action.icon }}</mat-icon>\n                            <span>{{ action.title | translate }}</span>\n                        </button>\n                    </mat-menu>\n                </div>\n\n                <div *ngIf="multiselect" class="adf-datatable-table-cell adf-datatable-table-checkbox">\n                    <mat-checkbox\n                        [checked]="row.isSelected"\n                        (change)="onCheckboxChange(row, $event)">\n                    </mat-checkbox>\n                </div>\n                <div *ngFor="let col of data.getColumns()"\n                     class="adf-data-table-cell adf-datatable-table-cell adf-data-table-cell--{{col.type || \'text\'}} {{col.cssClass}}"\n                     [attr.title]="col.title | translate"\n                     [attr.filename]="getFilename(row)"\n                     tabindex="0"\n                     (click)="onRowClick(row, $event)"\n                     (keydown.enter)="onEnterKeyPressed(row, $event)"\n                     [context-menu]="getContextMenuActions(row, col)"\n                     [context-menu-enabled]="contextMenu">\n                    <div *ngIf="!col.template" class="cell-container">\n                        <ng-container [ngSwitch]="col.type">\n                            <div *ngSwitchCase="\'image\'" class="cell-value">\n                                <mat-icon *ngIf="isIconValue(row, col)">{{ asIconValue(row, col) }}</mat-icon>\n                                <mat-icon class="adf-datatable-selected"\n                                          *ngIf="!isIconValue(row, col) && row.isSelected" svgIcon="selected">\n                                </mat-icon>\n\n                                <img *ngIf="!isIconValue(row, col) && !row.isSelected"\n                                     alt="{{ iconAltTextKey(data.getValue(row, col)) | translate }}"\n                                     src="{{ data.getValue(row, col) }}"\n                                     (error)="onImageLoadingError($event, row.obj.entry.content.mimeType)">\n                            </div>\n                            <div *ngSwitchCase="\'icon\'" class="cell-value">\n                                <span class="sr-only">{{ iconAltTextKey(data.getValue(row, col)) | translate }}</span>\n                                <mat-icon>{{ data.getValue(row, col) }}</mat-icon>\n                            </div>\n                            <div *ngSwitchCase="\'date\'" class="cell-value"\n                                 [attr.data-automation-id]="\'date_\' + data.getValue(row, col)">\n                                <adf-date-cell\n                                    [data]="data"\n                                    [column]="col"\n                                    [row]="row"\n                                    [tooltip]="getCellTooltip(row, col)">\n                                </adf-date-cell>\n                            </div>\n                            <div *ngSwitchCase="\'location\'" class="cell-value"\n                                 [attr.data-automation-id]="\'location\' + data.getValue(row, col)">\n                                <adf-location-cell\n                                    [data]="data"\n                                    [column]="col"\n                                    [row]="row"\n                                    [tooltip]="getCellTooltip(row, col)">\n                                </adf-location-cell>\n                            </div>\n                            <div *ngSwitchCase="\'fileSize\'" class="cell-value"\n                                 [attr.data-automation-id]="\'fileSize_\' + data.getValue(row, col)">\n                                <adf-filesize-cell\n                                    [data]="data"\n                                    [column]="col"\n                                    [row]="row"\n                                    [tooltip]="getCellTooltip(row, col)">\n                                </adf-filesize-cell>\n                            </div>\n                            <div *ngSwitchCase="\'text\'" class="cell-value"\n                                 [attr.data-automation-id]="\'text_\' + data.getValue(row, col)">\n                                <adf-datatable-cell\n                                    [data]="data"\n                                    [column]="col"\n                                    [row]="row"\n                                    [tooltip]="getCellTooltip(row, col)">\n                                </adf-datatable-cell>\n                            </div>\n                            <span *ngSwitchDefault class="cell-value">\n                    \x3c!-- empty cell for unknown column type --\x3e\n                    </span>\n                        </ng-container>\n                    </div>\n                    <div *ngIf="col.template" class="cell-container">\n                        <ng-container\n                            [ngTemplateOutlet]="col.template"\n                            [ngTemplateOutletContext]="{ $implicit: { data: data, row: row, col: col }, value: data.getValue(row, col) }">\n                        </ng-container>\n                    </div>\n                </div>\n\n                \x3c!-- Actions (right) --\x3e\n                <div *ngIf="actions && actionsPosition === \'right\'"\n                     class="adf-datatable-table-cell alfresco-datatable__actions-cell">\n                    <button mat-icon-button [matMenuTriggerFor]="menu"\n                            [attr.id]="\'action_menu_right_\' + idx"\n                            [attr.data-automation-id]="\'action_menu_\' + idx">\n                        <mat-icon>more_vert</mat-icon>\n                    </button>\n                    <mat-menu #menu="matMenu">\n                        <button mat-menu-item *ngFor="let action of getRowActions(row)"\n                                [attr.data-automation-id]="action.title"\n                                [disabled]="action.disabled"\n                                (click)="onExecuteRowAction(row, action)">\n                            <mat-icon *ngIf="action.icon">{{ action.icon }}</mat-icon>\n                            <span>{{ action.title | translate }}</span>\n                        </button>\n                    </mat-menu>\n                </div>\n\n            </div>\n            <div *ngIf="isEmpty()"\n                 [class.adf-datatable-row]="display === \'list\'"\n                 [class.adf-data-table-card-empty]="display === \'gallery\'">\n                <div class="adf-no-content-container adf-datatable-table-cell">\n                    <ng-template *ngIf="noContentTemplate"\n                                 ngFor [ngForOf]="[data]"\n                                 [ngForTemplate]="noContentTemplate">\n                    </ng-template>\n                    <ng-content select="adf-empty-list"></ng-content>\n                </div>\n            </div>\n        </ng-container>\n        <div *ngIf="!loading && noPermission"\n             [class.adf-datatable-row]="display === \'list\'"\n             [class.adf-data-table-card-permissions]="display === \'gallery\'"\n             class="adf-no-permission__row">\n            <div class="adf-no-permission__cell adf-no-content-container adf-datatable-table-cell">\n                <ng-template *ngIf="noPermissionTemplate"\n                             ngFor [ngForOf]="[data]"\n                             [ngForTemplate]="noPermissionTemplate">\n                </ng-template>\n            </div>\n        </div>\n        <div *ngIf="loading"\n             [class.adf-datatable-row]="display === \'list\'"\n             [class.adf-data-table-card-loading]="display === \'gallery\'">\n            <div class="adf-datatable-table-cell" >\n                <ng-template *ngIf="loadingTemplate"\n                             ngFor [ngForOf]="[data]"\n                             [ngForTemplate]="loadingTemplate">\n                </ng-template>\n            </div>\n        </div>\n    </div>\n</div>\n',encapsulation:l.ViewEncapsulation.None}]}],pn.ctorParameters=function(){return[{type:l.ElementRef},{type:l.IterableDiffers},{type:et}]},pn.propDecorators={columnList:[{type:l.ContentChild,args:[Ht]}],data:[{type:l.Input}],display:[{type:l.Input}],rows:[{type:l.Input}],selectionMode:[{type:l.Input}],multiselect:[{type:l.Input}],actions:[{type:l.Input}],actionsPosition:[{type:l.Input}],fallbackThumbnail:[{type:l.Input}],contextMenu:[{type:l.Input}],allowDropFiles:[{type:l.Input}],rowStyle:[{type:l.Input}],rowStyleClass:[{type:l.Input}],showHeader:[{type:l.Input}],rowClick:[{type:l.Output}],rowDblClick:[{type:l.Output}],showRowContextMenu:[{type:l.Output}],showRowActionsMenu:[{type:l.Output}],executeRowAction:[{type:l.Output}],loading:[{type:l.Input}],noPermission:[{type:l.Input}]};var dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(un);dn.decorators=[{type:l.Component,args:[{selector:"adf-date-cell",changeDetection:l.ChangeDetectionStrategy.OnPush,template:'\n        <ng-container>\n            <span [title]="tooltip">{{value}}</span>\n        </ng-container>\n    ',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-date-cell"}}]}],dn.ctorParameters=function(){return[]};var mn=function(){};mn.decorators=[{type:l.Component,args:[{selector:"adf-empty-list",styles:[".adf-empty-list_template{text-align:center;margin-top:20px;margin-bottom:20px}"],template:'<div class="adf-empty-list_template">\n    <ng-content select="[adf-empty-list-header]"></ng-content>\n    <ng-content select="[adf-empty-list-body]"></ng-content>\n    <ng-content select="[adf-empty-list-footer]"></ng-content>\n    <ng-content></ng-content>\n</div>',encapsulation:l.ViewEncapsulation.None}]}],mn.ctorParameters=function(){return[]};var fn=function(){};fn.decorators=[{type:l.Directive,args:[{selector:"[adf-empty-list-header]"}]}],fn.ctorParameters=function(){return[]};var hn=function(){};hn.decorators=[{type:l.Directive,args:[{selector:"[adf-empty-list-body]"}]}],hn.ctorParameters=function(){return[]};var gn=function(){};gn.decorators=[{type:l.Directive,args:[{selector:"[adf-empty-list-footer]"}]}],gn.ctorParameters=function(){return[]};var yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(un);yn.decorators=[{type:l.Component,args:[{selector:"adf-filesize-cell",template:'\n        <ng-container>\n            <span [title]="tooltip">{{ value | adfFileSize }}</span>\n        </ng-container>\n    ',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-filesize-cell"}}]}],yn.ctorParameters=function(){return[]};var vn=function(t){function e(){var e=t.apply(this,ae(arguments))||this;return e.displayText="",e}return te(e,t),e.prototype.ngOnInit=function(){if(!this.value&&this.column&&this.column.key&&this.row&&this.data){var e=this.data.getValue(this.row,this.column);if(e&&e.name&&e.elements){this.value=e,this.displayText=e.name.split("/").pop(),this.tooltip||(this.tooltip=e.name);var t=e.elements[e.elements.length-1];this.link=[this.column.format,t.id]}}},e}(un);vn.decorators=[{type:l.Component,args:[{selector:"adf-location-cell",changeDetection:l.ChangeDetectionStrategy.OnPush,template:'\n        <ng-container>\n            <a href="" [title]="tooltip" [routerLink]="link">\n                {{ displayText }}\n            </a>\n        </ng-container>\n    ',encapsulation:l.ViewEncapsulation.None,host:{"class":"adf-location-cell"}}]}],vn.ctorParameters=function(){return[]},vn.propDecorators={link:[{type:l.Input}],displayText:[{type:l.Input}]};var bn=function(){function e(e){this.dataTable=e}return e.prototype.ngAfterContentInit=function(){this.dataTable&&(this.dataTable.loadingTemplate=this.template)},e}();bn.decorators=[{type:l.Directive,args:[{selector:"loading-content-template"}]}],bn.ctorParameters=function(){return[{type:pn}]},bn.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var wn=function(){function e(e){this.dataTable=e}return e.prototype.ngAfterContentInit=function(){this.dataTable&&(this.dataTable.noContentTemplate=this.template)},e}();wn.decorators=[{type:l.Directive,args:[{selector:"no-content-template"}]}],wn.ctorParameters=function(){return[{type:pn}]},wn.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var En=function(){function e(e){this.dataTable=e}return e.prototype.ngAfterContentInit=function(){this.dataTable&&(this.dataTable.noPermissionTemplate=this.template)},e}();En.decorators=[{type:l.Directive,args:[{selector:"no-permission-template"}]}],En.ctorParameters=function(){return[{type:pn}]},En.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var In=function(){this.show=new o.Subject};In.decorators=[{type:l.Injectable}],In.ctorParameters=function(){return[]};var Cn=function(){function e(e,t,n,i){this.viewport=e,this.overlayContainer=t,this.contextMenuService=n,this.renderer=i,this.links=[],this.mouseLocation={left:0,top:0},this.menuElement=null,this.showIcons=!1}return e.prototype.onShowContextMenu=function(e){e&&e.preventDefault()},e.prototype.onResize=function(e){this.mdMenuElement&&this.setPositionAfterCDKrecalculation()},e.prototype.ngOnInit=function(){var t=this;this.contextSubscription=this.contextMenuService.show.subscribe(function(e){return t.showMenu(e.event,e.obj)}),this.openSubscription=this.menuTrigger.onMenuOpen.subscribe(function(){var e=t.overlayContainer.getContainerElement();e&&(t.contextMenuListenerFn=t.renderer.listen(e,"contextmenu",function(e){e.preventDefault()})),t.menuElement=t.getContextMenuElement()}),this.closeSubscription=this.menuTrigger.onMenuClose.subscribe(function(){t.menuElement=null,t.contextMenuListenerFn&&t.contextMenuListenerFn()})},e.prototype.ngOnDestroy=function(){this.contextMenuListenerFn&&this.contextMenuListenerFn(),this.contextSubscription.unsubscribe(),this.openSubscription.unsubscribe(),this.closeSubscription.unsubscribe(),this.menuElement=null},e.prototype.onMenuItemClick=function(e,t){if(t&&t.model&&t.model.disabled)return e.preventDefault(),void e.stopImmediatePropagation();t.subject.next(t)},e.prototype.showMenu=function(e,t){this.links=t,e&&(this.mouseLocation={left:e.clientX,top:e.clientY}),this.menuTrigger.openMenu(),this.mdMenuElement&&this.setPositionAfterCDKrecalculation()},e.prototype.setPositionAfterCDKrecalculation=function(){var e=this;setTimeout(function(){e.setPosition()},0)},Object.defineProperty(e.prototype,"mdMenuElement",{get:function(){return this.menuElement},enumerable:!0,configurable:!0}),e.prototype.locationCss=function(){return{left:this.mouseLocation.left+"px",top:this.mouseLocation.top+"px"}},e.prototype.setPosition=function(){this.mdMenuElement.clientWidth+this.mouseLocation.left>this.viewport.getViewportRect().width?(this.menuTrigger.menu.xPosition="before",this.mdMenuElement.parentElement.style.left=this.mouseLocation.left-this.mdMenuElement.clientWidth+"px"):(this.menuTrigger.menu.xPosition="after",this.mdMenuElement.parentElement.style.left=this.locationCss().left),this.mdMenuElement.clientHeight+this.mouseLocation.top>this.viewport.getViewportRect().height?(this.menuTrigger.menu.yPosition="above",this.mdMenuElement.parentElement.style.top=this.mouseLocation.top-this.mdMenuElement.clientHeight+"px"):(this.menuTrigger.menu.yPosition="below",this.mdMenuElement.parentElement.style.top=this.locationCss().top)},e.prototype.getContextMenuElement=function(){return this.overlayContainer.getContainerElement().querySelector(".context-menu")},e}();Cn.decorators=[{type:l.Component,args:[{selector:"adf-context-menu-holder, context-menu-holder",template:'\n        <button mat-button [matMenuTriggerFor]="contextMenu"></button>\n        <mat-menu #contextMenu="matMenu" class="context-menu">\n            <button\n                *ngFor="let link of links"\n                mat-menu-item\n                (click)="onMenuItemClick($event, link)"\n                [attr.disabled]="link.model?.disabled || undefined">\n                <mat-icon *ngIf="showIcons && link.model?.icon">\n                    {{ link.model?.icon }}\n                </mat-icon>\n                    {{ (link.title || link.model?.title) | translate}}\n            </button>\n        </mat-menu>\n    '}]}],Cn.ctorParameters=function(){return[{type:M.ViewportRuler},{type:_.OverlayContainer},{type:In},{type:l.Renderer2}]},Cn.propDecorators={showIcons:[{type:l.Input}],menuTrigger:[{type:l.ViewChild,args:[h.MatMenuTrigger]}],onShowContextMenu:[{type:l.HostListener,args:["contextmenu",["$event"]]}],onResize:[{type:l.HostListener,args:["window:resize",["$event"]]}]};var Sn=function(){function e(e){this._contextMenuService=e,this.enabled=!1}return e.prototype.onShowContextMenu=function(e){this.enabled&&(e&&e.preventDefault(),this.links&&0<this.links.length&&this._contextMenuService&&this._contextMenuService.show.next({event:e,obj:this.links}))},e}();Sn.decorators=[{type:l.Directive,args:[{selector:"[adf-context-menu], [context-menu]"}]}],Sn.ctorParameters=function(){return[{type:In}]},Sn.propDecorators={links:[{type:l.Input,args:["context-menu"]}],enabled:[{type:l.Input,args:["context-menu-enabled"]}],onShowContextMenu:[{type:l.HostListener,args:["contextmenu",["$event"]]}]};var Tn=function(){};Tn.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge,a.TranslateModule],declarations:[Cn,Sn],exports:[Cn,Sn],providers:[In]}]}],Tn.ctorParameters=function(){return[]};var xn=function(){function e(e,t,n){this.el=e,this.renderer=t,this.highlightTransformService=n,this.selector="",this.search="",this.classToApply="adf-highlight"}return e.prototype.highlight=function(n,e,i){var r=this;(void 0===n&&(n=this.search),void 0===e&&(e=this.selector),void 0===i&&(i=this.classToApply),n&&e)&&this.el.nativeElement.querySelectorAll(e).forEach(function(e){var t=r.highlightTransformService.highlight(e.innerHTML,n,i);t.changed&&r.renderer.setElementProperty(e,"innerHTML",t.text)})},e}();xn.decorators=[{type:l.Directive,args:[{selector:"[adf-highlight]"}]}],xn.ctorParameters=function(){return[{type:l.ElementRef},{type:l.Renderer},{type:it}]},xn.propDecorators={selector:[{type:l.Input,args:["adf-highlight-selector"]}],search:[{type:l.Input,args:["adf-highlight"]}],classToApply:[{type:l.Input,args:["adf-highlight-class"]}]};var On=function(){function e(e,t,n,i){this.elementRef=e,this.renderer=t,this.router=n,this.auth=i}return e.prototype.ngOnInit=function(){var t=this;this.elementRef.nativeElement&&this.renderer.listen(this.elementRef.nativeElement,"click",function(e){e.preventDefault(),t.logout()})},e.prototype.logout=function(){var e=this;this.auth.logout().subscribe(function(){return e.redirectToLogin()},function(){return e.redirectToLogin()})},e.prototype.redirectToLogin=function(){this.router.navigate(["/login"])},e}();On.decorators=[{type:l.Directive,args:[{selector:"[adf-logout]"}]}],On.ctorParameters=function(){return[{type:l.ElementRef},{type:l.Renderer2},{type:P.Router},{type:Re}]};var An=function(){function e(e,t,n){this.alfrescoApiService=e,this.translation=t,this.elementRef=n,this.permanent=!1,this["delete"]=new l.EventEmitter}return e.prototype.onClick=function(){this.process(this.selection)},e.prototype.ngOnChanges=function(){!this.selection||this.selection&&0===this.selection.length?this.setDisableAttribute(!0):this.elementRef.nativeElement.hasAttribute("adf-node-permission")||this.setDisableAttribute(!1)},e.prototype.setDisableAttribute=function(e){this.elementRef.nativeElement.disabled=e},e.prototype.process=function(e){var n=this;if(e&&e.length){var t=this.getDeleteNodesBatch(e);u.Observable.forkJoin.apply(u.Observable,ae(t)).subscribe(function(e){var t=n.processStatus(e);n["delete"].emit(n.getMessage(t))})}},e.prototype.getDeleteNodesBatch=function(e){var t=this;return e.map(function(e){return t.deleteNode(e)})},e.prototype.deleteNode=function(t){var e,n=t.entry.nodeId||t.entry.id;return e=t.entry.hasOwnProperty("archivedAt")?this.alfrescoApiService.getInstance().nodes.purgeDeletedNode(n):this.alfrescoApiService.getInstance().nodes.deleteNode(n,{permanent:this.permanent}),u.Observable.fromPromise(e).map(function(){return{entry:t.entry,status:1}})["catch"](function(e){return u.Observable.of({entry:t.entry,status:0})})},e.prototype.processStatus=function(e){return e.reduce(function(e,t){return 1===t.status?e.success.push(t):e.failed.push(t),e},{success:[],failed:[],get someFailed(){return!!this.failed.length},get someSucceeded(){return!!this.success.length},get oneFailed(){return 1===this.failed.length},get oneSucceeded(){return 1===this.success.length},get allSucceeded(){return this.someSucceeded&&!this.someFailed},get allFailed(){return this.someFailed&&!this.someSucceeded}})},e.prototype.getMessage=function(e){return e.allFailed&&!e.oneFailed?this.translation.instant("CORE.DELETE_NODE.ERROR_PLURAL",{number:e.failed.length}):e.allSucceeded&&!e.oneSucceeded?this.translation.instant("CORE.DELETE_NODE.PLURAL",{number:e.success.length}):e.someFailed&&e.someSucceeded&&!e.oneSucceeded?this.translation.instant("CORE.DELETE_NODE.PARTIAL_PLURAL",{success:e.success.length,failed:e.failed.length}):e.someFailed&&e.oneSucceeded?this.translation.instant("CORE.DELETE_NODE.PARTIAL_SINGULAR",{success:e.success.length,failed:e.failed.length}):e.oneFailed&&!e.someSucceeded?this.translation.instant("CORE.DELETE_NODE.ERROR_SINGULAR",{name:e.failed[0].entry.name}):e.oneSucceeded&&!e.someFailed?this.translation.instant("CORE.DELETE_NODE.SINGULAR",{name:e.success[0].entry.name}):void 0},e}();An.decorators=[{type:l.Directive,args:[{selector:"[adf-delete]"}]}],An.ctorParameters=function(){return[{type:ve},{type:Qe},{type:l.ElementRef}]},An.propDecorators={selection:[{type:l.Input,args:["adf-delete"]}],permanent:[{type:l.Input}],"delete":[{type:l.Output}],onClick:[{type:l.HostListener,args:["click"]}]};var Pn=function(){function e(e){this.alfrescoApiService=e,this.favorites=[],this.selection=[],this.toggle=new l.EventEmitter}return e.prototype.onClick=function(){this.toggleFavorite()},e.prototype.ngOnChanges=function(e){e.selection.currentValue.length?this.markFavoritesNodes(e.selection.currentValue):this.favorites=[]},e.prototype.toggleFavorite=function(){var n=this;if(this.favorites.length){var e=this.favorites.every(function(e){return e.entry.isFavorite});if(e){var t=this.favorites.map(function(e){var t=e.entry.nodeId||e.entry.id;return u.Observable.fromPromise(n.alfrescoApiService.getInstance().core.favoritesApi.removeFavoriteSite("-me-",t))});u.Observable.forkJoin(t).subscribe(function(){n.favorites.map(function(e){return e.entry.isFavorite=!1}),n.toggle.emit()})}if(!e){var i=this.favorites.filter(function(e){return!e.entry.isFavorite}),r=i.map(function(e){return n.createFavoriteBody(e)});u.Observable.fromPromise(this.alfrescoApiService.getInstance().core.favoritesApi.addFavorite("-me-",r)).subscribe(function(){i.map(function(e){return e.entry.isFavorite=!0}),n.toggle.emit()})}}},e.prototype.markFavoritesNodes=function(e){var n=this;if(e.length<=this.favorites.length){var t=this.reduce(this.favorites,e);this.favorites=t}var i=this.diff(e,this.favorites),r=this.getProcessBatch(i);u.Observable.forkJoin(r).subscribe(function(e){return(t=n.favorites).push.apply(t,ae(e));var t})},e.prototype.hasFavorites=function(){return!(this.favorites&&!this.favorites.length)&&this.favorites.every(function(e){return e.entry.isFavorite})},e.prototype.getProcessBatch=function(e){var t=this;return e.map(function(e){return t.getFavorite(e)})},e.prototype.getFavorite=function(e){var t=e.entry,n=t.name,i=t.isFile,r=t.isFolder,o=e.entry.nodeId||e.entry.id,a=this.alfrescoApiService.getInstance().core.favoritesApi.getFavorite("-me-",o);return u.Observable.from(a).map(function(){return{entry:{id:o,isFolder:r,isFile:i,name:n,isFavorite:!0}}})["catch"](function(){return u.Observable.of({entry:{id:o,isFolder:r,isFile:i,name:n,isFavorite:!1}})})},e.prototype.createFavoriteBody=function(e){var t,n=this.getNodeType(e),i=e.entry.nodeId||e.entry.id;return{target:(t={},t[n]={guid:i},t)}},e.prototype.getNodeType=function(e){return e.entry.isFile||e.entry.isFolder?e.entry.isFile?"file":"folder":"file"},e.prototype.diff=function(e,t){var n=t.map(function(e){return e.entry.id});return e.filter(function(e){return n.includes(e.entry.id)?null:e})},e.prototype.reduce=function(e,t){var n=t.map(function(e){return e.entry.id});return e.filter(function(e){return n.includes(e.entry.id)?e:null})},e}();Pn.decorators=[{type:l.Directive,args:[{selector:"[adf-node-favorite]",exportAs:"adfFavorite"}]}],Pn.ctorParameters=function(){return[{type:ve}]},Pn.propDecorators={selection:[{type:l.Input,args:["adf-node-favorite"]}],toggle:[{type:l.Output}],onClick:[{type:l.HostListener,args:["click"]}]};var Dn=new l.InjectionToken("extendible.component"),Fn=function(){function e(e,t,n,i,r){this.elementRef=e,this.renderer=t,this.contentService=n,this.changeDetector=i,this.parentComponent=r,this.permission=null,this.nodes=[]}return e.prototype.ngOnChanges=function(e){e.nodes&&!e.nodes.firstChange&&this.updateElement()},e.prototype.updateElement=function(){var e=this.hasPermission(this.nodes,this.permission);return e?this.enable():this.disable(),e},e.prototype.enable=function(){this.parentComponent?(this.parentComponent.disabled=!1,this.changeDetector.detectChanges()):this.enableElement()},e.prototype.disable=function(){this.parentComponent?(this.parentComponent.disabled=!0,this.changeDetector.detectChanges()):this.disableElement()},e.prototype.enableElement=function(){this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")},e.prototype.disableElement=function(){this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","true")},e.prototype.hasPermission=function(e,t){var n=this;return!!(e&&0<e.length)&&e.every(function(e){return n.contentService.hasPermission(e.entry,t)})},e}();Fn.decorators=[{type:l.Directive,args:[{selector:"[adf-node-permission]"}]}],Fn.ctorParameters=function(){return[{type:l.ElementRef},{type:l.Renderer2},{type:ke},{type:l.ChangeDetectorRef},{type:undefined,decorators:[{type:l.Host},{type:l.Optional},{type:l.Inject,args:[Dn]}]}]},Fn.propDecorators={permission:[{type:l.Input,args:["adf-node-permission"]}],nodes:[{type:l.Input,args:["adf-nodes"]}]};var Rn=function(){function i(e){this.snackbar=e}return i.prototype.openSnackMessage=function(e,t){return this.snackbar.open(e,null,{duration:t||i.DEFAULT_DURATION_MESSAGE})},i.prototype.openSnackMessageAction=function(e,t,n){return this.snackbar.open(e,t,{duration:n||i.DEFAULT_DURATION_MESSAGE})},i}();Rn.DEFAULT_DURATION_MESSAGE=5e3,Rn.decorators=[{type:l.Injectable}],Rn.ctorParameters=function(){return[{type:h.MatSnackBar}]};var kn=function(){function e(e,t,n,i){this.alfrescoApiService=e,this.translation=t,this.router=n,this.notification=i,this.location="",this.restore=new l.EventEmitter,this.restoreProcessStatus=this.processStatus()}return e.prototype.onClick=function(){this.recover(this.selection)},e.prototype.recover=function(o){var a=this;if(o.length){var e,t=this.getNodesWithPath(o);if(o.length&&!t.length)return(e=this.restoreProcessStatus.fail).push.apply(e,ae(o)),this.restoreNotification(),void this.refresh();this.restoreNodesBatch(t)["do"](function(e){var t,n,i=a.processStatus(e);(t=a.restoreProcessStatus.fail).push.apply(t,ae(i.fail)),(n=a.restoreProcessStatus.success).push.apply(n,ae(i.success))}).mergeMap(function(){return a.getDeletedNodes()}).subscribe(function(e){var t=e.list.entries,n=a.restoreProcessStatus.fail,i=a.diff(n,o,!1),r=a.diff(i,t);r.length?a.recover(r):(a.restoreNotification(),a.refresh())})}},e.prototype.restoreNodesBatch=function(e){var t=this;return u.Observable.forkJoin(e.map(function(e){return t.restoreNode(e)}))},e.prototype.getNodesWithPath=function(e){return e.filter(function(e){return e.entry.path})},e.prototype.getDeletedNodes=function(){var e=this.alfrescoApiService.getInstance().core.nodesApi.getDeletedNodes({include:["path"]});return u.Observable.from(e)},e.prototype.restoreNode=function(e){var n=e.entry,t=this.alfrescoApiService.getInstance().nodes.restoreNode(n.id);return u.Observable.from(t).map(function(){return{status:1,entry:n}})["catch"](function(e){var t=JSON.parse(e.message).error.statusCode;return u.Observable.of({status:0,statusCode:t,entry:n})})},e.prototype.navigateLocation=function(e){var t=e.elements[e.elements.length-1];this.router.navigate([this.location,t.id])},e.prototype.diff=function(e,t,n){void 0===n&&(n=!0);var i=e.map(function(e){return e.entry.id});return t.filter(function(e){return n?i.includes(e.entry.id)?e:null:i.includes(e.entry.id)?null:e})},e.prototype.processStatus=function(e){void 0===e&&(e=[]);return e.reduce(function(e,t){return t.status?e.success.push(t):e.fail.push(t),e},{fail:[],success:[],get someFailed(){return!!this.fail.length},get someSucceeded(){return!!this.success.length},get oneFailed(){return 1===this.fail.length},get oneSucceeded(){return 1===this.success.length},get allSucceeded(){return this.someSucceeded&&!this.someFailed},get allFailed(){return this.someFailed&&!this.someSucceeded},reset:function(){this.fail=[],this.success=[]}})},e.prototype.getRestoreMessage=function(){var e=this.restoreProcessStatus;return e.someFailed&&!e.oneFailed?this.translation.instant("CORE.RESTORE_NODE.PARTIAL_PLURAL",{number:e.fail.length}):e.oneFailed&&e.fail[0].statusCode?409===e.fail[0].statusCode?this.translation.instant("CORE.RESTORE_NODE.NODE_EXISTS",{name:e.fail[0].entry.name}):this.translation.instant("CORE.RESTORE_NODE.GENERIC",{name:e.fail[0].entry.name}):e.oneFailed&&!e.fail[0].statusCode?this.translation.instant("CORE.RESTORE_NODE.LOCATION_MISSING",{name:e.fail[0].entry.name}):e.allSucceeded&&!e.oneSucceeded?this.translation.instant("CORE.RESTORE_NODE.PLURAL"):e.allSucceeded&&e.oneSucceeded?this.translation.instant("CORE.RESTORE_NODE.SINGULAR",{name:e.success[0].entry.name}):void 0},e.prototype.restoreNotification=function(){var e=this,t=Object.assign({},this.restoreProcessStatus),n=this.getRestoreMessage(),i=t.oneSucceeded&&!t.someFailed?this.translation.instant("CORE.RESTORE_NODE.VIEW"):"";this.notification.openSnackMessageAction(n,i).onAction().subscribe(function(){return e.navigateLocation(t.success[0].entry.path)})},e.prototype.refresh=function(){this.restoreProcessStatus.reset(),this.selection=[],this.restore.emit()},e}();kn.decorators=[{type:l.Directive,args:[{selector:"[adf-restore]"}]}],kn.ctorParameters=function(){return[{type:ve},{type:Qe},{type:P.Router},{type:Rn}]},kn.propDecorators={selection:[{type:l.Input,args:["adf-restore"]}],location:[{type:l.Input}],restore:[{type:l.Output}],onClick:[{type:l.HostListener,args:["click"]}]};var _n=function(){function e(e,t,n){this.el=e,this.renderer=t,this.ngZone=n,this.enabled=!0,this.mode=["drop"],this.isDragging=!1,this.cssClassName="adf-upload__dragging",this.element=e.nativeElement}return e.prototype.ngOnInit=function(){var t=this;this.isClickMode()&&this.renderer&&(this.upload=this.renderer.createElement(this.el.nativeElement.parentNode,"input"),this.upload.type="file",this.upload.style.display="none",this.upload.addEventListener("change",function(e){return t.onSelectFiles(e)}),this.multiple&&this.upload.setAttribute("multiple",""),this.accept&&this.upload.setAttribute("accept",this.accept),this.directory&&this.upload.setAttribute("webkitdirectory","")),this.isDropMode()&&this.ngZone.runOutsideAngular(function(){t.element.addEventListener("dragenter",t.onDragEnter.bind(t)),t.element.addEventListener("dragover",t.onDragOver.bind(t)),t.element.addEventListener("dragleave",t.onDragLeave.bind(t)),t.element.addEventListener("drop",t.onDrop.bind(t))})},e.prototype.ngOnDestroy=function(){this.element.removeEventListener("dragenter",this.onDragEnter),this.element.removeEventListener("dragover",this.onDragOver),this.element.removeEventListener("dragleave",this.onDragLeave),this.element.removeEventListener("drop",this.onDrop)},e.prototype.onClick=function(e){this.isClickMode()&&this.upload&&(e.preventDefault(),this.upload.click())},e.prototype.onDragEnter=function(e){this.isDropMode()&&(this.element.classList.add(this.cssClassName),this.isDragging=!0)},e.prototype.onDragOver=function(e){return e.preventDefault(),this.isDropMode()&&(this.element.classList.add(this.cssClassName),this.isDragging=!0),!1},e.prototype.onDragLeave=function(e){this.isDropMode()&&(this.element.classList.remove(this.cssClassName),this.isDragging=!1)},e.prototype.onDrop=function(e){var t=this;if(this.isDropMode()){e.stopPropagation(),e.preventDefault(),this.element.classList.remove(this.cssClassName),this.isDragging=!1;var n=this.getDataTransfer(e);n&&this.getFilesDropped(n).then(function(e){t.onUploadFiles(e)})}return!1},e.prototype.onUploadFiles=function(e){if(this.enabled&&0<e.length){var t=new CustomEvent("upload-files",{detail:{sender:this,data:this.data,files:e},bubbles:!0});this.el.nativeElement.dispatchEvent(t)}},e.prototype.hasMode=function(e){return this.enabled&&e&&this.mode&&-1<this.mode.indexOf(e)},e.prototype.isDropMode=function(){return this.hasMode("drop")},e.prototype.isClickMode=function(){return this.hasMode("click")},e.prototype.getDataTransfer=function(e){return e&&e.dataTransfer?e.dataTransfer:e&&e.originalEvent&&e.originalEvent.dataTransfer?e.originalEvent.dataTransfer:null},e.prototype.getFilesDropped=function(a){return new Promise(function(t){var i=[];if(a){var r=a.items;if(r)for(var e=function(e){if("undefined"!=typeof r[e].webkitGetAsEntry){var n=r[e].webkitGetAsEntry();n&&(n.isFile?i.push(Promise.resolve({entry:n,file:r[e].getAsFile(),relativeFolder:"/"})):n.isDirectory&&i.push(new Promise(function(t){$t.flattern(n).then(function(e){return t(e)})})))}else i.push(Promise.resolve({entry:null,file:r[e].getAsFile(),relativeFolder:"/"}))},n=0;n<r.length;n++)e(n);else{var o=$t.toFileArray(a.files).map(function(e){return{entry:null,file:e,relativeFolder:"/"}});i.push(Promise.resolve(o))}}Promise.all(i).then(function(e){t(e.reduce(function(e,t){return e.concat(t)},[]))})})},e.prototype.onSelectFiles=function(e){if(this.isClickMode()){var t=e.currentTarget,n=$t.toFileArray(t.files);this.onUploadFiles(n.map(function(e){return{entry:null,file:e,relativeFolder:"/"}})),e.target.value=""}},e}();_n.decorators=[{type:l.Directive,args:[{selector:"[adf-upload]"}]}],_n.ctorParameters=function(){return[{type:l.ElementRef},{type:l.Renderer},{type:l.NgZone}]},_n.propDecorators={enabled:[{type:l.Input,args:["adf-upload"]}],data:[{type:l.Input,args:["adf-upload-data"]}],mode:[{type:l.Input}],multiple:[{type:l.Input}],accept:[{type:l.Input}],directory:[{type:l.Input}],onClick:[{type:l.HostListener,args:["click",["$event"]]}]};var Mn=function(){};Mn.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge],declarations:[xn,On,An,Pn,Fn,kn,_n],exports:[xn,On,An,Pn,Fn,kn,_n]}]}],Mn.ctorParameters=function(){return[]};var Ln=function(){};Ln.decorators=[{type:l.NgModule,args:[{imports:[P.RouterModule,Ge,i.CommonModule,a.TranslateModule,Tn,st,Mn],declarations:[pn,mn,fn,hn,gn,un,dn,yn,vn,wn,En,bn],exports:[pn,mn,fn,hn,gn,un,dn,yn,vn,wn,En,bn]}]}],Ln.ctorParameters=function(){return[]};var Vn=function(){function e(){this.groups=[]}return e.prototype.addGroup=function(e){this.groups.push(e)},e.prototype.closeOthers=function(t){this.groups.forEach(function(e){e!==t&&(e.isOpen=!1)})},e.prototype.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)},e}();Vn.decorators=[{type:l.Component,args:[{selector:"adf-accordion",template:"\n        <ng-content></ng-content>\n    ",host:{"class":"panel-group"},encapsulation:l.ViewEncapsulation.None}]}],Vn.ctorParameters=function(){return[]};var Nn=function(){function e(e){this.accordion=e,this._isOpen=!1,this._isSelected=!1,this.hasAccordionIcon=!0,this.headingClick=new l.EventEmitter,this.accordion.addGroup(this)}return Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen},set:function(e){(this._isOpen=e)&&this.accordion.closeOthers(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.accordion.removeGroup(this)},e.prototype.hasHeadingIcon=function(){return!!this.headingIcon},e.prototype.toggleOpen=function(e){e.preventDefault(),this.isOpen=!this.isOpen,this.headingClick.emit(this.heading)},e.prototype.getAccordionIcon=function(){return this.isOpen?"expand_less":"expand_more"},e}();Nn.decorators=[{type:l.Component,args:[{selector:"adf-accordion-group",template:'<div class="adf-panel adf-panel-default" [ngClass]="{\'adf-panel-open\': isOpen}">\n    <div class="adf-panel-heading" [ngClass]="{\'adf-panel-heading-selected\': isSelected}" (click)="toggleOpen($event)">\n        <div id="heading-icon" *ngIf="hasHeadingIcon()" class="adf-panel-heading-icon">\n            <mat-icon class="material-icons"\n               [matTooltip]="headingIconTooltip"\n               [matTooltipDisabled]="!headingIconTooltip">\n                {{headingIcon}}\n            </mat-icon>\n        </div>\n        <div id="heading-text" class="adf-panel-heading-text">{{heading}}</div>\n        <div id="accordion-button" *ngIf="hasAccordionIcon" class="adf-panel-heading-toggle">\n            <i class="material-icons">{{getAccordionIcon()}}</i>\n        </div>\n    </div>\n    <div class="adf-panel-collapse" [hidden]="!isOpen">\n        <div class="adf-panel-body" #contentWrapper>\n            <ng-content></ng-content>\n        </div>\n    </div>\n</div>\n',styles:[""],encapsulation:l.ViewEncapsulation.None}]}],Nn.ctorParameters=function(){return[{type:Vn}]},Nn.propDecorators={contentWrapper:[{type:l.ViewChild,args:["contentWrapper"]}],heading:[{type:l.Input}],headingIcon:[{type:l.Input}],headingIconTooltip:[{type:l.Input}],hasAccordionIcon:[{type:l.Input}],headingClick:[{type:l.Output}],isOpen:[{type:l.Input}],isSelected:[{type:l.Input}]};var Un=function(){};Un.decorators=[{type:l.NgModule,args:[{imports:[Ge,i.CommonModule],declarations:[Vn,Nn],exports:[Vn,Nn]}]}],Un.ctorParameters=function(){return[]};var Bn=function(){this.displayEmpty=!0};Bn.decorators=[{type:l.Component,args:[{selector:"adf-card-view",template:'<div class="adf-property-list">\n    <div *ngFor="let property of properties">\n        <div [attr.data-automation-id]="\'header-\'+property.key" class="adf-property">\n            <adf-card-view-item-dispatcher\n                [property]="property"\n                [editable]="editable"\n                [displayEmpty]="displayEmpty">\n            </adf-card-view-item-dispatcher>\n        </div>\n    </div>\n</div>\n',styles:[""]}]}],Bn.ctorParameters=function(){return[]},Bn.propDecorators={properties:[{type:l.Input}],editable:[{type:l.Input}],displayEmpty:[{type:l.Input}]};var jn=function(){function e(e){this.label=e.label||"",this.value=e.value,this.key=e.key,this["default"]=e["default"],this.editable=!!e.editable,this.clickable=!!e.clickable,this.icon=e.icon||"",this.validators=e.validators||[]}return e.prototype.isEmpty=function(){return this.value===undefined||null===this.value||""===this.value},e.prototype.isValid=function(t){return!this.validators.length||this.validators.map(function(e){return e.isValid(t)}).reduce(function(e,t){return e&&t},!0)},e.prototype.getValidationErrors=function(t){return this.validators.length?this.validators.filter(function(e){return!e.isValid(t)}).map(function(e){return e.message}):[]},e}(),Yn=function(n){function e(e){var t=n.call(this,e)||this;return t.type="bool",t.value=!1,e.value!==undefined&&(t.value=!!JSON.parse(e.value)),t}return te(e,n),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this.isEmpty()?this["default"]:this.value},enumerable:!0,configurable:!0}),e}(jn);function qn(e,t){return e.split(".").reverse().reduce(function(e,t){return(n={})[t]=e,n;var n},t)}var zn=function(){function e(){this.itemUpdatedSource=new o.Subject,this.itemClickedSource=new o.Subject,this.itemUpdated$=this.itemUpdatedSource.asObservable(),this.itemClicked$=this.itemClickedSource.asObservable()}return e.prototype.update=function(e,t){this.itemUpdatedSource.next({target:e,changed:qn(e.key,t)})},e.prototype.clicked=function(e){this.itemClickedSource.next({target:e})},e}();zn.decorators=[{type:l.Injectable}],zn.ctorParameters=function(){return[]};var Hn=function(){function e(e){this.cardViewUpdateService=e}return e.prototype.isEditable=function(){return this.editable&&this.property.editable},e.prototype.changed=function(e){this.cardViewUpdateService.update(this.property,e.checked),this.property.value=e.checked},e}();Hn.decorators=[{type:l.Component,args:[{selector:"adf-card-view-boolitem",template:'<ng-container *ngIf="!property.isEmpty() || isEditable()">\n    <div class="adf-property-label">{{ property.label | translate }}</div>\n    <div class="adf-property-value">\n        <mat-checkbox\n            [attr.title]="\'CORE.METADATA.ACTIONS.TOGGLE\' | translate"\n            [checked]="property.displayValue"\n            [disabled]="!isEditable()"\n            (change)="changed($event)">\n        </mat-checkbox>\n    </div>\n</ng-container>\n',styles:[""]}]}],Hn.ctorParameters=function(){return[{type:zn}]},Hn.propDecorators={property:[{type:l.Input}],editable:[{type:l.Input}]};var Gn=function(n){function e(e){var t=n.call(this,e)||this;return t.type="date",t.format="MMM DD YYYY",e.format&&(t.format=e.format),t}return te(e,n),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this.value?O(this.value).format(this.format):this["default"]},enumerable:!0,configurable:!0}),e}(jn),Wn=Kt,Xn=B.MAT_MOMENT_DATETIME_FORMATS,$n=function(){function e(e,t,n){this.cardViewUpdateService=e,this.dateAdapter=t,this.preferences=n,this.SHOW_FORMAT="MMM DD YY",this.editable=!1,this.displayEmpty=!0}return e.prototype.ngOnInit=function(){var t=this;this.preferences.locale$.subscribe(function(e){t.dateAdapter.setLocale(e)}),this.dateAdapter.overrideDisplyaFormat=this.SHOW_FORMAT,this.property.value&&(this.valueDate=O(this.property.value,this.SHOW_FORMAT))},e.prototype.showProperty=function(){return this.displayEmpty||!this.property.isEmpty()},e.prototype.isEditable=function(){return this.editable&&this.property.editable},e.prototype.showDatePicker=function(){this.datepicker.open()},e.prototype.onDateChanged=function(e){if(e){var t=O(e.value,this.SHOW_FORMAT,!0);t.isValid()&&(this.valueDate=t,this.cardViewUpdateService.update(this.property,t.toDate()),this.property.value=t.toDate())}},e}();$n.decorators=[{type:l.Component,args:[{providers:[{provide:h.DateAdapter,useClass:en},{provide:h.MAT_DATE_FORMATS,useValue:Wn},{provide:v.DatetimeAdapter,useClass:B.MomentDatetimeAdapter},{provide:v.MAT_DATETIME_FORMATS,useValue:Xn}],selector:"adf-card-view-dateitem",template:'<div class="adf-property-label" *ngIf="showProperty() || isEditable()">{{ property.label | translate }}</div>\n<div class="adf-property-value">\n    <span *ngIf="!isEditable()">\n        <span [attr.data-automation-id]="\'card-dateitem-\' + property.key">\n            <span *ngIf="showProperty()">{{ property.displayValue }}</span>\n        </span>\n    </span>\n    <div *ngIf="isEditable()" class="adf-dateitem-editable">\n        <div class="adf-dateitem-editable-controls">\n            <span\n                class="adf-datepicker-toggle"\n                [attr.data-automation-id]="\'datepicker-label-toggle-\' + property.key"\n                (click)="showDatePicker($event)">\n                <span *ngIf="showProperty(); else elseEmptyValueBlock">{{ property.displayValue }}</span>\n            </span>\n            <mat-datetimepicker-toggle\n                [attr.title]="\'CORE.METADATA.ACTIONS.EDIT\' | translate"\n                [attr.data-automation-id]="\'datepickertoggle-\' + property.key"\n                [for]="datetimePicker">\n            </mat-datetimepicker-toggle>\n        </div>\n\n        <input class="adf-invisible-date-input"\n            [matDatetimepicker]="datetimePicker"\n            [value]="valueDate"\n            (dateChange)="onDateChanged($event)">\n\n        <mat-datetimepicker #datetimePicker\n            [type]="property.type"\n            timeInterval="5"\n            [attr.data-automation-id]="\'datepicker-\' + property.key"\n            [startAt]="valueDate">\n        </mat-datetimepicker>\n    </div>\n    <ng-template #elseEmptyValueBlock>\n        {{ property.default | translate }}\n    </ng-template>\n</div>\n',styles:[""]}]}],$n.ctorParameters=function(){return[{type:zn},{type:h.DateAdapter},{type:De}]},$n.propDecorators={property:[{type:l.Input}],editable:[{type:l.Input}],displayEmpty:[{type:l.Input}],datepicker:[{type:l.ViewChild,args:["datetimePicker"]}]};var Kn=function(t){function e(){var e=t.apply(this,ae(arguments))||this;return e.type="map",e}return te(e,t),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this.value&&0<this.value.size?this.value.values().next().value:this["default"]},enumerable:!0,configurable:!0}),e}(jn),Jn=function(){function e(e){this.cardViewUpdateService=e,this.displayEmpty=!0}return e.prototype.showProperty=function(){return this.displayEmpty||!this.property.isEmpty()},e.prototype.isClickable=function(){return this.property.clickable},e.prototype.clicked=function(){this.cardViewUpdateService.clicked(this.property)},e}();Jn.decorators=[{type:l.Component,args:[{selector:"adf-card-view-mapitem",template:'<div class="adf-property-label" *ngIf="showProperty()">{{ property.label | translate }}</div>\n<div class="adf-property-value">\n    <div>\n        <span *ngIf="!isClickable(); else elseBlock" [attr.data-automation-id]="\'card-mapitem-value-\' + property.key">\n            <span *ngIf="showProperty();">{{ property.displayValue }}</span>\n        </span>\n        <ng-template #elseBlock>\n            <span class="adf-mapitem-clickable-value" (click)="clicked()" [attr.data-automation-id]="\'card-mapitem-value-\' + property.key">\n                <span *ngIf="showProperty(); else elseEmptyValueBlock">{{ property.displayValue }}</span>\n            </span>\n        </ng-template>\n    </div>\n    <ng-template #elseEmptyValueBlock>\n        {{ property.default | translate }}\n    </ng-template>\n</div>\n',styles:[".adf-mapitem-clickable-value{cursor:pointer}"]}]}],Jn.ctorParameters=function(){return[{type:zn}]},Jn.propDecorators={property:[{type:l.Input}],displayEmpty:[{type:l.Input}]};var Qn=function(n){function e(e){var t=n.call(this,e)||this;return t.type="text",t.multiline=!!e.multiline,t.pipes=e.pipes||[],t}return te(e,n),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this.isEmpty()?this["default"]:this.applyPipes(this.value)},enumerable:!0,configurable:!0}),e.prototype.applyPipes=function(e){return this.pipes.length&&(e=this.pipes.reduce(function(e,t){var n=t.pipe,i=t.params,r=void 0===i?[]:i;return n.transform.apply(n,ae([e],r))},e)),e},e}(jn),Zn=function(){function e(e){this.cardViewUpdateService=e,this.editable=!1,this.displayEmpty=!0,this.inEdit=!1}return e.prototype.ngOnChanges=function(){this.editedValue=this.property.value},e.prototype.showProperty=function(){return this.displayEmpty||!this.property.isEmpty()},e.prototype.isEditable=function(){return this.editable&&this.property.editable},e.prototype.isClickable=function(){return this.property.clickable},e.prototype.hasIcon=function(){return!!this.property.icon},e.prototype.hasErrors=function(){return this.errorMessages&&this.errorMessages.length},e.prototype.setEditMode=function(e){var t=this;this.inEdit=e,setTimeout(function(){t.editorInput&&t.editorInput.nativeElement.click()},0)},e.prototype.reset=function(){this.editedValue=this.property.value,this.setEditMode(!1)},e.prototype.update=function(){this.property.isValid(this.editedValue)?(this.cardViewUpdateService.update(this.property,this.editedValue),this.property.value=this.editedValue,this.setEditMode(!1)):this.errorMessages=this.property.getValidationErrors(this.editedValue)},e.prototype.clicked=function(){this.cardViewUpdateService.clicked(this.property)},e}();function ei(e){return function(){return e}}Zn.decorators=[{type:l.Component,args:[{selector:"adf-card-view-textitem",template:'<div class="adf-property-label" *ngIf="showProperty() || isEditable()">{{ property.label | translate }}</div>\n<div class="adf-property-value">\n    <span *ngIf="!isEditable()">\n        <span *ngIf="!isClickable(); else elseBlock" [attr.data-automation-id]="\'card-textitem-value-\' + property.key">\n            <span *ngIf="showProperty()">{{ property.displayValue }}</span>\n        </span>\n        <ng-template #elseBlock>\n        <div class="adf-textitem-clickable" (click)="clicked()" fxLayout="row" fxLayoutAlign="space-between center">\n            <span class="adf-textitem-clickable-value" [attr.data-automation-id]="\'card-textitem-value-\' + property.key">\n                <span *ngIf="showProperty(); else elseEmptyValueBlock">{{ property.displayValue }}</span>\n            </span>\n            <mat-icon *ngIf="hasIcon()" fxFlex="0 0 auto" [attr.data-automation-id]="\'card-textitem-edit-icon-\' + property.icon" class="adf-textitem-icon">{{ property.icon }}</mat-icon>\n        </div>\n        </ng-template>\n    </span>\n    <span *ngIf="isEditable()">\n        <div *ngIf="!inEdit" (click)="setEditMode(true)" class="adf-textitem-readonly" [attr.data-automation-id]="\'card-textitem-edit-toggle-\' + property.key" fxLayout="row" fxLayoutAlign="space-between center">\n            <span [attr.data-automation-id]="\'card-textitem-value-\' + property.key">\n                <span *ngIf="showProperty(); else elseEmptyValueBlock">{{ property.displayValue }}</span>\n            </span>\n            <mat-icon fxFlex="0 0 auto"\n                [attr.data-automation-id]="\'card-textitem-edit-icon-\' + property.key"\n                [attr.title]="\'CORE.METADATA.ACTIONS.EDIT\' | translate"\n                class="adf-textitem-icon">create</mat-icon>\n        </div>\n        <div *ngIf="inEdit" class="adf-textitem-editable">\n            <div class="adf-textitem-editable-controls">\n                <mat-form-field floatPlaceholder="never" class="adf-input-container">\n                    <input *ngIf="!property.multiline" #editorInput\n                        matInput\n                        class="adf-input"\n                        [placeholder]="property.default | translate"\n                        [(ngModel)]="editedValue"\n                        [attr.data-automation-id]="\'card-textitem-editinput-\' + property.key">\n                    <textarea *ngIf="property.multiline" #editorInput\n                        matInput\n                        matTextareaAutosize\n                        matAutosizeMaxRows="1"\n                        matAutosizeMaxRows="5"\n                        class="adf-textarea"\n                        [placeholder]="property.default | translate"\n                        [(ngModel)]="editedValue"\n                        [attr.data-automation-id]="\'card-textitem-edittextarea-\' + property.key"></textarea>\n                </mat-form-field>\n                <mat-icon\n                    class="adf-textitem-icon adf-update-icon"\n                    (click)="update()"\n                    [attr.title]="\'CORE.METADATA.ACTIONS.SAVE\' | translate"\n                    [attr.data-automation-id]="\'card-textitem-update-\' + property.key">done</mat-icon>\n                <mat-icon\n                    class="adf-textitem-icon adf-reset-icon"\n                    (click)="reset()"\n                    [attr.title]="\'CORE.METADATA.ACTIONS.CANCEL\' | translate"\n                    [attr.data-automation-id]="\'card-textitem-reset-\' + property.key">clear</mat-icon>\n            </div>\n            <mat-error class="adf-textitem-editable-error" *ngIf="hasErrors()">\n                <ul>\n                    <li *ngFor="let errorMessage of errorMessages">{{ errorMessage | translate }}</li>\n                </ul>\n            </mat-error>\n        </div>\n    </span>\n    <ng-template #elseEmptyValueBlock>\n        <span class="adf-textitem-default-value">{{ property.default | translate }}</span>\n    </ng-template>\n</div>\n',styles:[""]}]}],Zn.ctorParameters=function(){return[{type:zn}]},Zn.propDecorators={property:[{type:l.Input}],editable:[{type:l.Input}],displayEmpty:[{type:l.Input}],editorInput:[{type:l.ViewChild,args:["editorInput"]}]};var ti=function(){function e(){}return e.fromType=function(e){return ei(e)},e}(),ni=function(){function e(){this.defaultValue=undefined,this.types={}}return e.prototype.getComponentTypeResolver=function(e,t){return void 0===t&&(t=this.defaultValue),e&&this.types[e]||ti.fromType(t)},e.prototype.setComponentTypeResolver=function(e,t,n){if(void 0===n&&(n=!1),!e)throw new Error("type is null or not defined");if(!t)throw new Error("resolver is null or not defined");if(this.types[e]&&!n)throw new Error("already mapped, use override option if you intend replacing existing mapping.");this.types[e]=t},e.prototype.resolveComponentType=function(e,t){return void 0===t&&(t=this.defaultValue),e?this.getComponentTypeResolver(e.type,t)(e):t},e}(),ii=function(t){function e(){var e=t.apply(this,ae(arguments))||this;return e.defaultValue=Zn,e.types={text:ti.fromType(Zn),"int":ti.fromType(Zn),"float":ti.fromType(Zn),date:ti.fromType($n),datetime:ti.fromType($n),bool:ti.fromType(Hn),map:ti.fromType(Jn)},e}return te(e,t),e}(ni);ii.decorators=[{type:l.Injectable}],ii.ctorParameters=function(){return[]};var ri=function(e){this.viewContainerRef=e};ri.decorators=[{type:l.Directive,args:[{selector:"[adf-card-view-content-proxy]"}]}],ri.ctorParameters=function(){return[{type:l.ViewContainerRef}]};var oi=function(){function e(e,t){var n=this;this.cardItemTypeService=e,this.resolver=t,this.displayEmpty=!0,this.loaded=!1,this.componentReference=null;["ngOnInit","ngDoCheck","ngAfterContentInit","ngAfterContentChecked","ngAfterViewInit","ngAfterViewChecked","ngOnDestroy"].forEach(function(e){n[e]=n.proxy.bind(n,e)})}return e.prototype.ngOnChanges=function(t){var r=this;this.loaded||(this.loadComponent(),this.loaded=!0),Object.keys(t).map(function(e){return[e,t[e]]}).forEach(function(e){var t=oe(e,2),n=t[0],i=t[1];r.componentReference.instance[n]=i.currentValue}),this.proxy("ngOnChanges",t)},e.prototype.loadComponent=function(){var e=this.cardItemTypeService.resolveComponentType(this.property),t=this.resolver.resolveComponentFactory(e);this.componentReference=this.content.viewContainerRef.createComponent(t),this.componentReference.instance.editable=this.editable,this.componentReference.instance.property=this.property,this.componentReference.instance.displayEmpty=this.displayEmpty},e.prototype.proxy=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.componentReference.instance[e]&&this.componentReference.instance[e].apply(this.componentReference.instance,t)},e}();oi.decorators=[{type:l.Component,args:[{selector:"adf-card-view-item-dispatcher",template:"<ng-template adf-card-view-content-proxy></ng-template>"}]}],oi.ctorParameters=function(){return[{type:ii},{type:l.ComponentFactoryResolver}]},oi.propDecorators={property:[{type:l.Input}],editable:[{type:l.Input}],displayEmpty:[{type:l.Input}],content:[{type:l.ViewChild,args:[ri]}]};var ai=function(){function e(){this.message="CORE.CARDVIEW.VALIDATORS.INT_VALIDATION_ERROR"}return e.prototype.isValid=function(e){return!isNaN(e)&&(0|(t=parseFloat(e)))===t;var t},e}(),si=function(){function e(){this.message="CORE.CARDVIEW.VALIDATORS.FLOAT_VALIDATION_ERROR"}return e.prototype.isValid=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e}(),li=function(t){function e(){var e=t.apply(this,ae(arguments))||this;return e.type="datetime",e.format="MMM DD YYYY HH:mm",e}return te(e,t),e}(Gn),ui=function(n){function e(e){var t=n.call(this,e)||this;return t.type="float",t.validators.push(new si),e.value&&(t.value=parseFloat(e.value)),t}return te(e,n),e}(Qn),ci=function(n){function e(e){var t=n.call(this,e)||this;return t.type="int",t.validators.push(new ai),e.value&&(t.value=parseInt(e.value,10)),t}return te(e,n),e}(Qn),pi=function(){};pi.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,g.FormsModule,A.FlexLayoutModule,a.TranslateModule,h.MatDatepickerModule,h.MatNativeDateModule,h.MatCheckboxModule,h.MatInputModule,h.MatIconModule,h.MatButtonModule,v.MatDatetimepickerModule,v.MatNativeDatetimeModule],declarations:[Bn,Hn,$n,Jn,Zn,oi,ri],entryComponents:[Hn,$n,Jn,Zn],exports:[Bn,Hn,$n,Jn,Zn]}]}],pi.ctorParameters=function(){return[]};var di=function(){};di.decorators=[{type:l.NgModule,args:[{imports:[t.HttpClientModule],providers:[ge]}]}],di.ctorParameters=function(){return[]};var mi=function(){function e(e){this.isDefaultPrevented=!1,this.form=e}return Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this.isDefaultPrevented},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){this.isDefaultPrevented=!0},e}(),fi=function(i){function e(e,t){var n=i.call(this,e)||this;return n.error=t,n}return te(e,i),e}(mi),hi=function(i){function e(e,t){var n=i.call(this,e)||this;return n.field=t,n}return te(e,i),e}(mi),gi=function(i){function e(e,t){var n=i.call(this,e,t)||this;return n.isValid=!0,n}return te(e,i),e}(hi),yi=function(n){function e(e){var t=n.call(this,e)||this;return t.isValid=!0,t}return te(e,n),e}(mi),vi=function(o){function e(e,t,n,i){var r=o.call(this,e,t)||this;return r.row=n,r.summary=i,r.isValid=!0,r}return te(e,o),e}(hi),bi=function(){function o(e,t){this.apiService=e,this.logService=t}return o.prototype.createEcmTypeForActivitiForm=function(n,i){var r=this;return u.Observable.create(function(t){r.searchActivitiEcmModel().subscribe(function(e){e?r.saveFomType(n,i).subscribe(function(e){t.next(e),t.complete()}):r.createActivitiEcmModel(n,i).subscribe(function(e){t.next(e),t.complete()})},function(e){return r.handleError(e)})})},o.prototype.searchActivitiEcmModel=function(){return this.getEcmModels().map(function(e){return e.list.entries.find(function(e){return e.entry.name===o.MODEL_NAME})})},o.prototype.createActivitiEcmModel=function(n,i){var r=this;return u.Observable.create(function(t){r.createEcmModel(o.MODEL_NAME,o.MODEL_NAMESPACE).subscribe(function(e){r.logService.info("model created",e),r.activeEcmModel(o.MODEL_NAME).subscribe(function(e){r.logService.info("model active",e),r.createEcmTypeWithProperties(n,i).subscribe(function(e){t.next(e),t.complete()})},function(e){return r.handleError(e)})},function(e){return r.handleError(e)})})},o.prototype.saveFomType=function(n,i){var r=this;return u.Observable.create(function(t){r.searchEcmType(n,o.MODEL_NAME).subscribe(function(e){r.logService.info("custom types",e),e?(t.next(e),t.complete()):r.createEcmTypeWithProperties(n,i).subscribe(function(e){t.next(e),t.complete()})},function(e){return r.handleError(e)})})},o.prototype.createEcmTypeWithProperties=function(e,i){var r=this;return u.Observable.create(function(n){r.createEcmType(e,o.MODEL_NAME,o.TYPE_MODEL).subscribe(function(t){r.logService.info("type Created",t),r.addPropertyToAType(o.MODEL_NAME,e,i).subscribe(function(e){r.logService.info("property Added",e),n.next(t),n.complete()},function(e){return r.handleError(e)})},function(e){return r.handleError(e)})})},o.prototype.searchEcmType=function(t,e){return this.getEcmType(e).map(function(e){return e.list.entries.find(function(e){return e.entry.prefixedName===t||e.entry.title===t})})},o.prototype.activeEcmModel=function(e){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.activateCustomModel(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},o.prototype.createEcmModel=function(e,t){var n=this;return u.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.createCustomModel("DRAFT","",e,e,t)).map(this.toJson)["catch"](function(e){return n.handleError(e)})},o.prototype.getEcmModels=function(){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.getAllCustomModel()).map(this.toJson)["catch"](function(e){return t.handleError(e)})},o.prototype.getEcmType=function(e){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.getAllCustomType(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},o.prototype.createEcmType=function(e,t,n){var i=this,r=this.cleanNameType(e);return u.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.createCustomType(t,r,n,e,"")).map(this.toJson)["catch"](function(e){return i.handleError(e)})},o.prototype.addPropertyToAType=function(e,t,n){var i=this,r=this.cleanNameType(t),o=[];if(n&&n.values)for(var a in n.values)a&&o.push({name:a,title:a,description:a,dataType:"d:text",multiValued:!1,mandatory:!1,mandatoryEnforced:!1});return u.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.addPropertyToType(e,r,o)).map(this.toJson)["catch"](function(e){return i.handleError(e)})},o.prototype.cleanNameType=function(e){var t=e;return-1!==e.indexOf(":")&&(t=e.split(":")[1]),t.replace(/[^a-zA-Z ]/g,"")},o.prototype.toJson=function(e){return e&&e||{}},o.prototype.handleError=function(e){this.logService.error(e)},o}();bi.MODEL_NAMESPACE="activitiForms",bi.MODEL_NAME="activitiFormsModel",bi.TYPE_MODEL="cm:folder",bi.decorators=[{type:l.Injectable}],bi.ctorParameters=function(){return[{type:ve},{type:Ee}]};var wi=function(){function e(e,t,n,i,r){this.reusable=!1,this.newVersion=!1,this.formImageBase64="",this.formRepresentation={id:e,name:t,description:"",version:1,lastUpdatedBy:1,lastUpdatedByFullName:n,lastUpdated:i,stencilSetId:0,referenceId:null,formDefinition:{fields:[{name:"Label",type:"container",fieldType:"ContainerRepresentation",numberOfColumns:2,required:!1,readOnly:!1,sizeX:2,sizeY:1,row:-1,col:-1,fields:{1:this.metadataToFields(r)}}],gridsterForm:!1,javascriptEvents:[],metadata:{},outcomes:[],className:"",style:"",tabs:[],variables:[]}}}return e.prototype.metadataToFields=function(e){var n=[];return e&&e.forEach(function(e){if(e){var t={type:"text",id:e.name,name:e.name,required:!1,readOnly:!1,sizeX:1,sizeY:1,row:-1,col:-1,colspan:1,params:{existingColspan:1,maxColspan:2},layout:{colspan:1,row:-1,column:-1}};n.push(t)}}),n},e}(),Ei=function(){function t(){}return t.isReadOnlyType=function(e){return-1<t.READONLY_TYPES.indexOf(e)},t.isContainerType=function(e){return e===t.CONTAINER||e===t.GROUP},t}();Ei.CONTAINER="container",Ei.GROUP="group",Ei.DYNAMIC_TABLE="dynamic-table",Ei.TEXT="text",Ei.MULTILINE_TEXT="multi-line-text",Ei.DROPDOWN="dropdown",Ei.HYPERLINK="hyperlink",Ei.RADIO_BUTTONS="radio-buttons",Ei.DISPLAY_VALUE="readonly",Ei.READONLY_TEXT="readonly-text",Ei.UPLOAD="upload",Ei.TYPEAHEAD="typeahead",Ei.FUNCTIONAL_GROUP="functional-group",Ei.PEOPLE="people",Ei.BOOLEAN="boolean",Ei.NUMBER="integer",Ei.DATE="date",Ei.AMOUNT="amount",Ei.DOCUMENT="document",Ei.DATETIME="datetime",Ei.READONLY_TYPES=[Ei.HYPERLINK,Ei.DISPLAY_VALUE,Ei.READONLY_TEXT];var Ii=function(e,t){this.form=e,(this.json=t)&&(this.fieldType=t.fieldType,this.id=t.id,this.name=t.name,this.type=t.type,this.tab=t.tab)},Ci=function(){function e(){this.size=12,this.fields=[],this.colspan=1,this.rowspan=1}return e.prototype.hasFields=function(){return this.fields&&0<this.fields.length},e}(),Si=function(){function e(e){this.message="",this.attributes=null,this.message=e&&e.message?e.message:"",this.attributes=new Map}return e.prototype.isActive=function(){return!!this.message},e.prototype.getAttributesAsJsonObj=function(){var e={};if(0<this.attributes.size){var n=Object.create(null);this.attributes.forEach(function(e,t){n[t]=e}),e=JSON.stringify(n)}return e},e}(),Ti=function(){function e(){this.supportedTypes=[Ei.TEXT,Ei.MULTILINE_TEXT,Ei.NUMBER,Ei.BOOLEAN,Ei.TYPEAHEAD,Ei.DROPDOWN,Ei.PEOPLE,Ei.FUNCTIONAL_GROUP,Ei.RADIO_BUTTONS,Ei.UPLOAD,Ei.AMOUNT,Ei.DYNAMIC_TABLE,Ei.DATE,Ei.DATETIME]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&e.required},e.prototype.validate=function(t){if(this.isSupported(t)&&t.isVisible){if(t.type===Ei.DROPDOWN&&t.hasEmptyValue&&t.emptyOption&&t.value===t.emptyOption.id)return!1;if(t.type===Ei.RADIO_BUTTONS)return!!t.options.find(function(e){return e.id===t.value});if(t.type===Ei.UPLOAD)return t.value&&0<t.value.length;if(t.type===Ei.DYNAMIC_TABLE)return t.value&&t.value instanceof Array&&0<t.value.length;if(t.type===Ei.BOOLEAN)return!!t.value;if(null===t.value||t.value===undefined||""===t.value)return!1}return!0},e}(),xi=function(){function e(){this.supportedTypes=[Ei.NUMBER,Ei.AMOUNT]}return e.isNumber=function(e){return null!==e&&e!==undefined&&""!==e&&!isNaN(+e)},e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)},e.prototype.validate=function(e){if(this.isSupported(e)&&e.isVisible){if(null===e.value||e.value===undefined||""===e.value)return!0;var t=""+e.value,n=new RegExp(/^-?\d+$/);return e.enableFractions&&(n=new RegExp(/^-?[0-9]+(\.[0-9]{1,2})?$/)),t.match(n)?!0:!(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_NUMBER")}return!0},e}(),Oi=function(){function t(){this.supportedTypes=[Ei.DATE]}return t.isValidDate=function(e,t){return void 0===t&&(t="D-M-YYYY"),!!e&&O(e,t,!0).isValid()},t.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)},t.prototype.validate=function(e){return!(this.isSupported(e)&&e.value&&e.isVisible)||(!!t.isValidDate(e.value,e.dateDisplayFormat)||(e.validationSummary.message=e.dateDisplayFormat,!1))},t}(),Ai=function(){function e(){this.supportedTypes=[Ei.DATE]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&!!e.minValue},e.prototype.validate=function(e){var t=!0;if(this.isSupported(e)&&e.value&&e.isVisible){var n=e.dateDisplayFormat;t=Oi.isValidDate(e.value,n)?this.checkDate(e,n):!(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_DATE")}return t},e.prototype.checkDate=function(e,t){var n,i=!0;n="string"==typeof e.value?O(e.value.split("T")[0],t):e.value;var r=O(e.minValue,"DD-MM-YYYY");return n.isBefore(r)&&(e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_LESS_THAN",e.validationSummary.attributes.set("minValue",e.minValue.toLocaleString()),i=!1),i},e}(),Pi=function(){function e(){this.MAX_DATE_FORMAT="DD-MM-YYYY",this.supportedTypes=[Ei.DATE]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&!!e.maxValue},e.prototype.validate=function(e){if(this.isSupported(e)&&e.value&&e.isVisible){var t=e.dateDisplayFormat;if(!Oi.isValidDate(e.value,t))return!(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_DATE");var n=void 0;n="string"==typeof e.value?O(e.value.split("T")[0],t):e.value;var i=O(e.maxValue,this.MAX_DATE_FORMAT);if(n.isAfter(i))return e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_GREATER_THAN",e.validationSummary.attributes.set("maxValue",e.maxValue.toLocaleString()),!1}return!0},e}(),Di=function(){function e(){this.supportedTypes=[Ei.DATETIME]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&!!e.minValue},e.prototype.validate=function(e){var t=!0;if(this.isSupported(e)&&e.value&&e.isVisible){var n=e.dateDisplayFormat;t=Oi.isValidDate(e.value,n)?this.checkDateTime(e,n):!(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_DATE")}return t},e.prototype.checkDateTime=function(e,t){var n,i=!0;n="string"==typeof e.value?O(e.value,t):e.value;var r=O(e.minValue,"YYYY-MM-DD hh:mm A");return n.isBefore(r)&&(e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_LESS_THAN",e.validationSummary.attributes.set("minValue",r.format("D-M-YYYY hh-mm A")),i=!1),i},e}(),Fi=function(){function e(){this.supportedTypes=[Ei.DATETIME]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&!!e.maxValue},e.prototype.validate=function(e){var t=!0;if(this.isSupported(e)&&e.value&&e.isVisible){var n=e.dateDisplayFormat;t=Oi.isValidDate(e.value,n)?this.checkDateTime(e,n):!(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_DATE")}return t},e.prototype.checkDateTime=function(e,t){var n,i=!0;n="string"==typeof e.value?O(e.value,t):e.value;var r=O(e.maxValue,"YYYY-MM-DD hh:mm A");return n.isAfter(r)&&(e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_GREATER_THAN",e.validationSummary.attributes.set("maxValue",r.format("D-M-YYYY hh-mm A")),i=!1),i},e}(),Ri=function(){function e(){this.supportedTypes=[Ei.TEXT,Ei.MULTILINE_TEXT]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&0<e.minLength},e.prototype.validate=function(e){return!(this.isSupported(e)&&e.value&&e.isVisible)||(e.value.length>=e.minLength||(e.validationSummary.message="FORM.FIELD.VALIDATOR.AT_LEAST_LONG",e.validationSummary.attributes.set("minLength",e.minLength.toLocaleString()),!1))},e}(),ki=function(){function e(){this.supportedTypes=[Ei.TEXT,Ei.MULTILINE_TEXT]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&0<e.maxLength},e.prototype.validate=function(e){return!(this.isSupported(e)&&e.value&&e.isVisible)||(e.value.length<=e.maxLength||(e.validationSummary.message="FORM.FIELD.VALIDATOR.NO_LONGER_THAN",e.validationSummary.attributes.set("maxLength",e.maxLength.toLocaleString()),!1))},e}(),_i=function(){function e(){this.supportedTypes=[Ei.NUMBER,Ei.AMOUNT]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&xi.isNumber(e.minValue)},e.prototype.validate=function(e){if(this.isSupported(e)&&e.value&&e.isVisible){var t=+e.value;return+e.minValue<=t||(e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_LESS_THAN",e.validationSummary.attributes.set("minValue",e.minValue.toLocaleString()),!1)}return!0},e}(),Mi=function(){function e(){this.supportedTypes=[Ei.NUMBER,Ei.AMOUNT]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&xi.isNumber(e.maxValue)},e.prototype.validate=function(e){return!(this.isSupported(e)&&e.value&&e.isVisible)||(+e.value<=+e.maxValue||(e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_GREATER_THAN",e.validationSummary.attributes.set("maxValue",e.maxValue.toLocaleString()),!1))},e}(),Li=function(){function e(){this.supportedTypes=[Ei.TEXT,Ei.MULTILINE_TEXT]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)&&!!e.regexPattern},e.prototype.validate=function(e){return!(this.isSupported(e)&&e.value&&e.isVisible)||(!!(0<e.value.length&&e.value.match(new RegExp("^"+e.regexPattern+"$")))||!(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_VALUE"))},e}(),Vi=function(){function e(){this.supportedTypes=[Ei.TYPEAHEAD]}return e.prototype.isSupported=function(e){return e&&-1<this.supportedTypes.indexOf(e.type)},e.prototype.hasValidNameOrValidId=function(e){return this.hasValidName(e)||this.hasValidId(e)},e.prototype.hasValidName=function(t){return!!t.options.find(function(e){return e.name&&e.name.toLocaleLowerCase()===t.value.toLocaleLowerCase()})},e.prototype.hasValidId=function(e){return!!e.options[e.value-1]},e.prototype.hasStringValue=function(e){return e.value&&"string"==typeof e.value},e.prototype.hasOptions=function(e){return e.options&&0<e.options.length},e.prototype.validate=function(e){return!(this.isSupported(e)&&e.isVisible&&this.hasStringValue(e)&&this.hasOptions(e)&&!this.hasValidNameOrValidId(e))||!(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_VALUE")},e}(),Ni=[new Ti,new xi,new Ri,new ki,new _i,new Mi,new Li,new Oi,new Ai,new Pi,new Vi,new Di,new Fi],Ui=function(o){function a(e,t){var n=o.call(this,e,t)||this;if(n._readOnly=!1,n._isValid=!0,n._required=!1,n.defaultDateFormat="D-M-YYYY",n.deafultDateTimeFormat="D-M-YYYY hh:mm A",n.rowspan=1,n.colspan=1,n.placeholder=null,n.minLength=0,n.maxLength=0,n.options=[],n.params={},n.isVisible=!0,n.visibilityCondition=null,n.enableFractions=!1,n.currency=null,n.dateDisplayFormat=n.dateDisplayFormat||n.defaultDateFormat,n.numberOfColumns=1,n.fields=[],n.columns=[],t){if(n.fieldType=t.fieldType,n.id=t.id,n.name=t.name,n.type=t.type,n._required=t.required,n._readOnly=t.readOnly||"readonly"===t.type,n.overrideId=t.overrideId,n.tab=t.tab,n.restUrl=t.restUrl,n.restResponsePath=t.restResponsePath,n.restIdProperty=t.restIdProperty,n.restLabelProperty=t.restLabelProperty,n.colspan=t.colspan,n.minLength=t.minLength||0,n.maxLength=t.maxLength||0,n.minValue=t.minValue,n.maxValue=t.maxValue,n.regexPattern=t.regexPattern,n.options=t.options||[],n.hasEmptyValue=t.hasEmptyValue,n.className=t.className,n.optionType=t.optionType,n.params=t.params||{},n.hyperlinkUrl=t.hyperlinkUrl,n.displayText=t.displayText,n.visibilityCondition=t.visibilityCondition,n.enableFractions=t.enableFractions,n.currency=t.currency,n.dateDisplayFormat=t.dateDisplayFormat||n.getDefaultDateFormat(t),n._value=n.parseValue(t),n.validationSummary=new Si,t.placeholder&&""!==t.placeholder&&"null"!==t.placeholder&&(n.placeholder=t.placeholder),Ei.isReadOnlyType(t.type)&&t.params&&t.params.field)if(e.processVariables){var i=n.getProcessVariableValue(t.params.field,e);i&&(n.value=i)}else if(t.params.field.responseVariable){var r=n.getVariablesValue(t.params.field.name,e);r&&(n.value=r)}Ei.isContainerType(t.type)&&n.containerFactory(t,e)}return n.hasEmptyValue&&n.options&&0<n.options.length&&(n.emptyOption=n.options[0]),n.updateForm(),n}return te(a,o),Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.updateForm()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readOnly",{get:function(){return!(!this.form||!this.form.readOnly)||this._readOnly},set:function(e){this._readOnly=e,this.updateForm()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"required",{get:function(){return this._required},set:function(e){this._required=e,this.updateForm()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),a.prototype.markAsInvalid=function(){this._isValid=!1},a.prototype.validate=function(){this.validationSummary=new Si;var e,t,n=this.form.fieldValidators||[];try{for(var i=re(n),r=i.next();!r.done;r=i.next()){if(!r.value.validate(this))return this._isValid=!1,this._isValid}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=i["return"])&&t.call(i)}finally{if(e)throw e.error}}return this._isValid=!0,this._isValid},a.prototype.getDefaultDateFormat=function(e){var t=e.type;return Ei.isReadOnlyType(e.type)&&e.params&&e.params.field&&(t=e.params.field.type),t===Ei.DATETIME?this.deafultDateTimeFormat:this.defaultDateFormat},a.prototype.isTypeaHeadFieldType=function(e){return"typeahead"===e},a.prototype.getFieldNameWithLabel=function(e){return e+"_LABEL"},a.prototype.getProcessVariableValue=function(e,t){var n=e.name;return this.isTypeaHeadFieldType(e.type)&&(n=this.getFieldNameWithLabel(e.id)),this.findProcessVariableValue(n,t)},a.prototype.getVariablesValue=function(t,e){var n=e.json.variables.find(function(e){return e.name===t});return n?"boolean"===n.type?JSON.parse(n.value):n.value:null},a.prototype.findProcessVariableValue=function(t,e){if(e.processVariables){var n=e.processVariables.find(function(e){return e.name===t});if(n)return"boolean"===n.type?JSON.parse(n.value):n.value}return undefined},a.prototype.containerFactory=function(e,t){var n=this;if(this.numberOfColumns=e.numberOfColumns||1,this.fields=e.fields,this.rowspan=1,this.colspan=1,e.fields)for(var i in e.fields)if(e.fields.hasOwnProperty(i)){var r=new Ci,o=(e.fields[i]||[]).map(function(e){return new a(t,e)});r.fields=o,r.rowspan=e.fields[i].length,r.fields.forEach(function(e){n.colspan=e.colspan>n.colspan?e.colspan:n.colspan}),this.rowspan=this.rowspan<r.rowspan?r.rowspan:this.rowspan,this.columns.push(r)}},a.prototype.parseValue=function(e){var t=e.value;if(e.type===Ei.DROPDOWN&&(e.hasEmptyValue&&e.options&&0<(e.options||[]).length)){var n=e.options[0];""===t||t===n.id||t===n.name?t=n.id:t.id&&t.name&&(t=t.id)}if(e.type===Ei.RADIO_BUTTONS){var i=this.options.filter(function(e){return e.id===t||e.name===t||t&&(e.id===t.id||e.name===t.name)});t=0<i.length?i[0].id:this.options[0]?this.options[0].id:e.value}if((this.isDateField(e)||this.isDateTimeField(e))&&t){var r=void 0;(r=xi.isNumber(t)?O(t):this.isDateTimeField(e)?O(t,"YYYY-MM-DD hh:mm A"):O(t.split("T")[0],"YYYY-M-D"))&&r.isValid()&&(t=r.format(this.dateDisplayFormat))}return t},a.prototype.updateForm=function(){var t=this;if(this.form){switch(this.type){case Ei.DROPDOWN:if("empty"===this.value||""===this.value)this.form.values[this.id]={};else{var e=this.options.filter(function(e){return e.id===t.value});0<e.length&&(this.form.values[this.id]=e[0])}break;case Ei.RADIO_BUTTONS:var n=this.options.filter(function(e){return e.id===t.value});0<n.length&&(this.form.values[this.id]=n[0]);break;case Ei.UPLOAD:this.value&&0<this.value.length?this.form.values[this.id]=this.value.map(function(e){return e.id}).join(","):this.form.values[this.id]=null;break;case Ei.TYPEAHEAD:var i=this.options.filter(function(e){return e.id===t.value||e.name===t.value});0<i.length?this.form.values[this.id]=i[0]:0<this.options.length&&(this.form.values[this.id]=null);break;case Ei.DATE:var r=O(this.value,this.dateDisplayFormat,!0);r&&r.isValid()?this.form.values[this.id]=r.format("YYYY-MM-DD")+"T00:00:00.000Z":(this.form.values[this.id]=null,this._value=this.value);break;case Ei.DATETIME:var o=O(this.value,this.dateDisplayFormat,!0);o&&o.isValid()?this.form.values[this.id]=o.format("YYYY-MM-DDTHH:mm:ssZ"):(this.form.values[this.id]=null,this._value=this.value);break;case Ei.NUMBER:this.form.values[this.id]=parseInt(this.value,10);break;case Ei.AMOUNT:this.form.values[this.id]=this.enableFractions?parseFloat(this.value):parseInt(this.value,10);break;default:Ei.isReadOnlyType(this.type)||this.isInvalidFieldType(this.type)||(this.form.values[this.id]=this.value)}this.form.onFormFieldChanged(this)}},a.prototype.isInvalidFieldType=function(e){return"container"===e},a.prototype.getOptionName=function(){var t=this,e=this.options.find(function(e){return e.id===t.value});return e?e.name:null},a.prototype.hasOptions=function(){return this.options&&0<this.options.length},a.prototype.isDateField=function(e){return e.params&&e.params.field&&e.params.field.type===Ei.DATE||e.type===Ei.DATE},a.prototype.isDateTimeField=function(e){return e.params&&e.params.field&&e.params.field.type===Ei.DATETIME||e.type===Ei.DATETIME},a}(Ii),Bi=function(n){function e(e){var t=n.call(this,e.form,e.json)||this;return e&&(t.field=e),t}return te(e,n),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.field.isVisible},enumerable:!0,configurable:!0}),e}(Ii),ji=function(i){function e(e,t){var n=i.call(this,e,t)||this;return n.isSystem=!1,n.isSelected=!1,t&&(n.isSystem=!!t.isSystem,n.isSelected=!(!e||t.name!==e.selectedOutcome)),n}return te(e,i),e}(Ii);ji.SAVE_ACTION="Save",ji.COMPLETE_ACTION="Complete",ji.START_PROCESS_ACTION="Start Process";var Yi=function(i){function e(e,t){var n=i.call(this,e,t)||this;return n.isVisible=!0,n.fields=[],t&&(n.title=t.title,n.visibilityCondition=t.visibilityCondition),n}return te(e,i),e.prototype.hasContent=function(){return this.fields&&0<this.fields.length},e}(Ii),qi=function(){function m(e,t,n,i){void 0===n&&(n=!1);var r=this;if(this.formService=i,this.taskName=m.UNSET_TASK_NAME,this._isValid=!0,this.readOnly=!1,this.tabs=[],this.fields=[],this.outcomes=[],this.customFieldTemplates={},this.fieldValidators=ae(Ni),this.values={},this.readOnly=n,e){this.json=e,this.id=e.id,this.name=e.name,this.taskId=e.taskId,this.taskName=e.taskName||e.name||m.UNSET_TASK_NAME,this.processDefinitionId=e.processDefinitionId,this.customFieldTemplates=e.customFieldTemplates||{},this.selectedOutcome=e.selectedOutcome||{},this.className=e.className||"";var o={};this.processVariables=e.processVariables,this.tabs=(e.tabs||[]).map(function(e){var t=new Yi(r,e);return o[t.id]=t}),this.fields=this.parseRootFields(e),t&&this.loadData(t);for(var a=0;a<this.fields.length;a++){var s=this.fields[a];if(s.tab){var l=o[s.tab];l&&l.fields.push(s)}}if(e.fields){var u=new ji(this,{id:m.SAVE_OUTCOME,name:"Save",isSystem:!0}),c=new ji(this,{id:m.COMPLETE_OUTCOME,name:"Complete",isSystem:!0}),p=new ji(this,{id:m.START_PROCESS_OUTCOME,name:"Start Process",isSystem:!0}),d=(e.outcomes||[]).map(function(e){return new ji(r,e)});this.outcomes=[u].concat(0<d.length?d:[c,p])}}this.validateForm()}return Object.defineProperty(m.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),m.prototype.hasTabs=function(){return this.tabs&&0<this.tabs.length},m.prototype.hasFields=function(){return this.fields&&0<this.fields.length},m.prototype.hasOutcomes=function(){return this.outcomes&&0<this.outcomes.length},m.prototype.onFormFieldChanged=function(e){this.validateField(e),this.formService&&this.formService.formFieldValueChanged.next(new hi(this,e))},m.prototype.getFieldById=function(t){return this.getFormFields().find(function(e){return e.id===t})},m.prototype.getFormFields=function(){for(var t=[],e=0;e<this.fields.length;e++){var n=this.fields[e];if(n instanceof Bi){var i=n;t.push(i.field),i.field.columns.forEach(function(e){t.push.apply(t,ae(e.fields))})}}return t},m.prototype.markAsInvalid=function(){this._isValid=!1},m.prototype.validateForm=function(){var e=new yi(this);if(this.formService&&this.formService.validateForm.next(e),this._isValid=e.isValid,!e.defaultPrevented&&e.isValid)for(var t=this.getFormFields(),n=0;n<t.length;n++)if(!t[n].validate())return void(this._isValid=!1)},m.prototype.validateField=function(e){if(e){var t=new gi(this,e);this.formService&&this.formService.validateFormField.next(t),t.isValid?t.defaultPrevented||(e.validate()?this.validateForm():this._isValid=!1):this._isValid=!1}},m.prototype.parseRootFields=function(e){var t=[];e.fields?t=e.fields:e.formDefinition&&e.formDefinition.fields&&(t=e.formDefinition.fields);var n,i,r=[];try{for(var o=re(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.type===Ei.DISPLAY_VALUE){if(s.params)s.params.field.type===Ei.DYNAMIC_TABLE&&r.push(new Bi(new Ui(this,s)))}else r.push(new Bi(new Ui(this,s)))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}return r},m.prototype.loadData=function(e){try{for(var t=re(this.getFormFields()),n=t.next();!n.done;n=t.next()){var i=n.value;e[i.id]&&(i.json.value=e[i.id],i.value=i.parseValue(i.json))}}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=t["return"])&&o.call(t)}finally{if(r)throw r.error}}var r,o},m}();qi.UNSET_TASK_NAME="Nameless task",qi.SAVE_OUTCOME="$save",qi.COMPLETE_OUTCOME="$complete",qi.START_PROCESS_OUTCOME="$startProcess";var zi=function(){function e(e){this._defaultPrevented=!1,this._outcome=e}return Object.defineProperty(e.prototype,"outcome",{get:function(){return this._outcome},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){this._defaultPrevented=!0},e}(),Hi=function(){function e(e){this.contentAvailable=e&&e.contentAvailable,this.created=e&&e.created,this.createdBy=e&&e.createdBy||{},this.id=e&&e.id,this.link=e&&e.link,this.mimeType=e&&e.mimeType,this.name=e&&e.name,this.previewStatus=e&&e.previewStatus,this.relatedContent=e&&e.relatedContent,this.simpleType=e&&e.simpleType,this.thumbnailStatus=e&&e.thumbnailStatus}return e.prototype.hasPreviewStatus=function(){return"supported"===this.previewStatus},e.prototype.isTypeImage=function(){return"image"===this.simpleType},e.prototype.isTypePdf=function(){return"pdf"===this.simpleType},e.prototype.isTypeDoc=function(){return"word"===this.simpleType||"content"===this.simpleType},e.prototype.isThumbnailReady=function(){return"created"===this.thumbnailStatus},e.prototype.isThumbnailSupported=function(){return this.isTypeImage()||(this.isTypePdf()||this.isTypeDoc())&&this.isThumbnailReady()},e}(),Gi=function(){function n(e,t,n){this.ecmModelService=e,this.apiService=t,this.logService=n,this.formLoaded=new o.Subject,this.formDataRefreshed=new o.Subject,this.formFieldValueChanged=new o.Subject,this.formEvents=new o.Subject,this.taskCompleted=new o.Subject,this.taskCompletedError=new o.Subject,this.taskSaved=new o.Subject,this.taskSavedError=new o.Subject,this.formContentClicked=new o.Subject,this.validateForm=new o.Subject,this.validateFormField=new o.Subject,this.validateDynamicTableRow=new o.Subject,this.executeOutcome=new o.Subject}return Object.defineProperty(n.prototype,"taskApi",{get:function(){return this.apiService.getInstance().activiti.taskApi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"modelsApi",{get:function(){return this.apiService.getInstance().activiti.modelsApi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"editorApi",{get:function(){return this.apiService.getInstance().activiti.editorApi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"processApi",{get:function(){return this.apiService.getInstance().activiti.processApi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"processInstanceVariablesApi",{get:function(){return this.apiService.getInstance().activiti.processInstanceVariablesApi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"usersWorkflowApi",{get:function(){return this.apiService.getInstance().activiti.usersWorkflowApi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupsApi",{get:function(){return this.apiService.getInstance().activiti.groupsApi},enumerable:!0,configurable:!0}),n.prototype.parseForm=function(e,t,n){if(void 0===n&&(n=!1),e){var i=new qi(e,t,n,this);return e.fields||(i.outcomes=[new ji(i,{id:"$custom",name:ji.SAVE_ACTION,isSystem:!0})]),i}return null},n.prototype.createFormFromANode=function(e){var r=this;return u.Observable.create(function(i){r.createForm(e).subscribe(function(n){r.ecmModelService.searchEcmType(e,bi.MODEL_NAME).subscribe(function(e){var t=new wi(n.id,n.name,n.lastUpdatedByFullName,n.lastUpdated,e.entry.properties);r.addFieldsToAForm(n.id,t).subscribe(function(e){i.next(e),i.complete()},function(e){return r.handleError(e)})},function(e){return r.handleError(e)})},function(e){return r.handleError(e)})})},n.prototype.createForm=function(e){var t={name:e,description:"",modelType:2,stencilSet:0};return u.Observable.fromPromise(this.modelsApi.createModel(t))},n.prototype.saveForm=function(e,t){return u.Observable.fromPromise(this.editorApi.saveForm(e,t))},n.prototype.addFieldsToAForm=function(e,t){return this.logService.log("addFieldsToAForm is deprecated in 1.7.0, use saveForm API instead"),u.Observable.fromPromise(this.editorApi.saveForm(e,t))},n.prototype.searchFrom=function(t){var n=this;return u.Observable.fromPromise(this.modelsApi.getModels({modelType:2})).map(function(e){return e.data.find(function(e){return e.name===t})})["catch"](function(e){return n.handleError(e)})},n.prototype.getForms=function(){var t=this;return u.Observable.fromPromise(this.modelsApi.getModels({modelType:2})).map(this.toJsonArray)["catch"](function(e){return t.handleError(e)})},n.prototype.getProcessDefinitions=function(){var t=this;return u.Observable.fromPromise(this.processApi.getProcessDefinitions({})).map(this.toJsonArray)["catch"](function(e){return t.handleError(e)})},n.prototype.getProcessVarablesById=function(e){var t=this;return u.Observable.fromPromise(this.processInstanceVariablesApi.getProcessInstanceVariables(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},n.prototype.getTasks=function(){var t=this;return u.Observable.fromPromise(this.taskApi.listTasks({})).map(this.toJsonArray)["catch"](function(e){return t.handleError(e)})},n.prototype.getTask=function(e){var t=this;return u.Observable.fromPromise(this.taskApi.getTask(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},n.prototype.saveTaskForm=function(e,t){var n=this,i=JSON.stringify({values:t});return u.Observable.fromPromise(this.taskApi.saveTaskForm(e,i))["catch"](function(e){return n.handleError(e)})},n.prototype.completeTaskForm=function(e,t,n){var i=this,r={values:t};n&&(r.outcome=n);var o=JSON.stringify(r);return u.Observable.fromPromise(this.taskApi.completeTaskForm(e,o))["catch"](function(e){return i.handleError(e)})},n.prototype.getTaskForm=function(e){var t=this;return u.Observable.fromPromise(this.taskApi.getTaskForm(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},n.prototype.getFormDefinitionById=function(e){var t=this;return u.Observable.fromPromise(this.editorApi.getForm(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},n.prototype.getFormDefinitionByName=function(e){var t=this,n={filter:"myReusableForms",filterText:e,modelType:2};return u.Observable.fromPromise(this.modelsApi.getModels(n)).map(this.getFormId)["catch"](function(e){return t.handleError(e)})},n.prototype.getStartFormInstance=function(e){var t=this;return u.Observable.fromPromise(this.processApi.getProcessInstanceStartForm(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},n.prototype.getProcessIntance=function(e){var t=this;return u.Observable.fromPromise(this.processApi.getProcessInstance(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},n.prototype.getStartFormDefinition=function(e){var t=this;return u.Observable.fromPromise(this.processApi.getProcessDefinitionStartForm(e)).map(this.toJson)["catch"](function(e){return t.handleError(e)})},n.prototype.getRestFieldValues=function(e,t){var n=this;return u.Observable.fromPromise(this.taskApi.getRestFieldValues(e,t))["catch"](function(e){return n.handleError(e)})},n.prototype.getRestFieldValuesByProcessId=function(e,t){var n=this;return u.Observable.fromPromise(this.processApi.getRestFieldValues(e,t))["catch"](function(e){return n.handleError(e)})},n.prototype.getRestFieldValuesColumnByProcessId=function(e,t,n){var i=this;return u.Observable.fromPromise(this.processApi.getRestTableFieldValues(e,t,n))["catch"](function(e){return i.handleError(e)})},n.prototype.getRestFieldValuesColumn=function(e,t,n){var i=this;return u.Observable.fromPromise(this.taskApi.getRestFieldValuesColumn(e,t,n))["catch"](function(e){return i.handleError(e)})},n.prototype.getUserProfileImageApi=function(e){return this.apiService.getInstance().activiti.userApi.getUserProfilePictureUrl(e)},n.prototype.getWorkflowUsers=function(e,t){var n=this,i={filter:e};return t&&(i.groupId=t),u.Observable.fromPromise(this.usersWorkflowApi.getUsers(i)).switchMap(function(e){return e.data||[]}).map(function(e){return e.userImage=n.getUserProfileImageApi(e.id),u.Observable.of(e)}).combineAll().defaultIfEmpty([])["catch"](function(e){return n.handleError(e)})},n.prototype.getWorkflowGroups=function(e,t){var n=this,i={filter:e};return t&&(i.groupId=t),u.Observable.fromPromise(this.groupsApi.getGroups(i)).map(function(e){return e.data||[]})["catch"](function(e){return n.handleError(e)})},n.prototype.getFormId=function(e){var t=null;return e&&e.data&&0<e.data.length&&(t=e.data[0].id),t},n.prototype.toJson=function(e){return e&&e||{}},n.prototype.toJsonArray=function(e){return e&&e.data||[]},n.prototype.handleError=function(e){var t=n.UNKNOWN_ERROR_MESSAGE;return e&&(t=e.message?e.message:e.status?e.status+" - "+e.statusText:n.GENERIC_ERROR_MESSAGE),this.logService.error(t),u.Observable["throw"](t)},n}();Gi.UNKNOWN_ERROR_MESSAGE="Unknown error",Gi.GENERIC_ERROR_MESSAGE="Server error",Gi.decorators=[{type:l.Injectable}],Gi.ctorParameters=function(){return[{type:bi},{type:ve},{type:Ee}]};var Wi=function(e,t){this.metadata=e,this.nodeType=t},Xi=function(){function e(e){this.apiService=e}return e.prototype.getNodeMetadata=function(e){return u.Observable.fromPromise(this.apiService.getInstance().nodes.getNodeInfo(e)).map(this.cleanMetadataFromSemicolon)},e.prototype.createNodeMetadata=function(e,t,n,i,r){var o={};for(var a in n)n[a]&&(o[t+":"+a]=n[a]);return this.createNode(r||this.generateUuid(),e,o,i)},e.prototype.createNode=function(e,t,n,i){var r={name:e,nodeType:t,properties:n,relativePath:i},o=this.apiService.getInstance();return u.Observable.fromPromise(o.nodes.addNode("-root-",r,{}))},e.prototype.generateUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e.prototype.cleanMetadataFromSemicolon=function(e){var t={};if(e&&e.properties)for(var n in e.properties)n&&(-1!==n.indexOf(":")?t[n.split(":")[1]]=e.properties[n]:t[n]=e.properties[n]);return new Wi(t,e.nodeType)},e}();Xi.decorators=[{type:l.Injectable}],Xi.ctorParameters=function(){return[{type:ve}]};var $i=function(){function e(e,t){this.apiService=e,this.logService=t}return e.prototype.refreshVisibility=function(e){var t=this;e&&e.tabs&&0<e.tabs.length&&e.tabs.map(function(e){return t.refreshEntityVisibility(e)}),e&&e.getFormFields().map(function(e){return t.refreshEntityVisibility(e)})},e.prototype.refreshEntityVisibility=function(e){var t=this.evaluateVisibility(e.form,e.visibilityCondition);e.isVisible=t},e.prototype.evaluateVisibility=function(e,t){var n=t&&(t.leftFormFieldId||t.leftRestResponseId);return!n||"null"===n||this.isFieldVisible(e,t)},e.prototype.isFieldVisible=function(e,t){var n=this.getLeftValue(e,t),i=this.getRightValue(e,t),r=this.evaluateCondition(n,i,t.operator);return t.nextCondition?this.evaluateLogicalOperation(t.nextConditionOperator,r,this.isFieldVisible(e,t.nextCondition)):r},e.prototype.getLeftValue=function(e,t){return t.leftRestResponseId&&"null"!==t.leftRestResponseId?this.getVariableValue(e,t.leftRestResponseId,this.processVarList):this.getVariableValue(e,t.leftFormFieldId,this.processVarList)||this.getFormValue(e,t.leftFormFieldId)},e.prototype.getRightValue=function(e,t){return t.rightRestResponseId?this.getVariableValue(e,t.rightRestResponseId,this.processVarList):t.rightFormFieldId?this.getFormValue(e,t.rightFormFieldId):O(t.rightValue,"YYYY-MM-DD",!0).isValid()?t.rightValue+"T00:00:00.000Z":t.rightValue},e.prototype.getFormValue=function(e,t){var n=this.getFieldValue(e.values,t);return n||(n=this.searchValueInForm(e,t)),n},e.prototype.getFieldValue=function(e,t){var n,i;return t&&0<t.indexOf("_LABEL")?e[n=t.substring(0,t.length-6)]&&(i=e[n].name):i=e[t]&&e[t].id?e[t].id:e[t],i},e.prototype.searchValueInForm=function(e,t){var n=this,i="";return e.getFormFields().forEach(function(e){n.isSearchedField(e,t)&&((i=n.getObjectValue(e,t))||(i=e.value&&e.value.id?e.value.id:e.value))}),i},e.prototype.getObjectValue=function(t,e){var n="";if(t.value&&t.value.name)n=t.value.name;else if(t.options){var i=t.options.find(function(e){return e.id===t.value});i&&(n=this.getValueFromOption(e,i))}return n},e.prototype.getValueFromOption=function(e,t){return e&&0<e.indexOf("_LABEL")?t.name:t.id},e.prototype.isSearchedField=function(e,t){var n=this.removeLabel(e,t);return!!e.id&&e.id.toUpperCase()===n.toUpperCase()},e.prototype.removeLabel=function(e,t){var n=t||"";return"RestFieldRepresentation"===e.fieldType&&0<t.indexOf("_LABEL")&&(n=t.substring(0,t.length-6)),n},e.prototype.getVariableValue=function(e,t,n){return this.getFormVariableValue(e,t)||this.getProcessVariableValue(t,n)},e.prototype.getFormVariableValue=function(e,t){if(e.json.variables){var n=e.json.variables.find(function(e){return e.name===t});return n?n.value:n}},e.prototype.getProcessVariableValue=function(t,e){if(this.processVarList){var n=this.processVarList.find(function(e){return e.id===t});return n?n.value:n}},e.prototype.evaluateLogicalOperation=function(e,t,n){switch(e){case"and":return t&&n;case"or":return t||n;case"and-not":return t&&!n;case"or-not":return t||!n;default:this.logService.error("NO valid operation! wrong op request : "+e)}},e.prototype.evaluateCondition=function(e,t,n){switch(n){case"==":return e+""==t+"";case"<":return e<t;case"!=":return e+""!=t+"";case">":return t<e;case">=":return t<=e;case"<=":return e<=t;case"empty":return!e||""===e;case"!empty":return!!e&&""!==e;default:this.logService.error("NO valid operation!")}},e.prototype.cleanProcessVariable=function(){this.processVarList=[]},e.prototype.getTaskProcessVariable=function(e){var n=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.taskFormsApi.getTaskFormVariables(e)).map(function(e){var t=n.toJson(e);return n.processVarList=t})["catch"](function(e){return n.handleError(e)})},e.prototype.toJson=function(e){return e||{}},e.prototype.handleError=function(e){return this.logService.error("Error while performing a call"),u.Observable["throw"]("Error while performing a call - Server error")},e}();$i.decorators=[{type:l.Injectable}],$i.ctorParameters=function(){return[{type:ve},{type:Ee}]};var Ki=function(){function t(e,t,n,i){this.formService=e,this.visibilityService=t,this.ecmModelService=n,this.nodeService=i,this.saveMetadata=!1,this.showTitle=!0,this.showCompleteButton=!0,this.disableCompleteButton=!1,this.disableStartProcessButton=!1,this.showSaveButton=!0,this.showDebugButton=!1,this.readOnly=!1,this.showRefreshButton=!0,this.showValidationIcon=!0,this.fieldValidators=[],this.formSaved=new l.EventEmitter,this.formCompleted=new l.EventEmitter,this.formContentClicked=new l.EventEmitter,this.formLoaded=new l.EventEmitter,this.formDataRefreshed=new l.EventEmitter,this.executeOutcome=new l.EventEmitter,this.onError=new l.EventEmitter,this.debugMode=!1}return t.prototype.hasForm=function(){return!!this.form},t.prototype.isTitleEnabled=function(){return!!(this.showTitle&&this.form&&this.form.taskName)},t.prototype.getColorForOutcome=function(e){return e===t.COMPLETE_OUTCOME_NAME?t.COMPLETE_BUTTON_COLOR:""},t.prototype.isOutcomeButtonEnabled=function(e){return!this.form.readOnly&&(!!e&&(e.name===ji.SAVE_ACTION||(e.name===ji.COMPLETE_ACTION?!this.disableCompleteButton&&this.form.isValid:e.name===ji.START_PROCESS_ACTION?!this.disableStartProcessButton&&this.form.isValid:this.form.isValid)))},t.prototype.isOutcomeButtonVisible=function(e,t){return!(!e||!e.name)&&(e.name===ji.COMPLETE_ACTION?this.showCompleteButton:t?e.isSelected:e.name===ji.SAVE_ACTION?this.showSaveButton:e.name!==ji.START_PROCESS_ACTION)},t.prototype.ngOnInit=function(){var t=this;this.formService.formContentClicked.subscribe(function(e){t.formContentClicked.emit(e)})},t.prototype.ngOnChanges=function(e){var t=e.taskId;if(t&&t.currentValue)this.getFormByTaskId(t.currentValue);else{var n=e.formId;if(n&&n.currentValue)this.getFormDefinitionByFormId(n.currentValue);else{var i=e.formName;if(i&&i.currentValue)this.getFormDefinitionByFormName(i.currentValue);else{var r=e.nodeId;if(r&&r.currentValue)this.loadFormForEcmNode(r.currentValue);else{var o=e.data;o&&o.currentValue&&this.refreshFormData()}}}}},t.prototype.onOutcomeClicked=function(e){if(!this.readOnly&&e&&this.form){if(!this.onExecuteOutcome(e))return!1;if(e.isSystem){if(e.id===t.SAVE_OUTCOME_ID)return this.saveTaskForm(),!0;if(e.id===t.COMPLETE_OUTCOME_ID)return this.completeTaskForm(),!0;if(e.id===t.START_PROCESS_OUTCOME_ID)return this.completeTaskForm(),!0;if(e.id===t.CUSTOM_OUTCOME_ID)return this.onTaskSaved(this.form),this.storeFormAsMetadata(),!0}else if(e.name)return this.onTaskSaved(this.form),this.completeTaskForm(e.name),!0}return!1},t.prototype.onRefreshClicked=function(){this.loadForm()},t.prototype.loadForm=function(){this.taskId?this.getFormByTaskId(this.taskId):this.formId?this.getFormDefinitionByFormId(this.formId):this.formName&&this.getFormDefinitionByFormName(this.formName)},t.prototype.findProcessVariablesByTaskId=function(t){var n=this;return this.formService.getTask(t).switchMap(function(e){return n.isAProcessTask(e)?n.visibilityService.getTaskProcessVariable(t):u.Observable.of({})})},t.prototype.isAProcessTask=function(e){return e.processDefinitionId&&"null"!==e.processDefinitionDeploymentId},t.prototype.getFormByTaskId=function(t){var i=this;return new Promise(function(n,e){i.findProcessVariablesByTaskId(t).subscribe(function(e){i.formService.getTaskForm(t).subscribe(function(e){var t=i.parseForm(e);i.visibilityService.refreshVisibility(t),t.validateForm(),i.form=t,i.onFormLoaded(i.form),n(i.form)},function(e){i.handleError(e),n(null)})})})},t.prototype.getFormDefinitionByFormId=function(e){var t=this;this.formService.getFormDefinitionById(e).subscribe(function(e){t.formName=e.name,t.form=t.parseForm(e),t.visibilityService.refreshVisibility(t.form),t.form.validateForm(),t.onFormLoaded(t.form)},function(e){t.handleError(e)})},t.prototype.getFormDefinitionByFormName=function(e){var t=this;this.formService.getFormDefinitionByName(e).subscribe(function(e){t.formService.getFormDefinitionById(e).subscribe(function(e){t.form=t.parseForm(e),t.visibilityService.refreshVisibility(t.form),t.form.validateForm(),t.onFormLoaded(t.form)},function(e){t.handleError(e)})},function(e){t.handleError(e)})},t.prototype.saveTaskForm=function(){var t=this;this.form&&this.form.taskId&&this.formService.saveTaskForm(this.form.taskId,this.form.values).subscribe(function(){t.onTaskSaved(t.form),t.storeFormAsMetadata()},function(e){return t.onTaskSavedError(t.form,e)})},t.prototype.completeTaskForm=function(e){var t=this;this.form&&this.form.taskId&&this.formService.completeTaskForm(this.form.taskId,this.form.values,e).subscribe(function(){t.onTaskCompleted(t.form),t.storeFormAsMetadata()},function(e){return t.onTaskCompletedError(t.form,e)})},t.prototype.handleError=function(e){this.onError.emit(e)},t.prototype.parseForm=function(e){if(e){var t=new qi(e,this.data,this.readOnly,this.formService);return e.fields||(t.outcomes=this.getFormDefinitionOutcomes(t)),this.fieldValidators&&0<this.fieldValidators.length&&(t.fieldValidators=this.fieldValidators),t}return null},t.prototype.getFormDefinitionOutcomes=function(e){return[new ji(e,{id:"$custom",name:ji.SAVE_ACTION,isSystem:!0})]},t.prototype.checkVisibility=function(e){e&&e.form&&this.visibilityService.refreshVisibility(e.form)},t.prototype.refreshFormData=function(){this.form=this.parseForm(this.form.json),this.onFormLoaded(this.form),this.onFormDataRefreshed(this.form)},t.prototype.loadFormForEcmNode=function(e){var t=this;this.nodeService.getNodeMetadata(e).subscribe(function(e){t.data=e.metadata,t.loadFormFromActiviti(e.nodeType)},this.handleError)},t.prototype.loadFormFromActiviti=function(t){var n=this;this.formService.searchFrom(t).subscribe(function(e){e?n.loadFormFromFormId(e.id):n.formService.createFormFromANode(t).subscribe(function(e){n.loadFormFromFormId(e.id)})},function(e){n.handleError(e)})},t.prototype.loadFormFromFormId=function(e){this.formId=e,this.loadForm()},t.prototype.storeFormAsMetadata=function(){var t=this;this.saveMetadata&&this.ecmModelService.createEcmTypeForActivitiForm(this.formName,this.form).subscribe(function(e){t.nodeService.createNodeMetadata(e.nodeType||e.entry.prefixedName,bi.MODEL_NAMESPACE,t.form.values,t.path,t.nameNode)},function(e){t.handleError(e)})},t.prototype.onFormLoaded=function(e){this.formLoaded.emit(e),this.formService.formLoaded.next(new mi(e))},t.prototype.onFormDataRefreshed=function(e){this.formDataRefreshed.emit(e),this.formService.formDataRefreshed.next(new mi(e))},t.prototype.onTaskSaved=function(e){this.formSaved.emit(e),this.formService.taskSaved.next(new mi(e))},t.prototype.onTaskSavedError=function(e,t){this.handleError(t),this.formService.taskSavedError.next(new fi(e,t))},t.prototype.onTaskCompleted=function(e){this.formCompleted.emit(e),this.formService.taskCompleted.next(new mi(e))},t.prototype.onTaskCompletedError=function(e,t){this.handleError(t),this.formService.taskCompletedError.next(new fi(e,t))},t.prototype.onExecuteOutcome=function(e){var t=new zi(e);return this.formService.executeOutcome.next(t),!t.defaultPrevented&&(this.executeOutcome.emit(t),!t.defaultPrevented)},t}();Ki.SAVE_OUTCOME_ID="$save",Ki.COMPLETE_OUTCOME_ID="$complete",Ki.START_PROCESS_OUTCOME_ID="$startProcess",Ki.CUSTOM_OUTCOME_ID="$custom",Ki.COMPLETE_BUTTON_COLOR="primary",Ki.COMPLETE_OUTCOME_NAME="Complete",Ki.decorators=[{type:l.Component,args:[{selector:"adf-form",template:'<div *ngIf="!hasForm()">\n    <ng-content select="[empty-form]">\n    </ng-content>\n</div>\n<div *ngIf="hasForm()" class="{{form.className}} adf-form-container">\n    <mat-card>\n        <mat-card-header>\n            <mat-card-title>\n                <h4 *ngIf="isTitleEnabled()">\n                    <div *ngIf="showRefreshButton" class="adf-form-reload-button">\n                        <button mat-icon-button (click)="onRefreshClicked()">\n                            <mat-icon>refresh</mat-icon>\n                        </button>\n                    </div>\n                    <span class="adf-form-title">{{form.taskName}}</span>\n\n                </h4>\n            </mat-card-title>\n        </mat-card-header>\n        <mat-card-content>\n            <div *ngIf="form.hasTabs()">\n                <tabs-widget [tabs]="form.tabs" (formTabChanged)="onFieldChanged($event);"></tabs-widget>\n            </div>\n\n            <div *ngIf="!form.hasTabs() && form.hasFields()">\n                <div *ngFor="let field of form.fields">\n                    <form-field [field]="field.field"></form-field>\n                </div>\n            </div>\n        </mat-card-content>\n        <mat-card-actions *ngIf="form.hasOutcomes()" class="adf-form-mat-card-actions">\n            \x3c!--[class.mdl-button--colored]="!outcome.isSystem"--\x3e\n            <button [id]="\'adf-form-\'+ outcome.name  | lowercase" *ngFor="let outcome of form.outcomes"\n                    [color]="getColorForOutcome(outcome.name)"\n                    mat-button\n                    [disabled]="!isOutcomeButtonEnabled(outcome)"\n                    [class.adf-form-hide-button]="!isOutcomeButtonVisible(outcome, form.readOnly)"\n                    (click)="onOutcomeClicked(outcome, $event)">\n                {{outcome.name | uppercase}}\n            </button>\n        </mat-card-actions>\n    </mat-card>\n</div>\n\x3c!--\nFor debugging and data visualisation purposes,\nwill be removed during future revisions\n--\x3e\n<div *ngIf="showDebugButton" class="adf-form-debug-container">\n    <mat-slide-toggle [(ngModel)]="debugMode">Debug mode</mat-slide-toggle>\n    <div *ngIf="debugMode && hasForm()">\n        <h4>Values</h4>\n        <pre>{{form.values | json}}</pre>\n\n        <h4>Form</h4>\n        <pre>{{form.json | json}}</pre>\n    </div>\n</div>\n',styles:[""],encapsulation:l.ViewEncapsulation.None}]}],Ki.ctorParameters=function(){return[{type:Gi},{type:$i},{type:bi},{type:Xi}]},Ki.propDecorators={form:[{type:l.Input}],taskId:[{type:l.Input}],nodeId:[{type:l.Input}],formId:[{type:l.Input}],formName:[{type:l.Input}],saveMetadata:[{type:l.Input}],data:[{type:l.Input}],path:[{type:l.Input}],nameNode:[{type:l.Input}],showTitle:[{type:l.Input}],showCompleteButton:[{type:l.Input}],disableCompleteButton:[{type:l.Input}],disableStartProcessButton:[{type:l.Input}],showSaveButton:[{type:l.Input}],showDebugButton:[{type:l.Input}],readOnly:[{type:l.Input}],showRefreshButton:[{type:l.Input}],showValidationIcon:[{type:l.Input}],fieldValidators:[{type:l.Input}],formSaved:[{type:l.Output}],formCompleted:[{type:l.Output}],formContentClicked:[{type:l.Output}],formLoaded:[{type:l.Output}],formDataRefreshed:[{type:l.Output}],executeOutcome:[{type:l.Output}],onError:[{type:l.Output}]};var Ji=function(){function e(e){this.formService=e,this.forms=[]}return e.prototype.ngOnChanges=function(e){this.getForms()},e.prototype.isEmpty=function(){return this.forms&&0===this.forms.length},e.prototype.getForms=function(){var n=this;this.formService.getForms().subscribe(function(e){var t;(t=n.forms).push.apply(t,ae(e))})},e}();Ji.decorators=[{type:l.Component,args:[{selector:"adf-form-list",template:'<adf-datatable *ngIf="!isEmpty()"\n    [rows]="forms">\n    <data-columns>\n        <data-column key="name" type="text" title="Name" class="ellipsis-cell" [sortable]="true"></data-column>\n        <data-column key="lastUpdatedByFullName" type="text" title="User" class="ellipsis-cell" [sortable]="true"></data-column>\n        <data-column key="lastUpdated" type="date" format="shortDate" title="Date"></data-column>\n    </data-columns>\n</adf-datatable>\n',styles:[""],encapsulation:l.ViewEncapsulation.None}]}],Ji.ctorParameters=function(){return[{type:Gi}]},Ji.propDecorators={forms:[{type:l.Input}]};var Qi=function(){function n(e,t){this.apiService=e,this.logService=t}return Object.defineProperty(n.prototype,"contentApi",{get:function(){return this.apiService.getInstance().activiti.contentApi},enumerable:!0,configurable:!0}),n.prototype.createTemporaryRawRelatedContent=function(e){var t=this;return u.Observable.fromPromise(this.contentApi.createTemporaryRawRelatedContent(e))["catch"](function(e){return t.handleError(e)})},n.prototype.getFileContent=function(e){var t=this;return u.Observable.fromPromise(this.contentApi.getContent(e))["catch"](function(e){return t.handleError(e)})},n.prototype.getFileRawContent=function(e){var t=this;return u.Observable.fromPromise(this.contentApi.getRawContent(e))["catch"](function(e){return t.handleError(e)})},n.prototype.getContentPreview=function(e){var n=this;return new u.Observable(function(t){n.contentApi.getContentPreview(e).then(function(e){t.next(e),t.complete()},function(){n.contentApi.getRawContent(e).then(function(e){t.next(e),t.complete()},function(e){t.error(e),t.complete()})})})},n.prototype.getFileRawContentUrl=function(e){return this.contentApi.getRawContentUrl(e)},n.prototype.getContentThumbnail=function(e){var t=this;return u.Observable.fromPromise(this.contentApi.getContentThumbnail(e))["catch"](function(e){return t.handleError(e)})},n.prototype.getTaskRelatedContent=function(e){var t=this;return u.Observable.fromPromise(this.contentApi.getRelatedContentForTask(e))["catch"](function(e){return t.handleError(e)})},n.prototype.getProcessRelatedContent=function(e){var t=this;return u.Observable.fromPromise(this.contentApi.getRelatedContentForProcessInstance(e))["catch"](function(e){return t.handleError(e)})},n.prototype.deleteRelatedContent=function(e){var t=this;return u.Observable.fromPromise(this.contentApi.deleteContent(e))["catch"](function(e){return t.handleError(e)})},n.prototype.createProcessRelatedContent=function(e,t,n){var i=this;return u.Observable.fromPromise(this.contentApi.createRelatedContentOnProcessInstance(e,t,n))["catch"](function(e){return i.handleError(e)})},n.prototype.createTaskRelatedContent=function(e,t,n){var i=this;return u.Observable.fromPromise(this.contentApi.createRelatedContentOnTask(e,t,n))["catch"](function(e){return i.handleError(e)})},n.prototype.toJson=function(e){return e&&e||{}},n.prototype.toJsonArray=function(e){return e&&e.data||[]},n.prototype.handleError=function(e){var t=n.UNKNOWN_ERROR_MESSAGE;return e&&(t=e.message?e.message:e.status?e.status+" - "+e.statusText:n.GENERIC_ERROR_MESSAGE),this.logService.error(t),u.Observable["throw"](t)},n}();Qi.UNKNOWN_ERROR_MESSAGE="Unknown error",Qi.GENERIC_ERROR_MESSAGE="Server error",Qi.decorators=[{type:l.Injectable}],Qi.ctorParameters=function(){return[{type:ve},{type:Ee}]};var Zi=function(){function e(e,t,n,i){this.formService=e,this.logService=t,this.contentService=n,this.processContentService=i,this.showDocumentContent=!0,this.contentClick=new l.EventEmitter,this.thumbnailLoaded=new l.EventEmitter,this.contentLoaded=new l.EventEmitter,this.error=new l.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=e.id;t&&t.currentValue&&this.loadContent(t.currentValue)},e.prototype.loadContent=function(e){var t=this;this.processContentService.getFileContent(e).subscribe(function(e){t.content=new Hi(e),t.contentLoaded.emit(t.content),t.loadThumbnailUrl(t.content)},function(e){t.error.emit(e)})},e.prototype.loadThumbnailUrl=function(e){var t=this;if(this.content.isThumbnailSupported()){var n=void 0;(n=this.content.isTypeImage()?this.processContentService.getFileRawContent(e.id):this.processContentService.getContentThumbnail(e.id))&&n.subscribe(function(e){t.content.thumbnailUrl=t.contentService.createTrustedUrl(e),t.thumbnailLoaded.emit(t.content.thumbnailUrl)},function(e){t.error.emit(e)})}},e.prototype.openViewer=function(t){var n=this,e=this.processContentService.getContentPreview(t.id);(t.isTypeImage()||t.isTypePdf())&&(e=this.processContentService.getFileRawContent(t.id)),e.subscribe(function(e){t.contentBlob=e,n.contentClick.emit(t),n.logService.info("Content clicked"+t.id),n.formService.formContentClicked.next(t)},function(e){n.error.emit(e)})},e.prototype.download=function(t){var n=this;this.processContentService.getFileRawContent(t.id).subscribe(function(e){return n.contentService.downloadBlob(e,t.name)},function(e){n.error.emit(e)})},e}();Zi.decorators=[{type:l.Component,args:[{selector:"adf-content",template:'<mat-card class="adf-content-container" *ngIf="content">\n    <mat-card-content *ngIf="showDocumentContent">\n        <div *ngIf="content.isThumbnailSupported()" >\n            <img id="thumbnailPreview" class="adf-img-upload-widget" [src]="content.thumbnailUrl" alt="{{content.name}}">\n        </div>\n        <div *ngIf="!content.isThumbnailSupported()">\n            <mat-icon>image</mat-icon>\n            <div id="unsupported-thumbnail" class="adf-content-widget-preview-text">{{ \'FORM.PREVIEW.IMAGE_NOT_AVAILABLE\' | translate }}\n            </div>\n        </div>\n        <div class="mdl-card__supporting-text upload-widget__content-text">{{content.name}}</div>\n    </mat-card-content>\n\n    <mat-card-actions>\n        <button mat-icon-button id="view" (click)="openViewer(content)">\n            <mat-icon class="mat-24">zoom_in</mat-icon>\n        </button>\n        <button mat-icon-button id="download" (click)="download(content)">\n            <mat-icon class="mat-24">file_download</mat-icon>\n        </button>\n    </mat-card-actions>\n</mat-card>\n',styles:[".adf-img-upload-widget{width:100%;height:100%;border:1px solid rgba(117,117,117,.57);-webkit-box-shadow:1px 1px 2px #ddd;box-shadow:1px 1px 2px #ddd;background-color:#fff}.adf-content-widget-preview-text{word-wrap:break-word;word-break:break-all;text-align:center}"],encapsulation:l.ViewEncapsulation.None}]}],Zi.ctorParameters=function(){return[{type:Gi},{type:Ee},{type:ke},{type:Qi}]},Zi.propDecorators={id:[{type:l.Input}],showDocumentContent:[{type:l.Input}],contentClick:[{type:l.Output}],thumbnailLoaded:[{type:l.Output}],contentLoaded:[{type:l.Output}],error:[{type:l.Output}]};var er=function(r){function e(e,t,n){var i=r.call(this,e,t,null,null)||this;return i.showOutcomeButtons=!0,i.showRefreshButton=!0,i.readOnlyForm=!1,i.outcomeClick=new l.EventEmitter,i.formContentClicked=new l.EventEmitter,i.outcomesContainer=null,i.showTitle=!1,i}return te(e,r),e.prototype.ngOnInit=function(){var t=this;this.formService.formContentClicked.subscribe(function(e){t.formContentClicked.emit(e)})},e.prototype.ngOnChanges=function(e){var t=e.processDefinitionId;if(t&&t.currentValue)return this.visibilityService.cleanProcessVariable(),void this.getStartFormDefinition(t.currentValue);var n=e.processId;return n&&n.currentValue?(this.visibilityService.cleanProcessVariable(),void this.loadStartForm(n.currentValue)):void 0},e.prototype.loadStartForm=function(e){var n=this;this.formService.getProcessIntance(e).subscribe(function(t){n.formService.getStartFormInstance(e).subscribe(function(e){n.formName=e.name,t.variables&&(e.processVariables=t.variables),n.form=n.parseForm(e),n.visibilityService.refreshVisibility(n.form),n.form.validateForm(),n.form.readOnly=n.readOnlyForm,n.onFormLoaded(n.form)},function(e){return n.handleError(e)})})},e.prototype.getStartFormDefinition=function(e){var t=this;this.formService.getStartFormDefinition(e).subscribe(function(e){t.formName=e.processDefinitionName,t.form=t.parseForm(e),t.visibilityService.refreshVisibility(t.form),t.form.validateForm(),t.form.readOnly=t.readOnlyForm,t.onFormLoaded(t.form)},function(e){return t.handleError(e)})},e.prototype.isOutcomeButtonVisible=function(e,t){return(!e||!e.isSystem||e.name!==ji.SAVE_ACTION&&e.name!==ji.COMPLETE_ACTION)&&(!(!e||e.name!==ji.START_PROCESS_ACTION)||r.prototype.isOutcomeButtonVisible.call(this,e,t))},e.prototype.saveTaskForm=function(){},e.prototype.onRefreshClicked=function(){this.processDefinitionId?(this.visibilityService.cleanProcessVariable(),this.getStartFormDefinition(this.processDefinitionId)):this.processId&&(this.visibilityService.cleanProcessVariable(),this.loadStartForm(this.processId))},e.prototype.completeTaskForm=function(e){this.outcomeClick.emit(e)},e}(Ki);er.decorators=[{type:l.Component,args:[{selector:"adf-start-form",template:'<div class="adf-start-form-container" *ngIf="hasForm()">\n    <mat-card>\n        <mat-card-header>\n            <mat-card-title>\n                <h2 *ngIf="isTitleEnabled()" class="mdl-card__title-text">{{form.taskName}}</h2>\n            </mat-card-title>\n        </mat-card-header>\n        <mat-card-content>\n            <div *ngIf="form.hasTabs()">\n                <tabs-widget [tabs]="form.tabs" (formTabChanged)="checkVisibility($event);"></tabs-widget>\n            </div>\n\n            <div *ngIf="!form.hasTabs() && form.hasFields()">\n                <div *ngFor="let field of form.fields">\n                    <form-field [field]="field.field"></form-field>\n                </div>\n            </div>\n        </mat-card-content>\n        <mat-card-content class="adf-start-form-actions" *ngIf="showOutcomeButtons && form.hasOutcomes()" #outcomesContainer>\n             <ng-content select="[form-custom-button]"></ng-content>\n            <button *ngFor="let outcome of form.outcomes"\n                    mat-button\n                    [attr.data-automation-id]="\'adf-form-\' + outcome.name  | lowercase"\n                    [disabled]="!isOutcomeButtonEnabled(outcome)"\n                    [class.mdl-button--colored]="!outcome.isSystem"\n                    [class.adf-form-hide-button]="!isOutcomeButtonVisible(outcome, form.readOnly)"\n                    (click)="onOutcomeClicked(outcome, $event)">\n                {{outcome.name}}\n            </button>\n        </mat-card-content>\n        <mat-card-actions *ngIf="showRefreshButton">\n            <button mat-button\n                    (click)="onRefreshClicked()">\n                <mat-icon>refresh</mat-icon>\n            </button>\n        </mat-card-actions>\n    </mat-card>\n</div>\n',styles:[""],encapsulation:l.ViewEncapsulation.None}]}],er.ctorParameters=function(){return[{type:Gi},{type:$i},{type:Ee}]},er.propDecorators={processDefinitionId:[{type:l.Input}],processId:[{type:l.Input}],showOutcomeButtons:[{type:l.Input}],showRefreshButton:[{type:l.Input}],readOnlyForm:[{type:l.Input}],outcomeClick:[{type:l.Output}],formContentClicked:[{type:l.Output}],outcomesContainer:[{type:l.ViewChild,args:["outcomesContainer",{}]}]};var tr={"(click)":"event($event)","(blur)":"event($event)","(change)":"event($event)","(focus)":"event($event)","(focusin)":"event($event)","(focusout)":"event($event)","(input)":"event($event)","(invalid)":"event($event)","(select)":"event($event)"},nr=function(){function n(e){this.formService=e,this.readOnly=!1,this.fieldChanged=new l.EventEmitter}return n.prototype.hasField=function(){return!!this.field},n.prototype.isRequired=function(){return!(!this.field||!this.field.required)||null},n.prototype.isValid=function(){return!!this.field.validationSummary},n.prototype.hasValue=function(){return this.field&&null!==this.field.value&&this.field.value!==undefined},n.prototype.isInvalidFieldRequired=function(){return!this.field.isValid&&!this.field.validationSummary&&this.isRequired()},n.prototype.ngAfterViewInit=function(){this.fieldChanged.emit(this.field)},n.prototype.checkVisibility=function(e){this.fieldChanged.emit(e)},n.prototype.onFieldChanged=function(e){this.fieldChanged.emit(e)},n.prototype.getHyperlinkUrl=function(e){var t=n.DEFAULT_HYPERLINK_URL;return e&&e.hyperlinkUrl&&(t=e.hyperlinkUrl,/^https?:\/\//i.test(t)||(t=""+n.DEFAULT_HYPERLINK_SCHEME+t)),t},n.prototype.getHyperlinkText=function(e){return e?e.displayText||e.hyperlinkUrl:null},n.prototype.event=function(e){this.formService.formEvents.next(e)},n}();nr.DEFAULT_HYPERLINK_URL="#",nr.DEFAULT_HYPERLINK_SCHEME="http://",nr.decorators=[{type:l.Component,args:[{selector:"base-widget",template:"",host:tr,encapsulation:l.ViewEncapsulation.None}]}],nr.ctorParameters=function(){return[{type:Gi}]},nr.propDecorators={readOnly:[{type:l.Input}],field:[{type:l.Input}],fieldChanged:[{type:l.Output}]};var ir=function(n){function e(e){var t=n.call(this,e)||this;return t.columns=[],t.isExpanded=!0,t.rowspan=1,t.colspan=1,t.field&&(t.columns=t.field.columns||[],t.isExpanded=!t.isCollapsedByDefault(),t.colspan=e.colspan,t.rowspan=e.rowspan),t}return te(e,n),e.prototype.isGroup=function(){return this.type===Ei.GROUP},e.prototype.isCollapsible=function(){var e=!1;return this.isGroup()&&this.field.params.allowCollapse&&(e=this.field.params.allowCollapse),e},e.prototype.isCollapsedByDefault=function(){var e=!1;return this.isCollapsible()&&this.field.params.collapseByDefault&&(e=this.field.params.collapseByDefault),e},e}(Bi),rr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t}return te(e,n),e.prototype.onExpanderClicked=function(){this.content&&this.content.isCollapsible()&&(this.content.isExpanded=!this.content.isExpanded)},e.prototype.ngOnInit=function(){this.field&&(this.content=new ir(this.field))},Object.defineProperty(e.prototype,"fields",{get:function(){for(var e=[],t=!0,n=0;t;){t=!1;for(var i=0;i<this.content.columns.length;i++){var r=this.content.columns[i].fields[n];r&&(t=!0),e.push(r)}n++}return e},enumerable:!0,configurable:!0}),e.prototype.getColumnWith=function(e){var t=e?e.colspan:1;return 100/this.content.json.numberOfColumns*t+"%"},e}(nr);rr.decorators=[{type:l.Component,args:[{selector:"container-widget",template:'<div [hidden]="!content?.isGroup()" class="container-widget__header">\n    <h4 class="container-widget__header-text" id="container-header"\n        [class.collapsible]="content?.isCollapsible()">\n        <button *ngIf="content?.isCollapsible()"\n                mat-icon-button\n                class="mdl-button--icon"\n                (click)="onExpanderClicked()">\n            <mat-icon>{{ content?.isExpanded ? \'expand_more\' : \'expand_less\' }}</mat-icon>\n        </button>\n        <span (click)="onExpanderClicked()" id="container-header-label">{{content.name}}</span>\n    </h4>\n</div>\n\n<section class="grid-list" *ngIf="content?.isExpanded">\n    <div class="grid-list-item" *ngFor="let field of fields" [style.width]="getColumnWith(field)">\n        <form-field *ngIf="field" [field]="field"></form-field>\n    </div>\n</section>\n\n\n',styles:[""],host:tr,encapsulation:l.ViewEncapsulation.None}]}],rr.ctorParameters=function(){return[{type:Gi}]};var or=function(){function e(){this.tabs=[],this.formTabChanged=new l.EventEmitter,this.visibleTabs=[]}return e.prototype.hasTabs=function(){return this.tabs&&0<this.tabs.length},e.prototype.ngAfterContentChecked=function(){this.filterVisibleTabs()},e.prototype.filterVisibleTabs=function(){this.visibleTabs=this.tabs.filter(function(e){return e.isVisible})},e.prototype.tabChanged=function(e){this.formTabChanged.emit(e)},e}();or.decorators=[{type:l.Component,args:[{selector:"tabs-widget",template:'<div *ngIf="hasTabs()" class="alfresco-tabs-widget">\n    <mat-tab-group>\n        <mat-tab *ngFor="let tab of visibleTabs" [label]="tab.title">\n            <div *ngFor="let field of tab.fields">\n                <form-field [field]="field.field"></form-field>\n             </div>\n        </mat-tab>\n    </mat-tab-group>\n</div>\n',encapsulation:l.ViewEncapsulation.None}]}],or.ctorParameters=function(){return[]},or.propDecorators={tabs:[{type:l.Input}],formTabChanged:[{type:l.Output}]};var ar=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t}return te(e,n),e}(nr);ar.decorators=[{type:l.Component,args:[{selector:"unknown-widget",template:'\n            <mat-list class="adf-unknown-widget">\n                <mat-list-item>\n                     <mat-icon class="mat-24">error_outline</mat-icon>\n                     <span class="adf-unknown-text">Unknown type: {{field.type}}</span>\n                </mat-list-item>\n            </mat-list>\n\n    ',styles:[".adf-unknown-text{margin-left:10px;color:red}.adf-unknown-widget{margin:42px}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],ar.ctorParameters=function(){return[{type:Gi}]};var sr=function(n){function i(e){var t=n.call(this,e)||this;return t.formService=e,t.currency=i.DEFAULT_CURRENCY,t}return te(i,n),i.prototype.ngOnInit=function(){this.field&&this.field.currency&&(this.currency=this.field.currency)},i}(nr);sr.DEFAULT_CURRENCY="$",sr.decorators=[{type:l.Component,args:[{selector:"amount-widget",template:'<div class="adf-amount-widget__container adf-amount-widget {{field.className}}" [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field floatPlaceholder="never" class="adf-amount-widget__input">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <span matPrefix class="adf-amount-widget__prefix-spacing"> {{currency }}</span>\n        <input matInput\n                class="adf-amount-widget"\n                type="text"\n                [id]="field.id"\n                [required]="isRequired()"\n                [value]="field.value"\n                [(ngModel)]="field.value"\n                (ngModelChange)="onFieldChanged(field)"\n                [disabled]="field.readOnly"\n                placeholder="{{field.placeholder}}">\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n\n',styles:[".adf-amount-widget{width:100%;vertical-align:baseline!important}.adf-amount-widget .mat-input-element{margin-left:11px}.adf-amount-widget .mat-input-prefix{position:absolute;margin-top:58px}.adf-amount-widget .mat-input-placeholder{margin-top:5px;display:none}.adf-amount-widget__container{max-width:100%}.adf-amount-widget__container .mat-input-placeholder-wrapper{top:0!important;left:13px}.adf-amount-widget__input .mat-focused{-webkit-transition:none;transition:none}.adf-amount-widget__prefix-spacing{padding-right:5px}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],sr.ctorParameters=function(){return[{type:Gi}]};var lr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t}return te(e,n),e}(nr);lr.decorators=[{type:l.Component,args:[{selector:"checkbox-widget",template:'<div [ngClass]="field.className">\n    <mat-checkbox\n        [id]="field.id"\n        color="primary"\n        [required]="field.required"\n        [disabled]="field.readOnly || readOnly"\n        [(ngModel)]="field.value"\n        (ngModelChange)="onFieldChanged(field)">\n        {{field.name}}\n        <span *ngIf="field.required">*</span>\n    </mat-checkbox>\n</div>\n',host:tr,encapsulation:l.ViewEncapsulation.None}]}],lr.ctorParameters=function(){return[{type:Gi}]};var ur=Kt,cr=function(r){function e(e,t,n){var i=r.call(this,e)||this;return i.formService=e,i.dateAdapter=t,i.preferences=n,i}return te(e,r),e.prototype.ngOnInit=function(){var t=this;this.preferences.locale$.subscribe(function(e){t.dateAdapter.setLocale(e)}),this.dateAdapter.overrideDisplyaFormat=this.field.dateDisplayFormat,this.field&&(this.field.minValue&&(this.minDate=O(this.field.minValue,"DD/MM/YYYY")),this.field.maxValue&&(this.maxDate=O(this.field.maxValue,"DD/MM/YYYY"))),this.displayDate=O(this.field.value,this.field.dateDisplayFormat)},e.prototype.onDateChanged=function(e){e&&e.value?this.field.value=e.value.format(this.field.dateDisplayFormat):this.field.value=e||null,this.onFieldChanged(this.field)},e}(nr);cr.decorators=[{type:l.Component,args:[{selector:"date-widget",providers:[{provide:h.DateAdapter,useClass:en},{provide:h.MAT_DATE_FORMATS,useValue:ur}],template:'<div class="{{field.className}}" id="data-widget" [class.adf-invalid]="!field.isValid">\n    <mat-form-field class="adf-date-widget">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}} ({{field.dateDisplayFormat}})<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               [id]="field.id"\n               [matDatepicker]="datePicker"\n               [(ngModel)]="displayDate"\n               [required]="isRequired()"\n               [disabled]="field.readOnly"\n               [min]="minDate"\n               [max]="maxDate"\n               (focusout)="onDateChanged($event.srcElement.value)"\n               (dateChange)="onDateChanged($event)"\n               placeholder="{{field.placeholder}}">\n        <mat-datepicker-toggle  matSuffix [for]="datePicker" [disabled]="field.readOnly" ></mat-datepicker-toggle>\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n    <mat-datepicker #datePicker [touchUi]="true" [startAt]="displayDate" ></mat-datepicker>\n</div>\n\n',styles:[".adf-date-widget .mat-input-suffix{text-align:right;position:absolute;margin-top:30px;width:100%}.adf-date-widget-date-widget-button{position:relative;float:right}.adf-date-widget-date-input{padding-top:5px;padding-bottom:5px}.adf-date-widget-grid-date-widget{-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0}.adf-date-widget-date-widget-button__cell{margin-top:0;margin-bottom:0}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],cr.ctorParameters=function(){return[{type:Gi},{type:h.DateAdapter},{type:De}]};var pr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t}return te(e,n),e}(nr);pr.decorators=[{type:l.Component,args:[{selector:"display-text-widget",template:'<div class="adf-display-text-widget {{field.className}}">{{field.value}}</div>\n',styles:[".adf-display-text-widget{white-space:pre-wrap}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],pr.ctorParameters=function(){return[{type:Gi}]};var dr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t.fileId=null,t.hasFile=!1,t}return te(e,n),e.prototype.ngOnInit=function(){if(this.field){var e=this.field.value;e?(this.fileId=e.id,this.hasFile=!0):(this.fileId=null,this.hasFile=!1)}},e}(nr);dr.decorators=[{type:l.Component,args:[{selector:"adf-form-document-widget",template:'<div class="adf-form-document-widget {{field.className}}">\n    <ng-container *ngIf="hasFile">\n        <adf-content [id]="fileId" [showDocumentContent]="true"></adf-content>\n    </ng-container>\n</div>\n',host:tr,encapsulation:l.ViewEncapsulation.None}]}],dr.ctorParameters=function(){return[{type:Gi}]};var mr=function(i){function e(e,t){var n=i.call(this,e)||this;return n.formService=e,n.logService=t,n}return te(e,i),e.prototype.ngOnInit=function(){this.field&&this.field.restUrl&&(this.field.form.taskId?this.getValuesByTaskId():this.getValuesByProcessDefinitionId())},e.prototype.getValuesByTaskId=function(){var n=this;this.formService.getRestFieldValues(this.field.form.taskId,this.field.id).subscribe(function(e){var t=[];n.field.emptyOption&&t.push(n.field.emptyOption),n.field.options=t.concat(e||[]),n.field.updateForm()},function(e){return n.handleError(e)})},e.prototype.getValuesByProcessDefinitionId=function(){var n=this;this.formService.getRestFieldValuesByProcessId(this.field.form.processDefinitionId,this.field.id).subscribe(function(e){var t=[];n.field.emptyOption&&t.push(n.field.emptyOption),n.field.options=t.concat(e||[]),n.field.updateForm()},function(e){return n.handleError(e)})},e.prototype.getOptionValue=function(e,t){return"empty"===e.id||e.name!==t?e.id:e.name},e.prototype.handleError=function(e){this.logService.error(e)},e.prototype.isReadOnlyType=function(){return"readonly"===this.field.type},e}(nr);mr.decorators=[{type:l.Component,args:[{selector:"dropdown-widget",template:'<div class="adf-dropdown-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n    <mat-form-field>\n        <mat-select class="adf-select"\n                    [id]="field.id"\n                    [(ngModel)]="field.value"\n                    [disabled]="field.readOnly"\n                    (ngModelChange)="onFieldChanged(field)">\n            <mat-option *ngFor="let opt of field.options"\n                        [value]="getOptionValue(opt, field.value)"\n                        [id]="opt.id">{{opt.name}}\n            </mat-option>\n            <mat-option id="readonlyOption" *ngIf="isReadOnlyType()" [value]="field.value">{{field.value}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget class="adf-dropdown-required-message" *ngIf="isInvalidFieldRequired()"\n                  required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n',styles:[".adf-dropdown-widget{width:100%;margin-top:13px}.adf-dropdown-widget .adf-select{padding-top:0!important;width:100%}.adf-dropdown-widget .mat-select-value-text{font-size:14px}.adf-dropdown-widget-select{width:100%}.adf-dropdown-widget-dropdown-required-message .adf-error-text-container{margin-top:1px!important}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],mr.ctorParameters=function(){return[{type:Gi},{type:Ee}]};var fr=function(){function e(){this.supportedTypes=["Date"]}return e.prototype.isSupported=function(e){return e&&e.editable&&-1<this.supportedTypes.indexOf(e.type)},e.prototype.validate=function(e,t,n){if(this.isSupported(t)){var i=e.value[t.id];if(!O(i,"D-M-YYYY").isValid())return n&&(n.isValid=!1,n.message="Invalid '"+t.name+"' format."),!1}return!0},e}(),hr=function(n){function e(e){var t=n.call(this,e)||this;return t.isValid=e.isValid,t}return te(e,n),e}(Si),gr=function(){function e(){this.supportedTypes=["Number","Amount"]}return e.prototype.isSupported=function(e){return e&&e.required&&-1<this.supportedTypes.indexOf(e.type)},e.prototype.isNumber=function(e){return null!==e&&e!==undefined&&""!==e&&!isNaN(+e)},e.prototype.validate=function(e,t,n){if(this.isSupported(t)){var i=e.value[t.id];return!(null!==i&&i!==undefined&&""!==i&&!this.isNumber(i))||(n&&(n.isValid=!1,n.message="Field '"+t.name+"' must be a number."),!1)}return!0},e}(),yr=function(){function e(){this.supportedTypes=["String","Number","Amount","Date","Dropdown"]}return e.prototype.isSupported=function(e){return e&&e.required&&-1<this.supportedTypes.indexOf(e.type)},e.prototype.validate=function(e,t,n){if(this.isSupported(t)){var i=e.value[t.id];if(t.required&&(null===i||i===undefined||""===i))return n&&(n.isValid=!1,n.message="Field '"+t.name+"' is required."),!1}return!0},e}(),vr=function(r){function e(e,t){var n=r.call(this,e.form,e.json)||this;if(n.formService=t,n.columns=[],n.visibleColumns=[],n.rows=[],n._validators=[],(n.field=e).json){var i=n.getColumns(e);i&&(n.columns=i,n.visibleColumns=n.columns.filter(function(e){return e.visible})),e.json.value&&(n.rows=e.json.value.map(function(e){return{selected:!1,value:e}}))}return n._validators=[new yr,new fr,new gr],n}return te(e,r),Object.defineProperty(e.prototype,"selectedRow",{get:function(){return this._selectedRow},set:function(e){if(this._selectedRow&&this._selectedRow===e)return this._selectedRow.selected=!1,void(this._selectedRow=null);this.rows.forEach(function(e){return e.selected=!1}),(this._selectedRow=e)&&(this._selectedRow.selected=!0)},enumerable:!0,configurable:!0}),e.prototype.getColumns=function(e){if(e&&e.json){var t=e.json.columnDefinitions;if(!t&&e.json.params&&e.json.params.field&&(t=e.json.params.field.columnDefinitions),t)return t.map(function(e){return e})}return null},e.prototype.flushValue=function(){this.field&&(this.field.value=this.rows.map(function(e){return e.value}),this.field.updateForm())},e.prototype.moveRow=function(e,t){var n=this.rows.indexOf(e);if(-1<n){var i=n+t;i<0?i=0:i>=this.rows.length&&(i=this.rows.length);var r=this.rows.slice();r.splice(n,1),r.splice(i,0,e),this.rows=r,this.flushValue()}},e.prototype.deleteRow=function(e){if(e){this.selectedRow===e&&(this.selectedRow=null);var t=this.rows.indexOf(e);-1<t&&(this.rows.splice(t,1),this.flushValue())}},e.prototype.addRow=function(e){e&&this.rows.push(e)},e.prototype.validateRow=function(e){var t,n,i,r,o=new hr({isValid:!0,message:null}),a=new vi(this.form,this.field,e,o);if(this.formService.validateDynamicTableRow.next(a),a.defaultPrevented||!o.isValid)return o;if(e)try{for(var s=re(this.columns),l=s.next();!l.done;l=s.next()){var u=l.value;try{for(var c=re(this._validators),p=c.next();!p.done;p=c.next()){if(!p.value.validate(e,u,o))return o}}catch(d){i={error:d}}finally{try{p&&!p.done&&(r=c["return"])&&r.call(c)}finally{if(i)throw i.error}}}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=s["return"])&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.getCellValue=function(e,t){var n=e.value[t.id];return"Dropdown"===t.type&&n?n.name:"Boolean"===t.type?!!n:"Date"===t.type&&n?O(n.split("T")[0],"YYYY-MM-DD").format("DD-MM-YYYY"):n||""},e.prototype.getDisplayText=function(e){var t=e.name;if("Amount"===e.type){var n=e.amountCurrency||"$";t=e.name+" ("+n+")"}return t},e}(Ii),br=function(a){function e(e,t,n,i,r){var o=a.call(this,e)||this;return o.formService=e,o.elementRef=t,o.visibilityService=n,o.logService=i,o.cd=r,o.ERROR_MODEL_NOT_FOUND="Table model not found",o.editMode=!1,o.editRow=null,o.selectArrayCode=[32,0,13],o}return te(e,a),e.prototype.ngOnInit=function(){this.field&&(this.content=new vr(this.field,this.formService),this.visibilityService.refreshVisibility(this.field.form))},e.prototype.forceFocusOnAddButton=function(){if(this.content){this.cd.detectChanges();var e=this.elementRef.nativeElement.querySelector("#"+this.content.id+"-add-row");this.isDynamicTableReady(e)&&e.focus()}},e.prototype.isDynamicTableReady=function(e){return this.field&&!this.editMode&&e},e.prototype.isValid=function(){var e=!0;return this.content&&this.content.field&&(e=this.content.field.isValid),e},e.prototype.onRowClicked=function(e){this.content&&(this.content.selectedRow=e)},e.prototype.onKeyPressed=function(e,t){this.content&&this.isEnterOrSpacePressed(e.keyCode)&&(this.content.selectedRow=t)},e.prototype.isEnterOrSpacePressed=function(e){return-1!==this.selectArrayCode.indexOf(e)},e.prototype.hasSelection=function(){return!(!this.content||!this.content.selectedRow)},e.prototype.moveSelectionUp=function(){return!(!this.content||this.readOnly)&&(this.content.moveRow(this.content.selectedRow,-1),!0)},e.prototype.moveSelectionDown=function(){return!(!this.content||this.readOnly)&&(this.content.moveRow(this.content.selectedRow,1),!0)},e.prototype.deleteSelection=function(){return!(!this.content||this.readOnly)&&(this.content.deleteRow(this.content.selectedRow),!0)},e.prototype.addNewRow=function(){return!(!this.content||this.readOnly)&&(this.editRow={isNew:!0,selected:!1,value:{}},this.editMode=!0)},e.prototype.editSelection=function(){return!(!this.content||this.readOnly)&&(this.editRow=this.copyRow(this.content.selectedRow),this.editMode=!0)},e.prototype.getCellValue=function(e,t){if(this.content){var n=this.content.getCellValue(e,t);return"Amount"===t.type?(t.amountCurrency||"$")+" "+(n||0):n}return null},e.prototype.onSaveChanges=function(){if(this.content){if(this.editRow.isNew){var e=this.copyRow(this.editRow);this.content.selectedRow=null,this.content.addRow(e),this.editRow.isNew=!1}else this.content.selectedRow.value=this.copyObject(this.editRow.value);this.content.flushValue()}else this.logService.error(this.ERROR_MODEL_NOT_FOUND);this.editMode=!1,this.forceFocusOnAddButton()},e.prototype.onCancelChanges=function(){this.editMode=!1,this.editRow=null,this.forceFocusOnAddButton()},e.prototype.copyRow=function(e){return{value:this.copyObject(e.value)}},e.prototype.copyObject=function(t){var n=this,i=t;return"object"==typeof t&&null!==t&&t!==undefined&&(i=Object.assign({},t),Object.keys(t).forEach(function(e){"object"==typeof t[e]&&(i[e]=n.copyObject(t[e]))})),i},e}(nr);br.decorators=[{type:l.Component,args:[{selector:"dynamic-table-widget",template:'<div class="{{field.className}}"\n    [class.adf-invalid]="!isValid()">\n    <div class="adf-label">{{content.name}}<span *ngIf="isRequired()">*</span></div>\n\n    <div *ngIf="!editMode">\n        <div class="adf-table-container">\n            <table class="full-width adf-dynamic-table" id="dynamic-table-{{content.id}}">\n                <thead>\n                    <tr>\n                        <th *ngFor="let column of content.visibleColumns">\n                            {{column.name}}\n                        </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor="let row of content.rows; let idx = index" tabindex="0" id="{{content.id}}-row-{{idx}}"\n                        [class.adf-dynamic-table-widget__row-selected]="row.selected" (keyup)="onKeyPressed($event, row)">\n                        <td *ngFor="let column of content.visibleColumns"\n                            (click)="onRowClicked(row)">\n                            {{ getCellValue(row, column) }}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <div *ngIf="!readOnly">\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="moveSelectionUp()">\n                <mat-icon>arrow_upward</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="moveSelectionDown()">\n                <mat-icon>arrow_downward</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="field.readOnly"\n                    id="{{content.id}}-add-row"\n                    (click)="addNewRow()">\n                <mat-icon>add_circle_outline</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="deleteSelection()">\n                <mat-icon>remove_circle_outline</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="editSelection()">\n                <mat-icon>edit</mat-icon>\n            </button>\n        </div>\n     </div>\n\n     <row-editor *ngIf="editMode"\n        [table]="content"\n        [row]="editRow"\n        [column]="column"\n        (save)="onSaveChanges()"\n        (cancel)="onCancelChanges()">\n     </row-editor>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n',styles:[""],host:tr,encapsulation:l.ViewEncapsulation.None}]}],br.ctorParameters=function(){return[{type:Gi},{type:l.ElementRef},{type:$i},{type:Ee},{type:l.ChangeDetectorRef}]};var wr=function(){function e(){}return e.prototype.onValueChanged=function(e,t,n){var i=n.checked;e.value[t.id]=i},e}();wr.decorators=[{type:l.Component,args:[{selector:"adf-boolean-editor",template:' <label [attr.for]="column.id">\n    <mat-checkbox\n        color="primary"\n        [id]="column.id"\n        [checked]="table.getCellValue(row, column)"\n        [required]="column.required"\n        [disabled]="!column.editable"\n        (change)="onValueChanged(row, column, $event)">\n    <span class="adf-checkbox-label">{{column.name}}</span>\n    </mat-checkbox>\n</label>\n',styles:[".adf-checkbox-label{position:relative;cursor:pointer;font-size:16px;line-height:24px;margin:0}"]}]}],wr.ctorParameters=function(){return[]},wr.propDecorators={table:[{type:l.Input}],row:[{type:l.Input}],column:[{type:l.Input}]};var Er=Kt,Ir=function(){function e(e,t){this.dateAdapter=e,this.preferences=t,this.DATE_FORMAT="DD-MM-YYYY"}return e.prototype.ngOnInit=function(){var t=this;this.preferences.locale$.subscribe(function(e){t.dateAdapter.setLocale(e)}),this.dateAdapter.overrideDisplyaFormat=this.DATE_FORMAT,this.value=O(this.table.getCellValue(this.row,this.column),this.DATE_FORMAT)},e.prototype.onDateChanged=function(e){if(e){var t=O(e,this.DATE_FORMAT,!0);t.isValid()?(this.row.value[this.column.id]=t.format("YYYY-MM-DD")+"T00:00:00.000Z",this.table.flushValue()):this.row.value[this.column.id]=""}},e}();Ir.decorators=[{type:l.Component,args:[{selector:"adf-date-editor",template:'<div>\n    <mat-form-field class="adf-date-editor">\n        <label [attr.for]="column.id">{{column.name}} (d-M-yyyy)</label>\n        <input matInput\n            id="dateInput"\n            type="text"\n            [matDatepicker]="datePicker"\n            [value]="value"\n            [id]="column.id"\n            [required]="column.required"\n            [disabled]="!column.editable"\n           (focusout)="onDateChanged($event.srcElement.value)">\n        <mat-datepicker-toggle  *ngIf="column.editable" matSuffix [for]="datePicker" class="adf-date-editor-button" ></mat-datepicker-toggle>\n    </mat-form-field>\n    <mat-datepicker #datePicker (dateChange)="onDateChanged($event)" [touchUi]="true"></mat-datepicker>\n</div>\n',providers:[{provide:h.DateAdapter,useClass:en},{provide:h.MAT_DATE_FORMATS,useValue:Er}],styles:[".adf-date-editor{width:100%}.adf-date-editor-button{position:relative;top:25px}"]}]}],Ir.ctorParameters=function(){return[{type:h.DateAdapter},{type:De}]},Ir.propDecorators={table:[{type:l.Input}],row:[{type:l.Input}],column:[{type:l.Input}]};var Cr=function(){function e(e,t){this.formService=e,this.logService=t,this.value=null,this.options=[]}return e.prototype.ngOnInit=function(){var e=this.table.field;e&&("rest"===this.column.optionType?this.table.form&&this.table.form.taskId?this.getValuesByTaskId(e):this.getValuesByProcessDefinitionId(e):(this.options=this.column.options||[],this.value=this.table.getCellValue(this.row,this.column)))},e.prototype.getValuesByTaskId=function(e){var t=this;this.formService.getRestFieldValuesColumn(e.form.taskId,e.id,this.column.id).subscribe(function(e){t.column.options=e||[],t.options=t.column.options,t.value=t.table.getCellValue(t.row,t.column)},function(e){return t.handleError(e)})},e.prototype.getValuesByProcessDefinitionId=function(e){var t=this;this.formService.getRestFieldValuesColumnByProcessId(e.form.processDefinitionId,e.id,this.column.id).subscribe(function(e){t.column.options=e||[],t.options=t.column.options,t.value=t.table.getCellValue(t.row,t.column)},function(e){return t.handleError(e)})},e.prototype.onValueChanged=function(e,t,n){var i=n.value;i=t.options.find(function(e){return e.name===i}),e.value[t.id]=i},e.prototype.handleError=function(e){this.logService.error(e)},e}();Cr.decorators=[{type:l.Component,args:[{selector:"adf-dropdown-editor",template:'<div class="dropdown-editor">\n    <label [attr.for]="column.id">{{column.name}}</label>\n    <mat-form-field>\n        <mat-select\n            floatPlaceholder="never"\n            class="adf-dropdown-editor-select"\n            [id]="column.id"\n            [(ngModel)]="value"\n            [required]="column.required"\n            [disabled]="!column.editable"\n            (change)="onValueChanged(row, column, $event)">\n            <mat-option></mat-option>\n            <mat-option *ngFor="let opt of options" [value]="opt.name" [id]="opt.id">{{opt.name}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n',styles:[".adf-dropdown-editor-select{width:100%}"]}]}],Cr.ctorParameters=function(){return[{type:Gi},{type:Ee}]},Cr.propDecorators={table:[{type:l.Input}],row:[{type:l.Input}],column:[{type:l.Input}]};var Sr=function(){function e(){this.save=new l.EventEmitter,this.cancel=new l.EventEmitter,this.validationSummary=new hr({isValid:!0,message:""})}return e.prototype.onCancelChanges=function(){this.cancel.emit({table:this.table,row:this.row,column:this.column})},e.prototype.onSaveChanges=function(){this.validate(),this.isValid()&&this.save.emit({table:this.table,row:this.row,column:this.column})},e.prototype.isValid=function(){return this.validationSummary&&this.validationSummary.isValid},e.prototype.validate=function(){this.validationSummary=this.table.validateRow(this.row)},e}();Sr.decorators=[{type:l.Component,args:[{selector:"row-editor",template:'<div class="row-editor mdl-shadow--2dp"\n    [class.row-editor__invalid]="!validationSummary.isValid">\n    <div class="mdl-grid" *ngFor="let column of table.columns">\n        <div class="mdl-cell mdl-cell--6-col" [ngSwitch]="column.type">\n            <div *ngSwitchCase="\'Dropdown\'">\n                <adf-dropdown-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-dropdown-editor>\n                </div>\n                <div *ngSwitchCase="\'Date\'">\n                    <adf-date-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-date-editor>\n                </div>\n\n                <div *ngSwitchCase="\'Boolean\'">\n                <adf-boolean-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-boolean-editor>\n                </div>\n                <div *ngSwitchDefault>\n                <adf-text-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-text-editor>\n            </div>\n        </div>\n    </div>\n    <error-widget [error]="validationSummary"></error-widget>\n    <div>\n        <button mat-button (click)="onCancelChanges()">Cancel</button>\n        <button mat-button (click)="onSaveChanges()">Save</button>\n    </div>\n</div>\n',styles:[".row-editor{padding:8px}.row-editor__validation-summary{visibility:hidden}.row-editor__invalid .row-editor__validation-summary{color:#d50000;visibility:visible;padding:8px 16px}"]}]}],Sr.ctorParameters=function(){return[]},Sr.propDecorators={table:[{type:l.Input}],row:[{type:l.Input}],column:[{type:l.Input}],save:[{type:l.Output}],cancel:[{type:l.Output}]};var Tr=function(){function e(){}return e.prototype.ngOnInit=function(){this.displayName=this.table.getDisplayText(this.column)},e.prototype.onValueChanged=function(e,t,n){var i=n.target.value;e.value[t.id]=i},e}();Tr.decorators=[{type:l.Component,args:[{selector:"adf-text-editor",template:'<div class="adf-text-editor">\n    <mat-form-field>\n    <label [attr.for]="column.id">{{displayName}}</label>\n    <input matInput\n        type="text"\n        [value]="table.getCellValue(row, column)"\n        (keyup)="onValueChanged(row, column, $event)"\n        [required]="column.required"\n        [disabled]="!column.editable"\n        [id]="column.id">\n    </mat-form-field>\n</div>\n',styles:[".adf-text-editor{width:100%}"]}]}],Tr.ctorParameters=function(){return[]},Tr.propDecorators={table:[{type:l.Input}],row:[{type:l.Input}],column:[{type:l.Input}]};var xr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t.translateParameters=null,t._subscriptAnimationState="",t}return te(e,n),e.prototype.ngOnChanges=function(e){e.required&&(this.required=e.required.currentValue,this._subscriptAnimationState="enter"),e.error&&e.error.currentValue&&e.error.currentValue.isActive()&&(this.error=e.error.currentValue,this.translateParameters=this.error.getAttributesAsJsonObj(),this._subscriptAnimationState="enter")},e}(nr);xr.decorators=[{type:l.Component,args:[{selector:"error-widget",template:'<div class="adf-error-text-container">\n    <div *ngIf="error?.isActive()" [@transitionMessages]="_subscriptAnimationState">\n        <div class="adf-error-text">{{error.message | translate:translateParameters}}</div>\n        <mat-icon class="adf-error-icon">warning</mat-icon>\n    </div>\n    <div *ngIf="required" [@transitionMessages]="_subscriptAnimationState">\n            <div class="adf-error-text">{{required}}</div>\n    </div>\n</div>\n',styles:[".adf-error-text{width:85%}"],animations:[Y.trigger("transitionMessages",[Y.state("enter",Y.style({opacity:1,transform:"translateY(0%)"})),Y.transition("void => enter",[Y.style({opacity:0,transform:"translateY(-100%)"}),Y.animate("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])],host:tr,encapsulation:l.ViewEncapsulation.None}]}],xr.ctorParameters=function(){return[{type:Gi}]},xr.propDecorators={error:[{type:l.Input}],required:[{type:l.Input}]};var Or=function(i){function e(e,t){var n=i.call(this,e)||this;return n.formService=e,n.elementRef=t,n.groups=[],n.minTermLength=1,n}return te(e,i),e.prototype.ngOnInit=function(){var t=this;if(this.field){var e=this.field.value;e&&(this.value=e.name);var n=this.field.params;if(n&&n.restrictWithGroup){var i=n.restrictWithGroup;this.groupId=i.id}this.value&&this.formService.getWorkflowGroups(this.value,this.groupId).subscribe(function(e){return t.groups=e||[]})}},e.prototype.onKeyUp=function(e){var t=this;this.value&&this.value.length>=this.minTermLength&&this.oldValue!==this.value&&e.keyCode!==q.ESCAPE&&e.keyCode!==q.ENTER&&(this.oldValue=this.value,this.formService.getWorkflowGroups(this.value,this.groupId).subscribe(function(e){t.groups=e||[]}))},e.prototype.flushValue=function(){var t=this,e=this.groups.find(function(e){return e.name.toLocaleLowerCase()===t.value.toLocaleLowerCase()});e?(this.field.value=e,this.value=e.name):(this.field.value=null,this.value=null),this.field.updateForm()},e.prototype.onItemClick=function(e,t){e&&(this.field.value=e,this.value=e.name),t&&t.preventDefault()},e.prototype.onItemSelect=function(e){e&&(this.field.value=e,this.value=e.name)},e}(nr);Or.decorators=[{type:l.Component,args:[{selector:"functional-group-widget",template:'<div class="adf-group-widget {{field.className}}"\n     [class.is-dirty]="value"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly" id="functional-group-div">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               class="adf-input"\n               type="text"\n               [id]="field.id"\n               [(ngModel)]="value"\n               (keyup)="onKeyUp($event)"\n               [disabled]="field.readOnly"\n               placeholder="{{field.placeholder}}"\n               [matAutocomplete]="auto">\n        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onItemSelect($event.option.value)">\n            <mat-option *ngFor="let item of groups"\n                       [id]="field.id +\'-\'+item.id"\n                       (click)="onItemClick(item, $event)"  [value]="item">\n                <span>{{item.name}}</span>\n            </mat-option>\n        </mat-autocomplete>\n\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n',styles:[".adf-group-widget{width:100%}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Or.ctorParameters=function(){return[{type:Gi},{type:l.ElementRef}]};var Ar=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t.linkUrl=nr.DEFAULT_HYPERLINK_URL,t.linkText=null,t}return te(e,n),e.prototype.ngOnInit=function(){this.field&&(this.linkUrl=this.getHyperlinkUrl(this.field),this.linkText=this.getHyperlinkText(this.field))},e}(nr);Ar.decorators=[{type:l.Component,args:[{selector:"hyperlink-widget",template:'<div class="adf-hyperlink-widget {{field.className}}">\n    <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n    <div>\n        <a [href]="linkUrl" target="_blank" rel="nofollow">{{linkText}}</a>\n    </div>\n</div>\n',styles:[""],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Ar.ctorParameters=function(){return[{type:Gi}]};var Pr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t}return te(e,n),e}(nr);Pr.decorators=[{type:l.Component,args:[{selector:"multiline-text-widget",template:'<div class="adf-multiline-text-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field floatPlaceholder="never">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <textarea matInput class="adf-input"\n                  matTextareaAutosize\n                  type="text"\n                  rows="3"\n                  [id]="field.id"\n                  [required]="isRequired()"\n                  [(ngModel)]="field.value"\n                  (ngModelChange)="onFieldChanged(field)"\n                  [disabled]="field.readOnly || readOnly"\n                  placeholder="{{field.placeholder}}">\n        </textarea>\n    </mat-form-field>\n    <div *ngIf="field.maxLength > 0" class="adf-multiline-word-counter">\n        <span>{{field?.value?.length || 0}}/{{field.maxLength}}</span>\n    </div>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget class="adf-multiline-required-message" *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n\n',styles:[".adf-multiline-text-widget{width:100%}.adf-multiline-word-counter{float:right;margin-top:-20px!important;min-height:24px;min-width:1px;font-size:12px;line-height:14px;overflow:hidden;-webkit-transition:all .3s cubic-bezier(.55,0,.55,.2);transition:all .3s cubic-bezier(.55,0,.55,.2);opacity:1;padding-top:5px;text-align:right;padding-right:2px;padding-left:0}.adf-multiline-required-message{display:-webkit-box;display:-ms-flexbox;display:flex}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Pr.ctorParameters=function(){return[{type:Gi}]};var Dr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t}return te(e,n),e}(nr);Dr.decorators=[{type:l.Component,args:[{selector:"number-widget",template:'<div class="adf-textfield adf-number-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               class="adf-input"\n               type="text"\n               pattern="-?[0-9]*(.[0-9]+)?"\n               [id]="field.id"\n               [required]="isRequired()"\n               [value]="field.value"\n               [(ngModel)]="field.value"\n               (ngModelChange)="onFieldChanged(field)"\n               [disabled]="field.readOnly"\n               placeholder="{{field.placeholder}}">\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n',styles:[".adf-number-widget{width:100%}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Dr.ctorParameters=function(){return[{type:Gi}]};var Fr=function(){function e(e,t){this.alfrescoJsApi=e,this.logService=t}return e.prototype.getWorkflowUsers=function(e,t){var n=this,i={excludeTaskId:e,filter:t};return u.Observable.fromPromise(this.getWorkflowUserApi(i)).map(function(e){return e.data||[]})["catch"](function(e){return n.handleError(e)})},e.prototype.getUserImage=function(e){return this.getUserProfileImageApi(e.id)},e.prototype.involveUserWithTask=function(e,t){var n=this,i={userId:t};return u.Observable.fromPromise(this.involveUserToTaskApi(e,i))["catch"](function(e){return n.handleError(e)})},e.prototype.removeInvolvedUser=function(e,t){var n=this,i={userId:t};return u.Observable.fromPromise(this.removeInvolvedUserFromTaskApi(e,i))["catch"](function(e){return n.handleError(e)})},e.prototype.getWorkflowUserApi=function(e){return this.alfrescoJsApi.getInstance().activiti.usersWorkflowApi.getUsers(e)},e.prototype.involveUserToTaskApi=function(e,t){return this.alfrescoJsApi.getInstance().activiti.taskActionsApi.involveUser(e,t)},e.prototype.removeInvolvedUserFromTaskApi=function(e,t){return this.alfrescoJsApi.getInstance().activiti.taskActionsApi.removeInvolvedUser(e,t)},e.prototype.getUserProfileImageApi=function(e){return this.alfrescoJsApi.getInstance().activiti.userApi.getUserProfilePictureUrl(e)},e.prototype.handleError=function(e){return this.logService.error(e),u.Observable["throw"](e||"Server error")},e}();Fr.decorators=[{type:l.Injectable}],Fr.ctorParameters=function(){return[{type:ve},{type:Ee}]};var Rr=function(i){function e(e,t){var n=i.call(this,e)||this;return n.formService=e,n.peopleProcessService=t,n.minTermLength=1,n.users=[],n}return te(e,i),e.prototype.ngOnInit=function(){if(this.field){var e=this.field.params;if(e&&e.restrictWithGroup){var t=e.restrictWithGroup;this.groupId=t.id}}},e.prototype.onKeyUp=function(e){var t=this.input.nativeElement.value;t&&t.length>=this.minTermLength&&this.oldValue!==t?e.keyCode!==q.ESCAPE&&e.keyCode!==q.ENTER&&t.length>=this.minTermLength&&(this.oldValue=t,this.searchUsers(t)):this.validateValue(t)},e.prototype.searchUsers=function(t){var n=this;this.formService.getWorkflowUsers(t,this.groupId).subscribe(function(e){n.users=e||[],n.validateValue(t)})},e.prototype.validateValue=function(e){this.isValidUser(e)?this.field.validationSummary.message="":e?(this.field.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_VALUE",this.field.markAsInvalid(),this.field.form.markAsInvalid()):(this.field.value=null,this.users=[])},e.prototype.isValidUser=function(t){var n=this,e=!1;t&&(this.users.find(function(e){return n.getDisplayName(e).toLocaleLowerCase()===t.toLocaleLowerCase()})&&(e=!0));return e},e.prototype.getDisplayName=function(e){return e?((e.firstName||"")+" "+(e.lastName||"")).trim():""},e.prototype.onItemSelect=function(e){e&&(this.field.value=e)},e}(nr);Rr.decorators=[{type:l.Component,args:[{selector:"people-widget",template:'<div class="adf-people-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid"\n     [class.adf-readonly]="field.readOnly"\n     id="people-widget-content">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input #inputValue\n               matInput\n               class="adf-input"\n               type="text"\n               [id]="field.id"\n               [value]="getDisplayName(field.value)"\n               (keyup)="onKeyUp($event)"\n               [disabled]="field.readOnly"\n               placeholder="{{field.placeholder}}"\n               [matAutocomplete]="auto">\n        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onItemSelect($event.option.value)"  [displayWith]="getDisplayName">\n            <mat-option *ngFor="let user of users; let i = index" [value]="user">\n                <div class="adf-people-widget-row" id="adf-people-widget-user-{{i}}">\n                    <div [outerHTML]="user | usernameInitials:\'adf-people-widget-pic\'"></div>\n                    <div *ngIf="user.pictureId" class="adf-people-widget-image-row">\n                        <img id="adf-people-widget-pic-{{i}}" class="adf-people-widget-image"\n                             [src]="peopleProcessService.getUserImage(user)"/>\n                    </div>\n                    <span class="adf-people-label-name">{{getDisplayName(user)}}</span>\n                </div>\n            </mat-option>\n        </mat-autocomplete>\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n',styles:[""],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Rr.ctorParameters=function(){return[{type:Gi},{type:Fr}]},Rr.propDecorators={input:[{type:l.ViewChild,args:["inputValue"]}]};var kr=function(i){function e(e,t){var n=i.call(this,e)||this;return n.formService=e,n.logService=t,n}return te(e,i),e.prototype.ngOnInit=function(){this.field&&this.field.restUrl&&(this.field.form.taskId?this.getOptionsByTaskId():this.getOptionsByProcessDefinitionId())},e.prototype.getOptionsByTaskId=function(){var t=this;this.formService.getRestFieldValues(this.field.form.taskId,this.field.id).subscribe(function(e){t.field.options=e||[],t.field.updateForm()},function(e){return t.handleError(e)})},e.prototype.getOptionsByProcessDefinitionId=function(){var t=this;this.formService.getRestFieldValuesByProcessId(this.field.form.processDefinitionId,this.field.id).subscribe(function(e){t.field.options=e||[],t.field.updateForm()},function(e){return t.handleError(e)})},e.prototype.onOptionClick=function(e){this.field.value=e,this.fieldChanged.emit(this.field)},e.prototype.handleError=function(e){this.logService.error(e)},e}(nr);kr.decorators=[{type:l.Component,args:[{selector:"radio-buttons-widget",template:'<div class="adf-radio-buttons-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly" [id]="field.id">\n    <div class="adf-radio-button-container">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <mat-radio-group class="adf-radio-group" [(ngModel)]="field.value">\n            <mat-radio-button\n                [id]="field.id + \'-\' + opt.id"\n                [name]="field.id"\n                [value]="opt.id"\n                [disabled]="field.readOnly"\n                [checked]="field.value === opt.id"\n                (change)="onOptionClick(opt.id)"\n                color="primary"\n                class="adf-radio-button" *ngFor="let opt of field.options" >\n                {{opt.name}}\n            </mat-radio-button>\n        </mat-radio-group>\n    </div>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n\n\n',styles:[".adf-radio-button-container{margin-bottom:15px}.adf-radio-group{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.adf-radio-button{margin:5px}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],kr.ctorParameters=function(){return[{type:Gi},{type:Ee}]};var _r={provide:g.NG_VALUE_ACCESSOR,useExisting:l.forwardRef(function(){return Mr}),multi:!0},Mr=function(){function e(e,t){this.el=e,this.render=t,this.translationMask={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},this.byPassKeys=[9,16,17,18,36,37,38,39,40,91],this.invalidCharacters=[],this._onChange=function(e){},this._onTouched=function(){}}return e.prototype.onTextInput=function(e){this.inputMask&&this.inputMask.mask?this.maskValue(this.el.nativeElement.value,this.el.nativeElement.selectionStart,this.inputMask.mask,this.inputMask.isReversed,e.keyCode):this._onChange(this.el.nativeElement.value)},e.prototype.ngOnChanges=function(e){e.inputMask&&e.inputMask.currentValue.mask&&(this.inputMask=e.inputMask.currentValue)},e.prototype.writeValue=function(e){this.el.nativeElement.value=e},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.maskValue=function(e,t,n,i,r){if(-1===this.byPassKeys.indexOf(r)){var o=this.getMasked(!1,e,n,i),a=this.calculateCaretPosition(t,e,r);this.render.setElementAttribute(this.el.nativeElement,"value",o),this.el.nativeElement.value=o,this.setValue(o),this._onChange(o),this.setCaretPosition(a)}},e.prototype.setCaretPosition=function(e){this.el.nativeElement.moveStart=e,this.el.nativeElement.moveEnd=e},e.prototype.calculateCaretPosition=function(e,t,n){var i=t.length,r=this.getValue()||"",o=r.length;return 8===n&&r!==t?e-=t.slice(0,e).length-r.slice(0,e).length:r!==t&&(o<=e?e=i:e+=t.slice(0,e).length-r.slice(0,e).length),e},e.prototype.getMasked=function(e,t,n,i){void 0===i&&(i=!1);var r,o,a,s=[],l=t,u=0,c=n.length,p=0,d=l.length,m=1,f="push",h=-1;for(i?(f="unshift",m=-1,r=0,u=c-1,p=d-1):r=c-1,a=this.isToCheck(i,u,c,p,d);a;){var g=n.charAt(u),y=l.charAt(p),v=this.translationMask[g];v?(y.match(v.pattern)?(s[f](y),v.recursive&&(-1===h?h=u:u===r&&(u=h-m),r===h&&(u-=m)),u+=m):y===o?o=undefined:v.optional?(u+=m,p-=m):this.invalidCharacters.push({index:p,digit:y,translated:v.pattern}),p+=m):(e||s[f](g),y===g?p+=m:o=g,u+=m),a=this.isToCheck(i,u,c,p,d)}var b=n.charAt(r);return c!==d+1||this.translationMask[b]||s.push(b),s.join("")},e.prototype.isToCheck=function(e,t,n,i,r){return e?-1<t&&-1<i:t<n&&i<r},e.prototype.setValue=function(e){this.value=e},e.prototype.getValue=function(){return this.value},e}();Mr.decorators=[{type:l.Directive,args:[{selector:"[textMask]",providers:[_r]}]}],Mr.ctorParameters=function(){return[{type:l.ElementRef},{type:l.Renderer}]},Mr.propDecorators={inputMask:[{type:l.Input,args:["textMask"]}],onTextInput:[{type:l.HostListener,args:["input",["$event"]]},{type:l.HostListener,args:["keyup",["$event"]]}]};var Lr=function(n){function e(e){var t=n.call(this,e)||this;return t.formService=e,t}return te(e,n),e.prototype.ngOnInit=function(){this.field.params&&(this.mask=this.field.params.inputMask,this.placeholder=this.field.params.inputMask&&this.field.params.inputMaskPlaceholder?this.field.params.inputMaskPlaceholder:this.field.placeholder,this.isMaskReversed=!!this.field.params.inputMaskReversed&&this.field.params.inputMaskReversed)},e}(nr);Lr.decorators=[{type:l.Component,args:[{selector:"text-widget",template:'<div class="adf-textfield adf-text-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               class="adf-input"\n               type="text"\n               [id]="field.id"\n               [required]="isRequired()"\n               [value]="field.value"\n               [(ngModel)]="field.value"\n               (ngModelChange)="onFieldChanged(field)"\n               [disabled]="field.readOnly || readOnly"\n               [textMask]="{mask: mask, isReversed: isMaskReversed}"\n               [placeholder]="placeholder">\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n',styles:[".adf-text-widget{width:100%}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Lr.ctorParameters=function(){return[{type:Gi}]};var Vr=function(i){function e(e,t){var n=i.call(this,e)||this;return n.formService=e,n.logService=t,n.minTermLength=1,n.options=[],n}return te(e,i),e.prototype.ngOnInit=function(){this.field.form.taskId&&this.field.restUrl?this.getValuesByTaskId():this.field.form.processDefinitionId&&this.field.restUrl&&this.getValuesByProcessDefinitionId(),this.isReadOnlyType()&&(this.value=this.field.value)},e.prototype.getValuesByTaskId=function(){var r=this;this.formService.getRestFieldValues(this.field.form.taskId,this.field.id).subscribe(function(e){var t=e||[];r.field.options=t;var n=r.field.value;if(n){var i=t.find(function(e){return e.id===n||e.name.toLocaleLowerCase()===n.toLocaleLowerCase()});i&&(r.value=i.name)}r.onFieldChanged(r.field),r.field.updateForm()},function(e){return r.handleError(e)})},e.prototype.getValuesByProcessDefinitionId=function(){var r=this;this.formService.getRestFieldValuesByProcessId(this.field.form.processDefinitionId,this.field.id).subscribe(function(e){var t=e||[];r.field.options=t;var n=r.field.value;if(n){var i=t.find(function(e){return e.id===n});i&&(r.value=i.name)}r.onFieldChanged(r.field),r.field.updateForm()},function(e){return r.handleError(e)})},e.prototype.getOptions=function(){var t=this.value.trim().toLocaleLowerCase();return this.field.options.filter(function(e){return-1<e.name.toLocaleLowerCase().indexOf(t)})},e.prototype.isValidOptionName=function(t){return!!this.field.options.find(function(e){return e.name&&e.name.toLocaleLowerCase()===t.toLocaleLowerCase()})},e.prototype.onKeyUp=function(e){this.value&&this.value.trim().length>=this.minTermLength&&this.oldValue!==this.value&&e.keyCode!==q.ESCAPE&&e.keyCode!==q.ENTER&&this.value.length>=this.minTermLength&&(this.options=this.getOptions(),this.oldValue=this.value,this.isValidOptionName(this.value)&&(this.field.value=this.options[0].id)),this.isValueDefined()&&0===this.value.trim().length&&(this.oldValue=this.value,this.options=[])},e.prototype.onItemSelect=function(e){e&&(this.field.value=e.id,this.value=e.name,this.onFieldChanged(this.field))},e.prototype.validate=function(){this.field.value=this.value},e.prototype.isValueDefined=function(){return null!==this.value&&this.value!==undefined},e.prototype.handleError=function(e){this.logService.error(e)},e.prototype.isReadOnlyType=function(){return"readonly"===this.field.type},e}(nr);Vr.decorators=[{type:l.Component,args:[{selector:"typeahead-widget",template:'<div class="adf-typeahead-widget-container">\n    <div class="adf-typeahead-widget {{field.className}}"\n        [class.is-dirty]="value"\n        [class.adf-invalid]="!field.isValid"\n        [class.adf-readonly]="field.readOnly"\n        id="typehead-div">\n        <mat-form-field>\n            <label class="adf-label" [attr.for]="field.id">{{field.name}}</label>\n            <input matInput class="adf-input"\n                   type="text"\n                   [id]="field.id"\n                   [(ngModel)]="value"\n                   (ngModelChange)="validate()"\n                   (keyup)="onKeyUp($event)"\n                   [disabled]="field.readOnly"\n                   placeholder="{{field.placeholder}}"\n                   [matAutocomplete]="auto">\n            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onItemSelect($event.option.value)">\n                <mat-option *ngFor="let item of options" [value]="item">\n                    <span [id]="field.name+\'_option_\'+item.id">{{item.name}}</span>\n                </mat-option>\n            </mat-autocomplete>\n        </mat-form-field>\n\n        <error-widget [error]="field.validationSummary"></error-widget>\n        <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n    </div>\n</div>\n',styles:[".adf-typeahead-widget-container{position:relative;display:block}.adf-typeahead-widget{width:100%}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Vr.ctorParameters=function(){return[{type:Gi},{type:Ee}]};var Nr=function(o){function e(e,t,n,i){var r=o.call(this,e)||this;return r.formService=e,r.logService=t,r.thumbnailService=n,r.processContentService=i,r.multipleOption="",r}return te(e,o),e.prototype.ngOnInit=function(){this.field&&this.field.value&&0<this.field.value.length&&(this.hasFile=!0),this.getMultipleFileParam()},e.prototype.removeFile=function(e){this.field&&this.removeElementFromList(e)},e.prototype.onFileChanged=function(e){var t=this,n=e.target.files,i=[];this.field.json.value&&(i=ae(this.field.json.value)),n&&0<n.length&&(u.Observable.from(n).mergeMap(function(e){return t.uploadRawContent(e)}).subscribe(function(e){i.push(e)},function(e){t.logService.error("Error uploading file. See console output for more details.")},function(){t.field.value=i,t.field.json.value=i}),this.hasFile=!0)},e.prototype.uploadRawContent=function(t){var n=this;return this.processContentService.createTemporaryRawRelatedContent(t).map(function(e){return n.logService.info(e),e.contentBlob=t,e})},e.prototype.getMultipleFileParam=function(){this.field&&this.field.params&&this.field.params.multiple&&(this.multipleOption=this.field.params.multiple?"multiple":"")},e.prototype.removeElementFromList=function(e){var t=this.field.value.indexOf(e);-1!==t&&(this.field.value.splice(t,1),this.field.json.value=this.field.value,this.field.updateForm()),this.hasFile=0<this.field.value.length,this.resetFormValueWithNoFiles()},e.prototype.resetFormValueWithNoFiles=function(){0===this.field.value.length&&(this.field.value=[],this.field.json.value=[])},e.prototype.getIcon=function(e){return this.thumbnailService.getMimeTypeIcon(e)},e.prototype.fileClicked=function(e){var t=this,n=new Hi(e),i=this.processContentService.getContentPreview(n.id);(n.isTypeImage()||n.isTypePdf())&&(i=this.processContentService.getFileRawContent(n.id)),i.subscribe(function(e){n.contentBlob=e,t.formService.formContentClicked.next(n)},function(e){t.logService.error("Unable to send event for file "+n.name)})},e}(nr);Nr.decorators=[{type:l.Component,args:[{selector:"upload-widget",template:'<div class="adf-upload-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid"\n     [class.adf-readonly]="field.readOnly">\n    <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n    <div class="adf-upload-widget-container">\n        <div>\n            <mat-list *ngIf="hasFile">\n                <mat-list-item class="adf-upload-files-row" *ngFor="let file of field.value">\n                    <img mat-list-icon class="adf-upload-widget__icon"\n                         [id]="\'file-\'+file.id+\'-icon\'"\n                         [src]="getIcon(file.mimeType)"\n                         [alt]="mimeTypeIcon"\n                         (click)="fileClicked(file)"\n                         (keyup.enter)="fileClicked(file)"\n                         role="button"\n                         tabindex="0"/>\n                    <span matLine id="{{\'file-\'+file.id}}" (click)="fileClicked(file)" (keyup.enter)="fileClicked(file)"\n                          role="button" tabindex="0" class="adf-file">{{file.name}}</span>\n                    <button *ngIf="!field.readOnly" mat-icon-button [id]="\'file-\'+file.id+\'-remove\'"\n                            (click)="removeFile(file);" (keyup.enter)="removeFile(file);">\n                        <mat-icon class="mat-24">highlight_off</mat-icon>\n                    </button>\n                </mat-list-item>\n            </mat-list>\n        </div>\n\n        <div class="button-row" *ngIf="(!hasFile || multipleOption) && !field.readOnly">\n            <a mat-raised-button color="primary">\n                {{ \'FORM.FIELD.UPLOAD\' | translate }}<mat-icon>file_upload</mat-icon>\n                <input #uploadFiles\n                       [multiple]="multipleOption"\n                       type="file"\n                       [id]="field.id"\n                       (change)="onFileChanged($event)"/>\n            </a>\n        </div>\n    </div>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n',styles:[".adf-upload-widget-container{margin-bottom:15px}.adf-upload-widget-container input{cursor:pointer;height:100%;right:0;opacity:0;position:absolute;top:0;width:300px;z-index:4}.adf-upload-widget{width:100%;word-break:break-all;padding:.4375em 0;border-top:.84375em solid transparent}.adf-upload-widget__icon{padding:6px;float:left;cursor:pointer}.adf-upload-widget__reset{margin-top:-2px}.adf-upload-files-row .mat-line{margin-bottom:0}"],host:tr,encapsulation:l.ViewEncapsulation.None}]}],Nr.ctorParameters=function(){return[{type:Gi},{type:Ee},{type:et},{type:Qi}]},Nr.propDecorators={fileInput:[{type:l.ViewChild,args:["uploadFiles"]}]};var Ur=Kt,Br=B.MAT_MOMENT_DATETIME_FORMATS,jr=function(r){function e(e,t,n){var i=r.call(this,e)||this;return i.formService=e,i.dateAdapter=t,i.preferences=n,i}return te(e,r),e.prototype.ngOnInit=function(){var t=this;this.preferences.locale$.subscribe(function(e){t.dateAdapter.setLocale(e)}),this.dateAdapter.overrideDisplyaFormat=this.field.dateDisplayFormat,this.field&&(this.field.minValue&&(this.minDate=O(this.field.minValue,"YYYY-MM-DDTHH:mm:ssZ")),this.field.maxValue&&(this.maxDate=O(this.field.maxValue,"YYYY-MM-DDTHH:mm:ssZ"))),this.displayDate=O(this.field.value,this.field.dateDisplayFormat)},e.prototype.onDateChanged=function(e){e&&e.value?this.field.value=e.value.format(this.field.dateDisplayFormat):this.field.value=e||null,this.onFieldChanged(this.field)},e}(nr);jr.decorators=[{type:l.Component,args:[{providers:[{provide:h.DateAdapter,useClass:en},{provide:h.MAT_DATE_FORMATS,useValue:Ur},{provide:v.DatetimeAdapter,useClass:B.MomentDatetimeAdapter},{provide:v.MAT_DATETIME_FORMATS,useValue:Br}],selector:"date-time-widget",template:'<div class="{{field.className}}"\n     id="data-time-widget" [class.adf-invalid]="!field.isValid">\n    <mat-form-field class="adf-date-time-widget">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}} ({{field.dateDisplayFormat}})<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               [matDatetimepicker]="datetimePicker"\n               [id]="field.id"\n               [(ngModel)]="displayDate"\n               [required]="isRequired()"\n               [disabled]="field.readOnly"\n               [min]="minDate"\n               [max]="maxDate"\n               (focusout)="onDateChanged($event.srcElement.value)"\n               (dateChange)="onDateChanged($event)"\n               placeholder="{{field.placeholder}}">\n        <mat-datetimepicker-toggle matSuffix [for]="datetimePicker" [disabled]="field.readOnly"></mat-datetimepicker-toggle>\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n    <mat-datetimepicker #datetimePicker type="datetime" openOnFocus="true" timeInterval="5"></mat-datetimepicker>\n</div>\n',styles:[".adf-date-time-widget .mat-input-suffix{text-align:right;position:absolute;margin-top:30px;width:100%}"],encapsulation:l.ViewEncapsulation.None}]}],jr.ctorParameters=function(){return[{type:Gi},{type:h.DateAdapter},{type:De}]};var Yr=[ar,or,rr,Lr,Dr,lr,Pr,mr,Ar,kr,pr,Nr,Vr,Or,Rr,cr,sr,br,Ir,Cr,wr,Tr,Sr,xr,dr,jr],qr=[Mr],zr=function(t){function e(){var e=t.call(this)||this;return e.defaultValue=ar,e.types={text:ti.fromType(Lr),string:ti.fromType(Lr),integer:ti.fromType(Dr),"multi-line-text":ti.fromType(Pr),"boolean":ti.fromType(lr),dropdown:ti.fromType(mr),date:ti.fromType(cr),amount:ti.fromType(sr),"radio-buttons":ti.fromType(kr),hyperlink:ti.fromType(Ar),"readonly-text":ti.fromType(pr),typeahead:ti.fromType(Vr),people:ti.fromType(Rr),"functional-group":ti.fromType(Or),"dynamic-table":ti.fromType(br),container:ti.fromType(rr),group:ti.fromType(rr),document:ti.fromType(dr),upload:ti.fromType(Nr),datetime:ti.fromType(jr)},e}return te(e,t),e}(ni);zr.decorators=[{type:l.Injectable}],zr.ctorParameters=function(){return[]};var Hr=function(){function n(e,t){this.apiService=e,this.logService=t}return n.prototype.getAlfrescoNodes=function(e,t){var n=this,i=this.apiService.getInstance(),r=e.replace("alfresco-","");return u.Observable.fromPromise(i.activiti.alfrescoApi.getContentInFolder(r,t)).map(this.toJsonArray)["catch"](function(e){return n.handleError(e)})},n.prototype.getAlfrescoRepositories=function(e,t){var n=this,i=this.apiService.getInstance(),r={tenantId:e,includeAccounts:t};return u.Observable.fromPromise(i.activiti.alfrescoApi.getRepositories(r)).map(this.toJsonArray)["catch"](function(e){return n.handleError(e)})},n.prototype.linkAlfrescoNode=function(e,t,n){var i=this,r=this.apiService.getInstance();return u.Observable.fromPromise(r.activiti.contentApi.createTemporaryRelatedContent({link:!0,name:t.title,simpleType:t.simpleType,source:e,sourceId:t.id+"@"+n})).map(this.toJson)["catch"](function(e){return i.handleError(e)})},n.prototype.applyAlfrescoNode=function(e,t,n){var i=this,r=this.apiService.getInstance(),o={source:n,sourceId:e.id+";1.0@"+t,name:e.name,link:!1};return u.Observable.fromPromise(r.activiti.contentApi.createTemporaryRelatedContent(o)).map(this.toJson)["catch"](function(e){return i.handleError(e)})},n.prototype.toJson=function(e){return e&&e||{}},n.prototype.toJsonArray=function(e){return e&&e.data||[]},n.prototype.handleError=function(e){var t=n.UNKNOWN_ERROR_MESSAGE;return e&&(t=e.message?e.message:e.status?e.status+" - "+e.statusText:n.GENERIC_ERROR_MESSAGE),this.logService.error(t),u.Observable["throw"](t)},n}();Hr.UNKNOWN_ERROR_MESSAGE="Unknown error",Hr.GENERIC_ERROR_MESSAGE="Server error",Hr.decorators=[{type:l.Injectable}],Hr.ctorParameters=function(){return[{type:ve},{type:Ee}]};var Gr=function(){};Gr.decorators=[{type:l.Directive,args:[{selector:"[form-custom-button]"}]}],Gr.ctorParameters=function(){return[]};var Wr=function(){function e(e,t,n,i){this.formRenderingService=e,this.componentFactoryResolver=t,this.visibilityService=n,this.compiler=i,this.field=null,this.focus=!1}return e.prototype.ngOnInit=function(){var t=this,e=window;e.adf===undefined&&(e.adf={});var n=this.getField();if(n){var i=this.field.form.customFieldTemplates[n.type];if(i&&this.hasController(n.type)){var r=this.getComponentFactorySync(n.type,i);this.componentRef=this.container.createComponent(r),(a=this.componentRef.instance)&&(a.field=n)}else{var o=this.formRenderingService.resolveComponentType(n);if(o){var a;r=this.componentFactoryResolver.resolveComponentFactory(o);this.componentRef=this.container.createComponent(r),(a=this.componentRef.instance).field=this.field,a.fieldChanged.subscribe(function(e){e&&t.field.form&&(t.visibilityService.refreshVisibility(e.form),e.form.onFormFieldChanged(e))})}}}},e.prototype.ngOnDestroy=function(){this.componentRef&&(this.componentRef.destroy(),this.componentRef=null)},e.prototype.getField=function(){if(this.field&&this.field.params){var e=this.field.params.field;if(e&&e.type)return e}return this.field},e.prototype.hasController=function(e){return adf&&adf.components&&adf.components[e]},e.prototype.getComponentFactorySync=function(e,t){var n=adf.components[e];if(n.factory)return n.factory;var i={selector:"runtime-component-"+e,template:t},r=this.createComponentFactorySync(this.compiler,i,n["class"]);return n.factory=r},e.prototype.createComponentFactorySync=function(e,t,n){var i=n||function(){},r=l.Component(t)(i),o=function(){};return o.decorators=[{type:l.NgModule,args:[{imports:[],declarations:[r]}]}],o.ctorParameters=function(){return[]},e.compileModuleAndAllComponentsSync(o).componentFactories.find(function(e){return e.componentType===r})},e.prototype.focusToggle=function(){this.focus=!this.focus},e}();Wr.decorators=[{type:l.Component,args:[{selector:"adf-form-field, form-field",template:'\n        <div [id]="\'field-\'+field?.id+\'-container\'"\n            [hidden]="!field?.isVisible"\n            [class.adf-focus]="focus"\n            (focusin)="focusToggle()"\n            (focusout)="focusToggle()">\n            <div #container></div>\n        </div>\n    ',encapsulation:l.ViewEncapsulation.None}]}],Wr.ctorParameters=function(){return[{type:zr},{type:l.ComponentFactoryResolver},{type:$i},{type:l.Compiler}]},Wr.propDecorators={container:[{type:l.ViewChild,args:["container",{read:l.ViewContainerRef}]}],field:[{type:l.Input}]};var Xr=function(){};Xr.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ln,z.HttpModule,Ge,a.TranslateModule,g.FormsModule,g.ReactiveFormsModule,Gt,st,v.MatDatetimepickerModule,v.MatNativeDatetimeModule],declarations:ae([Zi,Wr,Ki,Ji,er,Gr],Yr,qr,[nr]),entryComponents:ae(Yr),providers:[Hr,bi,zr,Gi,Xi,Qi,$i],exports:ae([Zi,Wr,Ki,Ji,er,Gr],Yr)}]}],Xr.ctorParameters=function(){return[]};var $r=function(){};$r.decorators=[{type:l.Directive,args:[{selector:"adf-sidenav-layout-content"}]}],$r.ctorParameters=function(){return[]},$r.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var Kr=function(){};Kr.decorators=[{type:l.Directive,args:[{selector:"adf-sidenav-layout-header"}]}],Kr.ctorParameters=function(){return[]},Kr.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var Jr=function(){};Jr.decorators=[{type:l.Directive,args:[{selector:"adf-sidenav-layout-navigation"}]}],Jr.ctorParameters=function(){return[]},Jr.propDecorators={template:[{type:l.ContentChild,args:[l.TemplateRef]}]};var Qr=function(){function t(e){var t=this;this.mediaMatcher=e,this.hideSidenav=!1,this.expandedSidenav=!0,this.templateContext={toggleMenu:function(){},isMenuMinimized:function(){return t.isMenuMinimized}},this.onMediaQueryChange=this.onMediaQueryChange.bind(this)}return t.prototype.ngOnInit=function(){var e=this.stepOver||t.STEP_OVER;this.isMenuMinimized=!this.expandedSidenav,this.mediaQueryList=this.mediaMatcher.matchMedia("(max-width: "+e+"px)"),this.mediaQueryList.addListener(this.onMediaQueryChange)},t.prototype.ngAfterViewInit=function(){this.templateContext.toggleMenu=this.toggleMenu.bind(this)},t.prototype.ngOnDestroy=function(){this.mediaQueryList.removeListener(this.onMediaQueryChange)},t.prototype.toggleMenu=function(){this.mediaQueryList.matches?this.isMenuMinimized=!1:this.isMenuMinimized=!this.isMenuMinimized,this.container.toggleMenu()},Object.defineProperty(t.prototype,"isHeaderInside",{get:function(){return this.mediaQueryList.matches},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerTemplate",{get:function(){return this.headerDirective&&this.headerDirective.template||this.emptyTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"navigationTemplate",{get:function(){return this.navigationDirective&&this.navigationDirective.template||this.emptyTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentTemplate",{get:function(){return this.contentDirective&&this.contentDirective.template||this.emptyTemplate},enumerable:!0,configurable:!0}),t.prototype.onMediaQueryChange=function(){this.isMenuMinimized=!1},t}();Qr.STEP_OVER=600,Qr.decorators=[{type:l.Component,args:[{selector:"adf-sidenav-layout",template:'<div class="sidenav-layout">\n    <ng-container *ngIf="!isHeaderInside">\n        <ng-container class="adf-sidenav-layout-outer-header" *ngTemplateOutlet="headerTemplate; context:templateContext"></ng-container>\n    </ng-container>\n\n    <adf-layout-container #container\n        [sidenavMin]="sidenavMin"\n        [sidenavMax]="sidenavMax"\n        [mediaQueryList]="mediaQueryList"\n        [hideSidenav]="hideSidenav"\n        [expandedSidenav]="expandedSidenav"\n        data-automation-id="adf-layout-container"\n        class="layout__content">\n\n        <ng-container app-layout-navigation *ngTemplateOutlet="navigationTemplate; context:templateContext"></ng-container>\n\n        <ng-container app-layout-content>\n            <ng-container *ngIf="isHeaderInside">\n                <ng-container *ngTemplateOutlet="headerTemplate; context:templateContext"></ng-container>\n            </ng-container>\n            <ng-container *ngTemplateOutlet="contentTemplate; context:templateContext"></ng-container>\n        </ng-container>\n    </adf-layout-container>\n</div>\n\n<ng-template #emptyTemplate></ng-template>',styles:[":host{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1}:host .sidenav-layout{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host .sidenav-layout .layout__content{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}:host router-outlet{-webkit-box-flex:0;-ms-flex:0 0;flex:0 0}"]}]}],Qr.ctorParameters=function(){return[{type:H.MediaMatcher}]},Qr.propDecorators={sidenavMin:[{type:l.Input}],sidenavMax:[{type:l.Input}],stepOver:[{type:l.Input}],hideSidenav:[{type:l.Input}],expandedSidenav:[{type:l.Input}],headerDirective:[{type:l.ContentChild,args:[Kr]}],navigationDirective:[{type:l.ContentChild,args:[Jr]}],contentDirective:[{type:l.ContentChild,args:[$r]}],container:[{type:l.ViewChild,args:["container"]}],emptyTemplate:[{type:l.ViewChild,args:["emptyTemplate"]}]};var Zr=Y.trigger("sidenavAnimation",[Y.state("expanded",Y.style({width:"{{ width }}px"}),{params:{width:0}}),Y.state("compact",Y.style({width:"{{ width }}px"}),{params:{width:0}}),Y.transition("compact <=> expanded",Y.animate("0.4s cubic-bezier(0.25, 0.8, 0.25, 1)"))]),eo=Y.trigger("contentAnimation",[Y.state("expanded",Y.style({"margin-left":"{{ marginLeft }}px"}),{params:{marginLeft:0}}),Y.state("compact",Y.style({"margin-left":"{{ marginLeft }}px"}),{params:{marginLeft:0}}),Y.transition("expanded <=> compact",Y.animate("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))]),to=function(){function e(){this.hideSidenav=!1,this.expandedSidenav=!0,this.SIDENAV_STATES={MOBILE:{},EXPANDED:{},COMPACT:{}},this.CONTENT_STATES={MOBILE:{},EXPANDED:{},COMPACT:{}},this.onMediaQueryChange=this.onMediaQueryChange.bind(this)}return e.prototype.ngOnInit=function(){this.SIDENAV_STATES.MOBILE={value:"expanded",params:{width:this.sidenavMax}},this.SIDENAV_STATES.EXPANDED={value:"expanded",params:{width:this.sidenavMax}},this.SIDENAV_STATES.COMPACT={value:"compact",params:{width:this.sidenavMin}},this.CONTENT_STATES.MOBILE={value:"expanded",params:{marginLeft:0}},this.CONTENT_STATES.EXPANDED={value:"expanded",params:{marginLeft:this.sidenavMin}},this.CONTENT_STATES.COMPACT={value:"compact",params:{marginLeft:this.sidenavMax}},this.mediaQueryList.addListener(this.onMediaQueryChange),this.isMobileScreenSize?(this.sidenavAnimationState=this.SIDENAV_STATES.MOBILE,this.contentAnimationState=this.CONTENT_STATES.MOBILE):this.expandedSidenav?(this.sidenavAnimationState=this.SIDENAV_STATES.EXPANDED,this.contentAnimationState=this.CONTENT_STATES.COMPACT):(this.sidenavAnimationState=this.SIDENAV_STATES.COMPACT,this.contentAnimationState=this.CONTENT_STATES.EXPANDED)},e.prototype.ngOnDestroy=function(){this.mediaQueryList.removeListener(this.onMediaQueryChange)},e.prototype.toggleMenu=function(){this.isMobileScreenSize?this.sidenav.toggle():(this.sidenavAnimationState=this.toggledSidenavAnimation,this.contentAnimationState=this.toggledContentAnimation)},Object.defineProperty(e.prototype,"toggledSidenavAnimation",{get:function(){return this.sidenavAnimationState===this.SIDENAV_STATES.EXPANDED?this.SIDENAV_STATES.COMPACT:this.SIDENAV_STATES.EXPANDED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggledContentAnimation",{get:function(){return this.isMobileScreenSize?this.CONTENT_STATES.MOBILE:this.sidenavAnimationState===this.SIDENAV_STATES.EXPANDED?this.CONTENT_STATES.COMPACT:this.CONTENT_STATES.EXPANDED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMobileScreenSize",{get:function(){return this.mediaQueryList.matches},enumerable:!0,configurable:!0}),e.prototype.onMediaQueryChange=function(){this.sidenavAnimationState=this.SIDENAV_STATES.EXPANDED,this.contentAnimationState=this.toggledContentAnimation},e}();to.decorators=[{type:l.Component,args:[{selector:"adf-layout-container",template:'<mat-sidenav-container>\n    <mat-sidenav\n        [ngClass]="{ \'sidenav--hidden\': hideSidenav }"\n        [@sidenavAnimation]="sidenavAnimationState"\n        [opened]="!isMobileScreenSize"\n        [mode]="isMobileScreenSize ? \'over\' : \'side\'">\n        <ng-content sidenav select="[app-layout-navigation]"></ng-content>\n    </mat-sidenav>\n\n    <div>\n        <div [@contentAnimation]="contentAnimationState" style="margin-left: 0 !important">\n            <ng-content select="[app-layout-content]"></ng-content>\n        </div>\n    </div>\n</mat-sidenav-container>\n',styles:[":host{display:block;width:100%;height:100%;overflow:hidden}ng-content{display:block;width:100%;height:100%;overflow:hidden}.sidenav--hidden{visibility:hidden!important;width:0!important;-webkit-transform:unset!important;transform:unset!important;opacity:0!important}.mat-sidenav-container{display:block;width:100%;height:100%;overflow:hidden}.mat-sidenav{overflow:hidden}:host ::ng-deep mat-sidenav-content{margin-left:0!important}.mat-drawer-transition .mat-drawer-content,.mat-sidenav-content{-webkit-transform:unset!important;transform:unset!important;-webkit-transition-property:unset!important;transition-property:unset!important;-webkit-transition-duration:unset!important;transition-duration:unset!important;-webkit-transition-timing-function:unset!important;transition-timing-function:unset!important}"],animations:[Zr,eo]}]}],to.ctorParameters=function(){return[]},to.propDecorators={sidenavMin:[{type:l.Input}],sidenavMax:[{type:l.Input}],mediaQueryList:[{type:l.Input}],hideSidenav:[{type:l.Input}],expandedSidenav:[{type:l.Input}],sidenav:[{type:l.ViewChild,args:[h.MatSidenav]}]};var no=function(){};no.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge],exports:[Kr,$r,Jr,Qr,to],declarations:[Kr,$r,Jr,Qr,to]}]}],no.ctorParameters=function(){return[]};var io=function(){function e(e,t,n){this.datePipe=e,this.peopleProcessService=t,this.ecmUserService=n,this.clickRow=new l.EventEmitter}return e.prototype.selectComment=function(e){this.selectedComment&&(this.selectedComment.isSelected=!1),e.isSelected=!0,this.selectedComment=e,this.clickRow.emit(this.selectedComment)},e.prototype.getUserShortName=function(e){var t="";return e&&(e.firstName&&(t=e.firstName[0].toUpperCase()),e.lastName&&(t+=e.lastName[0].toUpperCase())),t},e.prototype.isPictureDefined=function(e){return e.pictureId||e.avatarId},e.prototype.getUserImage=function(e){return this.isAContentUsers(e)?this.ecmUserService.getUserProfileImage(e.avatarId):this.peopleProcessService.getUserImage(e)},e.prototype.transformDate=function(e){var t,n=Number.parseInt(this.datePipe.transform(e,"yMMdd"));n===Number.parseInt(this.datePipe.transform(Date.now(),"yMMdd"))?t="Today, "+this.datePipe.transform(e,"hh:mm a"):t=n===Number.parseInt(this.datePipe.transform(Date.now()-864e5,"yMMdd"))?"Yesterday, "+this.datePipe.transform(e,"hh:mm a"):this.datePipe.transform(e,"MMM dd y, hh:mm a");return t},e.prototype.isAContentUsers=function(e){return e.avatarId},e}();io.decorators=[{type:l.Component,args:[{selector:"adf-comment-list",template:' <mat-list class="adf-comment-list">\n    <mat-list-item *ngFor="let comment of comments"\n                  (click)="selectComment(comment)"\n                  class="adf-comment-list-item"\n                  [class.is-selected]="comment.isSelected"\n                  id="adf-comment-{{comment?.id}}">\n        <div id="comment-user-icon" class="adf-comment-img-container">\n            <div\n                *ngIf="!isPictureDefined(comment.createdBy)"\n                class="adf-comment-user-icon">\n                {{getUserShortName(comment.createdBy)}}\n            </div>\n            <div>\n                <img *ngIf="isPictureDefined(comment.createdBy)"\n                      class="adf-people-img"\n                     [src]="getUserImage(comment.createdBy)"\n                />\n            </div>\n        </div>\n        <div class="adf-comment-contents">\n            <div matLine id="comment-user" class="adf-comment-user-name">\n                {{comment.createdBy?.firstName}} {{comment.createdBy?.lastName}}\n            </div>\n            <div matLine id="comment-message" class="adf-comment-message">\n                {{comment.message}}\n            </div>\n            <div matLine id="comment-time" class="adf-comment-message-time">\n                {{transformDate(comment.created)}}\n            </div>\n        </div>\n    </mat-list-item>\n</mat-list>\n',styles:[""],encapsulation:l.ViewEncapsulation.None}]}],io.ctorParameters=function(){return[{type:i.DatePipe},{type:Fr},{type:dt}]},io.propDecorators={comments:[{type:l.Input}],clickRow:[{type:l.Output}]};var ro=function(e){e&&(this.id=e.id,this.message=e.message,this.created=e.created,this.createdBy=e.createdBy,this.isSelected=!!e.isSelected&&e.isSelected)},oo=function(e){this.pictureId=null,e&&(this.id=e.id,this.email=e.email||null,this.firstName=e.firstName||null,this.lastName=e.lastName||null,this.pictureId=e.pictureId||null)},ao=function(){function e(e,t){this.apiService=e,this.logService=t}return e.prototype.addTaskComment=function(e,t){var n=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.taskApi.addTaskComment({message:t},e)).map(function(e){return e}).map(function(e){return new ro({id:e.id,message:e.message,created:e.created,createdBy:e.createdBy})})["catch"](function(e){return n.handleError(e)})},e.prototype.getTaskComments=function(e){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.taskApi.getTaskComments(e)).map(function(e){return e}).map(function(e){var n=[];return e.data.forEach(function(e){var t=new oo(e.createdBy);n.push(new ro({id:e.id,message:e.message,created:e.created,createdBy:t}))}),n})["catch"](function(e){return t.handleError(e)})},e.prototype.getProcessInstanceComments=function(e){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.commentsApi.getProcessInstanceComments(e)).map(function(e){return e}).map(function(e){var n=[];return e.data.forEach(function(e){var t=new oo(e.createdBy);n.push(new ro({id:e.id,message:e.message,created:e.created,createdBy:t}))}),n})["catch"](function(e){return t.handleError(e)})},e.prototype.addProcessInstanceComment=function(e,t){var n=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.commentsApi.addProcessInstanceComment({message:t},e)).map(function(e){return new ro({id:e.id,message:e.message,created:e.created,createdBy:e.createdBy})})["catch"](function(e){return n.handleError(e)})},e.prototype.handleError=function(e){return this.logService.error(e),u.Observable["throw"](e||"Server error")},e}();ao.decorators=[{type:l.Injectable}],ao.ctorParameters=function(){return[{type:ve},{type:Ee}]};var so=function(){function e(e,t){this.apiService=e,this.logService=t}return e.prototype.addNodeComment=function(e,t){var n=this;return u.Observable.fromPromise(this.apiService.getInstance().core.commentsApi.addComment(e,{content:t})).map(function(e){return new ro({id:e.entry.id,message:e.entry.content,created:e.entry.createdAt,createdBy:e.entry.createdBy})})["catch"](function(e){return n.handleError(e)})},e.prototype.getNodeComments=function(e){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().core.commentsApi.getComments(e)).map(function(e){var t=[];return e.list.entries.forEach(function(e){t.push(new ro({id:e.entry.id,message:e.entry.content,created:e.entry.createdAt,createdBy:e.entry.createdBy}))}),t})["catch"](function(e){return t.handleError(e)})},e.prototype.handleError=function(e){return this.logService.error(e),u.Observable["throw"](e||"Server error")},e}();so.decorators=[{type:l.Injectable}],so.ctorParameters=function(){return[{type:ve},{type:Ee}]};var lo=function(){function e(e,t){var n=this;this.commentProcessService=e,this.commentContentService=t,this.readOnly=!1,this.error=new l.EventEmitter,this.comments=[],this.beingAdded=!1,this.comment$=new u.Observable(function(e){return n.commentObserver=e}).share(),this.comment$.subscribe(function(e){n.comments.push(e)})}return e.prototype.ngOnChanges=function(e){this.taskId=null,this.nodeId=null,this.taskId=e.taskId?e.taskId.currentValue:null,this.nodeId=e.nodeId?e.nodeId.currentValue:null,this.taskId||this.nodeId?this.getComments():this.resetComments()},e.prototype.getComments=function(){var t=this;this.resetComments(),this.isATask()&&this.commentProcessService.getTaskComments(this.taskId).subscribe(function(e){e&&e instanceof Array&&(e=e.sort(function(e,t){var n=new Date(e.created),i=new Date(t.created);return i<n?-1:n<i?1:0})).forEach(function(e){t.commentObserver.next(e)})},function(e){t.error.emit(e)}),this.isANode()&&this.commentContentService.getNodeComments(this.nodeId).subscribe(function(e){e&&e instanceof Array&&(e=e.sort(function(e,t){var n=new Date(e.created),i=new Date(t.created);return i<n?-1:n<i?1:0})).forEach(function(e){t.commentObserver.next(e)})},function(e){t.error.emit(e)})},e.prototype.resetComments=function(){this.comments=[]},e.prototype.add=function(){var t=this;this.message&&this.message.trim()&&!this.beingAdded&&(this.beingAdded=!0,this.isATask()&&this.commentProcessService.addTaskComment(this.taskId,this.message).subscribe(function(e){t.comments.unshift(e),t.message="",t.beingAdded=!1},function(e){t.error.emit(e),t.beingAdded=!1}),this.isANode()&&this.commentContentService.addNodeComment(this.nodeId,this.message).subscribe(function(e){t.comments.unshift(e),t.message="",t.beingAdded=!1},function(e){t.error.emit(e),t.beingAdded=!1}))},e.prototype.clear=function(){this.message=""},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.isATask=function(){return!!this.taskId},e.prototype.isANode=function(){return!!this.nodeId},e}();lo.decorators=[{type:l.Component,args:[{selector:"adf-comments",template:'<div class="adf-comments-container">\n    <div id="comment-header" class="adf-comments-header">\n        {{\'COMMENTS.HEADER\' | translate: { count: comments?.length} }}\n    </div>\n    <div class="adf-comments-input-container" *ngIf="!isReadOnly()">\n            <mat-form-field class="adf-full-width">\n                <input matInput id="comment-input" placeholder="{{\'COMMENTS.ADD\' | translate}}" [(ngModel)]="message" (keyup.enter)="add()" (keyup.esc)="clear()">\n            </mat-form-field>\n    </div>\n\n    <div *ngIf="comments.length > 0">\n        <adf-comment-list [comments]="comments">\n        </adf-comment-list>\n    </div>\n</div>\n',styles:[""]}]}],lo.ctorParameters=function(){return[{type:ao},{type:so}]},lo.propDecorators={taskId:[{type:l.Input}],nodeId:[{type:l.Input}],readOnly:[{type:l.Input}],error:[{type:l.Output}]};var uo=function(){};uo.decorators=[{type:l.NgModule,args:[{imports:[Gt,Ln,g.FormsModule,g.ReactiveFormsModule,Ge,i.CommonModule,a.TranslateModule],declarations:[io,lo],exports:[io,lo]}]}],uo.ctorParameters=function(){return[]};var co=function(){function e(e,t,n){this.authService=e,this.router=t,this.appConfig=n}return e.prototype.canActivate=function(e,t){var n=t.url;return this.checkLogin(n)},e.prototype.canActivateChild=function(e,t){return this.canActivate(e,t)},e.prototype.checkLogin=function(e){if(this.authService.isLoggedIn())return!0;this.authService.setRedirectUrl({provider:"ALL",url:e});var t=this.getRouteDestinationForLogin();return this.router.navigate(["/"+t]),!1},e.prototype.getRouteDestinationForLogin=function(){return this.appConfig&&this.appConfig.get("loginRoute")?this.appConfig.get("loginRoute"):"login"},e}();co.decorators=[{type:l.Injectable}],co.ctorParameters=function(){return[{type:Re},{type:P.Router},{type:ge}]};var po=function(){function e(e,t,n,i){this.authService=e,this.apiService=t,this.router=n,this.appConfig=i}return Object.defineProperty(e.prototype,"authApi",{get:function(){return this.apiService.getInstance().ecmAuth},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return this.authApi.isLoggedIn()?this.authApi.validateTicket().then(function(){return!0},function(){return!1})["catch"](function(){return!1}):Promise.resolve(!1)},e.prototype.canActivateChild=function(e,t){return this.canActivate(e,t)},e.prototype.canActivate=function(e,n){var i=this;return this.isLoggedIn().then(function(e){if(!e){i.authService.setRedirectUrl({provider:"ECM",url:n.url});var t=i.getRouteDestinationForLogin();i.router.navigate(["/"+t])}return e})},e.prototype.getRouteDestinationForLogin=function(){return this.appConfig&&this.appConfig.get("loginRoute")?this.appConfig.get("loginRoute"):"login"},e}();po.decorators=[{type:l.Injectable}],po.ctorParameters=function(){return[{type:Re},{type:ve},{type:P.Router},{type:ge}]};var mo=function(){function e(e,t,n){this.authService=e,this.router=t,this.appConfig=n}return e.prototype.canActivate=function(e,t){return this.checkLogin(t.url)},e.prototype.canActivateChild=function(e,t){return this.canActivate(e,t)},e.prototype.checkLogin=function(e){if(this.authService.isBpmLoggedIn())return!0;this.authService.setRedirectUrl({provider:"BPM",url:e});var t=this.getRouteDestinationForLogin();return this.router.navigate(["/"+t]),!1},e.prototype.getRouteDestinationForLogin=function(){return this.appConfig&&this.appConfig.get("loginRoute")?this.appConfig.get("loginRoute"):"login"},e}();mo.decorators=[{type:l.Injectable}],mo.ctorParameters=function(){return[{type:Re},{type:P.Router},{type:ge}]};var fo=function(){function e(e,t){this.apiService=e,this.logService=t}return e.prototype.getDeployedApplications=function(){var t=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.appsApi.getAppDefinitions()).map(function(e){return e.data})["catch"](function(e){return t.handleError(e)})},e.prototype.getDeployedApplicationsByName=function(t){var n=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.appsApi.getAppDefinitions()).map(function(e){return e.data.find(function(e){return e.name===t})})["catch"](function(e){return n.handleError(e)})},e.prototype.getApplicationDetailsById=function(t){var n=this;return u.Observable.fromPromise(this.apiService.getInstance().activiti.appsApi.getAppDefinitions()).map(function(e){return e.data.find(function(e){return e.id===t})})["catch"](function(e){return n.handleError(e)})},e.prototype.handleError=function(e){return this.logService.error(e),u.Observable["throw"](e||"Server error")},e}();fo.decorators=[{type:l.Injectable}],fo.ctorParameters=function(){return[{type:ve},{type:Ee}]};var ho=function(){function e(e,t){this.titleService=e,this.appConfig=t}return e.prototype.setTitle=function(e){void 0===e&&(e="");var t=this.appConfig.get("application.name")||"Alfresco ADF Application",n=e?e+" - "+t:""+t;this.titleService.setTitle(n)},e}();ho.decorators=[{type:l.Injectable}],ho.ctorParameters=function(){return[{type:m.Title},{type:ge}]};var go=function(){function e(e){this.apiService=e}return e.prototype.isRenditionAvailable=function(e,t){var i=this;return u.Observable.create(function(n){i.getRendition(e,t).subscribe(function(e){var t=!0;"NOT_CREATED"===e.entry.status.toString()&&(t=!1),n.next(t),n.complete()},function(){n.next(!1),n.complete()})})},e.prototype.isConversionPossible=function(t,n){var i=this;return u.Observable.create(function(e){i.getRendition(t,n).subscribe(function(){e.next(!0),e.complete()},function(){e.next(!1),e.complete()})})},e.prototype.getRenditionUrl=function(e,t){return this.apiService.contentApi.getRenditionUrl(e,t)},e.prototype.getRendition=function(e,t){return u.Observable.fromPromise(this.apiService.renditionsApi.getRendition(e,t))},e.prototype.getRenditionsListByNodeId=function(e){return u.Observable.fromPromise(this.apiService.renditionsApi.getRenditions(e))},e.prototype.createRendition=function(e,t){return u.Observable.fromPromise(this.apiService.renditionsApi.createRendition(e,{id:t}))},e.prototype.convert=function(e,t,n,i){var r=this;return void 0===n&&(n=1e3),void 0===i&&(i=5),this.createRendition(e,t).concatMap(function(){return r.pollRendition(e,t,n,i)})},e.prototype.pollRendition=function(e,t,n,i){var r=this;void 0===n&&(n=1e3),void 0===i&&(i=5);var o=0;return u.Observable.interval(n).switchMap(function(){return r.getRendition(e,t)}).takeWhile(function(e){return!(i<(o+=1))&&"CREATED"!==e.entry.status.toString()})},e}();go.decorators=[{type:l.Injectable}],go.ctorParameters=function(){return[{type:ve}]};var yo=function(e){this.name=e&&e.name,this.path=e&&e.path,this.json=e&&e.json||[]},vo=function(){function e(e,t){this.http=e,this.logService=t,this.prefix="i18n",this.suffix=".json",this.providers=[],this.queue=[]}return e.prototype.registerProvider=function(t,e){var n=this.providers.find(function(e){return e.name===t});n?n.path=e:this.providers.push(new yo({name:t,path:e}))},e.prototype.providerRegistered=function(t){return!!this.providers.find(function(e){return e.name===t})},e.prototype.getComponentToFetch=function(i){var r=this,t=[];return this.queue[i]||(this.queue[i]=[]),this.providers.forEach(function(n){if(!r.isComponentInQueue(i,n.name)){r.queue[i].push(n.name);var e=u.Observable.create(function(t){var e=n.path+"/"+r.prefix+"/"+i+r.suffix+"?v="+Date.now();r.http.get(e).pipe(K.map(function(e){n.json[i]=e})).subscribe(function(e){t.next(e),t.complete()},function(){t.next(""),t.complete()})});t.push(e)}}),t},e.prototype.init=function(e){this.queue[e]===undefined&&(this.queue[e]=[])},e.prototype.isComponentInQueue=function(e,t){return!!(this.queue[e]||[]).find(function(e){return e===t})},e.prototype.getFullTranslationJSON=function(t){var n={};return this.providers.slice(0).sort(function(e,t){return"app"===e.name?1:"app"===t.name?-1:e.name.localeCompare(t.name)}).forEach(function(e){e.json&&e.json[t]&&(n=he.merge(n,e.json[t]))}),n},e.prototype.getTranslation=function(n){var i=this,r=this.getComponentToFetch(n);return u.Observable.create(function(t){if(0<r.length)u.Observable.forkJoin(r).subscribe(function(){var e=i.getFullTranslationJSON(n);e&&t.next(e),t.complete()},function(e){i.logService.error(e)});else{var e=i.getFullTranslationJSON(n);e&&t.next(e)}})},e}();vo.decorators=[{type:l.Injectable}],vo.ctorParameters=function(){return[{type:t.HttpClient},{type:Ee}]};var bo=Z||Q,wo=function(){function e(e,t){this.apiService=e,this.queue=[],this.cache={},this.totalComplete=0,this.totalAborted=0,this.totalError=0,this.activeTask=null,this.excludedFileList=[],this.queueChanged=new o.Subject,this.fileUpload=new o.Subject,this.fileUploadStarting=new o.Subject,this.fileUploadCancelled=new o.Subject,this.fileUploadProgress=new o.Subject,this.fileUploadAborted=new o.Subject,this.fileUploadError=new o.Subject,this.fileUploadComplete=new o.Subject,this.fileUploadDeleted=new o.Subject,this.fileDeleted=new o.Subject,this.excludedFileList=t.get("files.excluded")}return e.prototype.isUploading=function(){return!!this.activeTask},e.prototype.getQueue=function(){return this.queue},e.prototype.addToQueue=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.filter(function(e){return t.filterElement(e)});return this.queue=this.queue.concat(i),this.queueChanged.next(this.queue),i},e.prototype.filterElement=function(t){var e=!0;return this.excludedFileList&&(e=0===this.excludedFileList.filter(function(e){return bo(t.name,e)}).length),e},e.prototype.uploadFilesInTheQueue=function(e){var t=this;if(!this.activeTask){var n=this.queue.find(function(e){return e.status===ue.Pending});if(n){this.onUploadStarting(n);var i=this.beginUpload(n,e);this.activeTask=i,this.cache[n.id]=i;var r=function(){t.activeTask=null,setTimeout(function(){return t.uploadFilesInTheQueue(e)},100)};i.next=r,i.then(function(){return r()},function(){return r()})}}},e.prototype.cancelUpload=function(){for(var n=this,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach(function(e){var t=n.cache[e.id];t?(t.abort(),delete n.cache[e.id]):n.getAction(e)()})},e.prototype.clearQueue=function(){this.queue=[],this.totalComplete=0,this.totalAborted=0,this.totalError=0},e.prototype.getUploadPromise=function(e){var t={renditions:"doclib"};return!0===e.options.newVersion?(t.overwrite=!0,t.majorVersion=!0):t.autoRename=!0,e.options.newVersionBaseName&&(t.name=e.options.newVersionBaseName),this.apiService.getInstance().upload.uploadFile(e.file,e.options.path,e.options.parentId,null,t)},e.prototype.beginUpload=function(t,n){var i=this,e=this.getUploadPromise(t);return e.on("progress",function(e){i.onUploadProgress(t,e)}).on("abort",function(){i.onUploadAborted(t),n.emit({value:"File aborted"})}).on("error",function(e){i.onUploadError(t,e),n.emit({value:"Error file uploaded"})}).on("success",function(e){i.onUploadComplete(t,e),n.emit({value:e})})["catch"](function(e){throw e}),e},e.prototype.onUploadStarting=function(e){if(e){e.status=ue.Starting;var t=new pe(e,ue.Starting);this.fileUpload.next(t),this.fileUploadStarting.next(t)}},e.prototype.onUploadProgress=function(e,t){if(e){e.progress=t,e.status=ue.Progress;var n=new pe(e,ue.Progress);this.fileUpload.next(n),this.fileUploadProgress.next(n)}},e.prototype.onUploadError=function(e,t){if(e){e.status=ue.Error,this.totalError++,this.cache[e.id]&&delete this.cache[e.id];var n=new fe(e,t,this.totalError);this.fileUpload.next(n),this.fileUploadError.next(n)}},e.prototype.onUploadComplete=function(e,t){if(e){e.status=ue.Complete,e.data=t,this.totalComplete++,this.cache[e.id]&&delete this.cache[e.id];var n=new de(e,this.totalComplete,t,this.totalAborted);this.fileUpload.next(n),this.fileUploadComplete.next(n)}},e.prototype.onUploadAborted=function(e){if(e){e.status=ue.Aborted,this.totalAborted++;var t=this.cache[e.id];t&&delete this.cache[e.id];var n=new pe(e,ue.Aborted);this.fileUpload.next(n),this.fileUploadAborted.next(n),t.next()}},e.prototype.onUploadCancelled=function(e){if(e){e.status=ue.Cancelled;var t=new pe(e,ue.Cancelled);this.fileUpload.next(t),this.fileUploadCancelled.next(t)}},e.prototype.onUploadDeleted=function(e){if(e){e.status=ue.Deleted,this.totalComplete--;var t=new me(e,this.totalComplete);this.fileUpload.next(t),this.fileUploadDeleted.next(t)}},e.prototype.getAction=function(e){var t,n=this;return((t={})[ue.Pending]=function(){return n.onUploadCancelled(e)},t[ue.Deleted]=function(){return n.onUploadDeleted(e)},t[ue.Error]=function(){return n.onUploadError(e,null)},t)[e.status]},e}();wo.decorators=[{type:l.Injectable}],wo.ctorParameters=function(){return[{type:ve},{type:ge}]};var Eo=function(){function e(e,t){this.apiService=e,this.preferences=t}return Object.defineProperty(e.prototype,"nodesApi",{get:function(){return this.apiService.getInstance().core.nodesApi},enumerable:!0,configurable:!0}),e.prototype.getDeletedNodes=function(e){var t=this.nodesApi,n=this.handleError,i={include:["path","properties"],maxItems:this.preferences.paginationSize,skipCount:0},r=Object.assign(i,e),o=t.getDeletedNodes(r);return u.Observable.fromPromise(o)["catch"](n)},e.prototype.handleError=function(e){return u.Observable.of(e)},e}();Eo.decorators=[{type:l.Injectable}],Eo.ctorParameters=function(){return[{type:ve},{type:De}]};var Io=function(){function t(e,t){this.apiService=e,this.preferences=t}return t.remapEntry=function(e){var t=e.entry;return t.properties={"cm:title":t.title,"cm:description":t.description},{entry:t}},t.prototype.remapFavoritesData=function(e){void 0===e&&(e={});var t=e.list||{},n=t.pagination||{};return{list:{entries:this.remapFavoriteEntries(t.entries||[]),pagination:n}}},t.prototype.remapFavoriteEntries=function(e){return e.map(function(e){var t=e.entry.target;return{entry:t.file||t.folder}}).filter(function(e){return!!e.entry}).map(t.remapEntry)},Object.defineProperty(t.prototype,"favoritesApi",{get:function(){return this.apiService.getInstance().core.favoritesApi},enumerable:!0,configurable:!0}),t.prototype.getFavorites=function(e,t){var n=this.favoritesApi,i=this.handleError,r={maxItems:this.preferences.paginationSize,skipCount:0,where:"(EXISTS(target/file) OR EXISTS(target/folder))",include:["properties","allowableOperations"]},o=Object.assign(r,t),a=n.getFavorites(e,o).then(this.remapFavoritesData);return u.Observable.fromPromise(a)["catch"](i)},t.prototype.handleError=function(e){return u.Observable.of(e)},t}();Io.decorators=[{type:l.Injectable}],Io.ctorParameters=function(){return[{type:ve},{type:De}]};var Co=function(){function e(e,t){this.api=e,this.preferences=t}return Object.defineProperty(e.prototype,"nodesApi",{get:function(){return this.api.getInstance().core.nodesApi},enumerable:!0,configurable:!0}),e.prototype.getEntryFromEntity=function(e){return e.entry},e.prototype.getNode=function(e,t){void 0===t&&(t={});var n=this.nodesApi,i=this.handleError,r=this.getEntryFromEntity,o=Object.assign({include:["path","properties","allowableOperations","permissions"]},t),a=n.getNode(e,o).then(r);return u.Observable.fromPromise(a)["catch"](i)},e.prototype.getNodeChildren=function(e,t){void 0===t&&(t={});var n=this.nodesApi,i=this.handleError,r={maxItems:this.preferences.paginationSize,skipCount:0,include:["path","properties","allowableOperations","permissions"]},o=Object.assign(r,t),a=n.getNodeChildren(e,o);return u.Observable.fromPromise(a)["catch"](i)},e.prototype.createNode=function(e,t,n){void 0===n&&(n={});var i=this.nodesApi,r=this.handleError,o=this.getEntryFromEntity,a=i.addNode(e,t,n).then(o);return u.Observable.fromPromise(a)["catch"](r)},e.prototype.createFolder=function(e,t,n){void 0===n&&(n={});var i=Object.assign({nodeType:"cm:folder"},t);return this.createNode(e,i,n)},e.prototype.updateNode=function(e,t,n){void 0===n&&(n={});var i=this.nodesApi,r=this.handleError,o=this.getEntryFromEntity,a=i.updateNode(e,t,n).then(o);return u.Observable.fromPromise(a)["catch"](r)},e.prototype.deleteNode=function(e,t){void 0===t&&(t={});var n=this.nodesApi,i=this.handleError,r=n.deleteNode(e,t);return u.Observable.fromPromise(r)["catch"](i)},e.prototype.restoreNode=function(e){var t=this.nodesApi,n=this.handleError,i=this.getEntryFromEntity,r=t.restoreNode(e).then(i);return u.Observable.fromPromise(r)["catch"](n)},e.prototype.handleError=function(e){return u.Observable["throw"](e)},e}();Co.decorators=[{type:l.Injectable}],Co.ctorParameters=function(){return[{type:ve},{type:De}]};var So=function(){function e(e){this.apiService=e}return Object.defineProperty(e.prototype,"peopleApi",{get:function(){return this.apiService.getInstance().core.peopleApi},enumerable:!0,configurable:!0}),e.prototype.getPerson=function(e){var t=this.peopleApi,n=this.handleError,i=t.getPerson(e);return u.Observable.fromPromise(i)["catch"](n)},e.prototype.getCurrentPerson=function(){return this.getPerson("-me-")},e.prototype.handleError=function(e){return u.Observable.of(e)},e}();So.decorators=[{type:l.Injectable}],So.ctorParameters=function(){return[{type:ve}]};var To=function(){function e(){}return e.prototype.generateQueryBody=function(e,t,n){return{query:{query:e?e+"* OR name:"+e+"*":e},include:["path","allowableOperations"],paging:{maxItems:t,skipCount:n},filterQueries:[{query:"TYPE:'cm:folder' OR TYPE:'cm:content'"},{query:"NOT cm:creator:System"}]}},e}();To.decorators=[{type:l.Injectable}],To.ctorParameters=function(){return[]};var xo=function(){function e(e,t){this.apiService=e,this.searchConfigurationService=t,this.dataLoaded=new o.Subject}return e.prototype.getNodeQueryResults=function(e,t){var n=this,i=this.apiService.getInstance().core.queriesApi.findNodes(e,t);return i.then(function(e){n.dataLoaded.next(e)}),u.Observable.fromPromise(i)["catch"](function(e){return n.handleError(e)})},e.prototype.search=function(e,t,n){var i=this,r=Object.assign(this.searchConfigurationService.generateQueryBody(e,t,n)),o=this.apiService.getInstance().search.searchApi.search(r);return o.then(function(e){i.dataLoaded.next(e)}),u.Observable.fromPromise(o)["catch"](function(e){return i.handleError(e)})},e.prototype.searchByQueryBody=function(e){var t=this,n=this.apiService.getInstance().search.searchApi.search(e);return n.then(function(e){t.dataLoaded.next(e)}),u.Observable.fromPromise(n)["catch"](function(e){return t.handleError(e)})},e.prototype.handleError=function(e){return u.Observable["throw"](e||"Server error")},e}();xo.decorators=[{type:l.Injectable}],xo.ctorParameters=function(){return[{type:ve},{type:To}]};var Oo=function(){function e(e,t){this.apiService=e,this.preferences=t}return Object.defineProperty(e.prototype,"sharedLinksApi",{get:function(){return this.apiService.getInstance().core.sharedlinksApi},enumerable:!0,configurable:!0}),e.prototype.getSharedLinks=function(e){void 0===e&&(e={});var t=this.sharedLinksApi,n=this.handleError,i={maxItems:this.preferences.paginationSize,skipCount:0,include:["properties","allowableOperations"]},r=Object.assign({},i,e),o=t.findSharedLinks(r);return u.Observable.fromPromise(o)["catch"](n)},e.prototype.createSharedLinks=function(e,t){void 0===t&&(t={});var n=this.sharedLinksApi,i=this.handleError,r=n.addSharedLink({nodeId:e});return u.Observable.fromPromise(r)["catch"](i)},e.prototype.deleteSharedLink=function(e){var t=this.sharedLinksApi,n=this.handleError,i=t.deleteSharedLink(e);return u.Observable.fromPromise(i)["catch"](n)},e.prototype.handleError=function(e){return u.Observable.of(e)},e}();Oo.decorators=[{type:l.Injectable}],Oo.ctorParameters=function(){return[{type:ve},{type:De}]};var Ao=function(){function e(e){this.apiService=e}return e.prototype.getSites=function(e){void 0===e&&(e={});var t=Object.assign({},{skipCount:0,include:["properties"]},e);return u.Observable.fromPromise(this.apiService.getInstance().core.sitesApi.getSites(t))["catch"](this.handleError)},e.prototype.getSite=function(e,t){return u.Observable.fromPromise(this.apiService.getInstance().core.sitesApi.getSite(e,t))["catch"](this.handleError)},e.prototype.deleteSite=function(e,t){void 0===t&&(t=!0);var n={};return n.permanent=t,u.Observable.fromPromise(this.apiService.getInstance().core.sitesApi.deleteSite(e,n)["catch"](this.handleError))},e.prototype.getSiteContent=function(e){return this.getSite(e,{relations:["containers"]})},e.prototype.getSiteMembers=function(e){return this.getSite(e,{relations:["members"]})},e.prototype.getEcmCurrentLoggedUserName=function(){return this.apiService.getInstance().ecmAuth.username},e.prototype.handleError=function(e){return console.error(e),u.Observable["throw"](e||"Server error")},e}();Ao.decorators=[{type:l.Injectable}],Ao.ctorParameters=function(){return[{type:ve}]};var Po=function(e){e&&(this.edition=e.edition||null,this.majorVersion=e.majorVersion||null,this.revisionVersion=e.revisionVersion||null,this.minorVersion=e.minorVersion||null,this.type=e.type||null)},Do=function(e){e&&(this.major=e.major||null,this.minor=e.minor||null,this.patch=e.patch||null,this.hotfix=e.hotfix||null,this.schema=e.schema||null,this.label=e.label||null,this.display=e.display||null)},Fo=function(e){e&&(this.issuedAt=e.issuedAt||null,this.expiresAt=e.expiresAt||null,this.remainingDays=e.remainingDays||null,this.holder=e.holder||null,this.mode=e.mode||null,this.isClusterEnabled=!!e.isClusterEnabled,this.isCryptodocEnabled=!!e.isCryptodocEnabled)},Ro=function(e){e&&(this.isReadOnly=!!e.isReadOnly,this.isAuditEnabled=!!e.isAuditEnabled,this.isQuickShareEnabled=!!e.isQuickShareEnabled,this.isThumbnailGenerationEnabled=!!e.isThumbnailGenerationEnabled)},ko=function(e){e&&(this.id=e.id||null,this.title=e.title||null,this.description=e.description||null,this.version=e.version||null,this.installDate=e.installDate||null,this.installState=e.installState||null,this.versionMin=e.versionMin||null,this.versionMax=e.versionMax||null)},_o=function(e){var t=this;this.modules=[],e&&e.entry&&e.entry.repository&&(this.edition=e.entry.repository.edition||null,this.version=new Do(e.entry.repository.version),this.license=new Fo(e.entry.repository.license),this.status=new Ro(e.entry.repository.status),e.entry.repository.modules&&e.entry.repository.modules.forEach(function(e){t.modules.push(new ko(e))}))},Mo=function(){function e(e){this.apiService=e}return e.prototype.getEcmProductInfo=function(){return u.Observable.fromPromise(this.apiService.getInstance().discovery.discoveryApi.getRepositoryInformation()).map(function(e){return new _o(e)})["catch"](this.handleError)},e.prototype.getBpmProductInfo=function(){return u.Observable.fromPromise(this.apiService.getInstance().activiti.aboutApi.getAppVersion()).map(function(e){return new Po(e)})["catch"](this.handleError)},e.prototype.handleError=function(e){return u.Observable["throw"](e)},e}();Mo.decorators=[{type:l.Injectable}],Mo.ctorParameters=function(){return[{type:ve}]};var Lo=function(){},Vo=function(e){e&&(this.provider=e.provider,this.url=e.url||null)},No=function(e){e&&(this.id=e.id,this.message=e.message,this.created=e.created,this.createdBy=e.createdBy,this.isSelected=!!e.isSelected&&e.isSelected)},Uo=function(){function e(){}return e.prototype.login=function(e,t){return new Promise(function(e){e("TICKET_4479f4d3bb155195879bfbb8d5206f433488a1b1")})},e.prototype.logout=function(){return new Promise(function(e){e("logout")})},e.prototype.changeConfig=function(){},e}(),Bo=function(n){function e(e){var t=n.call(this,e)||this;return t.config={application:{name:"Alfresco ADF Application"},ecmHost:"http://{hostname}{:port}/ecm",bpmHost:"http://{hostname}{:port}/bpm",logLevel:"silent"},t}return te(e,n),e.prototype.load=function(){var t=this;return new Promise(function(e){e(t.config)})},e}(ge);Bo.decorators=[{type:l.Injectable}],Bo.ctorParameters=function(){return[{type:t.HttpClient}]};var jo=function(){function e(){this.redirectUrl=""}return e.prototype.setRedirectUrl=function(e){this.redirectUrl=e},e.prototype.getRedirectUrl=function(){return this.redirectUrl},e.prototype.login=function(e,t){return"fake-username"===e&&"fake-password"===t?u.Observable.of({type:"type",ticket:"ticket"}):"fake-username-CORS-error"===e&&"fake-password"===t?u.Observable["throw"]({error:{crossDomain:!0,message:"ERROR: the network is offline, Origin is not allowed by Access-Control-Allow-Origin"}}):"fake-username-CSRF-error"===e&&"fake-password"===t?u.Observable["throw"]({message:"ERROR: Invalid CSRF-token",status:403}):"fake-username-ECM-access-error"===e&&"fake-password"===t?u.Observable["throw"]({message:"ERROR: 00170728 Access Denied.  The system is currently in read-only mode",status:403}):u.Observable["throw"]("Fake server error")},e}(),Yo={apps:[],capabilities:"fake-capability",company:"fake-company",created:"fake-create-date",email:"fakeBpm@fake.com",externalId:"fake-external-id",firstName:"fake-first-name",lastName:"fake-last-name",fullname:"fake-full-name",groups:[],id:"fake-id",lastUpdate:"fake-update-date",latestSyncTimeStamp:"fake-timestamp",password:"fake-password",pictureId:undefined,status:"fake-status",tenantId:"fake-tenant-id",tenantName:"fake-tenant-name",tenantPictureId:"fake-tenant-picture-id",type:"fake-type"},qo={id:1,email:"fake-email@dom.com",firstName:"firstName",lastName:"lastName"},zo={size:2,total:2,start:0,data:[{id:1,message:"fake-message-1",created:"",createdBy:qo},{id:2,message:"fake-message-2",created:"",createdBy:qo}]},Ho=new ro({id:1,message:"Test",created:new Date("2016-11-10T03:37:30.010+0000"),createdBy:new oo({id:13,firstName:"Wilbur",lastName:"Adams",email:"wilbur@app.com"})}),Go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.getItem=function(e){return this[e]&&this[e].data||null},t.prototype.setItem=function(e,t,n,i){this[e]={data:t,expiration:n,path:i}},t}(Ae),Wo=function(){function e(){}return e.keyDown=function(e){var t=document.createEvent("Event");t.keyCode=e,t.initEvent("keydown"),document.dispatchEvent(t)},e.keyUp=function(e){var t=document.createEvent("Event");t.keyCode=e,t.initEvent("keyup"),document.dispatchEvent(t)},e.resizeMobileView=function(){window.dispatchEvent(new Event("resize"))},e}(),Xo={list:{pagination:{count:1,hasMoreItems:!1,totalItems:1,skipCount:0,maxItems:100},entries:[{entry:{id:"123",name:"MyDoc",content:{mimetype:"text/plain"},createdByUser:{displayName:"John Doe"},modifiedByUser:{displayName:"John Doe"}}}]}},$o={core:{queriesApi:{findNodes:function(e,t){return Promise.resolve(Xo)}}}},Ko=function(){function e(){this.defaultLang="en",this.onLangChange=new l.EventEmitter}return e.prototype.addTranslationFolder=function(){},e.prototype.onTranslationChanged=function(){},e.prototype.use=function(){},e.prototype.get=function(e,t){return u.Observable.of(e)},e.prototype.instant=function(e,t){return e},e}(),Jo=function(i){function e(e,t){var n=i.call(this,e,t)||this;return n.appConfig=e,n.storage=t,n.initAlfrescoApi(),n}return te(e,i),e.prototype.reset=function(){return ne(this,void 0,void 0,function(){return ie(this,function(e){return this.initAlfrescoApi(),[2]})})},e.prototype.initAlfrescoApi=function(){this.alfrescoApi=new n({provider:this.storage.getItem("AUTH_TYPE"),ticketEcm:this.storage.getItem("ticket-ECM"),ticketBpm:this.storage.getItem("ticket-BPM"),hostEcm:this.appConfig.get("ecmHost"),hostBpm:this.appConfig.get("bpmHost"),contextRoot:"alfresco",disableCsrf:"true"===this.storage.getItem("DISABLE_CSRF"),oauth2:this.appConfig.get("oauth2")})},e}(ve);Jo.decorators=[{type:l.Injectable}];Jo.ctorParameters=function(){return[{type:ge},{type:ye}]};var Qo=new qi({});function Zo(){return[Bt,jt,qt,Yt]}var ea=function(){};function ta(e){return function(){return e.load()}}function na(e,t){return new vo(e,t)}function ia(){return[Re,ve,ht,ke,co,po,mo,fo,ho,ye,Ae,go,Rn,Ee,Qe,vo,et,wo,ii,zn,De,it,Eo,Io,Co,So,Fr,xo,Oo,Ao,Mo,ao,so,To,i.DatePipe]}ea.decorators=[{type:l.NgModule,args:[{imports:[i.CommonModule,Ge,A.FlexLayoutModule],declarations:Zo(),exports:Zo()}]}],ea.ctorParameters=function(){return[]};var ra=na,oa=function(){};oa.decorators=[{type:l.NgModule,args:[{imports:[lt,no,ea,st,i.CommonModule,Mn,g.FormsModule,g.ReactiveFormsModule,t.HttpClientModule,yt,ft,Ge,di,Et,Ke,Tn,pi,Un,Xr,uo,Pt,Ft,Ut,Gt,Ln,a.TranslateModule.forChild({loader:{provide:a.TranslateLoader,useFactory:ra,deps:[t.HttpClient,Ee]}})],exports:[lt,ea,no,st,i.CommonModule,Mn,g.FormsModule,g.ReactiveFormsModule,t.HttpClientModule,yt,ft,Ge,di,Et,Ke,Tn,pi,Un,Xr,uo,Pt,Ft,Ut,Gt,Ln,a.TranslateModule]}]}],oa.ctorParameters=function(){return[]};var aa=na,sa=ta,la=function(){function e(e){e.addTranslationFolder("adf-core","assets/adf-core")}return e.forRoot=function(){return{ngModule:e,providers:ae(ia(),[{provide:l.APP_INITIALIZER,useFactory:ta,deps:[ve],multi:!0}])}},e.forChild=function(){return{ngModule:oa}},e}();la.decorators=[{type:l.NgModule,args:[{imports:[lt,ea,no,st,i.CommonModule,Mn,g.FormsModule,g.ReactiveFormsModule,t.HttpClientModule,yt,ft,Ge,di,Et,Ke,Tn,pi,Un,Xr,uo,Pt,Ft,Ut,Gt,Ln,a.TranslateModule.forRoot({loader:{provide:a.TranslateLoader,useFactory:aa,deps:[t.HttpClient,Ee]}})],exports:[lt,ea,no,st,i.CommonModule,Mn,g.FormsModule,g.ReactiveFormsModule,t.HttpClientModule,yt,ft,Ge,di,Et,Ke,Tn,pi,Un,Xr,uo,Pt,Ft,Ut,Gt,Ln,a.TranslateModule],providers:ae(ia(),[{provide:l.APP_INITIALIZER,useFactory:sa,deps:[ve],multi:!0}])}]}],la.ctorParameters=function(){return[{type:Qe}]},e.ViewerComponent=xe,e.ImgViewerComponent=_e,e.MediaPlayerComponent=Me,e.PdfViewerComponent=Ne,e.PdfThumbListComponent=Ue,e.PdfThumbComponent=Be,e.TxtViewerComponent=je,e.UnknownFormatComponent=Ye,e.ViewerMoreActionsComponent=Ie,e.ViewerOpenWithComponent=Ce,e.ViewerSidebarComponent=Se,e.ViewerToolbarComponent=Te,e.ViewerToolbarActionsComponent=qe,e.ViewerExtensionDirective=ze,e.ViewerModule=lt,e.UserInfoComponent=mt,e.BpmUserService=pt,e.EcmUserService=dt,e.UserInfoModule=ft,e.ToolbarDividerComponent=We,e.ToolbarTitleComponent=Xe,e.ToolbarComponent=$e,e.ToolbarModule=Ke,e.HostSettingsComponent=gt,e.HostSettingsModule=yt,e.PaginationComponent=bt,e.InfinitePaginationComponent=wt,e.PaginationModule=Et,e.LoginHeaderDirective=Ot,e.LoginFooterDirective=At,e.LoginComponent=xt,e.LoginErrorEvent=It,e.LoginSubmitEvent=Ct,e.LoginSuccessEvent=St,e.LoginModule=Pt,e.LanguageMenuComponent=Dt,e.LanguageMenuModule=Ft,e.InfoDrawerLayoutComponent=Rt,e.InfoDrawerTitleDirective=kt,e.InfoDrawerButtonsDirective=_t,e.InfoDrawerContentDirective=Mt,e.InfoDrawerTabComponent=Lt,e.InfoDrawerComponent=Vt,e.declarations=Nt,e.InfoDrawerModule=Ut,e.SidebarActionMenuComponent=Bt,e.SidebarMenuDirective=jt,e.SidebarMenuTitleIconDirective=Yt,e.SidebarMenuExpandIconDirective=qt,e.DataColumnListComponent=Ht,e.DataColumnComponent=zt,e.DataColumnModule=Gt,e.DataRowEvent=Wt,e.DataSorting=Xt,e.ObjectDataRow=tn,e.ObjectDataTableAdapter=rn,e.ObjectDataColumn=nn,e.DataCellEventModel=on,e.DataCellEvent=an,e.DataRowActionModel=sn,e.DataRowActionEvent=ln,e.DataTableCellComponent=un,e.DisplayMode=cn,e.DataTableComponent=pn,e.DateCellComponent=dn,e.EmptyListComponent=mn,e.EmptyListHeaderDirective=fn,e.EmptyListBodyDirective=hn,e.EmptyListFooterDirective=gn,e.FileSizeCellComponent=yn,e.LocationCellComponent=vn,e.LoadingContentTemplateDirective=bn,e.NoContentTemplateDirective=wn,e.NoPermissionTemplateDirective=En,e.DataTableModule=Ln,e.ContextMenuHolderComponent=Cn,e.ContextMenuDirective=Sn,e.ContextMenuService=In,e.ContextMenuModule=Tn,e.AccordionGroupComponent=Nn,e.AccordionComponent=Vn,e.CollapsableModule=Un,e.CardViewComponent=Bn,e.CardViewBoolItemComponent=Hn,e.CardViewDateItemComponent=$n,e.CardViewMapItemComponent=Jn,e.CardViewTextItemComponent=Zn,e.CardViewItemIntValidator=ai,e.CardViewItemFloatValidator=si,e.CardViewBaseItemModel=jn,e.CardViewBoolItemModel=Yn,e.CardViewDateItemModel=Gn,e.CardViewDatetimeItemModel=li,e.CardViewFloatItemModel=ui,e.CardViewIntItemModel=ci,e.CardViewMapItemModel=Kn,e.CardViewTextItemModel=Qn,e.CardItemTypeService=ii,e.transformKeyToObject=qn,e.CardViewUpdateService=zn,e.CardViewContentProxyDirective=ri,e.CardViewModule=pi,e.AppConfigService=ge,e.AppConfigModule=di,e.FormComponent=Ki,e.FormListComponent=Ji,e.ContentWidgetComponent=Zi,e.StartFormComponent=er,e.WIDGET_DIRECTIVES=Yr,e.MASK_DIRECTIVE=qr,e.baseHost=tr,e.WidgetComponent=nr,e.FormFieldTypes=Ei,e.FormWidgetModel=Ii,e.FormFieldModel=Ui,e.FormModel=qi,e.ContainerModel=Bi,e.ContainerColumnModel=Ci,e.TabModel=Yi,e.FormOutcomeModel=ji,e.FormOutcomeEvent=zi,e.RequiredFieldValidator=Ti,e.NumberFieldValidator=xi,e.DateFieldValidator=Oi,e.MinDateFieldValidator=Ai,e.MaxDateFieldValidator=Pi,e.MinDateTimeFieldValidator=Di,e.MaxDateTimeFieldValidator=Fi,e.MinLengthFieldValidator=Ri,e.MaxLengthFieldValidator=ki,e.MinValueFieldValidator=_i,e.MaxValueFieldValidator=Mi,e.RegExFieldValidator=Li,e.FixedValueFieldValidator=Vi,e.FORM_FIELD_VALIDATORS=Ni,e.ContentLinkModel=Hi,e.ErrorMessageModel=Si,e.TabsWidgetComponent=or,e.ContainerWidgetComponent=rr,e.UnknownWidgetComponent=ar,e.TextWidgetComponent=Lr,e.NumberWidgetComponent=Dr,e.CheckboxWidgetComponent=lr,e.MultilineTextWidgetComponentComponent=Pr,e.DropdownWidgetComponent=mr,e.HyperlinkWidgetComponent=Ar,e.RadioButtonsWidgetComponent=kr,e.DisplayTextWidgetComponentComponent=pr,e.UploadWidgetComponent=Nr,e.TypeaheadWidgetComponent=Vr,e.FunctionalGroupWidgetComponent=Or,e.PeopleWidgetComponent=Rr,e.DateWidgetComponent=cr,e.AmountWidgetComponent=sr,e.DynamicTableWidgetComponent=br,e.ErrorWidgetComponent=xr,e.DocumentWidgetComponent=dr,e.DateTimeWidgetComponent=jr,e.DynamicTableModel=vr,e.RowEditorComponent=Sr,e.DateEditorComponent=Ir,e.DropdownEditorComponent=Cr,e.BooleanEditorComponent=wr,e.TextEditorComponent=Tr,e.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR=_r,e.InputMaskDirective=Mr,e.FormService=Gi,e.EcmModelService=bi,e.NodeService=Xi,e.FormRenderingService=zr,e.ProcessContentService=Qi,e.ActivitiContentService=Hr,e.FormEvent=mi,e.FormErrorEvent=fi,e.FormFieldEvent=hi,e.ValidateFormFieldEvent=gi,e.ValidateFormEvent=yi,e.ValidateDynamicTableRowEvent=vi,e.FormModule=Xr,e.SidenavLayoutComponent=Qr,e.SidenavLayoutModule=no,e.CommentListComponent=io,e.CommentsComponent=lo,e.CommentsModule=uo,e.FileSizePipe=Ze,e.MimeTypeIconPipe=tt,e.NodeNameTooltipPipe=nt,e.HighlightPipe=rt,e.TimeAgoPipe=ot,e.InitialUsernamePipe=at,e.PipeModule=st,e.AuthenticationService=Re,e.AlfrescoApiService=ve,e.SettingsService=ht,e.ContentService=ke,e.AuthGuard=co,e.AuthGuardEcm=po,e.AuthGuardBpm=mo,e.AppsProcessService=fo,e.PageTitleService=ho,e.StorageService=ye,e.CookieService=Ae,e.RenditionsService=go,e.NotificationService=Rn,e.LogService=Ee,e.TRANSLATION_PROVIDER=Je,e.TranslationService=Qe,e.TranslateLoaderService=vo,e.ThumbnailService=et,e.UploadService=wo,e.DynamicComponentResolver=ti,e.DynamicComponentMapper=ni,e.UserPreferenceValues=Pe,e.UserPreferencesService=De,e.HighlightTransformService=it,e.DeletedNodesApiService=Eo,e.FavoritesApiService=Io,e.NodesApiService=Co,e.PeopleContentService=So,e.PeopleProcessService=Fr,e.SearchService=xo,e.SharedLinksApiService=Oo,e.SitesService=Ao,e.DiscoveryApiService=Mo,e.CommentProcessService=ao,e.SearchConfigurationService=To,e.CommentContentService=so,e.HighlightDirective=xn,e.LogoutDirective=On,e.NodeDeleteDirective=An,e.NodeFavoriteDirective=Pn,e.NodePermissionDirective=Fn,e.NodeRestoreDirective=kn,e.UploadDirective=_n,e.DirectiveModule=Mn,e.ObjectUtils=he,e.FileUtils=$t,e.MOMENT_DATE_FORMATS=Kt,e.MomentDateAdapter=en,e.EXTENDIBLE_COMPONENT=Dn,e.FileUploadStatus=ue,e.FileModel=ce,e.PermissionsEnum=Oe,e.BpmProductVersionModel=Po,e.VersionModel=Do,e.LicenseModel=Fo,e.VersionStatusModel=Ro,e.VersionModuleModel=ko,e.EcmProductVersionModel=_o,e.UserProcessModel=oo,e.CommentModel=ro,e.EcmCompanyModel=Lo,e.RedirectionModel=Vo,e.CommentProcessModel=No,e.PaginationModel=vt,e.BaseEvent=se,e.BaseUIEvent=le,e.FileUploadEvent=pe,e.FileUploadCompleteEvent=de,e.FileUploadDeleteEvent=me,e.FileUploadErrorEvent=fe,e.AlfrescoApiMock=Uo,e.AppConfigServiceMock=Bo,e.fakeApps={size:2,total:2,start:0,data:[{id:1,defaultAppId:null,name:"Sales-Fakes-App",description:"desc-fake1",modelId:22,theme:"theme-1-fake",icon:"glyphicon-asterisk",deploymentId:"111",tenantId:null},{id:2,defaultAppId:null,name:"health-care-Fake",description:"desc-fake2",modelId:33,theme:"theme-2-fake",icon:"glyphicon-asterisk",deploymentId:"444",tenantId:null}]},e.AuthenticationMock=jo,e.fakeBpmUserNoImage=Yo,e.fakeBpmUser={apps:[],capabilities:null,company:"fake-company",created:"fake-create-date",email:"fakeBpm@fake.com",externalId:"fake-external-id",firstName:"fake-bpm-first-name",lastName:"fake-bpm-last-name",fullname:"fake-bpm-full-name",groups:[],id:"fake-id",lastUpdate:"fake-update-date",latestSyncTimeStamp:"fake-timestamp",password:"fake-password",pictureId:12,status:"fake-status",tenantId:"fake-tenant-id",tenantName:"fake-tenant-name",tenantPictureId:"fake-tenant-picture-id",type:"fake-type"},e.fakeBpmEditedUser={apps:[],capabilities:"fake-capability",company:"fake-company",created:"fake-create-date",email:"fakeBpm@fake.com",externalId:"fake-external-id",firstName:"fake-first-name",lastName:"fake-last-name",fullname:"fake-full-name",groups:[],id:"fake-id",lastUpdate:"fake-update-date",latestSyncTimeStamp:"fake-timestamp",password:"fake-password",pictureId:"src/assets/images/bpmImg.gif",status:"fake-status",tenantId:"fake-tenant-id",tenantName:"fake-tenant-name",tenantPictureId:"fake-tenant-picture-id",type:"fake-type"},e.fakeUser1=qo,e.fakeUser2={id:1001,email:"some-one@somegroup.com",firstName:"some",lastName:"one"},e.fakeTasksComment=zo,e.fakeProcessComment=Ho,e.CookieServiceMock=Go,e.fakeEcmCompany={organization:"company-fake-name",address1:"fake-address-1",address2:"fake-address-2",address3:"fake-address-3",postcode:"fAk1",telephone:"00000000",fax:"11111111",email:"fakeCompany@fake.com"},e.fakeEcmUser={id:"fake-id",firstName:"fake-ecm-first-name",lastName:"fake-ecm-last-name",description:"i am a fake user for test",avatarId:"fake-avatar-id",email:"fakeEcm@ecmUser.com",skypeId:"fake-skype-id",googleId:"fake-googleId-id",instantMessageId:"fake-instantMessageId-id",company:null,jobTitle:"job-ecm-test",location:"fake location",mobile:"000000000",telephone:"11111111",statusUpdatedAt:"fake-date",userStatus:"active",enabled:!0,emailNotificationsEnabled:!0},e.fakeEcmUserNoImage={id:"fake-id",firstName:"fake-first-name",lastName:"fake-last-name",description:"i am a fake user for test",avatarId:null,email:"fakeEcm@ecmUser.com",skypeId:"fake-skype-id",googleId:"fake-googleId-id",instantMessageId:"fake-instantMessageId-id",company:null,jobTitle:null,location:"fake location",mobile:"000000000",telephone:"11111111",statusUpdatedAt:"fake-date",userStatus:"active",enabled:!0,emailNotificationsEnabled:!0},e.fakeEcmEditedUser={id:"fake-id",firstName:null,lastName:"fake-last-name",description:"i am a fake user for test",avatarId:"fake-avatar-id",email:"fakeEcm@ecmUser.com",skypeId:"fake-skype-id",googleId:"fake-googleId-id",instantMessageId:"fake-instantMessageId-id",company:null,jobTitle:"test job",location:"fake location",mobile:"000000000",telephone:"11111111",statusUpdatedAt:"fake-date",userStatus:"active",enabled:!0,emailNotificationsEnabled:!0},e.EventMock=Wo,e.fakeRedition={entry:{id:"pdf",content:{mimeType:"application/pdf",mimeTypeName:"Adobe PDF Document"},status:"NOT_CREATED"}},e.fakeReditionCreated={entry:{id:"pdf",content:{mimeType:"application/pdf",mimeTypeName:"Adobe PDF Document"},status:"CREATED"}},e.fakeReditionsList={list:{pagination:{count:6,hasMoreItems:!1,totalItems:6,skipCount:0,maxItems:100},entries:[{entry:{id:"avatar",content:{mimeType:"image/png",mimeTypeName:"PNG Image"},status:"NOT_CREATED"}},{entry:{id:"avatar32",content:{mimeType:"image/png",mimeTypeName:"PNG Image"},status:"NOT_CREATED"}},{entry:{id:"doclib",content:{mimeType:"image/png",mimeTypeName:"PNG Image"},status:"NOT_CREATED"}},{entry:{id:"imgpreview",content:{mimeType:"image/jpeg",mimeTypeName:"JPEG Image"},status:"NOT_CREATED"}},{entry:{id:"medium",content:{mimeType:"image/jpeg",mimeTypeName:"JPEG Image"},status:"NOT_CREATED"}},{entry:{id:"pdf",content:{mimeType:"application/pdf",mimeTypeName:"Adobe PDF Document"},status:"NOT_CREATED"}}]}},e.fakeSearch=Xo,e.mockError={error:{errorKey:"Search failed",statusCode:400,briefSummary:"08220082 search failed",stackTrace:"For security reasons the stack trace is no longer displayed, but the property is kept for previous versions.",descriptionURL:"https://api-explorer.alfresco.com"}},e.searchMockApi=$o,e.TranslationMock=Ko,e.AlfrescoApiServiceMock=Jo,e.fakeForm={id:1001,name:"ISSUE_FORM",processDefinitionId:"ISSUE_APP:1:2504",processDefinitionName:"ISSUE_APP",processDefinitionKey:"ISSUE_APP",taskId:"7506",taskDefinitionKey:"sid-F67A2996-1684-4774-855A-4591490081FD",tabs:[],fields:[{fieldType:"ContainerRepresentation",id:"1498212398417",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"RestFieldRepresentation",id:"label",name:"Label",type:"dropdown",value:"Choose one...",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:!0,options:[{id:"empty",name:"Choose one..."},{id:"option_1",name:"test1"},{id:"option_2",name:"test2"},{id:"option_3",name:"test3"}],restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null,endpoint:null,requestHeaders:null}],2:[{fieldType:"RestFieldRepresentation",id:"raduio",name:"raduio",type:"radio-buttons",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:[{id:"option_1",name:"Option 1"},{id:"option_2",name:"Option 2"},{id:"option_3",name:"Option 3"}],restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:2,row:-1,col:-1,visibilityCondition:null,endpoint:null,requestHeaders:null}]}},{fieldType:"ContainerRepresentation",id:"1498212413062",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"date",name:"date",type:"date",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[]}}],outcomes:[],javascriptEvents:[],className:"",style:"",customFieldTemplates:{},metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D-M-YYYY"},e.formDefinitionTwoTextFields={id:20,name:"formTextDefinition",processDefinitionId:"textDefinition:1:153",processDefinitionName:"textDefinition",processDefinitionKey:"textDefinition",taskId:"159",taskDefinitionKey:"sid-D941F49F-2B04-4FBB-9B49-9E95991993E8",tabs:[],fields:[{fieldType:"ContainerRepresentation",id:"1507044399260",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"firstname",name:"firstName",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[{fieldType:"FormFieldRepresentation",id:"lastname",name:"lastName",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}}],outcomes:[],javascriptEvents:[],className:"",style:"",customFieldTemplates:{},metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D-M-YYYY"},e.formDefinitionDropdownField={id:21,name:"dropdownDefinition",processDefinitionId:"textDefinition:2:163",processDefinitionName:"textDefinition",processDefinitionKey:"textDefinition",taskId:"169",taskDefinitionKey:"sid-D941F49F-2B04-4FBB-9B49-9E95991993E8",tabs:[],fields:[{fieldType:"ContainerRepresentation",id:"1507046026940",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"RestFieldRepresentation",id:"country",name:"country",type:"dropdown",value:"Choose one...",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:!0,options:[{id:"empty",name:"Choose one..."},{id:"option_1",name:"united kingdom"},{id:"option_2",name:"italy"},{id:"option_3",name:"france"}],restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null,endpoint:null,requestHeaders:null}],2:[]}}],outcomes:[],javascriptEvents:[],className:"",style:"",customFieldTemplates:{},metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D-M-YYYY"},e.formReadonlyTwoTextFields={id:22,name:"formTextDefinition",processDefinitionId:"textDefinition:3:182",processDefinitionName:"textDefinition",processDefinitionKey:"textDefinition",taskId:"188",taskDefinitionKey:"sid-D941F49F-2B04-4FBB-9B49-9E95991993E8",tabs:[],fields:[{fieldType:"ContainerRepresentation",id:"1507044399260",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"firstname",name:"firstName",type:"readonly",value:"fakeFirstName",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2,field:{id:"firstname",name:"firstName",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:0,sizeY:0,row:0,col:0,visibilityCondition:null}},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[{fieldType:"FormFieldRepresentation",id:"lastname",name:"lastName",type:"readonly",value:"fakeLastName",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1,field:{id:"lastname",name:"lastName",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:0,sizeY:0,row:0,col:0,visibilityCondition:null}},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}}],outcomes:[],javascriptEvents:[],className:"",style:"",customFieldTemplates:{},metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D-M-YYYY"},e.formDefVisibilitiFieldDependsOnNextOne={id:19,processDefinitionId:"visibility:1:148",processDefinitionName:"visibility",processDefinitionKey:"visibility",tabs:[],fields:[{fieldType:"ContainerRepresentation",id:"1506960847579",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"RestFieldRepresentation",id:"country",name:"country",type:"dropdown",value:"Choose one...",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:!0,options:[{id:"empty",name:"Choose one..."},{id:"option_1",name:"france"},{id:"option_2",name:"uk"}],restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:{leftFormFieldId:"name",leftRestResponseId:null,operator:"==",rightValue:"italy",rightType:null,rightFormFieldId:"",rightRestResponseId:"",nextConditionOperator:"",nextCondition:null},endpoint:null,requestHeaders:null}],2:[{fieldType:"FormFieldRepresentation",id:"name",name:"name",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}}],outcomes:[],javascriptEvents:[],className:"",style:"",customFieldTemplates:{},metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D-M-YYYY"},e.formDefVisibilitiFieldDependsOnPreviousOne={id:19,processDefinitionId:"visibility:1:148",processDefinitionName:"visibility",processDefinitionKey:"visibility",tabs:[],fields:[{fieldType:"ContainerRepresentation",id:"1506960847579",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"name",name:"name",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[{fieldType:"RestFieldRepresentation",id:"country",name:"country",type:"dropdown",value:"Choose one...",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:!0,options:[{id:"empty",name:"Choose one..."},{id:"option_1",name:"france"},{id:"option_2",name:"uk"}],restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:{leftFormFieldId:"name",leftRestResponseId:null,operator:"==",rightValue:"italy",rightType:null,rightFormFieldId:"",rightRestResponseId:"",nextConditionOperator:"",nextCondition:null},endpoint:null,requestHeaders:null}]}}],outcomes:[],javascriptEvents:[],className:"",style:"",customFieldTemplates:{},metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D-M-YYYY"},e.startFormDateWidgetMock={id:4,name:"Claim Review Process",processDefinitionId:"ClaimReviewProcess:2: 93",fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,readOnly:!1,fields:{1:[{fieldType:"FormFieldRepresentation",id:"date",name:"date",type:"date",value:null}]}}]},e.startFormNumberWidgetMock={id:4,name:"Claim Review Process",processDefinitionId:"ClaimReviewProcess:2: 93",fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,readOnly:!1,fields:{1:[{fieldType:"FormFieldRepresentation",id:"number",name:"number widget",type:"integer",value:null}]}}]},e.startFormAmountWidgetMock={id:4,name:"Claim Review Process",processDefinitionId:"ClaimReviewProcess:2: 93",fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,readOnly:!1,fields:{1:[{fieldType:"FormFieldRepresentation",id:"amount",name:"amount widget",type:"amount",value:null}]}}]},e.startFormRadioButtonWidgetMock={id:4,name:"Claim Review Process",processDefinitionId:"ClaimReviewProcess:2: 93",fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,readOnly:!1,fields:{1:[{fieldType:"RestFieldRepresentation",id:"radio-but",name:"radio-buttons",type:"radio-buttons",value:null}]}}]},e.startFormTextDefinitionMock={id:4,name:"Claim Review Process",processDefinitionId:"ClaimReviewProcess:2: 93",fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,readOnly:!1,fields:{1:[{fieldType:"FormFieldRepresentation",id:"mocktext",name:"mockText",type:"text",value:null}]}}]},e.startFormDropdownDefinitionMock={id:4,name:"Claim Review Process",processDefinitionId:"ClaimReviewProcess:2: 93",fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,readOnly:!1,fields:{1:[{fieldType:"RestFieldRepresentation",id:"mockTypeDropDown",name:"mock DropDown",type:"dropdown",value:"Chooseone...",required:!1,readOnly:!1,overrideId:!1,options:[{id:"empty",name:"Chooseone..."},{id:"opt1",name:"Option-1"},{id:"opt2",name:"Option-2"},{id:"opt3",name:"Option-3"},{id:"opt2",name:"Option-3"}]}]}}]},e.startMockForm={id:4,name:"Claim Review Process",processDefinitionId:"ClaimReviewProcess:2: 93",processDefinitionName:"ClaimReviewProcess",processDefinitionKey:"ClaimReviewProcess",tabs:[],fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"clientname",name:"ClientName",type:"text",value:null,required:!0,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[{fieldType:"FormFieldRepresentation",id:"policyno",name:"PolicyNo",type:"integer",value:null,required:!0,readOnly:!1,overrideId:!1,colspan:1,placeholder:"EnterPolicyName",minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}},{fieldType:"ContainerRepresentation",id:1497953270269,name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"billamount",name:"BillAmount",type:"integer",value:null,required:!0,readOnly:!1,overrideId:!1,colspan:1,placeholder:"EnterBillAmount",minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[{fieldType:"FormFieldRepresentation",id:"billdate",name:"BillDate",type:"date",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:"billdate",params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}},{fieldType:"ContainerRepresentation",id:1497953280930,name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"RestFieldRepresentation",id:"claimtype",name:"ClaimType",type:"dropdown",value:"Chooseone...",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:!0,options:[{id:"empty",name:"Chooseone..."},{id:"cashless",name:"Cashless"},{id:"reimbursement",name:"Reimbursement"}],restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null,endpoint:null,requestHeaders:null}],2:[{fieldType:"FormFieldRepresentation",id:"hospitalname",name:"HospitalName",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:"EnterHospitalName",minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}}],outcomes:[{id:"approve",name:"Approve"},{id:"complete",name:"Complete"},{id:"start_process",name:"Start Process"}],javascriptEvents:[],className:"",style:"",metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D - M - YYYY"},e.startMockFormWithTab={id:4,taskName:"Mock Title",processDefinitionId:"ClaimReviewProcess:2: 93",processDefinitionName:"ClaimReviewProcess",processDefinitionKey:"ClaimReviewProcess",tabs:[{id:"form1",name:"Tab 1"},{id:"form2",name:"Tab 2"}],fields:[{fieldType:"ContainerRepresentation",id:1497953253784,name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"clientname",name:"ClientName",type:"text",value:null,required:!0,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[{fieldType:"FormFieldRepresentation",id:"policyno",name:"PolicyNo",type:"integer",value:null,required:!0,readOnly:!1,overrideId:!1,colspan:1,placeholder:"EnterPolicyName",minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}},{fieldType:"ContainerRepresentation",id:1497953270269,name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"billamount",name:"BillAmount",type:"integer",value:null,required:!0,readOnly:!1,overrideId:!1,colspan:1,placeholder:"EnterBillAmount",minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[{fieldType:"FormFieldRepresentation",id:"billdate",name:"BillDate",type:"date",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:"billdate",params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}},{fieldType:"ContainerRepresentation",id:1497953280930,name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"RestFieldRepresentation",id:"claimtype",name:"ClaimType",type:"dropdown",value:"Chooseone...",required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:!0,options:[{id:"empty",name:"Chooseone..."},{id:"cashless",name:"Cashless"},{id:"reimbursement",name:"Reimbursement"}],restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null,endpoint:null,requestHeaders:null}],2:[{fieldType:"FormFieldRepresentation",id:"hospitalname",name:"HospitalName",type:"text",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:"EnterHospitalName",minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}}],outcomes:[{id:"approve",name:"Approve"},{id:"complete",name:"Complete"}],javascriptEvents:[],className:"",style:"",metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1,globalDateFormat:"D - M - YYYY"},e.formModelTabs={id:16,name:"start event",description:"",version:2,lastUpdatedBy:4,lastUpdatedByFullName:"User Test",lastUpdated:"2017-10-04T13:00:03.030+0000",stencilSetId:null,referenceId:null,formDefinition:{tabs:[],fields:[{fieldType:"ContainerRepresentation",id:"1507037668653",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"AmountFieldRepresentation",id:"label",name:"Label",type:"amount",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null,enableFractions:!1,currency:null}],2:[{fieldType:"FormFieldRepresentation",id:"label1",name:"Label1",type:"date",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:1},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}]}},{fieldType:"ContainerRepresentation",id:"1507037670167",name:"Label",type:"container",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,dateDisplayFormat:null,layout:null,sizeX:2,sizeY:1,row:-1,col:-1,visibilityCondition:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"label2",name:"Label2",type:"boolean",value:null,required:!1,readOnly:!1,overrideId:!1,colspan:1,placeholder:null,minLength:0,maxLength:0,minValue:null,maxValue:null,regexPattern:null,optionType:null,hasEmptyValue:null,options:null,restUrl:null,restResponsePath:null,restIdProperty:null,restLabelProperty:null,tab:null,className:null,params:{existingColspan:1,maxColspan:2},dateDisplayFormat:null,layout:{row:-1,column:-1,colspan:1},sizeX:1,sizeY:1,row:-1,col:-1,visibilityCondition:null}],2:[]}}],outcomes:[],javascriptEvents:[],className:"",style:"",customFieldTemplates:{},metadata:{},variables:[],customFieldsValueInfo:{},gridsterForm:!1}},e.formTest=Qo,e.fakeTaskProcessVariableModels=[{id:"TEST_VAR_1",type:"string",value:"test_value_1"},{id:"TEST_VAR_2",type:"string",value:"test_value_2"},{id:"TEST_VAR_3",type:"string",value:"test_value_3"}],e.formValues={test_1:"value_1",test_2:"value_2",test_3:"value_1",test_4:"dropdown_id",test_5:"dropdown_label",dropdown:{id:"dropdown_id",name:"dropdown_label"}},e.fakeFormJson={id:"9999",name:"FORM_VISIBILITY",processDefinitionId:"PROCESS_TEST:9:9999",processDefinitionName:"PROCESS_TEST",processDefinitionKey:"PROCESS_TEST",taskId:"999",taskName:"TEST",fields:[{fieldType:"ContainerRepresentation",id:"000000000000000000",name:"Label",type:"container",value:null,numberOfColumns:2,fields:{1:[{fieldType:"FormFieldRepresentation",id:"FIELD_TEST",name:"FIELD_TEST",type:"text",value:"RIGHT_FORM_FIELD_VALUE",visibilityCondition:null,isVisible:!0},{fieldType:"FormFieldRepresentation",id:"FIELD_WITH_CONDITION",name:"FIELD_WITH_CONDITION",type:"text",value:"field_with_condition_value",visibilityCondition:null,isVisible:!0},{fieldType:"FormFieldRepresentation",id:"LEFT_FORM_FIELD_ID",name:"LEFT_FORM_FIELD_NAME",type:"text",value:"LEFT_FORM_FIELD_VALUE",visibilityCondition:null,isVisible:!0}],2:[{fieldType:"FormFieldRepresentation",id:"RIGHT_FORM_FIELD_ID",name:"RIGHT_FORM_FIELD_NAME",type:"text",value:"RIGHT_FORM_FIELD_VALUE",visibilityCondition:null,isVisible:!0}]}}]},e.createTranslateLoader=na,e.providers=ia,e.CoreModuleLazy=oa,e.CoreModule=la,e.ɵa=oi,e.ɵg=se,e.ɵf=le,e.ɵk=Gr,e.ɵj=Wr,e.ɵi=hr,e.ɵh=$i,e.ɵd=Ge,e.ɵc=He,e.ɵr=ei,e.ɵu=ta,e.ɵt=ea,e.ɵs=Zo,e.ɵo=to,e.ɵn=$r,e.ɵl=Kr,e.ɵm=Jr,e.ɵq=eo,e.ɵp=Zr,e.ɵe=Ve,e.ɵb=Le,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=adf-core.umd.min.js.map
